(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){"use strict";if(global._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}global._babelPolyfill=true;require("core-js/shim");require("regenerator-babel/runtime")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"core-js/shim":2,"regenerator-babel/runtime":3}],2:[function(require,module,exports){!function(global,framework,undefined){"use strict";var OBJECT="Object",FUNCTION="Function",ARRAY="Array",STRING="String",NUMBER="Number",REGEXP="RegExp",DATE="Date",MAP="Map",SET="Set",WEAKMAP="WeakMap",WEAKSET="WeakSet",SYMBOL="Symbol",PROMISE="Promise",MATH="Math",ARGUMENTS="Arguments",PROTOTYPE="prototype",CONSTRUCTOR="constructor",TO_STRING="toString",TO_STRING_TAG=TO_STRING+"Tag",TO_LOCALE="toLocaleString",HAS_OWN="hasOwnProperty",FOR_EACH="forEach",ITERATOR="iterator",FF_ITERATOR="@@"+ITERATOR,PROCESS="process",CREATE_ELEMENT="createElement",Function=global[FUNCTION],Object=global[OBJECT],Array=global[ARRAY],String=global[STRING],Number=global[NUMBER],RegExp=global[REGEXP],Date=global[DATE],Map=global[MAP],Set=global[SET],WeakMap=global[WEAKMAP],WeakSet=global[WEAKSET],Symbol=global[SYMBOL],Math=global[MATH],TypeError=global.TypeError,RangeError=global.RangeError,setTimeout=global.setTimeout,setImmediate=global.setImmediate,clearImmediate=global.clearImmediate,parseInt=global.parseInt,isFinite=global.isFinite,process=global[PROCESS],nextTick=process&&process.nextTick,document=global.document,html=document&&document.documentElement,navigator=global.navigator,define=global.define,console=global.console||{},ArrayProto=Array[PROTOTYPE],ObjectProto=Object[PROTOTYPE],FunctionProto=Function[PROTOTYPE],Infinity=1/0,DOT=".";function isObject(it){return it!==null&&(typeof it=="object"||typeof it=="function")}function isFunction(it){return typeof it=="function"}var isNative=ctx(/./.test,/\[native code\]\s*\}\s*$/,1);var toString=ObjectProto[TO_STRING];function setToStringTag(it,tag,stat){if(it&&!has(it=stat?it:it[PROTOTYPE],SYMBOL_TAG))hidden(it,SYMBOL_TAG,tag)}function cof(it){return toString.call(it).slice(8,-1)}function classof(it){var O,T;return it==undefined?it===undefined?"Undefined":"Null":typeof(T=(O=Object(it))[SYMBOL_TAG])=="string"?T:cof(O)}var call=FunctionProto.call,apply=FunctionProto.apply,REFERENCE_GET;function part(){var fn=assertFunction(this),length=arguments.length,args=Array(length),i=0,_=path._,holder=false;while(length>i)if((args[i]=arguments[i++])===_)holder=true;return function(){var that=this,_length=arguments.length,i=0,j=0,_args;if(!holder&&!_length)return invoke(fn,args,that);_args=args.slice();if(holder)for(;length>i;i++)if(_args[i]===_)_args[i]=arguments[j++];while(_length>j)_args.push(arguments[j++]);return invoke(fn,_args,that)}}function ctx(fn,that,length){assertFunction(fn);if(~length&&that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}function invoke(fn,args,that){var un=that===undefined;switch(args.length|0){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);case 5:return un?fn(args[0],args[1],args[2],args[3],args[4]):fn.call(that,args[0],args[1],args[2],args[3],args[4])}return fn.apply(that,args)}var create=Object.create,getPrototypeOf=Object.getPrototypeOf,setPrototypeOf=Object.setPrototypeOf,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,getOwnDescriptor=Object.getOwnPropertyDescriptor,getKeys=Object.keys,getNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,isFrozen=Object.isFrozen,has=ctx(call,ObjectProto[HAS_OWN],2),ES5Object=Object,Dict;function toObject(it){return ES5Object(assertDefined(it))}function returnIt(it){return it}function returnThis(){return this}function get(object,key){if(has(object,key))return object[key]}function ownKeys(it){assertObject(it);return getSymbols?getNames(it).concat(getSymbols(it)):getNames(it)}var assign=Object.assign||function(target,source){var T=Object(assertDefined(target)),l=arguments.length,i=1;while(l>i){var S=ES5Object(arguments[i++]),keys=getKeys(S),length=keys.length,j=0,key;while(length>j)T[key=keys[j++]]=S[key]}return T};function keyOf(object,el){var O=toObject(object),keys=getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}function array(it){return String(it).split(",")}var push=ArrayProto.push,unshift=ArrayProto.unshift,slice=ArrayProto.slice,splice=ArrayProto.splice,indexOf=ArrayProto.indexOf,forEach=ArrayProto[FOR_EACH];function createArrayMethod(type){var isMap=type==1,isFilter=type==2,isSome=type==3,isEvery=type==4,isFindIndex=type==6,noholes=type==5||isFindIndex;return function(callbackfn){var O=Object(assertDefined(this)),that=arguments[1],self=ES5Object(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=isMap?Array(length):isFilter?[]:undefined,val,res;for(;length>index;index++)if(noholes||index in self){val=self[index];res=f(val,index,O);if(type){if(isMap)result[index]=res;else if(res)switch(type){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(isEvery)return false}}return isFindIndex?-1:isSome||isEvery?isEvery:result}}function createArrayContains(isContains){return function(el){var O=toObject(this),length=toLength(O.length),index=toIndex(arguments[1],length);if(isContains&&el!=el){for(;length>index;index++)if(sameNaN(O[index]))return isContains||index}else for(;length>index;index++)if(isContains||index in O){if(O[index]===el)return isContains||index}return!isContains&&-1}}function generic(A,B){return typeof A=="function"?A:B}var MAX_SAFE_INTEGER=9007199254740991,pow=Math.pow,abs=Math.abs,ceil=Math.ceil,floor=Math.floor,max=Math.max,min=Math.min,random=Math.random,trunc=Math.trunc||function(it){return(it>0?floor:ceil)(it)};function sameNaN(number){return number!=number}function toInteger(it){return isNaN(it)?0:trunc(it)}function toLength(it){return it>0?min(toInteger(it),MAX_SAFE_INTEGER):0}function toIndex(index,length){var index=toInteger(index);return index<0?max(index+length,0):min(index,length)}function lz(num){return num>9?num:"0"+num}function createReplacer(regExp,replace,isStatic){var replacer=isObject(replace)?function(part){return replace[part]}:replace;return function(it){return String(isStatic?it:this).replace(regExp,replacer)}}function createPointAt(toString){return function(pos){var s=String(assertDefined(this)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return toString?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?toString?s.charAt(i):a:toString?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}var REDUCE_ERROR="Reduce of empty object with no initial value";function assert(condition,msg1,msg2){if(!condition)throw TypeError(msg2?msg1+msg2:msg1)}function assertDefined(it){if(it==undefined)throw TypeError("Function called on null or undefined");return it}function assertFunction(it){assert(isFunction(it),it," is not a function!");return it}function assertObject(it){assert(isObject(it),it," is not an object!");return it}function assertInstance(it,Constructor,name){assert(it instanceof Constructor,name,": use the 'new' operator!")}function descriptor(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}function simpleSet(object,key,value){object[key]=value;return object}function createDefiner(bitmap){return DESC?function(object,key,value){return defineProperty(object,key,descriptor(bitmap,value))}:simpleSet}function uid(key){return SYMBOL+"("+key+")_"+(++sid+random())[TO_STRING](36)}function getWellKnownSymbol(name,setter){return Symbol&&Symbol[name]||(setter?Symbol:safeSymbol)(SYMBOL+DOT+name)}var DESC=!!function(){try{return defineProperty({},"a",{get:function(){return 2}}).a==2}catch(e){}}(),sid=0,hidden=createDefiner(1),set=Symbol?simpleSet:hidden,safeSymbol=Symbol||uid;function assignHidden(target,src){for(var key in src)hidden(target,key,src[key]);return target}var SYMBOL_UNSCOPABLES=getWellKnownSymbol("unscopables"),ArrayUnscopables=ArrayProto[SYMBOL_UNSCOPABLES]||{},SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG),SYMBOL_SPECIES=getWellKnownSymbol("species"),SYMBOL_ITERATOR;function setSpecies(C){if(DESC&&(framework||!isNative(C)))defineProperty(C,SYMBOL_SPECIES,{configurable:true,get:returnThis})}var NODE=cof(process)==PROCESS,core={},path=framework?global:core,old=global.core,exportGlobal,FORCED=1,GLOBAL=2,STATIC=4,PROTO=8,BIND=16,WRAP=32;function $define(type,name,source){var key,own,out,exp,isGlobal=type&GLOBAL,target=isGlobal?global:type&STATIC?global[name]:(global[name]||ObjectProto)[PROTOTYPE],exports=isGlobal?core:core[name]||(core[name]={});if(isGlobal)source=name;for(key in source){own=!(type&FORCED)&&target&&key in target&&(!isFunction(target[key])||isNative(target[key]));out=(own?target:source)[key];if(!framework&&isGlobal&&!isFunction(target[key]))exp=source[key];else if(type&BIND&&own)exp=ctx(out,global);else if(type&WRAP&&!framework&&target[key]==out){exp=function(param){return this instanceof out?new out(param):out(param)};exp[PROTOTYPE]=out[PROTOTYPE]}else exp=type&PROTO&&isFunction(out)?ctx(call,out):out;if(framework&&target&&!own){if(isGlobal)target[key]=out;else delete target[key]&&hidden(target,key,out)}if(exports[key]!=out)hidden(exports,key,exp)}}if(typeof module!="undefined"&&module.exports)module.exports=core;else if(isFunction(define)&&define.amd)define(function(){return core});else exportGlobal=true;if(exportGlobal||framework){core.noConflict=function(){global.core=old;return core};global.core=core}SYMBOL_ITERATOR=getWellKnownSymbol(ITERATOR);var ITER=safeSymbol("iter"),KEY=1,VALUE=2,Iterators={},IteratorPrototype={},BUGGY_ITERATORS="keys"in ArrayProto&&!("next"in[].keys());setIterator(IteratorPrototype,returnThis);function setIterator(O,value){hidden(O,SYMBOL_ITERATOR,value);FF_ITERATOR in ArrayProto&&hidden(O,FF_ITERATOR,value)}function createIterator(Constructor,NAME,next,proto){Constructor[PROTOTYPE]=create(proto||IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}function defineIterator(Constructor,NAME,value,DEFAULT){var proto=Constructor[PROTOTYPE],iter=get(proto,SYMBOL_ITERATOR)||get(proto,FF_ITERATOR)||DEFAULT&&get(proto,DEFAULT)||value;if(framework){setIterator(proto,iter);if(iter!==value){var iterProto=getPrototypeOf(iter.call(new Constructor));setToStringTag(iterProto,NAME+" Iterator",true);has(proto,FF_ITERATOR)&&setIterator(iterProto,returnThis)}}Iterators[NAME]=iter;Iterators[NAME+" Iterator"]=returnThis;return iter}function defineStdIterators(Base,NAME,Constructor,next,DEFAULT,IS_SET){function createIter(kind){return function(){return new Constructor(this,kind)}}createIterator(Constructor,NAME,next);var entries=createIter(KEY+VALUE),values=createIter(VALUE);if(DEFAULT==VALUE)values=defineIterator(Base,NAME,values,"values");else entries=defineIterator(Base,NAME,entries,"entries");if(DEFAULT){$define(PROTO+FORCED*BUGGY_ITERATORS,NAME,{entries:entries,keys:IS_SET?values:createIter(KEY),values:values})}}function iterResult(done,value){return{value:value,done:!!done}}function isIterable(it){var O=Object(it),Symbol=global[SYMBOL],hasExt=(Symbol&&Symbol[ITERATOR]||FF_ITERATOR)in O;return hasExt||SYMBOL_ITERATOR in O||has(Iterators,classof(O))}function getIterator(it){var Symbol=global[SYMBOL],ext=it[Symbol&&Symbol[ITERATOR]||FF_ITERATOR],getIter=ext||it[SYMBOL_ITERATOR]||Iterators[classof(it)];return assertObject(getIter.call(it))}function stepCall(fn,value,entries){return entries?invoke(fn,value):fn(value)}function checkDangerIterClosing(fn){var danger=true;var O={next:function(){throw 1},return:function(){danger=false}};O[SYMBOL_ITERATOR]=returnThis;try{fn(O)}catch(e){}return danger}function closeIterator(iterator){var ret=iterator["return"];if(ret!==undefined)ret.call(iterator)}function safeIterClose(exec,iterator){try{exec(iterator)}catch(e){closeIterator(iterator);throw e}}function forOf(iterable,entries,fn,that){safeIterClose(function(iterator){var f=ctx(fn,that,entries?2:1),step;while(!(step=iterator.next()).done)if(stepCall(f,step.value,entries)===false){return closeIterator(iterator)}},getIterator(iterable))}!function(TAG,SymbolRegistry,AllSymbols,setter){if(!isNative(Symbol)){Symbol=function(description){assert(!(this instanceof Symbol),SYMBOL+" is not a "+CONSTRUCTOR);var tag=uid(description),sym=set(create(Symbol[PROTOTYPE]),TAG,tag);AllSymbols[tag]=sym;DESC&&setter&&defineProperty(ObjectProto,tag,{configurable:true,set:function(value){hidden(this,tag,value)}});return sym};hidden(Symbol[PROTOTYPE],TO_STRING,function(){return this[TAG]})}$define(GLOBAL+WRAP,{Symbol:Symbol});var symbolStatics={for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=Symbol(key)},iterator:SYMBOL_ITERATOR||getWellKnownSymbol(ITERATOR),keyFor:part.call(keyOf,SymbolRegistry),species:SYMBOL_SPECIES,toStringTag:SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG,true),unscopables:SYMBOL_UNSCOPABLES,pure:safeSymbol,set:set,useSetter:function(){setter=true},useSimple:function(){setter=false}};forEach.call(array("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(it){symbolStatics[it]=getWellKnownSymbol(it)});$define(STATIC,SYMBOL,symbolStatics);setToStringTag(Symbol,SYMBOL);$define(STATIC+FORCED*!isNative(Symbol),OBJECT,{getOwnPropertyNames:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])||result.push(key);return result},getOwnPropertySymbols:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])&&result.push(AllSymbols[key]);return result}});setToStringTag(Math,MATH,true);setToStringTag(global.JSON,"JSON",true)}(safeSymbol("tag"),{},{},true);!function(){var objectStatic={assign:assign,is:function(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}};"__proto__"in ObjectProto&&function(buggy,set){try{set=ctx(call,getOwnDescriptor(ObjectProto,"__proto__").set,2);set({},ArrayProto)}catch(e){buggy=true}objectStatic.setPrototypeOf=setPrototypeOf=setPrototypeOf||function(O,proto){assertObject(O);assert(proto===null||isObject(proto),proto,": can't set as prototype!");if(buggy)O.__proto__=proto;else set(O,proto);return O}}();$define(STATIC,OBJECT,objectStatic)}();!function(tmp){tmp[SYMBOL_TAG]=DOT;if(cof(tmp)!=DOT)hidden(ObjectProto,TO_STRING,function(){return"[object "+classof(this)+"]"})}({});!function(){function wrapObjectMethod(key,MODE){var fn=Object[key],exp=core[OBJECT][key],f=0,o={};if(!exp||isNative(exp)){o[key]=MODE==1?function(it){return isObject(it)?fn(it):it}:MODE==2?function(it){return isObject(it)?fn(it):true}:MODE==3?function(it){return isObject(it)?fn(it):false}:MODE==4?function(it,key){return fn(toObject(it),key)}:function(it){return fn(toObject(it))};try{fn(DOT)}catch(e){f=1}$define(STATIC+FORCED*f,OBJECT,o)}}wrapObjectMethod("freeze",1);wrapObjectMethod("seal",1);wrapObjectMethod("preventExtensions",1);wrapObjectMethod("isFrozen",2);wrapObjectMethod("isSealed",2);wrapObjectMethod("isExtensible",3);wrapObjectMethod("getOwnPropertyDescriptor",4);wrapObjectMethod("getPrototypeOf");wrapObjectMethod("keys");wrapObjectMethod("getOwnPropertyNames")}();!function(NAME){NAME in FunctionProto||DESC&&defineProperty(FunctionProto,NAME,{configurable:true,get:function(){var match=String(this).match(/^\s*function ([^ (]*)/),name=match?match[1]:"";has(this,NAME)||defineProperty(this,NAME,descriptor(5,name));return name},set:function(value){has(this,NAME)||defineProperty(this,NAME,descriptor(0,value))}})}("name");Number("0o1")&&Number("0b1")||function(_Number,NumberProto){function toNumber(it){if(isObject(it))it=toPrimitive(it);if(typeof it=="string"&&it.length>2&&it.charCodeAt(0)==48){var binary=false;switch(it.charCodeAt(1)){case 66:case 98:binary=true;case 79:case 111:return parseInt(it.slice(2),binary?2:8)}}return+it}function toPrimitive(it){var fn,val;if(isFunction(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(isFunction(fn=it[TO_STRING])&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to number")}Number=function Number(it){return this instanceof Number?new _Number(toNumber(it)):toNumber(it)};forEach.call(DESC?getNames(_Number):array("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(key){key in Number||defineProperty(Number,key,getOwnDescriptor(_Number,key))});Number[PROTOTYPE]=NumberProto;NumberProto[CONSTRUCTOR]=Number;hidden(global,NUMBER,Number)}(Number,Number[PROTOTYPE]);!function(isInteger){$define(STATIC,NUMBER,{EPSILON:pow(2,-52),isFinite:function(it){return typeof it=="number"&&isFinite(it)},isInteger:isInteger,isNaN:sameNaN,isSafeInteger:function(number){return isInteger(number)&&abs(number)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MIN_SAFE_INTEGER:-MAX_SAFE_INTEGER,parseFloat:parseFloat,parseInt:parseInt})}(Number.isInteger||function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it});!function(){var E=Math.E,exp=Math.exp,log=Math.log,sqrt=Math.sqrt,sign=Math.sign||function(x){return(x=+x)==0||x!=x?x:x<0?-1:1};function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):log(x+sqrt(x*x+1))}function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:exp(x)-1}$define(STATIC,MATH,{acosh:function(x){return(x=+x)<1?NaN:isFinite(x)?log(x/E+sqrt(x+1)*sqrt(x-1)/E)+1:x},asinh:asinh,atanh:function(x){return(x=+x)==0?x:log((1+x)/(1-x))/2},cbrt:function(x){return sign(x=+x)*pow(abs(x),1/3)},clz32:function(x){return(x>>>=0)?32-x[TO_STRING](2).length:32},cosh:function(x){return(exp(x=+x)+exp(-x))/2},expm1:expm1,fround:function(x){return new Float32Array([x])[0]},hypot:function(value1,value2){var sum=0,len1=arguments.length,len2=len1,args=Array(len1),larg=-Infinity,arg;while(len1--){arg=args[len1]=+arguments[len1];if(arg==Infinity||arg==-Infinity)return Infinity;if(arg>larg)larg=arg}larg=arg||1;while(len2--)sum+=pow(args[len2]/larg,2);return larg*sqrt(sum)},imul:function(x,y){var UInt16=65535,xn=+x,yn=+y,xl=UInt16&xn,yl=UInt16&yn;return 0|xl*yl+((UInt16&xn>>>16)*yl+xl*(UInt16&yn>>>16)<<16>>>0)},log1p:function(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:log(1+x)},log10:function(x){return log(x)/Math.LN10},log2:function(x){return log(x)/Math.LN2},sign:sign,sinh:function(x){return abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(E/2)},tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))},trunc:trunc})}();!function(fromCharCode){function assertNotRegExp(it){if(cof(it)==REGEXP)throw TypeError()}$define(STATIC,STRING,{fromCodePoint:function(x){var res=[],len=arguments.length,i=0,code;while(len>i){code=+arguments[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")},raw:function(callSite){var raw=toObject(callSite.raw),len=toLength(raw.length),sln=arguments.length,res=[],i=0;while(len>i){res.push(String(raw[i++]));if(i<sln)res.push(String(arguments[i]))}return res.join("")}});$define(PROTO,STRING,{codePointAt:createPointAt(false),endsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),endPosition=arguments[1],len=toLength(that.length),end=endPosition===undefined?len:min(toLength(endPosition),len);searchString+="";return that.slice(end-searchString.length,end)===searchString},includes:function(searchString){assertNotRegExp(searchString);return!!~String(assertDefined(this)).indexOf(searchString,arguments[1])},repeat:function(count){var str=String(assertDefined(this)),res="",n=toInteger(count);if(0>n||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res},startsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),index=toLength(min(arguments[1],that.length));searchString+="";return that.slice(index,index+searchString.length)===searchString}})}(String.fromCharCode);!function(){$define(STATIC+FORCED*checkDangerIterClosing(Array.from),ARRAY,{from:function(arrayLike){var O=Object(assertDefined(arrayLike)),mapfn=arguments[1],mapping=mapfn!==undefined,f=mapping?ctx(mapfn,arguments[2],2):undefined,index=0,length,result,step;if(isIterable(O)){result=new(generic(this,Array));safeIterClose(function(iterator){for(;!(step=iterator.next()).done;index++){result[index]=mapping?f(step.value,index):step.value}},getIterator(O))}else{result=new(generic(this,Array))(length=toLength(O.length));for(;length>index;index++){result[index]=mapping?f(O[index],index):O[index]}}result.length=index;return result}});$define(STATIC,ARRAY,{of:function(){var index=0,length=arguments.length,result=new(generic(this,Array))(length);while(length>index)result[index]=arguments[index++];result.length=length;return result}});setSpecies(Array)}();!function(){$define(PROTO,ARRAY,{copyWithin:function(target,start){var O=Object(assertDefined(this)),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments[2],fin=end===undefined?len:toIndex(end,len),count=min(fin-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from=from+count-1;to=to+count-1}while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O},fill:function(value){var O=Object(assertDefined(this)),length=toLength(O.length),index=toIndex(arguments[1],length),end=arguments[2],endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O},find:createArrayMethod(5),findIndex:createArrayMethod(6)});if(framework){forEach.call(array("find,findIndex,fill,copyWithin,entries,keys,values"),function(it){ArrayUnscopables[it]=true});SYMBOL_UNSCOPABLES in ArrayProto||hidden(ArrayProto,SYMBOL_UNSCOPABLES,ArrayUnscopables)}}();!function(at){defineStdIterators(Array,ARRAY,function(iterated,kind){set(this,ITER,{o:toObject(iterated),i:0,k:kind})},function(){var iter=this[ITER],O=iter.o,kind=iter.k,index=iter.i++;if(!O||index>=O.length){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,index);if(kind==VALUE)return iterResult(0,O[index]);return iterResult(0,[index,O[index]])},VALUE);Iterators[ARGUMENTS]=Iterators[ARRAY];defineStdIterators(String,STRING,function(iterated){set(this,ITER,{o:String(iterated),i:0})},function(){var iter=this[ITER],O=iter.o,index=iter.i,point;if(index>=O.length)return iterResult(1);point=at.call(O,index);iter.i+=point.length;return iterResult(0,point)})}(createPointAt(true));DESC&&!function(RegExpProto,_RegExp){if(!function(){try{return RegExp(/a/g,"i")=="/a/i"}catch(e){}}()){RegExp=function RegExp(pattern,flags){return new _RegExp(cof(pattern)==REGEXP&&flags!==undefined?pattern.source:pattern,flags)};forEach.call(getNames(_RegExp),function(key){key in RegExp||defineProperty(RegExp,key,{configurable:true,get:function(){return _RegExp[key]},set:function(it){_RegExp[key]=it}})});RegExpProto[CONSTRUCTOR]=RegExp;RegExp[PROTOTYPE]=RegExpProto;hidden(global,REGEXP,RegExp)}if(/./g.flags!="g")defineProperty(RegExpProto,"flags",{configurable:true,get:createReplacer(/^.*\/(\w*)$/,"$1")});setSpecies(RegExp)}(RegExp[PROTOTYPE],RegExp);isFunction(setImmediate)&&isFunction(clearImmediate)||function(ONREADYSTATECHANGE){var postMessage=global.postMessage,addEventListener=global.addEventListener,MessageChannel=global.MessageChannel,counter=0,queue={},defer,channel,port;setImmediate=function(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(isFunction(fn)?fn:Function(fn),args)};defer(counter);return counter};clearImmediate=function(id){delete queue[id]};function run(id){if(has(queue,id)){var fn=queue[id];delete queue[id];fn()}}function listner(event){run(event.data)}if(NODE){defer=function(id){nextTick(part.call(run,id))}}else if(addEventListener&&isFunction(postMessage)&&!global.importScripts){defer=function(id){postMessage(id,"*")};addEventListener("message",listner,false)}else if(isFunction(MessageChannel)){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(document&&ONREADYSTATECHANGE in document[CREATE_ELEMENT]("script")){defer=function(id){html.appendChild(document[CREATE_ELEMENT]("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id)}}}else{defer=function(id){setTimeout(run,0,id)}}}("onreadystatechange");$define(GLOBAL+BIND,{setImmediate:setImmediate,clearImmediate:clearImmediate});!function(Promise,test){isFunction(Promise)&&isFunction(Promise.resolve)&&Promise.resolve(test=new Promise(function(){}))==test||function(asap,RECORD){function isThenable(it){var then;if(isObject(it))then=it.then;return isFunction(then)?then:false}function handledRejectionOrHasOnRejected(promise){var record=promise[RECORD],chain=record.c,i=0,react;if(record.h)return true;while(chain.length>i){react=chain[i++];if(react.fail||handledRejectionOrHasOnRejected(react.P))return true}}function notify(record,reject){var chain=record.c;if(reject||chain.length)asap(function(){var promise=record.p,value=record.v,ok=record.s==1,i=0;if(reject&&!handledRejectionOrHasOnRejected(promise)){setTimeout(function(){if(!handledRejectionOrHasOnRejected(promise)){if(NODE){if(!process.emit("unhandledRejection",value,promise)){}}else if(isFunction(console.error)){console.error("Unhandled promise rejection",value)}}},1e3)}else while(chain.length>i)!function(react){var cb=ok?react.ok:react.fail,ret,then;try{if(cb){if(!ok)record.h=true;ret=cb===true?value:cb(value);if(ret===react.P){react.rej(TypeError(PROMISE+"-chain cycle"))}else if(then=isThenable(ret)){then.call(ret,react.res,react.rej)}else react.res(ret)}else react.rej(value)}catch(err){react.rej(err)}}(chain[i++]);chain.length=0})}function resolve(value){var record=this,then,wrapper;if(record.d)return;record.d=true;record=record.r||record;try{if(then=isThenable(value)){wrapper={r:record,d:false};then.call(value,ctx(resolve,wrapper,1),ctx(reject,wrapper,1))}else{record.v=value;record.s=1;notify(record)}}catch(err){reject.call(wrapper||{r:record,d:false},err)}}function reject(value){var record=this;if(record.d)return;record.d=true;record=record.r||record;record.v=value;record.s=2;notify(record,true)}function getConstructor(C){var S=assertObject(C)[SYMBOL_SPECIES];return S!=undefined?S:C}Promise=function(executor){assertFunction(executor);assertInstance(this,Promise,PROMISE);var record={p:this,c:[],s:0,d:false,v:undefined,h:false};hidden(this,RECORD,record);try{executor(ctx(resolve,record,1),ctx(reject,record,1))}catch(err){reject.call(record,err)}};assignHidden(Promise[PROTOTYPE],{then:function(onFulfilled,onRejected){var S=assertObject(assertObject(this)[CONSTRUCTOR])[SYMBOL_SPECIES];var react={ok:isFunction(onFulfilled)?onFulfilled:true,fail:isFunction(onRejected)?onRejected:false},P=react.P=new(S!=undefined?S:Promise)(function(resolve,reject){react.res=assertFunction(resolve);react.rej=assertFunction(reject)}),record=this[RECORD];record.c.push(react);record.s&&notify(record);return P},catch:function(onRejected){return this.then(undefined,onRejected)}});assignHidden(Promise,{all:function(iterable){var Promise=getConstructor(this),values=[];return new Promise(function(resolve,reject){forOf(iterable,false,push,values);var remaining=values.length,results=Array(remaining);if(remaining)forEach.call(values,function(promise,index){Promise.resolve(promise).then(function(value){results[index]=value;--remaining||resolve(results)},reject)});else resolve(results)})},race:function(iterable){var Promise=getConstructor(this);return new Promise(function(resolve,reject){forOf(iterable,false,function(promise){Promise.resolve(promise).then(resolve,reject)})})},reject:function(r){return new(getConstructor(this))(function(resolve,reject){reject(r)})},resolve:function(x){return isObject(x)&&RECORD in x&&getPrototypeOf(x)===this[PROTOTYPE]?x:new(getConstructor(this))(function(resolve,reject){resolve(x)})}})}(nextTick||setImmediate,safeSymbol("record"));setToStringTag(Promise,PROMISE);setSpecies(Promise);$define(GLOBAL+FORCED*!isNative(Promise),{Promise:Promise})}(global[PROMISE]);!function(){var UID=safeSymbol("uid"),O1=safeSymbol("O1"),WEAK=safeSymbol("weak"),LEAK=safeSymbol("leak"),LAST=safeSymbol("last"),FIRST=safeSymbol("first"),SIZE=DESC?safeSymbol("size"):"size",uid=0,tmp={};function getCollection(C,NAME,methods,commonMethods,isMap,isWeak){var ADDER=isMap?"set":"add",proto=C&&C[PROTOTYPE],O={};function initFromIterable(that,iterable){if(iterable!=undefined)forOf(iterable,isMap,that[ADDER],that);return that}function fixSVZ(key,chain){var method=proto[key];if(framework)proto[key]=function(a,b){var result=method.call(this,a===0?0:a,b);return chain?this:result}}if(!isNative(C)||!(isWeak||!BUGGY_ITERATORS&&has(proto,FOR_EACH)&&has(proto,"entries"))){C=isWeak?function(iterable){assertInstance(this,C,NAME);set(this,UID,uid++);initFromIterable(this,iterable)}:function(iterable){var that=this;assertInstance(that,C,NAME);set(that,O1,create(null));set(that,SIZE,0);set(that,LAST,undefined);set(that,FIRST,undefined);initFromIterable(that,iterable)};assignHidden(assignHidden(C[PROTOTYPE],methods),commonMethods);isWeak||!DESC||defineProperty(C[PROTOTYPE],"size",{get:function(){return assertDefined(this[SIZE])}})}else{var Native=C,inst=new C,chain=inst[ADDER](isWeak?{}:-0,1),buggyZero;if(checkDangerIterClosing(function(O){new C(O)})){C=function(iterable){assertInstance(this,C,NAME);return initFromIterable(new Native,iterable)};C[PROTOTYPE]=proto;if(framework)proto[CONSTRUCTOR]=C}isWeak||inst[FOR_EACH](function(val,key){buggyZero=1/key===-Infinity});if(buggyZero){fixSVZ("delete");fixSVZ("has");isMap&&fixSVZ("get")}if(buggyZero||chain!==inst)fixSVZ(ADDER,true)}setToStringTag(C,NAME);setSpecies(C);O[NAME]=C;$define(GLOBAL+WRAP+FORCED*!isNative(C),O);isWeak||defineStdIterators(C,NAME,function(iterated,kind){set(this,ITER,{o:iterated,k:kind})},function(){var iter=this[ITER],kind=iter.k,entry=iter.l;while(entry&&entry.r)entry=entry.p;if(!iter.o||!(iter.l=entry=entry?entry.n:iter.o[FIRST])){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,entry.k);if(kind==VALUE)return iterResult(0,entry.v);return iterResult(0,[entry.k,entry.v])},isMap?KEY+VALUE:VALUE,!isMap);return C}function fastKey(it,create){if(!isObject(it))return(typeof it=="string"?"S":"P")+it;if(isFrozen(it))return"F";if(!has(it,UID)){if(!create)return"E";hidden(it,UID,++uid)}return"O"+it[UID]}function getEntry(that,key){var index=fastKey(key),entry;if(index!="F")return that[O1][index];for(entry=that[FIRST];entry;entry=entry.n){if(entry.k==key)return entry}}function def(that,key,value){var entry=getEntry(that,key),prev,index;if(entry)entry.v=value;else{that[LAST]=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that[LAST],n:undefined,r:false};if(!that[FIRST])that[FIRST]=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!="F")that[O1][index]=entry}return that}var collectionMethods={clear:function(){for(var that=this,data=that[O1],entry=that[FIRST];entry;entry=entry.n){
entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that[FIRST]=that[LAST]=undefined;that[SIZE]=0},delete:function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that[O1][entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that[FIRST]==entry)that[FIRST]=next;if(that[LAST]==entry)that[LAST]=prev;that[SIZE]--}return!!entry},forEach:function(callbackfn){var f=ctx(callbackfn,arguments[1],3),entry;while(entry=entry?entry.n:this[FIRST]){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function(key){return!!getEntry(this,key)}};Map=getCollection(Map,MAP,{get:function(key){var entry=getEntry(this,key);return entry&&entry.v},set:function(key,value){return def(this,key===0?0:key,value)}},collectionMethods,true);Set=getCollection(Set,SET,{add:function(value){return def(this,value=value===0?0:value,value)}},collectionMethods);function defWeak(that,key,value){if(isFrozen(assertObject(key)))leakStore(that).set(key,value);else{has(key,WEAK)||hidden(key,WEAK,{});key[WEAK][that[UID]]=value}return that}function leakStore(that){return that[LEAK]||hidden(that,LEAK,new Map)[LEAK]}var weakMethods={delete:function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this)["delete"](key);return has(key,WEAK)&&has(key[WEAK],this[UID])&&delete key[WEAK][this[UID]]},has:function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this).has(key);return has(key,WEAK)&&has(key[WEAK],this[UID])}};WeakMap=getCollection(WeakMap,WEAKMAP,{get:function(key){if(isObject(key)){if(isFrozen(key))return leakStore(this).get(key);if(has(key,WEAK))return key[WEAK][this[UID]]}},set:function(key,value){return defWeak(this,key,value)}},weakMethods,true,true);if(framework&&(new WeakMap).set(Object.freeze(tmp),7).get(tmp)!=7){forEach.call(array("delete,has,get,set"),function(key){var method=WeakMap[PROTOTYPE][key];WeakMap[PROTOTYPE][key]=function(a,b){if(isObject(a)&&isFrozen(a)){var result=leakStore(this)[key](a,b);return key=="set"?this:result}return method.call(this,a,b)}})}WeakSet=getCollection(WeakSet,WEAKSET,{add:function(value){return defWeak(this,value,true)}},weakMethods,false,true)}();!function(){function Enumerate(iterated){var keys=[],key;for(key in iterated)keys.push(key);set(this,ITER,{o:iterated,a:keys,i:0})}createIterator(Enumerate,OBJECT,function(){var iter=this[ITER],keys=iter.a,key;do{if(iter.i>=keys.length)return iterResult(1)}while(!((key=keys[iter.i++])in iter.o));return iterResult(0,key)});function wrap(fn){return function(it){assertObject(it);try{return fn.apply(undefined,arguments),true}catch(e){return false}}}function reflectGet(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc=getOwnDescriptor(assertObject(target),propertyKey),proto;if(desc)return has(desc,"value")?desc.value:desc.get===undefined?undefined:desc.get.call(receiver);return isObject(proto=getPrototypeOf(target))?reflectGet(proto,propertyKey,receiver):undefined}function reflectSet(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=getOwnDescriptor(assertObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return reflectSet(proto,propertyKey,V,receiver)}ownDesc=descriptor(0)}if(has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=getOwnDescriptor(receiver,propertyKey)||descriptor(0);existingDescriptor.value=V;return defineProperty(receiver,propertyKey,existingDescriptor),true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}var isExtensible=Object.isExtensible||returnIt;var reflect={apply:ctx(call,apply,3),construct:function(target,argumentsList){var proto=assertFunction(arguments.length<3?target:arguments[2])[PROTOTYPE],instance=create(isObject(proto)?proto:ObjectProto),result=apply.call(target,instance,argumentsList);return isObject(result)?result:instance},defineProperty:wrap(defineProperty),deleteProperty:function(target,propertyKey){var desc=getOwnDescriptor(assertObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]},enumerate:function(target){return new Enumerate(assertObject(target))},get:reflectGet,getOwnPropertyDescriptor:function(target,propertyKey){return getOwnDescriptor(assertObject(target),propertyKey)},getPrototypeOf:function(target){return getPrototypeOf(assertObject(target))},has:function(target,propertyKey){return propertyKey in target},isExtensible:function(target){return!!isExtensible(assertObject(target))},ownKeys:ownKeys,preventExtensions:wrap(Object.preventExtensions||returnIt),set:reflectSet};if(setPrototypeOf)reflect.setPrototypeOf=function(target,proto){return setPrototypeOf(assertObject(target),proto),true};$define(GLOBAL,{Reflect:{}});$define(STATIC,"Reflect",reflect)}();!function(){$define(PROTO,ARRAY,{includes:createArrayContains(true)});$define(PROTO,STRING,{at:createPointAt(true)});function createObjectToArray(isEntries){return function(object){var O=toObject(object),keys=getKeys(object),length=keys.length,i=0,result=Array(length),key;if(isEntries)while(length>i)result[i]=[key=keys[i++],O[key]];else while(length>i)result[i]=O[keys[i++]];return result}}$define(STATIC,OBJECT,{getOwnPropertyDescriptors:function(object){var O=toObject(object),result={};forEach.call(ownKeys(O),function(key){defineProperty(result,key,descriptor(0,getOwnDescriptor(O,key)))});return result},values:createObjectToArray(false),entries:createObjectToArray(true)});$define(STATIC,REGEXP,{escape:createReplacer(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})}();!function(REFERENCE){REFERENCE_GET=getWellKnownSymbol(REFERENCE+"Get",true);var REFERENCE_SET=getWellKnownSymbol(REFERENCE+SET,true),REFERENCE_DELETE=getWellKnownSymbol(REFERENCE+"Delete",true);$define(STATIC,SYMBOL,{referenceGet:REFERENCE_GET,referenceSet:REFERENCE_SET,referenceDelete:REFERENCE_DELETE});hidden(FunctionProto,REFERENCE_GET,returnThis);function setMapMethods(Constructor){if(Constructor){var MapProto=Constructor[PROTOTYPE];hidden(MapProto,REFERENCE_GET,MapProto.get);hidden(MapProto,REFERENCE_SET,MapProto.set);hidden(MapProto,REFERENCE_DELETE,MapProto["delete"])}}setMapMethods(Map);setMapMethods(WeakMap)}("reference");!function(arrayStatics){function setArrayStatics(keys,length){forEach.call(array(keys),function(key){if(key in ArrayProto)arrayStatics[key]=ctx(call,ArrayProto[key],length)})}setArrayStatics("pop,reverse,shift,keys,values,entries",1);setArrayStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setArrayStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$define(STATIC,ARRAY,arrayStatics)}({});!function(NodeList){if(framework&&NodeList&&!(SYMBOL_ITERATOR in NodeList[PROTOTYPE])){hidden(NodeList[PROTOTYPE],SYMBOL_ITERATOR,Iterators[ARRAY])}Iterators.NodeList=Iterators[ARRAY]}(global.NodeList)}(typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),true)},{}],3:[function(require,module,exports){(function(global){!function(global){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var undefined;var iteratorSymbol=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){return new Generator(innerFn,outerFn,self||null,tryLocsList||[])}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName="GeneratorFunction";runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){genFun.__proto__=GeneratorFunctionPrototype;genFun.prototype=Object.create(Gp);return genFun};runtime.async=function(innerFn,outerFn,self,tryLocsList){return new Promise(function(resolve,reject){var generator=wrap(innerFn,outerFn,self,tryLocsList);var callNext=step.bind(generator.next);var callThrow=step.bind(generator["throw"]);function step(arg){var record=tryCatch(this,null,arg);if(record.type==="throw"){reject(record.arg);return}var info=record.arg;if(info.done){resolve(info.value)}else{Promise.resolve(info.value).then(callNext,callThrow)}}callNext()})};function Generator(innerFn,outerFn,self,tryLocsList){var generator=outerFn?Object.create(outerFn.prototype):this;var context=new Context(tryLocsList);var state=GenStateSuspendedStart;function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){return doneResult()}while(true){var delegate=context.delegate;if(delegate){var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if(record.type==="throw"){context.delegate=null;method="throw";arg=record.arg;continue}method="next";arg=undefined;var info=record.arg;if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc}else{state=GenStateSuspendedYield;return info}context.delegate=null}if(method==="next"){if(state===GenStateSuspendedStart&&typeof arg!=="undefined"){throw new TypeError("attempt to send "+JSON.stringify(arg)+" to newborn generator")}if(state===GenStateSuspendedYield){context.sent=arg}else{delete context.sent}}else if(method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw arg}if(context.dispatchException(arg)){method="next";arg=undefined}}else if(method==="return"){context.abrupt("return",arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg===ContinueSentinel){if(context.delegate&&method==="next"){arg=undefined}}else{return info}}else if(record.type==="throw"){state=GenStateCompleted;if(method==="next"){context.dispatchException(record.arg)}else{arg=record.arg}}}}generator.next=invoke.bind(generator,"next");generator["throw"]=invoke.bind(generator,"throw");generator["return"]=invoke.bind(generator,"return");return generator}Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset()}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(){this.prev=0;this.next=0;this.sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(resetTryEntry);for(var tempIndex=0,tempName;hasOwn.call(this,tempName="t"+tempIndex)||tempIndex<20;++tempIndex){this[tempName]=null}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.next=finallyEntry.finallyLoc}else{this.complete(record)}return ContinueSentinel},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=record.arg;this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){return this.complete(entry.completion,entry.afterLoc)}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var core_js=_interopRequire(require("core-js"));var React=_interopRequire(require("react"));var Router=_interopRequire(require("react-router"));var routes=_interopRequire(require("./routes"));Notification.requestPermission(function(permission){return{}});Router.run(routes,Router.HistoryLocation,function(Handler){React.render(React.createElement(Handler,null),document.body)})},{"./routes":28,"core-js":37,react:590,"react-router":403}],2:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};Object.defineProperty(exports,"__esModule",{value:true});var AppDispatcher=_interopRequire(require("../dispatcher/AppDispatcher"));var FileUploaderConstants=_interopRequire(require("../constants/FileUploaderConstants"));var Library=_interopRequire(require("../utils/Library"));var uploadFiles=function(data){return Library.addSongs(data,function(err,data){if(err){AppDispatcher.handleAction({actionType:FileUploaderConstants.FILE_ADD_FAIL,data:data})}else{AppDispatcher.handleAction({actionType:FileUploaderConstants.FILE_ADD_SUCCESS,data:data})}})};exports.uploadFiles=uploadFiles},{"../constants/FileUploaderConstants":23,"../dispatcher/AppDispatcher":26,"../utils/Library":31}],3:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};Object.defineProperty(exports,"__esModule",{value:true});var AppDispatcher=_interopRequire(require("../dispatcher/AppDispatcher"));var LibraryConstants=_interopRequire(require("../constants/LibraryConstants"));var Library=_interopRequire(require("../utils/Library"));var createLibrary=function(docs){return docs.reduce(function(library,b){var artist=library[b.artist]||(library[b.artist]=Object.create(null));var album=artist[b.album]||(artist[b.album]=Object.create(null));var track=album[b.title]||(album[b.title]=Object.create(null));track.id=b._id;track.rev=b._rev;track.album=b.album;track.artist=b.artist;track.genre=b.genre;track.title=b.title;track.number=b.track;track.year=b.year;track._attachments=b._attachments;track.favourite=b.favourite;return library},Object.create(null))};exports.createLibrary=createLibrary;var pluckDocs=function(data){return data.rows.map(function(row){return row.doc})};var dispatchSuccessUpdate=function(library){return AppDispatcher.handleAction({actionType:LibraryConstants.LIBRARY_UPDATE_SUCCESS,data:library})};var dispatchErrorUpdate=function(err){return console.error(err)};var exportDb=function(){return Library.exportDb()};exports.exportDb=exportDb;var update=function(){Library.read().then(pluckDocs).then(createLibrary).then(dispatchSuccessUpdate)["catch"](dispatchErrorUpdate);AppDispatcher.handleAction({actionType:LibraryConstants.LIBRARY_UPDATE,data:null})};exports.update=update;var favourite=function(id,rev,artist,album,title){return Library.favourite(id,rev).then(function(result){AppDispatcher.handleAction({actionType:LibraryConstants.FAVOURITE,data:{id:id,old_rev:rev,new_rev:result.rev,artist:artist,album:album,title:title}})})};exports.favourite=favourite;var updateTrack=function(track){return Library.updateTrack(track.id,track.rev,track.artist,track.album,track.title,track.genre,track.number,track.year).then(function(result){if(result.ok){var oldTrackId=track.id;var oldTrackRev=track.rev;track.id=result.id;track.rev=result.rev;AppDispatcher.handleAction({actionType:LibraryConstants.UPDATE_TRACK,data:{oldTrackId:oldTrackId,oldTrackRev:oldTrackRev,track:track}})}})};exports.updateTrack=updateTrack},{"../constants/LibraryConstants":24,"../dispatcher/AppDispatcher":26,"../utils/Library":31}],4:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};Object.defineProperty(exports,"__esModule",{value:true});var AppDispatcher=_interopRequire(require("../dispatcher/AppDispatcher"));var PlayerConstants=_interopRequire(require("../constants/PlayerConstants"));var LibraryConstants=_interopRequire(require("../constants/LibraryConstants"));var Library=_interopRequire(require("../utils/Library"));var audio=new AudioContext;var deleteTrack=function(id,rev,artist,album,title){Library.deleteTrack(id,rev).then(function(result){AppDispatcher.handleAction({actionType:LibraryConstants.DELETE_TRACK,data:{id:id,rev:rev,artist:artist,album:album,title:title}})})};exports.deleteTrack=deleteTrack;var mute=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.MUTE})};exports.mute=mute;var stop=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.STOP})};exports.stop=stop;var emptyQueue=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.EMPTY_QUEUE})};exports.emptyQueue=emptyQueue;var addToQueue=function(id,attachment){return AppDispatcher.handleAction({actionType:PlayerConstants.ADD_TO_QUEUE,data:{id:id,attachment:attachment}})};exports.addToQueue=addToQueue;var shuffle=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.SHUFFLE})};exports.shuffle=shuffle;var repeat=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.REPEAT})};exports.repeat=repeat;var previousTrack=function(track){return Library.getAttachment(track.id,track.attachment).then(function(buffer){return new Promise(function(resolve,reject){return audio.decodeAudioData(buffer,function(buffer){return resolve(buffer)})})}).then(function(blob){var id=track.id;var attachment=track.attachment;AppDispatcher.handleAction({actionType:PlayerConstants.PREVIOUS,data:{id:id,attachment:attachment,blob:blob}});return track})};exports.previousTrack=previousTrack;var nextTrack=function(track){return Library.getAttachment(track.id,track.attachment).then(function(buffer){return new Promise(function(resolve,reject){return audio.decodeAudioData(buffer,function(buffer){return resolve(buffer)})})}).then(function(blob){var id=track.id;var attachment=track.attachment;AppDispatcher.handleAction({actionType:PlayerConstants.NEXT,data:{id:id,attachment:attachment,blob:blob}});return track})};exports.nextTrack=nextTrack;var playSong=function(id,attachment){return Library.getAttachment(id,attachment).then(function(buffer){return new Promise(function(resolve,reject){return audio.decodeAudioData(buffer,function(buffer){return resolve(buffer)})})}).then(function(blob){return AppDispatcher.handleAction({actionType:PlayerConstants.PLAY_SONG,data:{id:id,attachment:attachment,blob:blob}})})};exports.playSong=playSong;var play=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.PLAY})};exports.play=play;var pause=function(){return AppDispatcher.handleAction({actionType:PlayerConstants.PAUSE})};exports.pause=pause;var updateVolume=function(value){return AppDispatcher.handleAction({actionType:PlayerConstants.VOLUME,data:value})};exports.updateVolume=updateVolume},{"../constants/LibraryConstants":24,"../constants/PlayerConstants":25,"../dispatcher/AppDispatcher":26,"../utils/Library":31}],5:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var AllArtists=function(_PureComponent){function AllArtists(){_classCallCheck(this,AllArtists);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(AllArtists,_PureComponent);_createClass(AllArtists,{render:{value:function render(){return React.createElement("div",null,React.createElement("header",null,"This will be the all artists view"))}}});return AllArtists}(PureComponent);module.exports=AllArtists},{"./PureComponent.react":17,react:590}],6:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var Link=require("react-router").Link;var PureComponent=_interopRequire(require("./PureComponent.react"));var Artist=function(_PureComponent){function Artist(){_classCallCheck(this,Artist);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(Artist,_PureComponent);_createClass(Artist,{render:{value:function render(){var artist=this.props.artist;return React.createElement("li",{className:"filter__item"},React.createElement(Link,{className:"btn filter__item__button filter__item--button",to:"artist",params:{artist:artist}},artist))}}});return Artist}(PureComponent);module.exports=Artist},{"./PureComponent.react":17,react:590,"react-router":403}],7:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var Link=require("react-router").Link;var Artist=_interopRequire(require("./Artist.react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var ArtistList=function(_PureComponent){function ArtistList(){_classCallCheck(this,ArtistList);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(ArtistList,_PureComponent);_createClass(ArtistList,{render:{value:function render(){var artists=this.props.artists;var artistList=artists.map(function(artist,index){return React.createElement(Artist,{artist:artist,key:index})});return React.createElement("ul",{className:"list-block filter"},React.createElement("li",{className:"filter__item filter__item--heading gamma"},React.createElement(Link,{to:"artists"},"Artists")),artistList)}}});return ArtistList}(PureComponent);module.exports=ArtistList},{"./Artist.react":6,"./PureComponent.react":17,react:590,"react-router":403}],8:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var LibraryStore=_interopRequire(require("../stores/LibraryStore"));var TrackList=_interopRequire(require("./TrackList.react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var Artists=function(_PureComponent){function Artists(){_classCallCheck(this,Artists);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(Artists,_PureComponent);_createClass(Artists,{render:{value:function render(){var tracks=LibraryStore.getTracksByArtist(this.context.router.getCurrentParams().artist);var elem=undefined;if(tracks.length>0){elem=React.createElement(TrackList,{tracks:tracks})}else{elem=React.createElement("div",null," Error page ")}return elem}}});return Artists}(PureComponent);module.exports=Artists},{"../stores/LibraryStore":29,"./PureComponent.react":17,"./TrackList.react":22,react:590}],9:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc&&desc.writable){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var LibraryStore=_interopRequire(require("../stores/LibraryStore"));var EditTrack=_interopRequire(require("./EditTrack.react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var Edit=function(){function Edit(props,context){_classCallCheck(this,Edit);_get(Object.getPrototypeOf(Edit.prototype),"constructor",this).call(this,props);this.state={id:context.router.getCurrentParams().id,track:LibraryStore.getTrackById(context.router.getCurrentParams().id)}}_createClass(Edit,{render:{value:function render(){var elem=undefined;if(this.state.track){elem=React.createElement(EditTrack,{track:this.state.track})}else{elem=React.createElement("div",null,"Error Page")}return elem}}});return Edit}();module.exports=Edit;Edit.contextTypes={router:React.PropTypes.func.isRequired}},{"../stores/LibraryStore":29,"./EditTrack.react":10,
"./PureComponent.react":17,react:590}],10:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var PlayerActions=_interopRequireWildcard(require("../actions/PlayerActions"));var LibraryActions=_interopRequireWildcard(require("../actions/LibraryActions"));var forms=_interopRequire(require("newforms"));var PureComponent=_interopRequire(require("./PureComponent.react"));var Router=_interopRequire(require("react-router"));var TrackForm=forms.Form.extend({artist:forms.CharField(),album:forms.CharField(),title:forms.CharField(),genre:forms.CharField(),number:forms.IntegerField({minValue:0}),year:forms.IntegerField()});var EditTrack=function(){function EditTrack(){_classCallCheck(this,EditTrack)}_createClass(EditTrack,{onSubmit:{value:function onSubmit(event){if(this.refs.trackForm.form.validate()){LibraryActions.updateTrack(this.refs.trackForm.form.data).then(function(){return Router.Navigation.transitionTo("app")})}event.preventDefault()}},render:{value:function render(){var track=this.props.track;return React.createElement("form",{onSubmit:this.onSubmit.bind(this)},React.createElement(forms.RenderForm,{form:TrackForm,data:track,ref:"trackForm"}),React.createElement("div",null,React.createElement("input",{type:"submit",value:"Submit"})))}}});return EditTrack}();module.exports=EditTrack},{"../actions/LibraryActions":3,"../actions/PlayerActions":4,"./PureComponent.react":17,newforms:257,react:590,"react-router":403}],11:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var LibraryStore=_interopRequire(require("../stores/LibraryStore"));var TrackList=_interopRequire(require("./TrackList.react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var Favourites=function(_PureComponent){function Favourites(){_classCallCheck(this,Favourites);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(Favourites,_PureComponent);_createClass(Favourites,{render:{value:function render(){var favouritedTracks=LibraryStore.getFavouriteTracks();var elem=undefined;if(favouritedTracks.length>0){elem=React.createElement(TrackList,{tracks:favouritedTracks})}else{elem=React.createElement("div",null," Search returned no results ")}return elem}}});return Favourites}(PureComponent);module.exports=Favourites},{"../stores/LibraryStore":29,"./PureComponent.react":17,"./TrackList.react":22,react:590}],12:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var React=_interopRequire(require("react"));var _reactDnd=require("react-dnd");var DragDropMixin=_reactDnd.DragDropMixin;var NativeDragItemTypes=_reactDnd.NativeDragItemTypes;var FileUploadActions=_interopRequireWildcard(require("../actions/FileUploadActions"));var FileUploader=React.createClass({displayName:"FileUploader",mixins:[DragDropMixin],statics:{configureDragDrop:function configureDragDrop(register){register(NativeDragItemTypes.FILE,{dropTarget:{acceptDrop:function acceptDrop(component,item){var audioFiles=item.files.filter(function(file){return file.type.startsWith("audio/")});if(audioFiles.length){FileUploadActions.uploadFiles(audioFiles)}}}})}},render:function render(){return React.createElement("div",_extends({className:"upload-field icon--upload"},this.dropTargetFor(NativeDragItemTypes.FILE)))}});module.exports=FileUploader},{"../actions/FileUploadActions":2,react:590,"react-dnd":354}],13:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var LibraryStore=_interopRequire(require("../stores/LibraryStore"));var PlayerMenu=_interopRequire(require("./PlayerMenu.react"));var PlayerControls=_interopRequire(require("./PlayerControls.react"));var PlayerSideMenu=_interopRequire(require("./PlayerSideMenu.react"));var LibraryActions=_interopRequireWildcard(require("../actions/LibraryActions"));var PlayerStore=_interopRequire(require("../stores/PlayerStore"));var RouteHandler=require("react-router").RouteHandler;function getState(){return{artists:LibraryStore.getArtists(),artist:PlayerStore.getArtist()||"",title:PlayerStore.getTitle()||"",currentTime:PlayerStore.getCurrentTime()||0,duration:PlayerStore.getDuration()||0,progress:PlayerStore.getProgress()||0,playing:PlayerStore.getPlaying()||false,volume:PlayerStore.getVolume()||0,repeat:PlayerStore.getRepeat()||false,shuffle:PlayerStore.getShuffle()||false,hasNext:PlayerStore.hasNext()||false,hasPrev:PlayerStore.hasPrev()||false,previousSong:PlayerStore.getPrevSong(),nextSong:PlayerStore.getNextSong(),isMuted:PlayerStore.isMuted()}}var MusicPlayer=React.createClass({displayName:"MusicPlayer",getInitialState:function getInitialState(){return getState()},componentDidMount:function componentDidMount(){LibraryStore.addChangeListener(this._onChange);PlayerStore.addChangeListener(this._onChange);LibraryActions.update()},componentWillUnmount:function componentWillUnmount(){LibraryStore.removeChangeListener(this._onChange);PlayerStore.removeChangeListener(this._onChange)},render:function render(){return React.createElement("div",null,React.createElement(PlayerMenu,{title:"Offline Audio",volume:this.state.volume,muted:this.state.isMuted}),React.createElement("div",{className:"main-container"},React.createElement(PlayerSideMenu,{artists:this.state.artists}),React.createElement("section",{className:"player-contents"},React.createElement(RouteHandler,null))),React.createElement(PlayerControls,{artist:this.state.artist,currentTime:this.state.currentTime,title:this.state.title,totalTime:this.state.duration,progresss:this.state.progress,playing:this.state.playing,repeat:this.state.repeat,shuffle:this.state.shuffle,hasNext:this.state.hasNext,hasPrev:this.state.hasPrev,previousSong:this.state.previousSong,nextSong:this.state.nextSong}))},_onChange:function _onChange(){this.setState(getState())}});module.exports=MusicPlayer},{"../actions/LibraryActions":3,"../stores/LibraryStore":29,"../stores/PlayerStore":30,"./PlayerControls.react":14,"./PlayerMenu.react":15,"./PlayerSideMenu.react":16,react:590,"react-router":403}],14:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _slicedToArray=function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break}return _arr}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var React=_interopRequire(require("react"));var PlayerActions=_interopRequireWildcard(require("../actions/PlayerActions"));var PureRenderMixin=require("react/addons").addons.PureRenderMixin;var PropCheckMixin=_interopRequire(require("../mixins/PropCheckMixin"));var PlayerStore=_interopRequire(require("../stores/PlayerStore"));function secondsToMinutesAndSeconds(_seconds){var minutes=parseInt(_seconds/60,10);var seconds=parseInt(_seconds%60,10);return minutes+":"+(seconds<10?"0"+seconds:seconds)}function handlePause(){PlayerActions.pause()}function handlePlay(){PlayerActions.play()}function handleShuffle(){PlayerActions.shuffle()}function handleRepeat(){PlayerActions.repeat()}function notify(track){var _track$id$split=track.id.split("-||-||-");var _track$id$split2=_slicedToArray(_track$id$split,3);var artist=_track$id$split2[0];var album=_track$id$split2[1];var title=_track$id$split2[2];var notification=new Notification("Now Playing",{body:[artist,album,title].join(" - ")});setTimeout(function(){return notification.close()},4e3)}var PlayerControls=React.createClass({mixins:[PureRenderMixin,PropCheckMixin],displayName:"PlayerControls",propTypes:{artist:React.PropTypes.string.isRequired,currentTime:React.PropTypes.number.isRequired,title:React.PropTypes.string.isRequired,totalTime:React.PropTypes.number.isRequired,progresss:React.PropTypes.number.isRequired,playing:React.PropTypes.bool.isRequired,repeat:React.PropTypes.bool.isRequired,hasNext:React.PropTypes.bool.isRequired,hasPrev:React.PropTypes.bool.isRequired,shuffle:React.PropTypes.bool.isRequired,previousSong:React.PropTypes.object.isRequired,nextSong:React.PropTypes.object.isRequired},componentDidMount:function componentDidMount(){var _this=this;PlayerStore.endedEvent(function(){if(_this.props.hasNext){_this.handleNext()}else{PlayerActions.stop()}}.bind(this))},handleNext:function handleNext(){PlayerActions.nextTrack(this.props.nextSong).then(function(track){return notify(track)})},handlePrev:function handlePrev(){PlayerActions.previousTrack(this.props.previousSong).then(function(track){return notify(track)})},render:function render(){var _props=this.props;var artist=_props.artist;var currentTime=_props.currentTime;var title=_props.title;var totalTime=_props.totalTime;var progresss=_props.progresss;var playing=_props.playing;var repeat=_props.repeat;var shuffle=_props.shuffle;var hasNext=_props.hasNext;var hasPrev=_props.hasPrev;var currentTimeDisplay=secondsToMinutesAndSeconds(currentTime);var totalTimeDisplay=secondsToMinutesAndSeconds(totalTime);var playButton=undefined;if(playing){playButton=React.createElement("button",{className:"btn player-button icon--pause alpha btn--light",onClick:handlePause})}else{playButton=React.createElement("button",{className:"btn player-button icon--play alpha btn--light",onClick:handlePlay})}var repeatButton=undefined;if(repeat){repeatButton=React.createElement("button",{className:"btn player-button icon--loop gamma btn--dark btn--toggled",onClick:handleRepeat})}else{repeatButton=React.createElement("button",{className:"btn player-button icon--loop gamma btn--dark",onClick:handleRepeat})}var prevButton=undefined;if(hasPrev){prevButton=React.createElement("button",{className:"btn player-button icon--fast-backward gamma btn--dark",onClick:this.handlePrev})}else{prevButton=React.createElement("button",{className:"btn player-button icon--fast-backward gamma btn--dark",onClick:this.handlePrev,disabled:true})}var nextButton=undefined;if(hasNext){nextButton=React.createElement("button",{className:"btn player-button icon--fast-forward gamma btn--dark",onClick:this.handleNext})}else{nextButton=React.createElement("button",{className:"btn player-button icon--fast-forward gamma btn--dark",onClick:this.handleNext,disabled:true})}return React.createElement("section",{className:"play-controls"},prevButton,playButton,nextButton,React.createElement("div",{className:"play-controls__playback"},React.createElement("span",{className:"playback playback--title"},artist," - ",title),React.createElement("span",{className:"playback playback--current-time"},currentTimeDisplay),React.createElement("span",{className:"playback playback--total-time"},totalTimeDisplay),React.createElement("progress",{className:"progress",max:"100",value:progresss})),React.createElement("div",{className:"play-controls__secondary"},React.createElement("button",{className:"btn player-button icon--shuffle gamma btn--dark",onClick:handleShuffle}),repeatButton))}});module.exports=PlayerControls},{"../actions/PlayerActions":4,"../mixins/PropCheckMixin":27,"../stores/PlayerStore":30,react:590,"react/addons":418}],15:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var Link=require("react-router").Link;var PlayerActions=_interopRequireWildcard(require("../actions/PlayerActions"));var PropCheckMixin=_interopRequire(require("../mixins/PropCheckMixin"));var PureRenderMixin=require("react/addons").addons.PureRenderMixin;var PlayerMenu=React.createClass({mixins:[PureRenderMixin,PropCheckMixin],displayName:"PlayerMenu",propTypes:{muted:React.PropTypes.bool.isRequired,volume:React.PropTypes.number.isRequired,title:React.PropTypes.string.isRequired},onChange:function onChange(event){PlayerActions.updateVolume(event.target.value)},handleMuteClick:function handleMuteClick(event){PlayerActions.mute()},render:function render(){var _props=this.props;var muted=_props.muted;var title=_props.title;var volume=_props.volume;var muteButton=undefined;if(muted){muteButton=React.createElement("button",{className:"btn menu-button icon--sound gamma btn--dark btn--toggled",onClick:this.handleMuteClick})}else{muteButton=React.createElement("button",{className:"btn menu-button icon--sound gamma btn--dark",onClick:this.handleMuteClick})}return React.createElement("header",{className:"player-menu"},React.createElement("div",{className:"container"},React.createElement("span",{className:"player-menu__app-title"},title),React.createElement("div",{className:"player-menu__controls"},muteButton,React.createElement("div",{className:"volume-slider-wrapper"},React.createElement("input",{className:"volume-slider",type:"range",tabIndex:"1",onChange:this.onChange,value:volume,max:"1",step:"0.01"})),React.createElement("button",{className:"btn menu-button icon--menu gamma btn--dark"}),React.createElement("button",{className:"btn menu-button icon--layout gamma btn--dark"}),React.createElement(Link,{className:"btn menu-button icon--cog gamma btn--dark",to:"settings"}))))}});module.exports=PlayerMenu},{"../actions/PlayerActions":4,"../mixins/PropCheckMixin":27,react:590,"react-router":403,"react/addons":418}],16:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var FileUploader=_interopRequire(require("./FileUploader.react"));var ArtistList=_interopRequire(require("./ArtistList.react"));var PropCheckMixin=_interopRequire(require("../mixins/PropCheckMixin"));var Link=require("react-router").Link;var PureRenderMixin=require("react/addons").addons.PureRenderMixin;var PlayerSideMenu=React.createClass({contextTypes:{router:React.PropTypes.func},mixins:[PureRenderMixin,PropCheckMixin],displayName:"PlayerSideMenu",propTypes:{artists:React.PropTypes.array.isRequired},search:function search(event){if(event.target.value){this.context.router.transitionTo("/search/"+event.target.value)}else{this.context.router.transitionTo("/")}},render:function render(){var artists=this.props.artists;return React.createElement("section",{className:"side-menu"},React.createElement(FileUploader,null),React.createElement("input",{type:"search",className:"search-field",placeholder:"Search",onChange:this.search}),React.createElement("ul",{className:"list-block filter"},React.createElement("li",{className:"filter__item filter__item--heading gamma"},React.createElement(Link,{to:"favourites"},"Favourites"))),React.createElement(ArtistList,{artists:artists}))}});module.exports=PlayerSideMenu},{"../mixins/PropCheckMixin":27,"./ArtistList.react":7,"./FileUploader.react":12,react:590,"react-router":403,"react/addons":418}],17:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var shallowEqual=_interopRequire(require("react-pure-render/shallowEqual"));var PureComponent=function(_React$Component){function PureComponent(){_classCallCheck(this,PureComponent);if(_React$Component!=null){_React$Component.apply(this,arguments)}}_inherits(PureComponent,_React$Component);return PureComponent}(React.Component);PureComponent.contextTypes={router:React.PropTypes.func};module.exports=PureComponent},{react:590,"react-pure-render/shallowEqual":378}],18:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var LibraryStore=_interopRequire(require("../stores/LibraryStore"));var TrackList=_interopRequire(require("./TrackList.react"));var Results=React.createClass({displayName:"Results",contextTypes:{router:React.PropTypes.func.isRequired},render:function render(){var tracks=LibraryStore.getTracks();var searchTerm=this.context.router.getCurrentParams().search;var tracksWithSearchTerm=_.filter(tracks,function(track){return track[Object.keys(track)[0]].title.toLowerCase().includes(searchTerm.toLowerCase())||track[Object.keys(track)[0]].artist.toLowerCase().includes(searchTerm.toLowerCase())||track[Object.keys(track)[0]].album.toLowerCase().includes(searchTerm.toLowerCase())});var elem=undefined;if(tracksWithSearchTerm.length>0){elem=React.createElement(TrackList,{tracks:tracksWithSearchTerm})}else{elem=React.createElement("div",null," Search returned no results ")}return elem}});module.exports=Results},{"../stores/LibraryStore":29,"./TrackList.react":22,react:590}],19:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var LibraryActions=_interopRequireWildcard(require("../actions/LibraryActions"));var PureRenderMixin=require("react/addons").addons.PureRenderMixin;var Settings=React.createClass({displayName:"Settings",mixins:[PureRenderMixin],onClick:function onClick(event){LibraryActions.exportDb()},render:function render(){return React.createElement("button",{onClick:this.onClick},"Export Library")}});module.exports=Settings},{"../actions/LibraryActions":3,react:590,"react/addons":418}],20:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var StartSplash=function(){function StartSplash(){_classCallCheck(this,StartSplash)}_createClass(StartSplash,{render:{value:function render(){return React.createElement("div",{className:"yell"},React.createElement("div",{className:"yell__container"},React.createElement("span",{className:"yell__icon icon--note-beamed"})))}}});return StartSplash}();module.exports=StartSplash},{react:590}],21:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var Link=require("react-router").Link;var PlayerActions=_interopRequireWildcard(require("../actions/PlayerActions"));var LibraryActions=_interopRequireWildcard(require("../actions/LibraryActions"));var PropCheckMixin=_interopRequire(require("../mixins/PropCheckMixin"));var PureRenderMixin=require("react/addons").addons.PureRenderMixin;var Track=React.createClass({mixins:[PureRenderMixin,PropCheckMixin],addToQueue:function addToQueue(event){var id=[this.props.artist,this.props.album,this.props.title].join("-||-||-");var attachment=this.props.attachment;PlayerActions.addToQueue(id,attachment);event.stopPropagation()},delete:function _delete(event){var id=this.props.id;var rev=this.props.rev;var artist=this.props.artist;var album=this.props.album;var title=this.props.title;PlayerActions.deleteTrack(id,rev,artist,album,title);event.stopPropagation()},editTrack:function editTrack(event){event.stopPropagation()},displayName:"Track",propTypes:{album:React.PropTypes.string.isRequired,artist:React.PropTypes.string.isRequired,title:React.PropTypes.string.isRequired,attachment:React.PropTypes.string.isRequired,trackNumber:React.PropTypes.number.isRequired,duration:React.PropTypes.string.isRequired,playing:React.PropTypes.bool.isRequired,favourite:React.PropTypes.bool.isRequired,id:React.PropTypes.string.isRequired,rev:React.PropTypes.string.isRequired,genre:React.PropTypes.string.isRequired},handleFavourite:function handleFavourite(event){var id=this.props.id;var rev=this.props.rev;var artist=this.props.artist;var album=this.props.album;var title=this.props.title;LibraryActions.favourite(id,rev,artist,album,title);event.stopPropagation()},handleClick:function handleClick(event){if(event.target.nodeName!=="LABEL"&&event.target.nodeName!=="INPUT"&&event.target.nodeName!=="BUTTON"){var id=[this.props.artist,this.props.album,this.props.title].join("-||-||-");var attachment=this.props.attachment;PlayerActions.playSong(id,attachment);event.stopPropagation()}},render:function render(){var _props=this.props;var trackNumber=_props.trackNumber;var duration=_props.duration;var title=_props.title;var playing=_props.playing;var favourite=_props.favourite;var rev=_props.rev;var genre=_props.genre;var id=_props.id;var iconStyles=false?"track-info track-info--current-track icon--dot track-info--current-track--active":"track-info track-info--current-track";return React.createElement("li",{className:"tracklist__item",onDoubleClick:this.handleClick},React.createElement("div",{className:"track-info track-info--number"},trackNumber),React.createElement("div",{className:iconStyles}),React.createElement("div",{className:"track-info track-info--title"},title),React.createElement("div",{className:"track-info track-info--total-time"},genre),React.createElement("ul",{className:"list-inline track-option track-option--horizontal"},React.createElement("li",{className:"track-option__item"},React.createElement("button",{type:"button",className:"btn track-option__item__button icon--dot-2"}),React.createElement("ul",{className:"list-inline track-option__sub-menu track-option__sub-menu--horizontal"},React.createElement("li",{className:"track-option__item"},React.createElement("button",{type:"button",className:"btn track-option__item__button icon--trash",onClick:this["delete"]})),React.createElement("li",{className:"track-option__item"},React.createElement("button",{type:"button",className:"btn track-option__item__button icon--list-add",onClick:this.addToQueue})),React.createElement("li",{className:"track-option__item"},React.createElement(Link,{className:"btn track-option__item__button icon--pencil",to:"edits",params:{id:id}})))),React.createElement("li",{className:"track-option__item"},React.createElement("input",{className:"favourite-button__checkbox",type:"checkbox",id:rev,checked:favourite,onChange:this.handleFavourite}),React.createElement("label",{className:"btn track-option__item__button favourite-button__icon icon",htmlFor:rev}))))}});module.exports=Track},{"../actions/LibraryActions":3,"../actions/PlayerActions":4,"../mixins/PropCheckMixin":27,react:590,"react-router":403,"react/addons":418}],22:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=true;if(prop.value)prop.writable=true}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var React=_interopRequire(require("react"));var _=_interopRequire(require("lodash"));var Track=_interopRequire(require("./Track.react"));var PureComponent=_interopRequire(require("./PureComponent.react"));var TrackList=function(_PureComponent){function TrackList(){_classCallCheck(this,TrackList);if(_PureComponent!=null){_PureComponent.apply(this,arguments)}}_inherits(TrackList,_PureComponent);_createClass(TrackList,{render:{value:function render(){var tracks=_.map(this.props.tracks,function(track){return track[Object.keys(track)[0]]});var playing=true;var Tracks=_.map(tracks,function(track){var file=Object.keys(track._attachments)[0];return React.createElement(Track,{key:track.rev,rev:track.rev,id:track.id,artist:track.artist,album:track.album,title:track.title,trackNumber:track.number,duration:track.genre,playing:playing,favourite:track.favourite,attachment:file,genre:track.genre})});return React.createElement("ul",{className:"list-block tracklist"},Tracks)}}});return TrackList}(PureComponent);module.exports=TrackList},{"./PureComponent.react":17,"./Track.react":21,lodash:141,react:590}],23:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var keyMirror=_interopRequire(require("react/lib/keyMirror"));var FileUploaderConstants=keyMirror({FILE_ADD:null,FILE_ADD_SUCCESS:null,FILE_ADD_FAIL:null});module.exports=FileUploaderConstants},{"react/lib/keyMirror":574}],24:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var keyMirror=_interopRequire(require("react/lib/keyMirror"));var LibraryConstants=keyMirror({LIBRARY_UPDATE:null,LIBRARY_UPDATE_SUCCESS:null,LIBRARY_UPDATE_FAIL:null,DELETE_TRACK:null,FAVOURITE:null,UPDATE_TRACK:null});module.exports=LibraryConstants},{"react/lib/keyMirror":574}],25:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var keyMirror=_interopRequire(require("react/lib/keyMirror"));var PlayerConstants=keyMirror({ADD_TO_QUEUE:null,CURRENT_TIME:null,DURATION:null,EMPTY_QUEUE:null,MUTE:null,NEXT:null,PAUSE:null,PLAY:null,PLAY_SONG:null,PLAYING:null,PREVIOUS:null,REPEAT:null,SHUFFLE:null,STOP:null,VOLUME:null});module.exports=PlayerConstants},{"react/lib/keyMirror":574}],26:[function(require,module,exports){"use strict";var Dispatcher=require("flux").Dispatcher;var AppDispatcher=new Dispatcher;AppDispatcher.handleAction=function(action){this.dispatch({source:"VIEW_ACTION",action:action})};module.exports=AppDispatcher},{flux:135}],27:[function(require,module,exports){"use strict";var PropCheckMixin={componentWillMount:function componentWillMount(){this.validateProps(this.props)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.validateProps(nextProps)},validateProps:function validateProps(props){var _constructor=this.constructor;var displayName=_constructor.displayName;var propTypes=_constructor.propTypes;for(var prop in props){if(!propTypes[prop]){console.warn('You set a property "'+prop+'" on Component "'+displayName+'" but did not provide a PropType declaration for this prop.')}}}};module.exports=PropCheckMixin},{}],28:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var React=_interopRequire(require("react"));var _reactRouter=require("react-router");var DefaultRoute=_reactRouter.DefaultRoute;var Route=_reactRouter.Route;var _=_interopRequire(require("lodash"));var MusicPlayer=_interopRequire(require("./components/MusicPlayer.react"));var TrackList=_interopRequire(require("./components/TrackList.react"));var EditTrack=_interopRequire(require("./components/EditTrack.react"));var Settings=_interopRequire(require("./components/Settings.react"));var StartSplash=_interopRequire(require("./components/StartSplash.react"));var AllArtists=_interopRequire(require("./components/AllArtists.react"));var Favourites=_interopRequire(require("./components/Favourites.react"));var Results=_interopRequire(require("./components/Results.react"));var Edit=_interopRequire(require("./components/Edit.react"));var Artists=_interopRequire(require("./components/Artists.react"));var routes=React.createElement(Route,{name:"app",path:"/",handler:MusicPlayer},React.createElement(Route,{name:"search",path:"search/:search",handler:Results}),React.createElement(Route,{name:"edits",path:"edit/:id",handler:Edit}),React.createElement(Route,{name:"artist",path:"artist/:artist",handler:Artists}),React.createElement(Route,{name:"favourites",path:"favourites",handler:Favourites}),React.createElement(Route,{name:"artists",handler:AllArtists}),React.createElement(Route,{name:"settings",path:"/settings/export",handler:Settings}),React.createElement(DefaultRoute,{handler:StartSplash}));module.exports=routes},{"./components/AllArtists.react":5,"./components/Artists.react":8,"./components/Edit.react":9,"./components/EditTrack.react":10,"./components/Favourites.react":11,"./components/MusicPlayer.react":13,
"./components/Results.react":18,"./components/Settings.react":19,"./components/StartSplash.react":20,"./components/TrackList.react":22,lodash:141,react:590,"react-router":403}],29:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _slicedToArray=function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break}return _arr}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var _defineProperty=function(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})};var AppDispatcher=_interopRequire(require("../dispatcher/AppDispatcher"));var EventEmitter=require("events").EventEmitter;var FileUploaderConstants=_interopRequire(require("../constants/FileUploaderConstants"));var LibraryConstants=_interopRequire(require("../constants/LibraryConstants"));var _=_interopRequire(require("lodash"));var _library={};function artistExists(artist){return!!_library[artist]}function albumExistsByArtist(artist,album){return artistExists(artist)&&!!_library[artist][album]}function trackExistsInAlbum(artist,album,track){return albumExistsByArtist(artist,album)&&!!_library[artist][album][track]}function update(library){_library=library}function addSong(file){var _id=file._id;var _rev=file._rev;var album=file.album;var artist=file.artist;var genre=file.genre;var title=file.title;var track=file.track;var year=file.year;var _attachments=file._attachments;var favourite=file.favourite;if(artistExists(artist)){if(albumExistsByArtist(artist,album)){if(trackExistsInAlbum(artist,album,title)){console.warn("What do?")}else{_library[artist][album][title]={id:_id,rev:_rev,album:album,artist:artist,genre:genre,title:title,number:track,year:year,_attachments:_attachments,favourite:favourite}}}else{_library[artist][album]={};_library[artist][album][title]={id:_id,rev:_rev,album:album,artist:artist,genre:genre,title:title,number:track,year:year,_attachments:_attachments,favourite:favourite}}}else{_library[artist]={};_library[artist][album]={};_library[artist][album][title]={id:_id,rev:_rev,album:album,artist:artist,genre:genre,title:title,number:track,year:year,_attachments:_attachments,favourite:favourite}}}function deleteSong(song){if(_library[song.artist][song.album][song.title].id==song.id&&_library[song.artist][song.album][song.title].rev==song.rev){delete _library[song.artist][song.album][song.title];if(isEmpty(_library[song.artist][song.album])){delete _library[song.artist][song.album];if(isEmpty(_library[song.artist])){delete _library[song.artist]}}}}function toggleFavourite(song){if(_library[song.artist][song.album][song.title].id==song.id&&_library[song.artist][song.album][song.title].rev==song.old_rev){_library[song.artist][song.album][song.title].rev=song.new_rev;_library[song.artist][song.album][song.title].favourite=!_library[song.artist][song.album][song.title].favourite}}function updateTrack(data){var _data$oldTrackId$split=data.oldTrackId.split("-||-||-");var _data$oldTrackId$split2=_slicedToArray(_data$oldTrackId$split,3);var artist=_data$oldTrackId$split2[0];var album=_data$oldTrackId$split2[1];var title=_data$oldTrackId$split2[2];deleteSong({artist:artist,album:album,title:title,rev:data.oldTrackRev,id:data.oldTrackId});addSong(data.track)}function isEmpty(obj){return Object.getOwnPropertyNames(obj).length===0}var LibraryStore=_.extend({},EventEmitter.prototype,{getArtists:function getArtists(){return Object.keys(_library)},getTrackById:function getTrackById(id){for(var artist in _library){for(var album in _library[artist]){for(var track in _library[artist][album]){if(_library[artist][album][track].id===id){return _library[artist][album][track]}}}}},getTracks:function getTracks(){var _this=this;return _.flattenDeep(_.map(this.getArtists(),function(artist){return _.map(_this.getAlbumsByArtist(artist,true),_this.getTracksOfAlbums)},this))},getTracksOfAlbums:function getTracksOfAlbums(album){return _.map(album,function(doc,trackName){return _defineProperty({},trackName,doc)})},getTracksByArtist:function getTracksByArtist(artist){return _.flatten(_.map(this.getAlbumsByArtist(artist,true),this.getTracksOfAlbums))},getAlbums:function getAlbums(){return _.flatten(this.getAllAlbumsSortedByArtist())},getAllAlbumsSortedByArtist:function getAllAlbumsSortedByArtist(){return _.map(this.getArtists(),this.getAlbumsByArtist)},getAlbumsByArtist:function getAlbumsByArtist(artist,include_tracks){if(include_tracks){return _library[artist]}else{return Object.keys(_library[artist])}},getAlbumByArtist:function getAlbumByArtist(artist,album){if(albumExistsByArtist(artist,album)){return _library[artist][album]}else{console.warn("What do?!")}},getFavouriteTracks:function getFavouriteTracks(){return _.filter(this.getTracks(),function(track){return track[Object.keys(track)[0]].favourite})},getLibrary:function getLibrary(){return _library},emitChange:function emitChange(){this.emit("change")},addChangeListener:function addChangeListener(callback){this.on("change",callback)},removeChangeListener:function removeChangeListener(callback){this.removeListener("change",callback)}});AppDispatcher.register(function(payload){var action=payload.action;switch(action.actionType){case LibraryConstants.DELETE_TRACK:deleteSong(action.data);break;case FileUploaderConstants.FILE_ADD_SUCCESS:addSong(action.data);break;case LibraryConstants.LIBRARY_UPDATE_SUCCESS:update(action.data);break;case LibraryConstants.FAVOURITE:toggleFavourite(action.data);break;case LibraryConstants.UPDATE_TRACK:updateTrack(action.data);break;default:return true}LibraryStore.emitChange();return true});module.exports=LibraryStore},{"../constants/FileUploaderConstants":23,"../constants/LibraryConstants":24,"../dispatcher/AppDispatcher":26,events:34,lodash:141}],30:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var _slicedToArray=function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break}return _arr}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var AppDispatcher=_interopRequire(require("../dispatcher/AppDispatcher"));var EventEmitter=require("events").EventEmitter;var PlayerConstants=_interopRequire(require("../constants/PlayerConstants"));var _=_interopRequire(require("lodash"));var _artist=undefined;var _album=undefined;var _title=undefined;var _playing=undefined;var _queue=[];var _index=undefined;var _shuffle=undefined;var _repeat=undefined;var _previousVolume=undefined;var _stopped=undefined;var startTime=undefined;var audio=new AudioContext;var source=audio.createBufferSource();var gainNode=audio.createGain();source.connect(gainNode);gainNode.connect(audio.destination);function decrementIndex(){--_index}function incrementIndex(){++_index}function repeat(){_repeat=!_repeat}function shuffle(){if(_shuffle){}if(_queue.length&&_index>-1){var currentlyPlayingSong=_queue.splice(_index,1)[0];_queue=_.shuffle(_queue);_queue.unshift(currentlyPlayingSong);_index=0}else{_queue=_.shuffle(_queue)}_shuffle=!_shuffle}function switchFile(buffer){var a=source.onended;source.onended=null;try{source.stop()}catch(e){}source=audio.createBufferSource();source.onended=a;source.connect(gainNode);source.buffer=buffer}function play(){_playing=true;if(_stopped){_stopped=false;var a=source.onended;var buffer=source.buffer;source=audio.createBufferSource();source.onended=a;source.connect(gainNode);source.buffer=buffer;startTime=audio.currentTime;audio.resume();source.start()}else{switch(audio.state){case"suspended":audio.resume();break;default:startTime=audio.currentTime;source.start();break}}}function pause(){_playing=false;audio.suspend()}function stop(){pause();_stopped=true}function updateVolume(value){_previousVolume=gainNode.gain.value;gainNode.gain.value=value}function switchSong(id){var _ref=id.split("-||-||-");var _ref2=_slicedToArray(_ref,3);_artist=_ref2[0];_album=_ref2[1];_title=_ref2[2]}function resetQueue(){_index=0;_queue.length=0}function addToQueue(track){_queue.push(track)}var PlayerStore=_.extend({},EventEmitter.prototype,{endedEvent:function endedEvent(cb){source.onended=cb},getAlbum:function getAlbum(){return _album},getArtist:function getArtist(){return _artist},getCurrentTime:function getCurrentTime(){if(this.getPlaying){return audio.currentTime-startTime}else{return 0}},getDuration:function getDuration(){try{return source.buffer.duration}catch(e){return 0}},getTitle:function getTitle(){return _title},getProgress:function getProgress(){return 100/this.getDuration()*this.getCurrentTime()},getPlaying:function getPlaying(){return _playing},getQueue:function getQueue(){return _queue},getRepeat:function getRepeat(){return _repeat},getShuffle:function getShuffle(){return _shuffle},getVolume:function getVolume(){return gainNode.gain.value},getPrevSong:function getPrevSong(){if(_queue.length===1){return _queue[0]}else if(_repeat&&_index===0){return _queue[_queue.length-1]}return _queue[_index-1]},getNextSong:function getNextSong(){if(_queue.length===1){return _queue[0]}else if(_repeat&&_index===_queue.length-1){return _queue[0]}return _queue[_index+1]},hasNext:function hasNext(){if(_repeat&&_index===_queue.length-1){return true}else{return _queue.length&&_queue.length>_index+1}},hasPrev:function hasPrev(){if(_repeat&&_index===0){return true}else{return _index>0}},isMuted:function isMuted(){return gainNode.gain.value==0},prev:function prev(){if(_repeat&&_index===0){_index=_queue.length;return _queue[--_index]}else if(this.hasPrev()){return _queue[--_index]}},next:function next(){if(_repeat&&_index===_queue.length){_index=0;return _queue[++_index]}else if(this.hasNext()){return _queue[++_index]}},emitChange:function emitChange(){this.emit("change")},addChangeListener:function addChangeListener(callback){this.on("change",callback)},removeChangeListener:function removeChangeListener(callback){this.removeListener("change",callback)}});AppDispatcher.register(function(payload){var action=payload.action;switch(action.actionType){case PlayerConstants.ADD_TO_QUEUE:addToQueue(action.data);break;case PlayerConstants.CURRENT_TIME:updateCurrentTime(action.data);updateProgress();break;case PlayerConstants.DURATION:updateDuration(action.data);break;case PlayerConstants.EMPTY_QUEUE:resetQueue();updateCurrentTime(0);updateProgress();break;case PlayerConstants.MUTE:if(PlayerStore.isMuted()){updateVolume(_previousVolume||.1)}else{_previousVolume=audio.volume;updateVolume(0)}break;case PlayerConstants.NEXT:if(!(_queue.length===1)){if(_repeat&&_index===_queue.length-1){_index=0}else{incrementIndex()}}switchFile(action.data.blob);switchSong(_queue[_index].id);if(_playing){play()}break;case PlayerConstants.PAUSE:pause();break;case PlayerConstants.PLAY:play();break;case PlayerConstants.PLAY_SONG:var trackData={id:action.data.id,attachment:action.data.attachment};resetQueue();addToQueue(trackData);switchSong(action.data.id);switchFile(action.data.blob);play();break;case PlayerConstants.PREVIOUS:if(!(_queue.length===1)){if(_repeat&&_index===0){_index=_queue.length-1}else{decrementIndex()}}switchFile(action.data.blob);switchSong(_queue[_index].id);if(_playing){play()}break;case PlayerConstants.REPEAT:repeat();break;case PlayerConstants.SHUFFLE:shuffle();break;case PlayerConstants.STOP:stop();break;case PlayerConstants.VOLUME:updateVolume(action.data);break;default:return true}PlayerStore.emitChange();return true});setInterval(PlayerStore.emitChange.bind(PlayerStore),500);module.exports=PlayerStore},{"../constants/PlayerConstants":25,"../dispatcher/AppDispatcher":26,events:34,lodash:141}],31:[function(require,module,exports){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj};var PouchDB=_interopRequire(require("pouchdb"));var Promise=_interopRequire(require("bluebird"));PouchDB.debug.enable("*");var db=new PouchDB("offlineAudio-V4");var addSongs=function(files,cb){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return cb(null,ev.data)});w.postMessage({cmd:"addSongs",data:files})};var read=function(){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return resolve(ev.data)});w.postMessage({cmd:"read"})})};var getAttachment=function(id,attachment){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return resolve(ev.data)});w.postMessage({cmd:"getAttachment",data:{id:id,attachment:attachment}})})};var deleteTrack=function(id,rev){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return resolve(ev.data)});w.postMessage({cmd:"deleteTrack",data:{id:id,rev:rev}})})};var favourite=function(id,rev){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return resolve(ev.data)});w.postMessage({cmd:"toggleFavouriteTrack",data:{id:id,rev:rev}})})};var updateTrack=function(id,rev,artist,album,title,genre,number,year){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){return resolve(ev.data)});w.postMessage({cmd:"updateTrack",data:{id:id,rev:rev,artist:artist,album:album,title:title,genre:genre,number:number,year:year}})})};var exportDb=function(){return new Promise(function(resolve,reject){var w=new Worker("/js/utils/worker.js");w.addEventListener("message",function(ev){download("test.txt",ev.data);resolve(ev.data)});w.postMessage({cmd:"exportDb"})})};var download=function(filename,text){var pom=self.document.createElement("a");pom.href=window.URL.createObjectURL(new Blob([text],{type:"text/csv"}));pom.download=filename;pom.click()};module.exports={addSongs:addSongs,read:read,getAttachment:getAttachment,deleteTrack:deleteTrack,favourite:favourite,updateTrack:updateTrack,exportDb:exportDb}},{bluebird:32,pouchdb:301}],32:[function(require,module,exports){(function(process,global){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var SomePromiseArray=Promise._SomePromiseArray;function any(promises){var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(1);ret.setUnwrap();ret.init();return promise}Promise.any=function(promises){return any(promises)};Promise.prototype.any=function(){return any(this)}}},{}],2:[function(_dereq_,module,exports){"use strict";var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=_dereq_("./schedule.js");var Queue=_dereq_("./queue.js");var util=_dereq_("./util.js");function Async(){this._isTickUsed=false;this._lateQueue=new Queue(16);this._normalQueue=new Queue(16);this._trampolineEnabled=true;var self=this;this.drainQueues=function(){self._drainQueues()};this._schedule=schedule.isStatic?schedule(this.drainQueues):schedule}Async.prototype.disableTrampolineIfNecessary=function(){if(util.hasDevTools){this._trampolineEnabled=false}};Async.prototype.enableTrampoline=function(){if(!this._trampolineEnabled){this._trampolineEnabled=true;this._schedule=function(fn){setTimeout(fn,0)}}};Async.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0};Async.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg}}var domain=this._getDomain();if(domain!==undefined)fn=domain.bind(fn);if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg)},0)}else try{this._schedule(function(){fn(arg)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}};Async.prototype._getDomain=function(){};if(!true){if(util.isNode){var EventsModule=_dereq_("events");var domainGetter=function(){var domain=process.domain;if(domain===null)return undefined;return domain};if(EventsModule.usingDomains){Async.prototype._getDomain=domainGetter}else{var descriptor=Object.getOwnPropertyDescriptor(EventsModule,"usingDomains");if(descriptor){if(!descriptor.configurable){process.on("domainsActivated",function(){Async.prototype._getDomain=domainGetter})}else{var usingDomains=false;Object.defineProperty(EventsModule,"usingDomains",{configurable:false,enumerable:true,get:function(){return usingDomains},set:function(value){if(usingDomains||!value)return;usingDomains=true;Async.prototype._getDomain=domainGetter;util.toFastProperties(process);process.emit("domainsActivated")}})}}}}}function AsyncInvokeLater(fn,receiver,arg){var domain=this._getDomain();if(domain!==undefined)fn=domain.bind(fn);this._lateQueue.push(fn,receiver,arg);this._queueTick()}function AsyncInvoke(fn,receiver,arg){var domain=this._getDomain();if(domain!==undefined)fn=domain.bind(fn);this._normalQueue.push(fn,receiver,arg);this._queueTick()}function AsyncSettlePromises(promise){var domain=this._getDomain();if(domain!==undefined){var fn=domain.bind(promise._settlePromises);this._normalQueue.push(fn,promise,undefined)}else{this._normalQueue._pushOne(promise)}this._queueTick()}if(!util.hasDevTools){Async.prototype.invokeLater=AsyncInvokeLater;Async.prototype.invoke=AsyncInvoke;Async.prototype.settlePromises=AsyncSettlePromises}else{Async.prototype.invokeLater=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvokeLater.call(this,fn,receiver,arg)}else{setTimeout(function(){fn.call(receiver,arg)},100)}};Async.prototype.invoke=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvoke.call(this,fn,receiver,arg)}else{setTimeout(function(){fn.call(receiver,arg)},0)}};Async.prototype.settlePromises=function(promise){if(this._trampolineEnabled){AsyncSettlePromises.call(this,promise)}else{setTimeout(function(){promise._settlePromises()},0)}}}Async.prototype.invokeFirst=function(fn,receiver,arg){var domain=this._getDomain();if(domain!==undefined)fn=domain.bind(fn);this._normalQueue.unshift(fn,receiver,arg);this._queueTick()};Async.prototype._drainQueue=function(queue){while(queue.length()>0){var fn=queue.shift();if(typeof fn!=="function"){fn._settlePromises();continue}var receiver=queue.shift();var arg=queue.shift();fn.call(receiver,arg)}};Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._drainQueue(this._lateQueue)};Async.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};Async.prototype._reset=function(){this._isTickUsed=false};module.exports=new Async;module.exports.firstLineError=firstLineError},{"./queue.js":28,"./schedule.js":31,"./util.js":38,events:39}],3:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise){var rejectThis=function(_,e){this._reject(e)};var targetRejected=function(e,context){context.promiseRejectionQueued=true;context.bindingPromise._then(rejectThis,rejectThis,null,this,e)};var bindingResolved=function(thisArg,context){this._setBoundTo(thisArg);if(this._isPending()){this._resolveCallback(context.target)}};var bindingRejected=function(e,context){if(!context.promiseRejectionQueued)this._reject(e)};Promise.prototype.bind=function(thisArg){var maybePromise=tryConvertToPromise(thisArg);var ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();if(maybePromise instanceof Promise){var context={promiseRejectionQueued:false,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,ret._progress,ret,context);maybePromise._then(bindingResolved,bindingRejected,ret._progress,ret,context)}else{ret._setBoundTo(thisArg);ret._resolveCallback(target)}return ret};Promise.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|131072;this._boundTo=obj}else{this._bitField=this._bitField&~131072}};Promise.prototype._isBound=function(){return(this._bitField&131072)===131072};Promise.bind=function(thisArg,value){var maybePromise=tryConvertToPromise(thisArg);var ret=new Promise(INTERNAL);if(maybePromise instanceof Promise){maybePromise._then(function(thisArg){ret._setBoundTo(thisArg);ret._resolveCallback(value)},ret._reject,ret._progress,ret,null)}else{ret._setBoundTo(thisArg);ret._resolveCallback(value)}return ret}}},{}],4:[function(_dereq_,module,exports){"use strict";var old;if(typeof Promise!=="undefined")old=Promise;function noConflict(){try{if(Promise===bluebird)Promise=old}catch(e){}return bluebird}var bluebird=_dereq_("./promise.js")();bluebird.noConflict=noConflict;module.exports=bluebird},{"./promise.js":23}],5:[function(_dereq_,module,exports){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null);var getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(Promise){var util=_dereq_("./util.js");var canEvaluate=util.canEvaluate;var isIdentifier=util.isIdentifier;var getMethodCaller;var getGetter;if(!true){var makeMethodCaller=function(methodName){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,methodName))(ensureMethod)};var makeGetter=function(propertyName){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",propertyName))};var getCompiled=function(name,compiler,cache){var ret=cache[name];if(typeof ret!=="function"){if(!isIdentifier(name)){return null}ret=compiler(name);cache[name]=ret;cache[" size"]++;if(cache[" size"]>512){var keys=Object.keys(cache);for(var i=0;i<256;++i)delete cache[keys[i]];cache[" size"]=keys.length-256}}return ret};getMethodCaller=function(name){return getCompiled(name,makeMethodCaller,callerCache)};getGetter=function(name){return getCompiled(name,makeGetter,getterCache)}}function ensureMethod(obj,methodName){var fn;if(obj!=null)fn=obj[methodName];if(typeof fn!=="function"){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message)}return fn}function caller(obj){var methodName=this.pop();var fn=ensureMethod(obj,methodName);return fn.apply(obj,this)}Promise.prototype.call=function(methodName){var $_len=arguments.length;var args=new Array($_len-1);for(var $_i=1;$_i<$_len;++$_i){args[$_i-1]=arguments[$_i]}if(!true){if(canEvaluate){var maybeCaller=getMethodCaller(methodName);if(maybeCaller!==null){return this._then(maybeCaller,undefined,undefined,args,undefined)}}}args.push(methodName);return this._then(caller,undefined,undefined,args,undefined)};function namedGetter(obj){return obj[this]}function indexedGetter(obj){var index=+this;if(index<0)index=Math.max(0,index+obj.length);return obj[index]}Promise.prototype.get=function(propertyName){var isIndex=typeof propertyName==="number";var getter;if(!isIndex){if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=maybeGetter!==null?maybeGetter:namedGetter}else{getter=namedGetter}}else{getter=indexedGetter}return this._then(getter,undefined,undefined,propertyName,undefined)}}},{"./util.js":38}],6:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var errors=_dereq_("./errors.js");var async=_dereq_("./async.js");var CancellationError=errors.CancellationError;Promise.prototype._cancel=function(reason){if(!this.isCancellable())return this;var parent;var promiseToReject=this;while((parent=promiseToReject._cancellationParent)!==undefined&&parent.isCancellable()){promiseToReject=parent}this._unsetCancellable();promiseToReject._target()._rejectCallback(reason,false,true)};Promise.prototype.cancel=function(reason){if(!this.isCancellable())return this;if(reason===undefined)reason=new CancellationError;async.invokeLater(this._cancel,this,reason);return this};Promise.prototype.cancellable=function(){if(this._cancellable())return this;async.enableTrampoline();this._setCancellable();this._cancellationParent=undefined;return this};Promise.prototype.uncancellable=function(){var ret=this.then();ret._unsetCancellable();return ret};Promise.prototype.fork=function(didFulfill,didReject,didProgress){var ret=this._then(didFulfill,didReject,didProgress,undefined,undefined);ret._setCancellable();ret._cancellationParent=undefined;return ret}}},{"./async.js":2,"./errors.js":13}],7:[function(_dereq_,module,exports){"use strict";module.exports=function(){var async=_dereq_("./async.js");var util=_dereq_("./util.js");var bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/;var stackFramePattern=null;var formatStack=null;var indentStackFrames=false;var warn;function CapturedTrace(parent){this._parent=parent;var length=this._length=1+(parent===undefined?0:parent._length);captureStackTrace(this,CapturedTrace);if(length>32)this.uncycle()}util.inherits(CapturedTrace,Error);CapturedTrace.prototype.uncycle=function(){var length=this._length;if(length<2)return;var nodes=[];var stackToIndex={};for(var i=0,node=this;node!==undefined;++i){nodes.push(node);node=node._parent}length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;if(stackToIndex[stack]===undefined){stackToIndex[stack]=i}}for(var i=0;i<length;++i){var currentStack=nodes[i].stack;var index=stackToIndex[currentStack];if(index!==undefined&&index!==i){if(index>0){nodes[index-1]._parent=undefined;nodes[index-1]._length=1}nodes[i]._parent=undefined;nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;if(index<length-1){cycleEdgeNode._parent=nodes[index+1];cycleEdgeNode._parent.uncycle();cycleEdgeNode._length=cycleEdgeNode._parent._length+1}else{cycleEdgeNode._parent=undefined;cycleEdgeNode._length=1}var currentChildLength=cycleEdgeNode._length+1;for(var j=i-2;j>=0;--j){nodes[j]._length=currentChildLength;currentChildLength++}return}}};CapturedTrace.prototype.parent=function(){return this._parent};CapturedTrace.prototype.hasParent=function(){return this._parent!==undefined};CapturedTrace.prototype.attachExtraTrace=function(error){if(error.__stackCleaned__)return;this.uncycle();var parsed=CapturedTrace.parseStackAndMessage(error);var message=parsed.message;var stacks=[parsed.stack];var trace=this;while(trace!==undefined){stacks.push(cleanStack(trace.stack.split("\n")));trace=trace._parent}removeCommonRoots(stacks);removeDuplicateOrEmptyJumps(stacks);util.notEnumerableProp(error,"stack",reconstructStack(message,stacks));util.notEnumerableProp(error,"__stackCleaned__",true)};function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i){stacks[i].push("From previous event:");stacks[i]=stacks[i].join("\n")}if(i<stacks.length){stacks[i]=stacks[i].join("\n")}return message+"\n"+stacks.join("\n")}function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i){if(stacks[i].length===0||i+1<stacks.length&&stacks[i][0]===stacks[i+1][0]){stacks.splice(i,1);i--}}}function removeCommonRoots(stacks){var current=stacks[0];for(var i=1;i<stacks.length;++i){var prev=stacks[i];var currentLastIndex=current.length-1;var currentLastLine=current[currentLastIndex];var commonRootMeetPoint=-1;for(var j=prev.length-1;j>=0;--j){if(prev[j]===currentLastLine){commonRootMeetPoint=j;break}}for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]===line){current.pop();currentLastIndex--}else{break}}current=prev}}function cleanStack(stack){var ret=[];for(var i=0;i<stack.length;++i){var line=stack[i];var isTraceLine=stackFramePattern.test(line)||"    (No stack trace)"===line;var isInternalFrame=isTraceLine&&shouldIgnore(line);if(isTraceLine&&!isInternalFrame){if(indentStackFrames&&line.charAt(0)!==" "){line="    "+line}ret.push(line)}}return ret}function stackFramesAsArray(error){var stack=error.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line)){break}}if(i>0){stack=stack.slice(i)}return stack}CapturedTrace.parseStackAndMessage=function(error){var stack=error.stack;var message=error.toString();stack=typeof stack==="string"&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"];return{message:message,stack:cleanStack(stack)}};CapturedTrace.formatAndLogError=function(error,title){if(typeof console!=="undefined"){var message;if(typeof error==="object"||typeof error==="function"){var stack=error.stack;message=title+formatStack(stack,error)}else{message=title+String(error)}if(typeof warn==="function"){warn(message)}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(message)}}};CapturedTrace.unhandledRejection=function(reason){CapturedTrace.formatAndLogError(reason,"^--- With additional stack trace: ")};CapturedTrace.isSupported=function(){return typeof captureStackTrace==="function"};CapturedTrace.fireRejectionEvent=function(name,localHandler,reason,promise){var localEventFired=false;try{if(typeof localHandler==="function"){localEventFired=true;if(name==="rejectionHandled"){localHandler(promise)}else{localHandler(reason,promise)}}}catch(e){async.throwLater(e)}var globalEventFired=false;try{globalEventFired=fireGlobalEvent(name,reason,promise)}catch(e){globalEventFired=true;async.throwLater(e)}var domEventFired=false;if(fireDomEvent){try{domEventFired=fireDomEvent(name.toLowerCase(),{reason:reason,promise:promise})}catch(e){domEventFired=true;async.throwLater(e)}}if(!globalEventFired&&!localEventFired&&!domEventFired&&name==="unhandledRejection"){CapturedTrace.formatAndLogError(reason,"Unhandled rejection ")}};function formatNonError(obj){var str;if(typeof obj==="function"){str="[function "+(obj.name||"anonymous")+"]"}else{str=obj.toString();var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str)){try{var newStr=JSON.stringify(obj);str=newStr}catch(e){}}if(str.length===0){str="(empty array)"}}return"(<"+snip(str)+">, no stack trace)";

}function snip(str){var maxChars=41;if(str.length<maxChars){return str}return str.substr(0,maxChars-3)+"..."}var shouldIgnore=function(){return false};var parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches){return{fileName:matches[1],line:parseInt(matches[2],10)}}}CapturedTrace.setBounds=function(firstLineError,lastLineError){if(!CapturedTrace.isSupported())return;var firstStackLines=firstLineError.stack.split("\n");var lastStackLines=lastLineError.stack.split("\n");var firstIndex=-1;var lastIndex=-1;var firstFileName;var lastFileName;for(var i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName;firstIndex=result.line;break}}for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName;lastIndex=result.line;break}}if(firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex){return}shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return true;var info=parseLineInfo(line);if(info){if(info.fileName===firstFileName&&(firstIndex<=info.line&&info.line<=lastIndex)){return true}}return false}};var captureStackTrace=function stackDetection(){var v8stackFramePattern=/^\s*at\s*/;var v8stackFormatter=function(stack,error){if(typeof stack==="string")return stack;if(error.name!==undefined&&error.message!==undefined){return error.toString()}return formatNonError(error)};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit=Error.stackTraceLimit+6;stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;shouldIgnore=function(line){return bluebirdFramePattern.test(line)};return function(receiver,ignoreUntil){Error.stackTraceLimit=Error.stackTraceLimit+6;captureStackTrace(receiver,ignoreUntil);Error.stackTraceLimit=Error.stackTraceLimit-6}}var err=new Error;if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){stackFramePattern=/@/;formatStack=v8stackFormatter;indentStackFrames=true;return function captureStackTrace(o){o.stack=(new Error).stack}}var hasStackAfterThrow;try{throw new Error}catch(e){hasStackAfterThrow="stack"in e}if(!("stack"in err)&&hasStackAfterThrow){stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;return function captureStackTrace(o){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){o.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6}}formatStack=function(stack,error){if(typeof stack==="string")return stack;if((typeof error==="object"||typeof error==="function")&&error.name!==undefined&&error.message!==undefined){return error.toString()}return formatNonError(error)};return null}([]);var fireDomEvent;var fireGlobalEvent=function(){if(util.isNode){return function(name,reason,promise){if(name==="rejectionHandled"){return process.emit(name,promise)}else{return process.emit(name,reason,promise)}}}else{var customEventWorks=false;var anyEventWorks=true;try{var ev=new self.CustomEvent("test");customEventWorks=ev instanceof CustomEvent}catch(e){}if(!customEventWorks){try{var event=document.createEvent("CustomEvent");event.initCustomEvent("testingtheevent",false,true,{});self.dispatchEvent(event)}catch(e){anyEventWorks=false}}if(anyEventWorks){fireDomEvent=function(type,detail){var event;if(customEventWorks){event=new self.CustomEvent(type,{detail:detail,bubbles:false,cancelable:true})}else if(self.dispatchEvent){event=document.createEvent("CustomEvent");event.initCustomEvent(type,false,true,detail)}return event?!self.dispatchEvent(event):false}}var toWindowMethodNameMap={};toWindowMethodNameMap["unhandledRejection"]=("on"+"unhandledRejection").toLowerCase();toWindowMethodNameMap["rejectionHandled"]=("on"+"rejectionHandled").toLowerCase();return function(name,reason,promise){var methodName=toWindowMethodNameMap[name];var method=self[methodName];if(!method)return false;if(name==="rejectionHandled"){method.call(self,promise)}else{method.call(self,reason,promise)}return true}}}();if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){warn=function(message){console.warn(message)};if(util.isNode&&process.stderr.isTTY){warn=function(message){process.stderr.write("[31m"+message+"[39m\n")}}else if(!util.isNode&&typeof(new Error).stack==="string"){warn=function(message){console.warn("%c"+message,"color: red")}}}return CapturedTrace}},{"./async.js":2,"./util.js":38}],8:[function(_dereq_,module,exports){"use strict";module.exports=function(NEXT_FILTER){var util=_dereq_("./util.js");var errors=_dereq_("./errors.js");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var keys=_dereq_("./es5.js").keys;var TypeError=errors.TypeError;function CatchFilter(instances,callback,promise){this._instances=instances;this._callback=callback;this._promise=promise}function safePredicate(predicate,e){var safeObject={};var retfilter=tryCatch(predicate).call(safeObject,e);if(retfilter===errorObj)return retfilter;var safeKeys=keys(safeObject);if(safeKeys.length){errorObj.e=new TypeError("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return errorObj}return retfilter}CatchFilter.prototype.doFilter=function(e){var cb=this._callback;var promise=this._promise;var boundTo=promise._boundTo;for(var i=0,len=this._instances.length;i<len;++i){var item=this._instances[i];var itemIsErrorType=item===Error||item!=null&&item.prototype instanceof Error;if(itemIsErrorType&&e instanceof item){var ret=tryCatch(cb).call(boundTo,e);if(ret===errorObj){NEXT_FILTER.e=ret.e;return NEXT_FILTER}return ret}else if(typeof item==="function"&&!itemIsErrorType){var shouldHandle=safePredicate(item,e);if(shouldHandle===errorObj){e=errorObj.e;break}else if(shouldHandle){var ret=tryCatch(cb).call(boundTo,e);if(ret===errorObj){NEXT_FILTER.e=ret.e;return NEXT_FILTER}return ret}}}NEXT_FILTER.e=e;return NEXT_FILTER};return CatchFilter}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,CapturedTrace,isDebugging){var contextStack=[];function Context(){this._trace=new CapturedTrace(peekContext())}Context.prototype._pushContext=function(){if(!isDebugging())return;if(this._trace!==undefined){contextStack.push(this._trace)}};Context.prototype._popContext=function(){if(!isDebugging())return;if(this._trace!==undefined){contextStack.pop()}};function createContext(){if(isDebugging())return new Context}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0){return contextStack[lastIndex]}return undefined}Promise.prototype._peekContext=peekContext;Promise.prototype._pushContext=Context.prototype._pushContext;Promise.prototype._popContext=Context.prototype._popContext;return createContext}},{}],10:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,CapturedTrace){var async=_dereq_("./async.js");var Warning=_dereq_("./errors.js").Warning;var util=_dereq_("./util.js");var canAttachTrace=util.canAttachTrace;var unhandledRejectionHandled;var possiblyUnhandledRejection;var debugging=false||util.isNode&&(!!process.env["BLUEBIRD_DEBUG"]||process.env["NODE_ENV"]==="development");if(debugging){async.disableTrampolineIfNecessary()}Promise.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled();async.invokeLater(this._notifyUnhandledRejection,this,undefined)};Promise.prototype._notifyUnhandledRejectionIsHandled=function(){CapturedTrace.fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,undefined,this)};Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified();CapturedTrace.fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this)}};Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|524288};Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~524288};Promise.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&524288)>0};Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|2097152};Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~2097152;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};Promise.prototype._isRejectionUnhandled=function(){return(this._bitField&2097152)>0};Promise.prototype._setCarriedStackTrace=function(capturedTrace){this._bitField=this._bitField|1048576;this._fulfillmentHandler0=capturedTrace};Promise.prototype._isCarryingStackTrace=function(){return(this._bitField&1048576)>0};Promise.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:undefined};Promise.prototype._captureStackTrace=function(){if(debugging){this._trace=new CapturedTrace(this._peekContext())}return this};Promise.prototype._attachExtraTrace=function(error,ignoreSelf){if(debugging&&canAttachTrace(error)){var trace=this._trace;if(trace!==undefined){if(ignoreSelf)trace=trace._parent}if(trace!==undefined){trace.attachExtraTrace(error)}else if(!error.__stackCleaned__){var parsed=CapturedTrace.parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n"));util.notEnumerableProp(error,"__stackCleaned__",true)}}};Promise.prototype._warn=function(message){var warning=new Warning(message);var ctx=this._peekContext();if(ctx){ctx.attachExtraTrace(warning)}else{var parsed=CapturedTrace.parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n")}CapturedTrace.formatAndLogError(warning,"")};Promise.onPossiblyUnhandledRejection=function(fn){possiblyUnhandledRejection=typeof fn==="function"?fn:undefined};Promise.onUnhandledRejectionHandled=function(fn){unhandledRejectionHandled=typeof fn==="function"?fn:undefined};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&debugging===false){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n")}debugging=CapturedTrace.isSupported();if(debugging){async.disableTrampolineIfNecessary()}};Promise.hasLongStackTraces=function(){return debugging&&CapturedTrace.isSupported()};if(!CapturedTrace.isSupported()){Promise.longStackTraces=function(){};debugging=false}return function(){return debugging}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(_dereq_,module,exports){"use strict";var util=_dereq_("./util.js");var isPrimitive=util.isPrimitive;var wrapsPrimitiveReceiver=util.wrapsPrimitiveReceiver;module.exports=function(Promise){var returner=function(){return this};var thrower=function(){throw this};var wrapper=function(value,action){if(action===1){return function(){throw value}}else if(action===2){return function(){return value}}};Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){if(wrapsPrimitiveReceiver&&isPrimitive(value)){return this._then(wrapper(value,2),undefined,undefined,undefined,undefined)}return this._then(returner,undefined,undefined,value,undefined)};Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){if(wrapsPrimitiveReceiver&&isPrimitive(reason)){return this._then(wrapper(reason,1),undefined,undefined,undefined,undefined)}return this._then(thrower,undefined,undefined,reason,undefined)}}},{"./util.js":38}],12:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseReduce=Promise.reduce;Promise.prototype.each=function(fn){return PromiseReduce(this,fn,null,INTERNAL)};Promise.each=function(promises,fn){return PromiseReduce(promises,fn,null,INTERNAL)}}},{}],13:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5.js");var Objectfreeze=es5.freeze;var util=_dereq_("./util.js");var inherits=util.inherits;var notEnumerableProp=util.notEnumerableProp;function subError(nameProperty,defaultMessage){function SubError(message){if(!(this instanceof SubError))return new SubError(message);notEnumerableProp(this,"message",typeof message==="string"?message:defaultMessage);notEnumerableProp(this,"name",nameProperty);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{Error.call(this)}}inherits(SubError,Error);return SubError}var _TypeError,_RangeError;var Warning=subError("Warning","warning");var CancellationError=subError("CancellationError","cancellation error");var TimeoutError=subError("TimeoutError","timeout error");var AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError;_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error");_RangeError=subError("RangeError","range error")}var methods=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<methods.length;++i){if(typeof Array.prototype[methods[i]]==="function"){AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]}}es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});AggregateError.prototype["isOperational"]=true;var level=0;AggregateError.prototype.toString=function(){var indent=Array(level*4+1).join(" ");var ret="\n"+indent+"AggregateError of:"+"\n";level++;indent=Array(level*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var lines=str.split("\n");for(var j=0;j<lines.length;++j){lines[j]=indent+lines[j]}str=lines.join("\n");ret+=str+"\n"}level--;return ret};function OperationalError(message){if(!(this instanceof OperationalError))return new OperationalError(message);notEnumerableProp(this,"name","OperationalError");notEnumerableProp(this,"message",message);this.cause=message;this["isOperational"]=true;if(message instanceof Error){notEnumerableProp(this,"message",message.message);notEnumerableProp(this,"stack",message.stack)}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}inherits(OperationalError,Error);var errorTypes=Error["__BluebirdErrorTypes__"];if(!errorTypes){errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError});notEnumerableProp(Error,"__BluebirdErrorTypes__",errorTypes)}module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning}},{"./es5.js":14,"./util.js":38}],14:[function(_dereq_,module,exports){var isES5=function(){"use strict";return this===undefined}();if(isES5){module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!!(!descriptor||descriptor.writable||descriptor.set)}}}else{var has={}.hasOwnProperty;var str={}.toString;var proto={}.constructor.prototype;var ObjectKeys=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key)}}return ret};var ObjectGetDescriptor=function(o,key){return{value:o[key]}};var ObjectDefineProperty=function(o,key,desc){o[key]=desc.value;return o};var ObjectFreeze=function(obj){return obj};var ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype}catch(e){return proto}};var ArrayIsArray=function(obj){try{return str.call(obj)==="[object Array]"}catch(e){return false}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return true}}}},{}],15:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL)};Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL)}}},{}],16:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,NEXT_FILTER,tryConvertToPromise){var util=_dereq_("./util.js");var wrapsPrimitiveReceiver=util.wrapsPrimitiveReceiver;var isPrimitive=util.isPrimitive;var thrower=util.thrower;function returnThis(){return this}function throwThis(){throw this}function return$(r){return function(){return r}}function throw$(r){return function(){throw r}}function promisedFinally(ret,reasonOrValue,isFulfilled){var then;if(wrapsPrimitiveReceiver&&isPrimitive(reasonOrValue)){then=isFulfilled?return$(reasonOrValue):throw$(reasonOrValue)}else{then=isFulfilled?returnThis:throwThis}return ret._then(then,thrower,undefined,reasonOrValue,undefined)}function finallyHandler(reasonOrValue){var promise=this.promise;var handler=this.handler;var ret=promise._isBound()?handler.call(promise._boundTo):handler();if(ret!==undefined){var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();return promisedFinally(maybePromise,reasonOrValue,promise.isFulfilled())}}if(promise.isRejected()){NEXT_FILTER.e=reasonOrValue;return NEXT_FILTER}else{return reasonOrValue}}function tapHandler(value){var promise=this.promise;var handler=this.handler;var ret=promise._isBound()?handler.call(promise._boundTo,value):handler(value);if(ret!==undefined){var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();return promisedFinally(maybePromise,value,true)}}return value}Promise.prototype._passThroughHandler=function(handler,isFinally){if(typeof handler!=="function")return this.then();var promiseAndHandler={promise:this,handler:handler};return this._then(isFinally?finallyHandler:tapHandler,isFinally?finallyHandler:undefined,undefined,promiseAndHandler,undefined)};Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThroughHandler(handler,true)};Promise.prototype.tap=function(handler){return this._passThroughHandler(handler,false)}}},{"./util.js":38}],17:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise){var errors=_dereq_("./errors.js");var TypeError=errors.TypeError;var util=_dereq_("./util.js");var errorObj=util.errorObj;var tryCatch=util.tryCatch;var yieldHandlers=[];function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);traceParent._popContext();if(result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);traceParent._popContext();return ret}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise}return null}function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace();this._stack=stack;this._generatorFunction=generatorFunction;this._receiver=receiver;this._generator=undefined;this._yieldHandlers=typeof yieldHandler==="function"?[yieldHandler].concat(yieldHandlers):yieldHandlers}PromiseSpawn.prototype.promise=function(){return this._promise};PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._next(undefined)};PromiseSpawn.prototype._continue=function(result){if(result===errorObj){return this._promise._rejectCallback(result.e,false,true)}var value=result.value;if(result.done===true){this._promise._resolveCallback(value)}else{var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)){maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise);if(maybePromise===null){this._throw(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",value)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}maybePromise._then(this._next,this._throw,undefined,this,null)}};PromiseSpawn.prototype._throw=function(reason){this._promise._attachExtraTrace(reason);this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();this._continue(result)};PromiseSpawn.prototype._next=function(value){this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext();this._continue(result)};Promise.coroutine=function(generatorFunction,options){if(typeof generatorFunction!=="function"){throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n")}var yieldHandler=Object(options).yieldHandler;var PromiseSpawn$=PromiseSpawn;var stack=(new Error).stack;return function(){var generator=generatorFunction.apply(this,arguments);var spawn=new PromiseSpawn$(undefined,undefined,yieldHandler,stack);spawn._generator=generator;spawn._next(undefined);return spawn.promise()}};Promise.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function")throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");yieldHandlers.push(fn)};Promise.spawn=function(generatorFunction){if(typeof generatorFunction!=="function"){return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n")}var spawn=new PromiseSpawn(generatorFunction,this);var ret=spawn.promise();spawn._run(Promise.spawn);return ret}}},{"./errors.js":13,"./util.js":38}],18:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL){var util=_dereq_("./util.js");var canEvaluate=util.canEvaluate;var tryCatch=util.tryCatch;var errorObj=util.errorObj;var reject;if(!true){if(canEvaluate){var thenCallback=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i))};var caller=function(count){var values=[];for(var i=1;i<=count;++i)values.push("holder.p"+i);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,values.join(", ")))};var thenCallbacks=[];var callers=[undefined];for(var i=1;i<=5;++i){thenCallbacks.push(thenCallback(i));callers.push(caller(i))}var Holder=function(total,fn){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=fn;this.total=total;this.now=0};Holder.prototype.callers=callers;Holder.prototype.checkFulfillment=function(promise){var now=this.now;now++;var total=this.total;if(now>=total){var handler=this.callers[total];promise._pushContext();var ret=tryCatch(handler)(this);promise._popContext();if(ret===errorObj){promise._rejectCallback(ret.e,false,true)}else{promise._resolveCallback(ret)}}else{this.now=now}};var reject=function(reason){this._reject(reason)}}}Promise.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(!true){if(last<6&&canEvaluate){var ret=new Promise(INTERNAL);ret._captureStackTrace();var holder=new Holder(last,fn);var callbacks=thenCallbacks;for(var i=0;i<last;++i){var maybePromise=tryConvertToPromise(arguments[i],ret);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();if(maybePromise._isPending()){maybePromise._then(callbacks[i],reject,undefined,ret,holder)}else if(maybePromise._isFulfilled()){callbacks[i].call(ret,maybePromise._value(),holder)}else{ret._reject(maybePromise._reason())}}else{callbacks[i].call(ret,maybePromise,holder)}}return ret}}}var $_len=arguments.length;var args=new Array($_len);for(var $_i=0;$_i<$_len;++$_i){args[$_i]=arguments[$_i]}if(fn)args.pop();var ret=new PromiseArray(args).promise();return fn!==undefined?ret.spread(fn):ret}}},{"./util.js":38}],19:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL){var async=_dereq_("./async.js");var util=_dereq_("./util.js");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var PENDING={};var EMPTY_ARRAY=[];function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises);this._promise._captureStackTrace();this._callback=fn;this._preservedValues=_filter===INTERNAL?new Array(this.length()):null;this._limit=limit;this._inFlight=0;this._queue=limit>=1?[]:EMPTY_ARRAY;async.invoke(init,this,undefined)}util.inherits(MappingPromiseArray,PromiseArray);function init(){this._init$(undefined,-2)}MappingPromiseArray.prototype._init=function(){};MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values;var length=this.length();var preservedValues=this._preservedValues;var limit=this._limit;if(values[index]===PENDING){values[index]=value;if(limit>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return}}else{if(limit>=1&&this._inFlight>=limit){values[index]=value;this._queue.push(index);return}if(preservedValues!==null)preservedValues[index]=value;var callback=this._callback;var receiver=this._promise._boundTo;this._promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length);this._promise._popContext();if(ret===errorObj)return this._reject(ret.e);var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();if(maybePromise._isPending()){if(limit>=1)this._inFlight++;values[index]=PENDING;return maybePromise._proxyPromiseArray(this,index)}else if(maybePromise._isFulfilled()){ret=maybePromise._value()}else{return this._reject(maybePromise._reason())}}values[index]=ret}var totalResolved=++this._totalResolved;if(totalResolved>=length){if(preservedValues!==null){this._filter(values,preservedValues)}else{this._resolve(values)}}};MappingPromiseArray.prototype._drainQueue=function(){var queue=this._queue;var limit=this._limit;var values=this._values;while(queue.length>0&&this._inFlight<limit){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index)}};MappingPromiseArray.prototype._filter=function(booleans,values){var len=values.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(booleans[i])ret[j++]=values[i]}ret.length=j;this._resolve(ret)};MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues};function map(promises,fn,options,_filter){var limit=typeof options==="object"&&options!==null?options.concurrency:0;limit=typeof limit==="number"&&isFinite(limit)&&limit>=1?limit:0;return new MappingPromiseArray(promises,fn,limit,_filter)}Promise.prototype.map=function(fn,options){if(typeof fn!=="function")return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return map(this,fn,options,null).promise()};Promise.map=function(promises,fn,options,_filter){if(typeof fn!=="function")return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return map(promises,fn,options,_filter).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=_dereq_("./util.js");var tryCatch=util.tryCatch;Promise.method=function(fn){if(typeof fn!=="function"){throw new Promise.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value=tryCatch(fn).apply(this,arguments);ret._popContext();ret._resolveFromSyncValue(value);return ret}};Promise.attempt=Promise["try"]=function(fn,args,ctx){if(typeof fn!=="function"){return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value=util.isArray(args)?tryCatch(fn).apply(ctx,args):tryCatch(fn).call(ctx,args);ret._popContext();ret._resolveFromSyncValue(value);return ret};Promise.prototype._resolveFromSyncValue=function(value){if(value===util.errorObj){this._rejectCallback(value.e,false,true)}else{this._resolveCallback(value,true)}}}},{"./util.js":38}],21:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var util=_dereq_("./util.js");var async=_dereq_("./async.js");var tryCatch=util.tryCatch;var errorObj=util.errorObj;function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val))return successAdapter.call(promise,val,nodeback);var ret=tryCatch(nodeback).apply(promise._boundTo,[null].concat(val));if(ret===errorObj){async.throwLater(ret.e)}}function successAdapter(val,nodeback){var promise=this;var receiver=promise._boundTo;var ret=val===undefined?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);if(ret===errorObj){async.throwLater(ret.e)}}function errorAdapter(reason,nodeback){var promise=this;if(!reason){var target=promise._target();var newReason=target._getCarriedStackTrace();newReason.cause=reason;reason=newReason}var ret=tryCatch(nodeback).call(promise._boundTo,reason);if(ret===errorObj){async.throwLater(ret.e)}}Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if(typeof nodeback=="function"){var adapter=successAdapter;if(options!==undefined&&Object(options).spread){adapter=spreadAdapter}this._then(adapter,errorAdapter,undefined,this,nodeback)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray){var util=_dereq_("./util.js");var async=_dereq_("./async.js");var tryCatch=util.tryCatch;var errorObj=util.errorObj;Promise.prototype.progressed=function(handler){return this._then(undefined,undefined,handler,undefined,undefined)};Promise.prototype._progress=function(progressValue){if(this._isFollowingOrFulfilledOrRejected())return;this._target()._progressUnchecked(progressValue)};Promise.prototype._progressHandlerAt=function(index){return index===0?this._progressHandler0:this[(index<<2)+index-5+2]};Promise.prototype._doProgressWith=function(progression){var progressValue=progression.value;var handler=progression.handler;var promise=progression.promise;var receiver=progression.receiver;var ret=tryCatch(handler).call(receiver,progressValue);if(ret===errorObj){if(ret.e!=null&&ret.e.name!=="StopProgressPropagation"){var trace=util.canAttachTrace(ret.e)?ret.e:new Error(util.toString(ret.e));promise._attachExtraTrace(trace);promise._progress(ret.e)}}else if(ret instanceof Promise){ret._then(promise._progress,null,null,promise,undefined)}else{promise._progress(ret)}};Promise.prototype._progressUnchecked=function(progressValue){var len=this._length();var progress=this._progress;for(var i=0;i<len;i++){var handler=this._progressHandlerAt(i);var promise=this._promiseAt(i);if(!(promise instanceof Promise)){var receiver=this._receiverAt(i);if(typeof handler==="function"){handler.call(receiver,progressValue,promise)}else if(receiver instanceof PromiseArray&&!receiver._isResolved()){
receiver._promiseProgressed(progressValue,promise)}continue}if(typeof handler==="function"){async.invoke(this._doProgressWith,this,{handler:handler,promise:promise,receiver:this._receiverAt(i),value:progressValue})}else{async.invoke(progress,promise,progressValue)}}}}},{"./async.js":2,"./util.js":38}],23:[function(_dereq_,module,exports){"use strict";module.exports=function(){var makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")};var reflect=function(){return new Promise.PromiseInspection(this._target())};var apiRejection=function(msg){return Promise.reject(new TypeError(msg))};var util=_dereq_("./util.js");var async=_dereq_("./async.js");var errors=_dereq_("./errors.js");var TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError;Promise.OperationalError=errors.OperationalError;Promise.RejectionError=errors.OperationalError;Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){};var APPLY={};var NEXT_FILTER={e:null};var tryConvertToPromise=_dereq_("./thenables.js")(Promise,INTERNAL);var PromiseArray=_dereq_("./promise_array.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection);var CapturedTrace=_dereq_("./captured_trace.js")();var isDebugging=_dereq_("./debuggability.js")(Promise,CapturedTrace);var createContext=_dereq_("./context.js")(Promise,CapturedTrace,isDebugging);var CatchFilter=_dereq_("./catch_filter.js")(NEXT_FILTER);var PromiseResolver=_dereq_("./promise_resolver.js");var nodebackForPromise=PromiseResolver._nodebackForPromise;var errorObj=util.errorObj;var tryCatch=util.tryCatch;function Promise(resolver){if(typeof resolver!=="function"){throw new TypeError("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n")}if(this.constructor!==Promise){throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n")}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._progressHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._settledValue=undefined;if(resolver!==INTERNAL)this._resolveFromResolver(resolver)}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(typeof item==="function"){catchInstances[j++]=item}else{return Promise.reject(new TypeError("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"))}}catchInstances.length=j;fn=arguments[i];var catchFilter=new CatchFilter(catchInstances,fn,this);return this._then(undefined,catchFilter.doFilter,undefined,catchFilter,undefined)}return this._then(undefined,fn,undefined,undefined,undefined)};Promise.prototype.reflect=function(){return this._then(reflect,reflect,undefined,this,undefined)};Promise.prototype.then=function(didFulfill,didReject,didProgress){if(isDebugging()&&arguments.length>0&&typeof didFulfill!=="function"&&typeof didReject!=="function"){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);if(arguments.length>1){msg+=", "+util.classString(didReject)}this._warn(msg)}return this._then(didFulfill,didReject,didProgress,undefined,undefined)};Promise.prototype.done=function(didFulfill,didReject,didProgress){var promise=this._then(didFulfill,didReject,didProgress,undefined,undefined);promise._setIsFinal()};Promise.prototype.spread=function(didFulfill,didReject){return this.all()._then(didFulfill,didReject,undefined,APPLY,undefined)};Promise.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()};Promise.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true}else if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true}return ret};Promise.prototype.all=function(){return new PromiseArray(this).promise()};Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn)};Promise.is=function(val){return val instanceof Promise};Promise.fromNode=function(fn){var ret=new Promise(INTERNAL);var result=tryCatch(fn)(nodebackForPromise(ret));if(result===errorObj){ret._rejectCallback(result.e,true,true)}return ret};Promise.all=function(promises){return new PromiseArray(promises).promise()};Promise.defer=Promise.pending=function(){var promise=new Promise(INTERNAL);return new PromiseResolver(promise)};Promise.cast=function(obj){var ret=tryConvertToPromise(obj);if(!(ret instanceof Promise)){var val=ret;ret=new Promise(INTERNAL);ret._fulfillUnchecked(val)}return ret};Promise.resolve=Promise.fulfilled=Promise.cast;Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._rejectCallback(reason,true);return ret};Promise.setScheduler=function(fn){if(typeof fn!=="function")throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var prev=async._schedule;async._schedule=fn;return prev};Promise.prototype._then=function(didFulfill,didReject,didProgress,receiver,internalData){var haveInternalData=internalData!==undefined;var ret=haveInternalData?internalData:new Promise(INTERNAL);if(!haveInternalData){ret._propagateFrom(this,4|1);ret._captureStackTrace()}var target=this._target();if(target!==this){if(receiver===undefined)receiver=this._boundTo;if(!haveInternalData)ret._setIsMigrated()}var callbackIndex=target._addCallbacks(didFulfill,didReject,didProgress,ret,receiver);if(target._isResolved()&&!target._isSettlePromisesQueued()){async.invoke(target._settlePromiseAtPostResolution,target,callbackIndex)}return ret};Promise.prototype._settlePromiseAtPostResolution=function(index){if(this._isRejectionUnhandled())this._unsetRejectionIsUnhandled();this._settlePromiseAt(index)};Promise.prototype._length=function(){return this._bitField&131071};Promise.prototype._isFollowingOrFulfilledOrRejected=function(){return(this._bitField&939524096)>0};Promise.prototype._isFollowing=function(){return(this._bitField&536870912)===536870912};Promise.prototype._setLength=function(len){this._bitField=this._bitField&-131072|len&131071};Promise.prototype._setFulfilled=function(){this._bitField=this._bitField|268435456};Promise.prototype._setRejected=function(){this._bitField=this._bitField|134217728};Promise.prototype._setFollowing=function(){this._bitField=this._bitField|536870912};Promise.prototype._setIsFinal=function(){this._bitField=this._bitField|33554432};Promise.prototype._isFinal=function(){return(this._bitField&33554432)>0};Promise.prototype._cancellable=function(){return(this._bitField&67108864)>0};Promise.prototype._setCancellable=function(){this._bitField=this._bitField|67108864};Promise.prototype._unsetCancellable=function(){this._bitField=this._bitField&~67108864};Promise.prototype._setIsMigrated=function(){this._bitField=this._bitField|4194304};Promise.prototype._unsetIsMigrated=function(){this._bitField=this._bitField&~4194304};Promise.prototype._isMigrated=function(){return(this._bitField&4194304)>0};Promise.prototype._receiverAt=function(index){var ret=index===0?this._receiver0:this[index*5-5+4];if(ret===undefined&&this._isBound()){return this._boundTo}return ret};Promise.prototype._promiseAt=function(index){return index===0?this._promise0:this[index*5-5+3]};Promise.prototype._fulfillmentHandlerAt=function(index){return index===0?this._fulfillmentHandler0:this[index*5-5+0]};Promise.prototype._rejectionHandlerAt=function(index){return index===0?this._rejectionHandler0:this[index*5-5+1]};Promise.prototype._migrateCallbacks=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index);var reject=follower._rejectionHandlerAt(index);var progress=follower._progressHandlerAt(index);var promise=follower._promiseAt(index);var receiver=follower._receiverAt(index);if(promise instanceof Promise)promise._setIsMigrated();this._addCallbacks(fulfill,reject,progress,promise,receiver)};Promise.prototype._addCallbacks=function(fulfill,reject,progress,promise,receiver){var index=this._length();if(index>=131071-5){index=0;this._setLength(0)}if(index===0){this._promise0=promise;if(receiver!==undefined)this._receiver0=receiver;if(typeof fulfill==="function"&&!this._isCarryingStackTrace())this._fulfillmentHandler0=fulfill;if(typeof reject==="function")this._rejectionHandler0=reject;if(typeof progress==="function")this._progressHandler0=progress}else{var base=index*5-5;this[base+3]=promise;this[base+4]=receiver;if(typeof fulfill==="function")this[base+0]=fulfill;if(typeof reject==="function")this[base+1]=reject;if(typeof progress==="function")this[base+2]=progress}this._setLength(index+1);return index};Promise.prototype._setProxyHandlers=function(receiver,promiseSlotValue){var index=this._length();if(index>=131071-5){index=0;this._setLength(0)}if(index===0){this._promise0=promiseSlotValue;this._receiver0=receiver}else{var base=index*5-5;this[base+3]=promiseSlotValue;this[base+4]=receiver}this._setLength(index+1)};Promise.prototype._proxyPromiseArray=function(promiseArray,index){this._setProxyHandlers(promiseArray,index)};Promise.prototype._resolveCallback=function(value,shouldBind){if(this._isFollowingOrFulfilledOrRejected())return;if(value===this)return this._rejectCallback(makeSelfResolutionError(),false,true);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);var propagationFlags=1|(shouldBind?4:0);this._propagateFrom(maybePromise,propagationFlags);var promise=maybePromise._target();if(promise._isPending()){var len=this._length();for(var i=0;i<len;++i){promise._migrateCallbacks(this,i)}this._setFollowing();this._setLength(0);this._setFollowee(promise)}else if(promise._isFulfilled()){this._fulfillUnchecked(promise._value())}else{this._rejectUnchecked(promise._reason(),promise._getCarriedStackTrace())}};Promise.prototype._rejectCallback=function(reason,synchronous,shouldNotMarkOriginatingFromRejection){if(!shouldNotMarkOriginatingFromRejection){util.markAsOriginatingFromRejection(reason)}var trace=util.ensureErrorObject(reason);var hasStack=trace===reason;this._attachExtraTrace(trace,synchronous?hasStack:false);this._reject(reason,hasStack?undefined:trace)};Promise.prototype._resolveFromResolver=function(resolver){var promise=this;this._captureStackTrace();this._pushContext();var synchronous=true;var r=tryCatch(resolver)(function(value){if(promise===null)return;promise._resolveCallback(value);promise=null},function(reason){if(promise===null)return;promise._rejectCallback(reason,synchronous);promise=null});synchronous=false;this._popContext();if(r!==undefined&&r===errorObj&&promise!==null){promise._rejectCallback(r.e,true,true);promise=null}};Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){if(promise._isRejected())return;promise._pushContext();var x;if(receiver===APPLY&&!this._isRejected()){x=tryCatch(handler).apply(this._boundTo,value)}else{x=tryCatch(handler).call(receiver,value)}promise._popContext();if(x===errorObj||x===promise||x===NEXT_FILTER){var err=x===promise?makeSelfResolutionError():x.e;promise._rejectCallback(err,false,true)}else{promise._resolveCallback(x)}};Promise.prototype._target=function(){var ret=this;while(ret._isFollowing())ret=ret._followee();return ret};Promise.prototype._followee=function(){return this._rejectionHandler0};Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise};Promise.prototype._cleanValues=function(){if(this._cancellable()){this._cancellationParent=undefined}};Promise.prototype._propagateFrom=function(parent,flags){if((flags&1)>0&&parent._cancellable()){this._setCancellable();this._cancellationParent=parent}if((flags&4)>0&&parent._isBound()){this._setBoundTo(parent._boundTo)}};Promise.prototype._fulfill=function(value){if(this._isFollowingOrFulfilledOrRejected())return;this._fulfillUnchecked(value)};Promise.prototype._reject=function(reason,carriedStackTrace){if(this._isFollowingOrFulfilledOrRejected())return;this._rejectUnchecked(reason,carriedStackTrace)};Promise.prototype._settlePromiseAt=function(index){var promise=this._promiseAt(index);var isPromise=promise instanceof Promise;if(isPromise&&promise._isMigrated()){promise._unsetIsMigrated();return async.invoke(this._settlePromiseAt,this,index)}var handler=this._isFulfilled()?this._fulfillmentHandlerAt(index):this._rejectionHandlerAt(index);var carriedStackTrace=this._isCarryingStackTrace()?this._getCarriedStackTrace():undefined;var value=this._settledValue;var receiver=this._receiverAt(index);this._clearCallbackDataAtIndex(index);if(typeof handler==="function"){if(!isPromise){handler.call(receiver,value,promise)}else{this._settlePromiseFromHandler(handler,receiver,value,promise)}}else if(receiver instanceof PromiseArray){if(!receiver._isResolved()){if(this._isFulfilled()){receiver._promiseFulfilled(value,promise)}else{receiver._promiseRejected(value,promise)}}}else if(isPromise){if(this._isFulfilled()){promise._fulfill(value)}else{promise._reject(value,carriedStackTrace)}}if(index>=4&&(index&31)===4)async.invokeLater(this._setLength,this,0)};Promise.prototype._clearCallbackDataAtIndex=function(index){if(index===0){if(!this._isCarryingStackTrace()){this._fulfillmentHandler0=undefined}this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=undefined}else{var base=index*5-5;this[base+3]=this[base+4]=this[base+0]=this[base+1]=this[base+2]=undefined}};Promise.prototype._isSettlePromisesQueued=function(){return(this._bitField&-1073741824)===-1073741824};Promise.prototype._setSettlePromisesQueued=function(){this._bitField=this._bitField|-1073741824};Promise.prototype._unsetSettlePromisesQueued=function(){this._bitField=this._bitField&~-1073741824};Promise.prototype._queueSettlePromises=function(){async.settlePromises(this);this._setSettlePromisesQueued()};Promise.prototype._fulfillUnchecked=function(value){if(value===this){var err=makeSelfResolutionError();this._attachExtraTrace(err);return this._rejectUnchecked(err,undefined)}this._setFulfilled();this._settledValue=value;this._cleanValues();if(this._length()>0){this._queueSettlePromises()}};Promise.prototype._rejectUncheckedCheckError=function(reason){var trace=util.ensureErrorObject(reason);this._rejectUnchecked(reason,trace===reason?undefined:trace)};Promise.prototype._rejectUnchecked=function(reason,trace){if(reason===this){var err=makeSelfResolutionError();this._attachExtraTrace(err);return this._rejectUnchecked(err)}this._setRejected();this._settledValue=reason;this._cleanValues();if(this._isFinal()){async.throwLater(function(e){if("stack"in e){async.invokeFirst(CapturedTrace.unhandledRejection,undefined,e)}throw e},trace===undefined?reason:trace);return}if(trace!==undefined&&trace!==reason){this._setCarriedStackTrace(trace)}if(this._length()>0){this._queueSettlePromises()}else{this._ensurePossibleRejectionHandled()}};Promise.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();var len=this._length();for(var i=0;i<len;i++){this._settlePromiseAt(i)}};Promise._makeSelfResolutionError=makeSelfResolutionError;_dereq_("./progress.js")(Promise,PromiseArray);_dereq_("./method.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection);_dereq_("./bind.js")(Promise,INTERNAL,tryConvertToPromise);_dereq_("./finally.js")(Promise,NEXT_FILTER,tryConvertToPromise);_dereq_("./direct_resolve.js")(Promise);_dereq_("./synchronous_inspection.js")(Promise);_dereq_("./join.js")(Promise,PromiseArray,tryConvertToPromise,INTERNAL);Promise.Promise=Promise;_dereq_("./map.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL);_dereq_("./cancel.js")(Promise);_dereq_("./using.js")(Promise,apiRejection,tryConvertToPromise,createContext);_dereq_("./generators.js")(Promise,apiRejection,INTERNAL,tryConvertToPromise);_dereq_("./nodeify.js")(Promise);_dereq_("./call_get.js")(Promise);_dereq_("./props.js")(Promise,PromiseArray,tryConvertToPromise,apiRejection);_dereq_("./race.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection);_dereq_("./reduce.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL);_dereq_("./settle.js")(Promise,PromiseArray);_dereq_("./some.js")(Promise,PromiseArray,apiRejection);_dereq_("./promisify.js")(Promise,INTERNAL);_dereq_("./any.js")(Promise);_dereq_("./each.js")(Promise,INTERNAL);_dereq_("./timers.js")(Promise,INTERNAL);_dereq_("./filter.js")(Promise,INTERNAL);util.toFastProperties(Promise);util.toFastProperties(Promise.prototype);function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value;p._rejectionHandler0=value;p._progressHandler0=value;p._promise0=value;p._receiver0=value;p._settledValue=value}fillTypes({a:1});fillTypes({b:2});fillTypes({c:3});fillTypes(1);fillTypes(function(){});fillTypes(undefined);fillTypes(false);fillTypes(new Promise(INTERNAL));CapturedTrace.setBounds(async.firstLineError,util.lastLineError);return Promise}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=_dereq_("./util.js");var isArray=util.isArray;function toResolutionValue(val){switch(val){case-2:return[];case-3:return{}}}function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);var parent;if(values instanceof Promise){parent=values;promise._propagateFrom(parent,1|4)}this._values=values;this._length=0;this._totalResolved=0;this._init(undefined,-2)}PromiseArray.prototype.length=function(){return this._length};PromiseArray.prototype.promise=function(){return this._promise};PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();this._values=values;if(values._isFulfilled()){values=values._value();if(!isArray(values)){var err=new Promise.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");this.__hardReject__(err);return}}else if(values._isPending()){values._then(init,this._reject,undefined,this,resolveValueIfEmpty);return}else{this._reject(values._reason());return}}else if(!isArray(values)){this._promise._reject(apiRejection("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());return}if(values.length===0){if(resolveValueIfEmpty===-5){this._resolveEmptyArray()}else{this._resolve(toResolutionValue(resolveValueIfEmpty))}return}var len=this.getActualLength(values.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var promise=this._promise;for(var i=0;i<len;++i){var isResolved=this._isResolved();var maybePromise=tryConvertToPromise(values[i],promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();if(isResolved){maybePromise._unsetRejectionIsUnhandled()}else if(maybePromise._isPending()){maybePromise._proxyPromiseArray(this,i)}else if(maybePromise._isFulfilled()){this._promiseFulfilled(maybePromise._value(),i)}else{this._promiseRejected(maybePromise._reason(),i)}}else if(!isResolved){this._promiseFulfilled(maybePromise,i)}}};PromiseArray.prototype._isResolved=function(){return this._values===null};PromiseArray.prototype._resolve=function(value){this._values=null;this._promise._fulfill(value)};PromiseArray.prototype.__hardReject__=PromiseArray.prototype._reject=function(reason){this._values=null;this._promise._rejectCallback(reason,false,true)};PromiseArray.prototype._promiseProgressed=function(progressValue,index){this._promise._progress({index:index,value:progressValue})};PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values)}};PromiseArray.prototype._promiseRejected=function(reason,index){this._totalResolved++;this._reject(reason)};PromiseArray.prototype.shouldCopyValues=function(){return true};PromiseArray.prototype.getActualLength=function(len){return len};return PromiseArray}},{"./util.js":38}],25:[function(_dereq_,module,exports){"use strict";var util=_dereq_("./util.js");var maybeWrapAsError=util.maybeWrapAsError;var errors=_dereq_("./errors.js");var TimeoutError=errors.TimeoutError;var OperationalError=errors.OperationalError;var haveGetters=util.haveGetters;var es5=_dereq_("./es5.js");function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype}var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!rErrorKey.test(key)){ret[key]=obj[key]}}return ret}util.markAsOriginatingFromRejection(obj);return obj}function nodebackForPromise(promise){return function(err,value){if(promise===null)return;if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped);promise._reject(wrapped)}else if(arguments.length>2){var $_len=arguments.length;var args=new Array($_len-1);for(var $_i=1;$_i<$_len;++$_i){args[$_i-1]=arguments[$_i]}promise._fulfill(args)}else{promise._fulfill(value)}promise=null}}var PromiseResolver;if(!haveGetters){PromiseResolver=function(promise){this.promise=promise;this.asCallback=nodebackForPromise(promise);this.callback=this.asCallback}}else{PromiseResolver=function(promise){this.promise=promise}}if(haveGetters){var prop={get:function(){return nodebackForPromise(this.promise)}};es5.defineProperty(PromiseResolver.prototype,"asCallback",prop);es5.defineProperty(PromiseResolver.prototype,"callback",prop)}PromiseResolver._nodebackForPromise=nodebackForPromise;PromiseResolver.prototype.toString=function(){return"[object PromiseResolver]"};PromiseResolver.prototype.resolve=PromiseResolver.prototype.fulfill=function(value){if(!(this instanceof PromiseResolver)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}this.promise._resolveCallback(value)};PromiseResolver.prototype.reject=function(reason){if(!(this instanceof PromiseResolver)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}this.promise._rejectCallback(reason)};PromiseResolver.prototype.progress=function(value){if(!(this instanceof PromiseResolver)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}this.promise._progress(value)};PromiseResolver.prototype.cancel=function(err){this.promise.cancel(err)};PromiseResolver.prototype.timeout=function(){this.reject(new TimeoutError("timeout"))};PromiseResolver.prototype.isResolved=function(){return this.promise.isResolved()};PromiseResolver.prototype.toJSON=function(){return this.promise.toJSON()};module.exports=PromiseResolver},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var THIS={};var util=_dereq_("./util.js");var nodebackForPromise=_dereq_("./promise_resolver.js")._nodebackForPromise;var withAppended=util.withAppended;var maybeWrapAsError=util.maybeWrapAsError;var canEvaluate=util.canEvaluate;var TypeError=_dereq_("./errors").TypeError;var defaultSuffix="Async";var defaultPromisified={__isPromisified__:true};var noCopyPropsPattern=/^(?:length|name|arguments|caller|callee|prototype|__isPromisified__)$/;var defaultFilter=function(name,func){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&!util.isClass(func)};function propsFilter(key){return!noCopyPropsPattern.test(key)}function isPromisified(fn){try{return fn.__isPromisified__===true}catch(e){return false}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return val?isPromisified(val):false}function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key)){var keyWithoutAsyncSuffix=key.replace(suffixRegexp,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===keyWithoutAsyncSuffix){throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",suffix))}}}}}function promisifiableMethods(obj,suffix,suffixRegexp,filter){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var value=obj[key];var passesDefaultFilter=filter===defaultFilter?true:defaultFilter(key,value,obj);if(typeof value==="function"&&!isPromisified(value)&&!hasPromisified(obj,key,suffix)&&filter(key,value,obj,passesDefaultFilter)){ret.push(key,value)}}checkValid(ret,suffix,suffixRegexp);return ret}var escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$")};var makeNodePromisifiedEval;if(!true){var switchCaseArgumentOrder=function(likelyArgumentCount){var ret=[likelyArgumentCount];var min=Math.max(0,likelyArgumentCount-1-3);for(var i=likelyArgumentCount-1;i>=min;--i){ret.push(i)}for(var i=likelyArgumentCount+1;i<=3;++i){ret.push(i)}return ret};var argumentSequence=function(argumentCount){return util.filledRange(argumentCount,"_arg","")};var parameterDeclaration=function(parameterCount){return util.filledRange(Math.max(parameterCount,3),"_arg","")};var parameterCount=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0)}return 0};makeNodePromisifiedEval=function(callback,receiver,originalName,fn){var newParameterCount=Math.max(0,parameterCount(fn)-1);var argumentOrder=switchCaseArgumentOrder(newParameterCount);var shouldProxyThis=typeof callback==="string"||receiver===THIS;function generateCallForArgumentCount(count){var args=argumentSequence(count).join(", ");var comma=count>0?", ":"";var ret;if(shouldProxyThis){ret="ret = callback.call(this, {{args}}, nodeback); break;\n"}else{ret=receiver===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n"}return ret.replace("{{args}}",args).replace(", ",comma)}function generateArgumentSwitchCase(){var ret="";for(var i=0;i<argumentOrder.length;++i){ret+="case "+argumentOrder[i]+":"+generateCallForArgumentCount(argumentOrder[i])}ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",shouldProxyThis?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n");return ret}var getFunctionCode=typeof callback==="string"?"this != null ? this['"+callback+"'] : fn":"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("Parameters",parameterDeclaration(newParameterCount)).replace("[CodeForSwitchCase]",generateArgumentSwitchCase()).replace("[GetFunctionCode]",getFunctionCode))(Promise,fn,receiver,withAppended,maybeWrapAsError,nodebackForPromise,util.tryCatch,util.errorObj,INTERNAL)}}function makeNodePromisifiedClosure(callback,receiver,_,fn){var defaultThis=function(){return this}();var method=callback;if(typeof method==="string"){callback=fn}function promisified(){var _receiver=receiver;if(receiver===THIS)_receiver=this;var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb=typeof method==="string"&&this!==defaultThis?this[method]:callback;var fn=nodebackForPromise(promise);try{cb.apply(_receiver,withAppended(arguments,fn))}catch(e){promise._rejectCallback(maybeWrapAsError(e),true,true)}return promise}promisified.__isPromisified__=true;return promisified}var makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;function promisifyAll(obj,suffix,filter,promisifier){var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$");var methods=promisifiableMethods(obj,suffix,suffixRegexp,filter);for(var i=0,len=methods.length;i<len;i+=2){var key=methods[i];var fn=methods[i+1];var promisifiedKey=key+suffix;obj[promisifiedKey]=promisifier===makeNodePromisified?makeNodePromisified(key,THIS,key,fn,suffix):promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix)})}util.toFastProperties(obj);return obj}function promisify(callback,receiver){return makeNodePromisified(callback,receiver,undefined,callback)}Promise.promisify=function(fn,receiver){if(typeof fn!=="function"){throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}if(isPromisified(fn)){return fn}var ret=promisify(fn,arguments.length<2?THIS:receiver);util.copyDescriptors(fn,ret,propsFilter);return ret};Promise.promisifyAll=function(target,options){if(typeof target!=="function"&&typeof target!=="object"){throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");

}options=Object(options);var suffix=options.suffix;if(typeof suffix!=="string")suffix=defaultSuffix;var filter=options.filter;if(typeof filter!=="function")filter=defaultFilter;var promisifier=options.promisifier;if(typeof promisifier!=="function")promisifier=makeNodePromisified;if(!util.isIdentifier(suffix)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n")}var keys=util.inheritedDataKeys(target);for(var i=0;i<keys.length;++i){var value=target[keys[i]];if(keys[i]!=="constructor"&&util.isClass(value)){promisifyAll(value.prototype,suffix,filter,promisifier);promisifyAll(value,suffix,filter,promisifier)}}return promisifyAll(target,suffix,filter,promisifier)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){var util=_dereq_("./util.js");var isObject=util.isObject;var es5=_dereq_("./es5.js");function PropertiesPromiseArray(obj){var keys=es5.keys(obj);var len=keys.length;var values=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];values[i]=obj[key];values[i+len]=key}this.constructor$(values)}util.inherits(PropertiesPromiseArray,PromiseArray);PropertiesPromiseArray.prototype._init=function(){this._init$(undefined,-3)};PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val={};var keyOffset=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+keyOffset]]=this._values[i]}this._resolve(val)}};PropertiesPromiseArray.prototype._promiseProgressed=function(value,index){this._promise._progress({key:this._values[index+this.length()],value:value})};PropertiesPromiseArray.prototype.shouldCopyValues=function(){return false};PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1};function props(promises){var ret;var castValue=tryConvertToPromise(promises);if(!isObject(castValue)){return apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}else if(castValue instanceof Promise){ret=castValue._then(Promise.props,undefined,undefined,undefined,undefined)}else{ret=new PropertiesPromiseArray(castValue).promise()}if(castValue instanceof Promise){ret._propagateFrom(castValue,4)}return ret}Promise.prototype.props=function(){return props(this)};Promise.props=function(promises){return props(promises)}}},{"./es5.js":14,"./util.js":38}],28:[function(_dereq_,module,exports){"use strict";function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j){dst[j+dstIndex]=src[j+srcIndex];src[j+srcIndex]=void 0}}function Queue(capacity){this._capacity=capacity;this._length=0;this._front=0}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size};Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=this._front+length&this._capacity-1;this[i]=arg;this._length=length+1};Queue.prototype._unshiftOne=function(value){var capacity=this._capacity;this._checkCapacity(this.length()+1);var front=this._front;var i=(front-1&capacity-1^capacity)-capacity;this[i]=value;this._front=i;this._length=this.length()+1};Queue.prototype.unshift=function(fn,receiver,arg){this._unshiftOne(arg);this._unshiftOne(receiver);this._unshiftOne(fn)};Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length)){this._pushOne(fn);this._pushOne(receiver);this._pushOne(arg);return}var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[j+0&wrapMask]=fn;this[j+1&wrapMask]=receiver;this[j+2&wrapMask]=arg;this._length=length};Queue.prototype.shift=function(){var front=this._front,ret=this[front];this[front]=undefined;this._front=front+1&this._capacity-1;this._length--;return ret};Queue.prototype.length=function(){return this._length};Queue.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1)}};Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front;var length=this._length;var moveItemsCount=front+length&oldCapacity-1;arrayMove(this,0,this,oldCapacity,moveItemsCount)};module.exports=Queue},{}],29:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var isArray=_dereq_("./util.js").isArray;var raceLater=function(promise){return promise.then(function(array){return race(array,promise)})};function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise){return raceLater(maybePromise)}else if(!isArray(promises)){return apiRejection("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")}var ret=new Promise(INTERNAL);if(parent!==undefined){ret._propagateFrom(parent,4|1)}var fulfill=ret._fulfill;var reject=ret._reject;for(var i=0,len=promises.length;i<len;++i){var val=promises[i];if(val===undefined&&!(i in promises)){continue}Promise.cast(val)._then(fulfill,reject,undefined,ret,null)}return ret}Promise.race=function(promises){return race(promises,undefined)};Promise.prototype.race=function(){return race(this,undefined)}}},{"./util.js":38}],30:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL){var async=_dereq_("./async.js");var util=_dereq_("./util.js");var tryCatch=util.tryCatch;var errorObj=util.errorObj;function ReductionPromiseArray(promises,fn,accum,_each){this.constructor$(promises);this._promise._captureStackTrace();this._preservedValues=_each===INTERNAL?[]:null;this._zerothIsAccum=accum===undefined;this._gotAccum=false;this._reducingIndex=this._zerothIsAccum?1:0;this._valuesPhase=undefined;var maybePromise=tryConvertToPromise(accum,this._promise);var rejected=false;var isPromise=maybePromise instanceof Promise;if(isPromise){maybePromise=maybePromise._target();if(maybePromise._isPending()){maybePromise._proxyPromiseArray(this,-1)}else if(maybePromise._isFulfilled()){accum=maybePromise._value();this._gotAccum=true}else{this._reject(maybePromise._reason());rejected=true}}if(!(isPromise||this._zerothIsAccum))this._gotAccum=true;this._callback=fn;this._accum=accum;if(!rejected)async.invoke(init,this,undefined)}function init(){this._init$(undefined,-5)}util.inherits(ReductionPromiseArray,PromiseArray);ReductionPromiseArray.prototype._init=function(){};ReductionPromiseArray.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum){this._resolve(this._preservedValues!==null?[]:this._accum)}};ReductionPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values;values[index]=value;var length=this.length();var preservedValues=this._preservedValues;var isEach=preservedValues!==null;var gotAccum=this._gotAccum;var valuesPhase=this._valuesPhase;var valuesPhaseIndex;if(!valuesPhase){valuesPhase=this._valuesPhase=new Array(length);for(valuesPhaseIndex=0;valuesPhaseIndex<length;++valuesPhaseIndex){valuesPhase[valuesPhaseIndex]=0}}valuesPhaseIndex=valuesPhase[index];if(index===0&&this._zerothIsAccum){this._accum=value;this._gotAccum=gotAccum=true;valuesPhase[index]=valuesPhaseIndex===0?1:2}else if(index===-1){this._accum=value;this._gotAccum=gotAccum=true}else{if(valuesPhaseIndex===0){valuesPhase[index]=1}else{valuesPhase[index]=2;this._accum=value}}if(!gotAccum)return;var callback=this._callback;var receiver=this._promise._boundTo;var ret;for(var i=this._reducingIndex;i<length;++i){valuesPhaseIndex=valuesPhase[i];if(valuesPhaseIndex===2){this._reducingIndex=i+1;continue}if(valuesPhaseIndex!==1)return;value=values[i];this._promise._pushContext();if(isEach){preservedValues.push(value);ret=tryCatch(callback).call(receiver,value,i,length)}else{ret=tryCatch(callback).call(receiver,this._accum,value,i,length)}this._promise._popContext();if(ret===errorObj)return this._reject(ret.e);var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();if(maybePromise._isPending()){valuesPhase[i]=4;return maybePromise._proxyPromiseArray(this,i)}else if(maybePromise._isFulfilled()){ret=maybePromise._value()}else{return this._reject(maybePromise._reason())}}this._reducingIndex=i+1;this._accum=ret}this._resolve(isEach?preservedValues:this._accum)};function reduce(promises,fn,initialValue,_each){if(typeof fn!=="function")return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise()}Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null)};Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each)}}},{"./async.js":2,"./util.js":38}],31:[function(_dereq_,module,exports){"use strict";var schedule;var noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(_dereq_("./util.js").isNode){var version=process.versions.node.split(".").map(Number);schedule=version[0]===0&&version[1]>10||version[0]>0?global.setImmediate:process.nextTick;if(!schedule){if(typeof setImmediate!=="undefined"){schedule=setImmediate}else if(typeof setTimeout!=="undefined"){schedule=setTimeout}else{schedule=noAsyncScheduler}}}else if(typeof MutationObserver!=="undefined"){schedule=function(fn){var div=document.createElement("div");var observer=new MutationObserver(fn);observer.observe(div,{attributes:true});return function(){div.classList.toggle("foo")}};schedule.isStatic=true}else if(typeof setImmediate!=="undefined"){schedule=function(fn){setImmediate(fn)}}else if(typeof setTimeout!=="undefined"){schedule=function(fn){setTimeout(fn,0)}}else{schedule=noAsyncScheduler}module.exports=schedule},{"./util.js":38}],32:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray){var PromiseInspection=Promise.PromiseInspection;var util=_dereq_("./util.js");function SettledPromiseArray(values){this.constructor$(values)}util.inherits(SettledPromiseArray,PromiseArray);SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values)}};SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection;ret._bitField=268435456;ret._settledValue=value;this._promiseResolved(index,ret)};SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection;ret._bitField=134217728;ret._settledValue=reason;this._promiseResolved(index,ret)};Promise.settle=function(promises){return new SettledPromiseArray(promises).promise()};Promise.prototype.settle=function(){return new SettledPromiseArray(this).promise()}}},{"./util.js":38}],33:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){var util=_dereq_("./util.js");var RangeError=_dereq_("./errors.js").RangeError;var AggregateError=_dereq_("./errors.js").AggregateError;var isArray=util.isArray;function SomePromiseArray(values){this.constructor$(values);this._howMany=0;this._unwrap=false;this._initialized=false}util.inherits(SomePromiseArray,PromiseArray);SomePromiseArray.prototype._init=function(){if(!this._initialized){return}if(this._howMany===0){this._resolve([]);return}this._init$(undefined,-5);var isArrayResolved=isArray(this._values);if(!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()))}};SomePromiseArray.prototype.init=function(){this._initialized=true;this._init()};SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=true};SomePromiseArray.prototype.howMany=function(){return this._howMany};SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count};SomePromiseArray.prototype._promiseFulfilled=function(value){this._addFulfilled(value);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0])}else{this._resolve(this._values)}}};SomePromiseArray.prototype._promiseRejected=function(reason){this._addRejected(reason);if(this.howMany()>this._canPossiblyFulfill()){var e=new AggregateError;for(var i=this.length();i<this._values.length;++i){e.push(this._values[i])}this._reject(e)}};SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved};SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length()};SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason)};SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value};SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message)};SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function some(promises,howMany){if((howMany|0)!==howMany||howMany<0){return apiRejection("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n")}var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(howMany);ret.init();return promise}Promise.some=function(promises,howMany){return some(promises,howMany)};Promise.prototype.some=function(howMany){return some(this,howMany)};Promise._SomePromiseArray=SomePromiseArray}},{"./errors.js":13,"./util.js":38}],34:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function PromiseInspection(promise){if(promise!==undefined){promise=promise._target();this._bitField=promise._bitField;this._settledValue=promise._settledValue}else{this._bitField=0;this._settledValue=undefined}}PromiseInspection.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n")}return this._settledValue};PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n")}return this._settledValue};PromiseInspection.prototype.isFulfilled=Promise.prototype._isFulfilled=function(){return(this._bitField&268435456)>0};PromiseInspection.prototype.isRejected=Promise.prototype._isRejected=function(){return(this._bitField&134217728)>0};PromiseInspection.prototype.isPending=Promise.prototype._isPending=function(){return(this._bitField&402653184)===0};PromiseInspection.prototype.isResolved=Promise.prototype._isResolved=function(){return(this._bitField&402653184)>0};Promise.prototype.isPending=function(){return this._target()._isPending()};Promise.prototype.isRejected=function(){return this._target()._isRejected()};Promise.prototype.isFulfilled=function(){return this._target()._isFulfilled()};Promise.prototype.isResolved=function(){return this._target()._isResolved()};Promise.prototype._value=function(){return this._settledValue};Promise.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue};Promise.prototype.value=function(){var target=this._target();if(!target.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n")}return target._settledValue};Promise.prototype.reason=function(){var target=this._target();if(!target.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n")}target._unsetRejectionIsUnhandled();return target._settledValue};Promise.PromiseInspection=PromiseInspection}},{}],35:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var util=_dereq_("./util.js");var errorObj=util.errorObj;var isObject=util.isObject;function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise){return obj}else if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);obj._then(ret._fulfillUnchecked,ret._rejectUncheckedCheckError,ret._progressUnchecked,ret,null);return ret}var then=util.tryCatch(getThen)(obj);if(then===errorObj){if(context)context._pushContext();var ret=Promise.reject(then.e);if(context)context._popContext();return ret}else if(typeof then==="function"){return doThenable(obj,then,context)}}return obj}function getThen(obj){return obj.then}var hasProp={}.hasOwnProperty;function isAnyBluebirdPromise(obj){return hasProp.call(obj,"_promise0")}function doThenable(x,then,context){var promise=new Promise(INTERNAL);var ret=promise;if(context)context._pushContext();promise._captureStackTrace();if(context)context._popContext();var synchronous=true;var result=util.tryCatch(then).call(x,resolveFromThenable,rejectFromThenable,progressFromThenable);synchronous=false;if(promise&&result===errorObj){promise._rejectCallback(result.e,true,true);promise=null}function resolveFromThenable(value){if(!promise)return;if(x===value){promise._rejectCallback(Promise._makeSelfResolutionError(),false,true)}else{promise._resolveCallback(value)}promise=null}function rejectFromThenable(reason){if(!promise)return;promise._rejectCallback(reason,synchronous,true);promise=null}function progressFromThenable(value){if(!promise)return;if(typeof promise._progress==="function"){promise._progress(value)}}return ret}return tryConvertToPromise}},{"./util.js":38}],36:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var util=_dereq_("./util.js");var TimeoutError=Promise.TimeoutError;var afterTimeout=function(promise,message){if(!promise.isPending())return;if(typeof message!=="string"){message="operation timed out"}var err=new TimeoutError(message);util.markAsOriginatingFromRejection(err);promise._attachExtraTrace(err);promise._cancel(err)};var afterValue=function(value){return delay(+this).thenReturn(value)};var delay=Promise.delay=function(value,ms){if(ms===undefined){ms=value;value=undefined;var ret=new Promise(INTERNAL);setTimeout(function(){ret._fulfill()},ms);return ret}ms=+ms;return Promise.resolve(value)._then(afterValue,null,null,ms,undefined)};Promise.prototype.delay=function(ms){return delay(this,ms)};function successClear(value){var handle=this;if(handle instanceof Number)handle=+handle;clearTimeout(handle);return value}function failureClear(reason){var handle=this;if(handle instanceof Number)handle=+handle;clearTimeout(handle);throw reason}Promise.prototype.timeout=function(ms,message){ms=+ms;var ret=this.then().cancellable();ret._cancellationParent=this;var handle=setTimeout(function timeoutTimeout(){afterTimeout(ret,message)},ms);return ret._then(successClear,failureClear,undefined,handle,undefined)}}},{"./util.js":38}],37:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext){var TypeError=_dereq_("./errors.js").TypeError;var inherits=_dereq_("./util.js").inherits;var PromiseInspection=Promise.PromiseInspection;function inspectionMapper(inspections){var len=inspections.length;for(var i=0;i<len;++i){var inspection=inspections[i];if(inspection.isRejected()){return Promise.reject(inspection.error())}inspections[i]=inspection._settledValue}return inspections}function thrower(e){setTimeout(function(){throw e},0)}function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);if(maybePromise!==thenable&&typeof thenable._isDisposable==="function"&&typeof thenable._getDisposer==="function"&&thenable._isDisposable()){maybePromise._setDisposable(thenable._getDisposer())}return maybePromise}function dispose(resources,inspection){var i=0;var len=resources.length;var ret=Promise.defer();function iterator(){if(i>=len)return ret.resolve();var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise)}catch(e){return thrower(e)}if(maybePromise instanceof Promise){return maybePromise._then(iterator,thrower,null,null,null)}}iterator()}iterator();return ret.promise}function disposerSuccess(value){var inspection=new PromiseInspection;inspection._settledValue=value;inspection._bitField=268435456;return dispose(this,inspection).thenReturn(value)}function disposerFail(reason){var inspection=new PromiseInspection;inspection._settledValue=reason;inspection._bitField=134217728;return dispose(this,inspection).thenThrow(reason)}function Disposer(data,promise,context){this._data=data;this._promise=promise;this._context=context}Disposer.prototype.data=function(){return this._data};Disposer.prototype.promise=function(){return this._promise};Disposer.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value()}return null};Disposer.prototype.tryDispose=function(inspection){var resource=this.resource();var context=this._context;if(context!==undefined)context._pushContext();var ret=resource!==null?this.doDispose(resource,inspection):null;if(context!==undefined)context._popContext();this._promise._unsetDisposable();this._data=null;return ret};Disposer.isDisposer=function(d){return d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function"};function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context)}inherits(FunctionDisposer,Disposer);FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection)};function maybeUnwrapDisposer(value){if(Disposer.isDisposer(value)){this.resources[this.index]._setDisposable(value);return value.promise()}return value}Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var fn=arguments[len-1];if(typeof fn!=="function")return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");len--;var resources=new Array(len);for(var i=0;i<len;++i){var resource=arguments[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise();resource._setDisposable(disposer)}else{var maybePromise=tryConvertToPromise(resource);if(maybePromise instanceof Promise){resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},undefined)}}resources[i]=resource}var promise=Promise.settle(resources).then(inspectionMapper).then(function(vals){promise._pushContext();var ret;try{ret=fn.apply(undefined,vals)}finally{promise._popContext()}return ret})._then(disposerSuccess,disposerFail,undefined,resources,undefined);resources.promise=promise;return promise};Promise.prototype._setDisposable=function(disposer){this._bitField=this._bitField|262144;this._disposer=disposer};Promise.prototype._isDisposable=function(){return(this._bitField&262144)>0};Promise.prototype._getDisposer=function(){return this._disposer};Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&~262144;this._disposer=undefined};Promise.prototype.disposer=function(fn){if(typeof fn==="function"){return new FunctionDisposer(fn,this,createContext())}throw new TypeError}}},{"./errors.js":13,"./util.js":38}],38:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5.js");var canEvaluate=typeof navigator=="undefined";var haveGetters=function(){try{var o={};es5.defineProperty(o,"f",{get:function(){return 3}});return o.f===3}catch(e){return false}}();var errorObj={e:{}};var tryCatchTarget;function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){errorObj.e=e;return errorObj}}function tryCatch(fn){tryCatchTarget=fn;return tryCatcher}var inherits=function(Child,Parent){var hasProp={}.hasOwnProperty;function T(){this.constructor=Child;this.constructor$=Parent;for(var propertyName in Parent.prototype){if(hasProp.call(Parent.prototype,propertyName)&&propertyName.charAt(propertyName.length-1)!=="$"){this[propertyName+"$"]=Parent.prototype[propertyName]}}}T.prototype=Parent.prototype;Child.prototype=new T;return Child.prototype};function isPrimitive(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number"}function isObject(value){return!isPrimitive(value)}function maybeWrapAsError(maybeError){if(!isPrimitive(maybeError))return maybeError;return new Error(safeToString(maybeError))}function withAppended(target,appendee){var len=target.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=target[i]}ret[i]=appendee;return ret}function getDataPropertyOrDefault(obj,key,defaultValue){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:defaultValue}}else{return{}.hasOwnProperty.call(obj,key)?obj[key]:undefined}}function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,descriptor);return obj}var wrapsPrimitiveReceiver=function(){return this!=="string"}.call("string");function thrower(r){throw r}var inheritedDataKeys=function(){if(es5.isES5){var oProto=Object.prototype;var getKeys=Object.getOwnPropertyNames;return function(obj){var ret=[];var visitedKeys=Object.create(null);while(obj!=null&&obj!==oProto){var keys;try{keys=getKeys(obj)}catch(e){return ret}for(var i=0;i<keys.length;++i){var key=keys[i];if(visitedKeys[key])continue;visitedKeys[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key)}}obj=es5.getPrototypeOf(obj)}return ret}}else{return function(obj){var ret=[];for(var key in obj){ret.push(key)}return ret}}}();function isClass(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);if(es5.isES5)return keys.length>1;return keys.length>0&&!(keys.length===1&&keys[0]==="constructor")}return false}catch(e){return false}}function toFastProperties(obj){function f(){}f.prototype=obj;var l=8;while(l--)new f;return obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(str){return rident.test(str)}function filledRange(count,prefix,suffix){var ret=new Array(count);for(var i=0;i<count;++i){ret[i]=prefix+i+suffix}return ret}function safeToString(obj){try{return obj+""}catch(e){return"[no string representation]"}}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true)}catch(ignore){}}function originatesFromRejection(e){if(e==null)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||e["isOperational"]===true}function canAttachTrace(obj){return obj instanceof Error&&es5.propertyIsWritable(obj,"stack")}var ensureErrorObject=function(){if(!("stack"in new Error)){return function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value))}catch(err){return err}}}else{return function(value){if(canAttachTrace(value))return value;return new Error(safeToString(value))}}}();function classString(obj){return{}.toString.call(obj)}function copyDescriptors(from,to,filter){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(filter(key)){es5.defineProperty(to,key,es5.getDescriptor(from,key))}}}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,haveGetters:haveGetters,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,wrapsPrimitiveReceiver:wrapsPrimitiveReceiver,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]"};try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5.js":14}],39:[function(_dereq_,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener);

}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}]},{},[4])(4)});if(typeof window!=="undefined"&&window!==null){window.P=window.Promise}else if(typeof self!=="undefined"&&self!==null){self.P=self.Promise}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:35}],33:[function(require,module,exports){},{}],34:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],35:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]()}len=queue.length}draining=false}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0)}};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],36:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^ -~]/,regexSeparators=/\x2E|\u3002|\uFF0E|\uFF61/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;while(length--){array[length]=fn(array[length])}return array}function mapDomain(string,fn){return map(string.split(regexSeparators),fn).join(".")}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(domain){return mapDomain(domain,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(domain){return mapDomain(domain,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.2.4",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],37:[function(require,module,exports){require("./shim");require("./modules/core.dict");require("./modules/core.iter-helpers");require("./modules/core.$for");require("./modules/core.delay");require("./modules/core.function.part");require("./modules/core.object");require("./modules/core.array.turn");require("./modules/core.number.iterator");require("./modules/core.number.math");require("./modules/core.string.escape-html");require("./modules/core.date");require("./modules/core.global");require("./modules/core.log");module.exports=require("./modules/$").core},{"./modules/$":58,"./modules/core.$for":73,"./modules/core.array.turn":74,"./modules/core.date":75,"./modules/core.delay":76,"./modules/core.dict":77,"./modules/core.function.part":78,"./modules/core.global":79,"./modules/core.iter-helpers":80,"./modules/core.log":81,"./modules/core.number.iterator":82,"./modules/core.number.math":83,"./modules/core.object":84,"./modules/core.string.escape-html":85,"./shim":134}],38:[function(require,module,exports){var $=require("./$");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=$.toObject($this),length=$.toLength(O.length),index=$.toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index}return!IS_INCLUDES&&-1}}},{"./$":58}],39:[function(require,module,exports){var $=require("./$"),ctx=require("./$.ctx");module.exports=function(TYPE){var IS_MAP=TYPE==1,IS_FILTER=TYPE==2,IS_SOME=TYPE==3,IS_EVERY=TYPE==4,IS_FIND_INDEX=TYPE==6,NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that){var O=Object($.assertDefined($this)),self=$.ES5Object(O),f=ctx(callbackfn,that,3),length=$.toLength(self.length),index=0,result=IS_MAP?Array(length):IS_FILTER?[]:undefined,val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./$":58,"./$.ctx":47}],40:[function(require,module,exports){var $=require("./$");function assert(condition,msg1,msg2){if(!condition)throw TypeError(msg2?msg1+msg2:msg1)}assert.def=$.assertDefined;assert.fn=function(it){if(!$.isFunction(it))throw TypeError(it+" is not a function!");return it};assert.obj=function(it){if(!$.isObject(it))throw TypeError(it+" is not an object!");return it};assert.inst=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it};module.exports=assert},{"./$":58}],41:[function(require,module,exports){var $=require("./$"),enumKeys=require("./$.enum-keys");module.exports=Object.assign||function assign(target,source){var T=Object($.assertDefined(target)),l=arguments.length,i=1;while(l>i){var S=$.ES5Object(arguments[i++]),keys=enumKeys(S),length=keys.length,j=0,key;while(length>j)T[key=keys[j++]]=S[key]}return T}},{"./$":58,"./$.enum-keys":50}],42:[function(require,module,exports){var $=require("./$"),TAG=require("./$.wks")("toStringTag"),toString={}.toString;function cof(it){return toString.call(it).slice(8,-1)}cof.classof=function(it){var O,T;return it==undefined?it===undefined?"Undefined":"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:cof(O)};cof.set=function(it,tag,stat){if(it&&!$.has(it=stat?it:it.prototype,TAG))$.hide(it,TAG,tag)};module.exports=cof},{"./$":58,"./$.wks":72}],43:[function(require,module,exports){"use strict";var $=require("./$"),ctx=require("./$.ctx"),safe=require("./$.uid").safe,assert=require("./$.assert"),forOf=require("./$.for-of"),step=require("./$.iter").step,has=$.has,set=$.set,isObject=$.isObject,hide=$.hide,isFrozen=Object.isFrozen||$.core.Object.isFrozen,ID=safe("id"),O1=safe("O1"),LAST=safe("last"),FIRST=safe("first"),ITER=safe("iter"),SIZE=$.DESC?safe("size"):"size",id=0;function fastKey(it,create){if(!isObject(it))return(typeof it=="string"?"S":"P")+it;if(isFrozen(it))return"F";if(!has(it,ID)){if(!create)return"E";hide(it,ID,++id)}return"O"+it[ID]}function getEntry(that,key){var index=fastKey(key),entry;if(index!="F")return that[O1][index];for(entry=that[FIRST];entry;entry=entry.n){if(entry.k==key)return entry}}module.exports={getConstructor:function(NAME,IS_MAP,ADDER){function C(){var that=assert.inst(this,C,NAME),iterable=arguments[0];set(that,O1,$.create(null));set(that,SIZE,0);set(that,LAST,undefined);set(that,FIRST,undefined);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)}$.mix(C.prototype,{clear:function clear(){for(var that=this,data=that[O1],entry=that[FIRST];entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that[FIRST]=that[LAST]=undefined;that[SIZE]=0},delete:function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that[O1][entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that[FIRST]==entry)that[FIRST]=next;if(that[LAST]==entry)that[LAST]=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){var f=ctx(callbackfn,arguments[1],3),entry;while(entry=entry?entry.n:this[FIRST]){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(this,key)}});if($.DESC)$.setDesc(C.prototype,"size",{get:function(){return assert.def(this[SIZE])}});return C},def:function(that,key,value){var entry=getEntry(that,key),prev,index;if(entry){entry.v=value}else{that[LAST]=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that[LAST],n:undefined,r:false};if(!that[FIRST])that[FIRST]=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!="F")that[O1][index]=entry}return that},getEntry:getEntry,setIter:function(C,NAME,IS_MAP){require("./$.iter-define")(C,NAME,function(iterated,kind){set(this,ITER,{o:iterated,k:kind})},function(){var iter=this[ITER],kind=iter.k,entry=iter.l;while(entry&&entry.r)entry=entry.p;if(!iter.o||!(iter.l=entry=entry?entry.n:iter.o[FIRST])){iter.o=undefined;return step(1)}if(kind=="keys")return step(0,entry.k);if(kind=="values")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true)}}},{"./$":58,"./$.assert":40,"./$.ctx":47,"./$.for-of":51,"./$.iter":57,"./$.iter-define":55,"./$.uid":70}],44:[function(require,module,exports){var $def=require("./$.def"),forOf=require("./$.for-of");module.exports=function(NAME){$def($def.P,NAME,{toJSON:function toJSON(){var arr=[];forOf(this,false,arr.push,arr);return arr}})}},{"./$.def":48,"./$.for-of":51}],45:[function(require,module,exports){"use strict";var $=require("./$"),safe=require("./$.uid").safe,assert=require("./$.assert"),forOf=require("./$.for-of"),_has=$.has,isObject=$.isObject,hide=$.hide,isFrozen=Object.isFrozen||$.core.Object.isFrozen,id=0,ID=safe("id"),WEAK=safe("weak"),LEAK=safe("leak"),method=require("./$.array-methods"),find=method(5),findIndex=method(6);function findFrozen(store,key){return find(store.array,function(it){return it[0]===key})}function leakStore(that){return that[LEAK]||hide(that,LEAK,{array:[],get:function(key){var entry=findFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findFrozen(this,key)},set:function(key,value){var entry=findFrozen(this,key);if(entry)entry[1]=value;else this.array.push([key,value])},delete:function(key){var index=findIndex(this.array,function(it){return it[0]===key});if(~index)this.array.splice(index,1);return!!~index}})[LEAK]}module.exports={getConstructor:function(NAME,IS_MAP,ADDER){function C(){$.set(assert.inst(this,C,NAME),ID,id++);var iterable=arguments[0];if(iterable!=undefined)forOf(iterable,IS_MAP,this[ADDER],this)}$.mix(C.prototype,{delete:function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this)["delete"](key);return _has(key,WEAK)&&_has(key[WEAK],this[ID])&&delete key[WEAK][this[ID]]},has:function has(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this).has(key);return _has(key,WEAK)&&_has(key[WEAK],this[ID])}});return C},def:function(that,key,value){if(isFrozen(assert.obj(key))){leakStore(that).set(key,value)}else{_has(key,WEAK)||hide(key,WEAK,{});key[WEAK][that[ID]]=value}return that},leakStore:leakStore,WEAK:WEAK,ID:ID}},{"./$":58,"./$.array-methods":39,"./$.assert":40,"./$.for-of":51,"./$.uid":70}],46:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def"),BUGGY=require("./$.iter").BUGGY,forOf=require("./$.for-of"),species=require("./$.species"),assertInstance=require("./$.assert").inst;module.exports=function(NAME,methods,common,IS_MAP,IS_WEAK){var Base=$.g[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={};function fixMethod(KEY,CHAIN){var method=proto[KEY];if($.FW)proto[KEY]=function(a,b){var result=method.call(this,a===0?0:a,b);return CHAIN?this:result}}if(!$.isFunction(C)||!(IS_WEAK||!BUGGY&&proto.forEach&&proto.entries)){C=common.getConstructor(NAME,IS_MAP,ADDER);$.mix(C.prototype,methods)}else{var inst=new C,chain=inst[ADDER](IS_WEAK?{}:-0,1),buggyZero;if(!require("./$.iter-detect")(function(iter){new C(iter)})){C=function(){assertInstance(this,C,NAME);var that=new Base,iterable=arguments[0];if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that};C.prototype=proto;if($.FW)proto.constructor=C}IS_WEAK||inst.forEach(function(val,key){buggyZero=1/key===-Infinity});if(buggyZero){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(buggyZero||chain!==inst)fixMethod(ADDER,true)}require("./$.cof").set(C,NAME);O[NAME]=C;$def($def.G+$def.W+$def.F*(C!=Base),O);species(C);species($.core[NAME]);if(!IS_WEAK)common.setIter(C,NAME,IS_MAP);return C}},{"./$":58,"./$.assert":40,"./$.cof":42,"./$.def":48,"./$.for-of":51,"./$.iter":57,"./$.iter-detect":56,"./$.species":64}],47:[function(require,module,exports){var assertFunction=require("./$.assert").fn;module.exports=function(fn,that,length){assertFunction(fn);if(~length&&that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./$.assert":40}],48:[function(require,module,exports){var $=require("./$"),global=$.g,core=$.core,isFunction=$.isFunction;function ctx(fn,that){return function(){return fn.apply(that,arguments)}}global.core=core;$def.F=1;$def.G=2;$def.S=4;$def.P=8;$def.B=16;$def.W=32;function $def(type,name,source){var key,own,out,exp,isGlobal=type&$def.G,target=isGlobal?global:type&$def.S?global[name]:(global[name]||{}).prototype,exports=isGlobal?core:core[name]||(core[name]={});if(isGlobal)source=name;for(key in source){own=!(type&$def.F)&&target&&key in target;out=(own?target:source)[key];if(type&$def.B&&own)exp=ctx(out,global);else exp=type&$def.P&&isFunction(out)?ctx(Function.call,out):out;if(target&&!own){if(isGlobal)target[key]=out;else delete target[key]&&$.hide(target,key,out)}if(exports[key]!=out)$.hide(exports,key,exp)}}module.exports=$def},{"./$":58}],49:[function(require,module,exports){var $=require("./$"),document=$.g.document,isObject=$.isObject,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./$":58}],50:[function(require,module,exports){var $=require("./$");module.exports=function(it){var keys=$.getKeys(it),getDesc=$.getDesc,getSymbols=$.getSymbols;if(getSymbols)$.each.call(getSymbols(it),function(key){if(getDesc(it,key).enumerable)keys.push(key)});return keys}},{"./$":58}],51:[function(require,module,exports){var ctx=require("./$.ctx"),get=require("./$.iter").get,call=require("./$.iter-call");module.exports=function(iterable,entries,fn,that){var iterator=get(iterable),f=ctx(fn,that,entries?2:1),step;while(!(step=iterator.next()).done){if(call(iterator,f,step.value,entries)===false){return call.close(iterator)}}}},{"./$.ctx":47,"./$.iter":57,"./$.iter-call":54}],52:[function(require,module,exports){module.exports=function($){$.FW=true;$.path=$.g;return $}},{}],53:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);case 5:return un?fn(args[0],args[1],args[2],args[3],args[4]):fn.call(that,args[0],args[1],args[2],args[3],args[4])}return fn.apply(that,args)}},{}],54:[function(require,module,exports){var assertObject=require("./$.assert").obj;function close(iterator){var ret=iterator["return"];if(ret!==undefined)assertObject(ret.call(iterator))}function call(iterator,fn,value,entries){try{return entries?fn(assertObject(value)[0],value[1]):fn(value)}catch(e){close(iterator);throw e}}call.close=close;module.exports=call},{"./$.assert":40}],55:[function(require,module,exports){var $def=require("./$.def"),$=require("./$"),cof=require("./$.cof"),$iter=require("./$.iter"),SYMBOL_ITERATOR=require("./$.wks")("iterator"),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",Iterators=$iter.Iterators;module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCE){$iter.create(Constructor,NAME,next);function createMethod(kind){function $$(that){return new Constructor(that,kind)}switch(kind){case KEYS:return function keys(){return $$(this)};case VALUES:return function values(){return $$(this)}}return function entries(){return $$(this)}}var TAG=NAME+" Iterator",proto=Base.prototype,_native=proto[SYMBOL_ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],_default=_native||createMethod(DEFAULT),methods,key;if(_native){var IteratorPrototype=$.getProto(_default.call(new Base));cof.set(IteratorPrototype,TAG,true);if($.FW&&$.has(proto,FF_ITERATOR))$iter.set(IteratorPrototype,$.that)}if($.FW)$iter.set(proto,_default);Iterators[NAME]=_default;Iterators[TAG]=$.that;if(DEFAULT){methods={keys:IS_SET?_default:createMethod(KEYS),values:DEFAULT==VALUES?_default:createMethod(VALUES),entries:DEFAULT!=VALUES?_default:createMethod("entries")};if(FORCE)for(key in methods){if(!(key in proto))$.hide(proto,key,methods[key])}else $def($def.P+$def.F*$iter.BUGGY,NAME,methods)}}},{"./$":58,"./$.cof":42,"./$.def":48,"./$.iter":57,"./$.wks":72}],56:[function(require,module,exports){var SYMBOL_ITERATOR=require("./$.wks")("iterator"),SAFE_CLOSING=false;try{var riter=[7][SYMBOL_ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec){if(!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[SYMBOL_ITERATOR]();iter.next=function(){safe=true};arr[SYMBOL_ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./$.wks":72}],57:[function(require,module,exports){"use strict";var $=require("./$"),cof=require("./$.cof"),assertObject=require("./$.assert").obj,SYMBOL_ITERATOR=require("./$.wks")("iterator"),FF_ITERATOR="@@iterator",Iterators={},IteratorPrototype={};setIterator(IteratorPrototype,$.that);function setIterator(O,value){$.hide(O,SYMBOL_ITERATOR,value);if(FF_ITERATOR in[])$.hide(O,FF_ITERATOR,value)}module.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:Iterators,step:function(done,value){return{value:value,done:!!done}},is:function(it){var O=Object(it),Symbol=$.g.Symbol,SYM=Symbol&&Symbol.iterator||FF_ITERATOR;return SYM in O||SYMBOL_ITERATOR in O||$.has(Iterators,cof.classof(O))},get:function(it){var Symbol=$.g.Symbol,ext=it[Symbol&&Symbol.iterator||FF_ITERATOR],getIter=ext||it[SYMBOL_ITERATOR]||Iterators[cof.classof(it)];return assertObject(getIter.call(it))},set:setIterator,create:function(Constructor,NAME,next,proto){Constructor.prototype=$.create(proto||IteratorPrototype,{next:$.desc(1,next)});cof.set(Constructor,NAME+" Iterator")}}},{"./$":58,"./$.assert":40,"./$.cof":42,"./$.wks":72}],58:[function(require,module,exports){"use strict";var global=typeof self!="undefined"?self:Function("return this")(),core={},defineProperty=Object.defineProperty,hasOwnProperty={}.hasOwnProperty,ceil=Math.ceil,floor=Math.floor,max=Math.max,min=Math.min;var DESC=!!function(){try{return defineProperty({},"a",{get:function(){return 2}}).a==2}catch(e){}}();var hide=createDefiner(1);function toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}function desc(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}function simpleSet(object,key,value){object[key]=value;return object}function createDefiner(bitmap){return DESC?function(object,key,value){return $.setDesc(object,key,desc(bitmap,value))}:simpleSet}function isObject(it){return it!==null&&(typeof it=="object"||typeof it=="function")}function isFunction(it){return typeof it=="function"}function assertDefined(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}var $=module.exports=require("./$.fw")({g:global,core:core,html:global.document&&document.documentElement,isObject:isObject,isFunction:isFunction,it:function(it){return it},that:function(){return this},toInteger:toInteger,toLength:function(it){return it>0?min(toInteger(it),9007199254740991):0},toIndex:function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)},has:function(it,key){return hasOwnProperty.call(it,key)},create:Object.create,getProto:Object.getPrototypeOf,DESC:DESC,desc:desc,getDesc:Object.getOwnPropertyDescriptor,setDesc:defineProperty,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:assertDefined,ES5Object:Object,toObject:function(it){return $.ES5Object(assertDefined(it))},hide:hide,def:createDefiner(0),set:global.Symbol?simpleSet:hide,mix:function(target,src){for(var key in src)hide(target,key,src[key]);return target},each:[].forEach});if(typeof __e!="undefined")__e=core;if(typeof __g!="undefined")__g=global},{"./$.fw":52}],59:[function(require,module,exports){var $=require("./$");module.exports=function(object,el){var O=$.toObject(object),keys=$.getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},{"./$":58}],60:[function(require,module,exports){var $=require("./$"),assertObject=require("./$.assert").obj;module.exports=function ownKeys(it){assertObject(it);var keys=$.getNames(it),getSymbols=$.getSymbols;return getSymbols?keys.concat(getSymbols(it)):keys}},{"./$":58,"./$.assert":40}],61:[function(require,module,exports){"use strict";var $=require("./$"),invoke=require("./$.invoke"),assertFunction=require("./$.assert").fn;module.exports=function(){var fn=assertFunction(this),length=arguments.length,pargs=Array(length),i=0,_=$.path._,holder=false;while(length>i)if((pargs[i]=arguments[i++])===_)holder=true;return function(){var that=this,_length=arguments.length,j=0,k=0,args;if(!holder&&!_length)return invoke(fn,pargs,that);args=pargs.slice();if(holder)for(;length>j;j++)if(args[j]===_)args[j]=arguments[k++];while(_length>k)args.push(arguments[k++]);return invoke(fn,args,that)}}},{"./$":58,"./$.assert":40,"./$.invoke":53}],62:[function(require,module,exports){"use strict";module.exports=function(regExp,replace,isStatic){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){
return String(isStatic?it:this).replace(regExp,replacer)}}},{}],63:[function(require,module,exports){var $=require("./$"),assert=require("./$.assert");function check(O,proto){assert.obj(O);assert(proto===null||$.isObject(proto),proto,": can't set as prototype!")}module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(buggy,set){try{set=require("./$.ctx")(Function.call,$.getDesc(Object.prototype,"__proto__").set,2);set({},[])}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}():undefined),check:check}},{"./$":58,"./$.assert":40,"./$.ctx":47}],64:[function(require,module,exports){var $=require("./$"),SPECIES=require("./$.wks")("species");module.exports=function(C){if($.DESC&&!(SPECIES in C))$.setDesc(C,SPECIES,{configurable:true,get:$.that})}},{"./$":58,"./$.wks":72}],65:[function(require,module,exports){var $=require("./$");module.exports=function(TO_STRING){return function(that,pos){var s=String($.assertDefined(that)),i=$.toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./$":58}],66:[function(require,module,exports){var $=require("./$"),repeat=require("./$.string-repeat");module.exports=function(that,minLength,fillChar,left){var S=String($.assertDefined(that));if(minLength===undefined)return S;var intMinLength=$.toInteger(minLength);var fillLen=intMinLength-S.length;if(fillLen<0||fillLen===Infinity){throw new RangeError("Cannot satisfy string length "+minLength+" for string: "+S)}var sFillStr=fillChar===undefined?" ":String(fillChar);var sFillVal=repeat.call(sFillStr,Math.ceil(fillLen/sFillStr.length));if(sFillVal.length>fillLen)sFillVal=left?sFillVal.slice(sFillVal.length-fillLen):sFillVal.slice(0,fillLen);return left?sFillVal.concat(S):S.concat(sFillVal)}},{"./$":58,"./$.string-repeat":67}],67:[function(require,module,exports){"use strict";var $=require("./$");module.exports=function repeat(count){var str=String($.assertDefined(this)),res="",n=$.toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res}},{"./$":58}],68:[function(require,module,exports){"use strict";var $=require("./$"),ctx=require("./$.ctx"),cof=require("./$.cof"),invoke=require("./$.invoke"),cel=require("./$.dom-create"),global=$.g,isFunction=$.isFunction,html=$.html,process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,postMessage=global.postMessage,addEventListener=global.addEventListener,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port;function run(){var id=+this;if($.has(queue,id)){var fn=queue[id];delete queue[id];fn()}}function listner(event){run.call(event.data)}if(!isFunction(setTask)||!isFunction(clearTask)){setTask=function(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(isFunction(fn)?fn:Function(fn),args)};defer(counter);return counter};clearTask=function(id){delete queue[id]};if(cof(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(addEventListener&&isFunction(postMessage)&&!global.importScripts){defer=function(id){postMessage(id,"*")};addEventListener("message",listner,false)}else if(isFunction(MessageChannel)){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./$":58,"./$.cof":42,"./$.ctx":47,"./$.dom-create":49,"./$.invoke":53}],69:[function(require,module,exports){module.exports=function(exec){try{exec();return false}catch(e){return true}}},{}],70:[function(require,module,exports){var sid=0;function uid(key){return"Symbol("+key+")_"+(++sid+Math.random()).toString(36)}uid.safe=require("./$").g.Symbol||uid;module.exports=uid},{"./$":58}],71:[function(require,module,exports){var $=require("./$"),UNSCOPABLES=require("./$.wks")("unscopables");if($.FW&&!(UNSCOPABLES in[]))$.hide(Array.prototype,UNSCOPABLES,{});module.exports=function(key){if($.FW)[][UNSCOPABLES][key]=true}},{"./$":58,"./$.wks":72}],72:[function(require,module,exports){var global=require("./$").g,store={};module.exports=function(name){return store[name]||(store[name]=global.Symbol&&global.Symbol[name]||require("./$.uid").safe("Symbol."+name))}},{"./$":58,"./$.uid":70}],73:[function(require,module,exports){"use strict";var $=require("./$"),ctx=require("./$.ctx"),safe=require("./$.uid").safe,$def=require("./$.def"),$iter=require("./$.iter"),forOf=require("./$.for-of"),ENTRIES=safe("entries"),FN=safe("fn"),ITER=safe("iter"),call=require("./$.iter-call"),getIterator=$iter.get,setIterator=$iter.set,createIterator=$iter.create;function $for(iterable,entries){if(!(this instanceof $for))return new $for(iterable,entries);this[ITER]=getIterator(iterable);this[ENTRIES]=!!entries}createIterator($for,"Wrapper",function(){return this[ITER].next()});var $forProto=$for.prototype;setIterator($forProto,function(){return this[ITER]});function createChainIterator(next){function Iterator(iter,fn,that){this[ITER]=getIterator(iter);this[ENTRIES]=iter[ENTRIES];this[FN]=ctx(fn,that,iter[ENTRIES]?2:1)}createIterator(Iterator,"Chain",next,$forProto);setIterator(Iterator.prototype,$.that);return Iterator}var MapIter=createChainIterator(function(){var step=this[ITER].next();return step.done?step:$iter.step(0,call(this[ITER],this[FN],step.value,this[ENTRIES]))});var FilterIter=createChainIterator(function(){for(;;){var step=this[ITER].next();if(step.done||call(this[ITER],this[FN],step.value,this[ENTRIES]))return step}});$.mix($forProto,{of:function(fn,that){forOf(this,this[ENTRIES],fn,that)},array:function(fn,that){var result=[];forOf(fn!=undefined?this.map(fn,that):this,false,result.push,result);return result},filter:function(fn,that){return new FilterIter(this,fn,that)},map:function(fn,that){return new MapIter(this,fn,that)}});$for.isIterable=$iter.is;$for.getIterator=getIterator;$def($def.G+$def.F,{$for:$for})},{"./$":58,"./$.ctx":47,"./$.def":48,"./$.for-of":51,"./$.iter":57,"./$.iter-call":54,"./$.uid":70}],74:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def"),assertFunction=require("./$.assert").fn;$def($def.P+$def.F,"Array",{turn:function(fn,target){assertFunction(fn);var memo=target==undefined?[]:Object(target),O=$.ES5Object(this),length=$.toLength(O.length),index=0;while(length>index)if(fn(memo,O[index],index++,this)===false)break;return memo}});require("./$.unscope")("turn")},{"./$":58,"./$.assert":40,"./$.def":48,"./$.unscope":71}],75:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),core=$.core,formatRegExp=/\b\w\w?\b/g,flexioRegExp=/:(.*)\|(.*)$/,locales={},current="en",SECONDS="Seconds",MINUTES="Minutes",HOURS="Hours",DATE="Date",MONTH="Month",YEAR="FullYear";function lz(num){return num>9?num:"0"+num}function createFormat(prefix){return function(template,locale){var that=this,dict=locales[$.has(locales,locale)?locale:current];function get(unit){return that[prefix+unit]()}return String(template).replace(formatRegExp,function(part){switch(part){case"s":return get(SECONDS);case"ss":return lz(get(SECONDS));case"m":return get(MINUTES);case"mm":return lz(get(MINUTES));case"h":return get(HOURS);case"hh":return lz(get(HOURS));case"D":return get(DATE);case"DD":return lz(get(DATE));case"W":return dict[0][get("Day")];case"N":return get(MONTH)+1;case"NN":return lz(get(MONTH)+1);case"M":return dict[2][get(MONTH)];case"MM":return dict[1][get(MONTH)];case"Y":return get(YEAR);case"YY":return lz(get(YEAR)%100)}return part})}}function addLocale(lang,locale){function split(index){var result=[];$.each.call(locale.months.split(","),function(it){result.push(it.replace(flexioRegExp,"$"+index))});return result}locales[lang]=[locale.weekdays.split(","),split(1),split(2)];return core}$def($def.P+$def.F,DATE,{format:createFormat("get"),formatUTC:createFormat("getUTC")});addLocale(current,{weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",months:"January,February,March,April,May,June,July,August,September,October,November,December"});addLocale("ru",{weekdays:"Воскресенье,Понедельник,Вторник,Среда,Четверг,Пятница,Суббота",months:"Январ:я|ь,Феврал:я|ь,Март:а|,Апрел:я|ь,Ма:я|й,Июн:я|ь,"+"Июл:я|ь,Август:а|,Сентябр:я|ь,Октябр:я|ь,Ноябр:я|ь,Декабр:я|ь"});core.locale=function(locale){return $.has(locales,locale)?current=locale:current};core.addLocale=addLocale},{"./$":58,"./$.def":48}],76:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),partial=require("./$.partial");$def($def.G+$def.F,{delay:function(time){return new($.core.Promise||$.g.Promise)(function(resolve){setTimeout(partial.call(resolve,true),time)})}})},{"./$":58,"./$.def":48,"./$.partial":61}],77:[function(require,module,exports){var $=require("./$"),ctx=require("./$.ctx"),$def=require("./$.def"),assign=require("./$.assign"),keyOf=require("./$.keyof"),ITER=require("./$.uid").safe("iter"),assert=require("./$.assert"),$iter=require("./$.iter"),forOf=require("./$.for-of"),step=$iter.step,getKeys=$.getKeys,toObject=$.toObject,has=$.has;function Dict(iterable){var dict=$.create(null);if(iterable!=undefined){if($iter.is(iterable)){forOf(iterable,true,function(key,value){dict[key]=value})}else assign(dict,iterable)}return dict}Dict.prototype=null;function DictIterator(iterated,kind){$.set(this,ITER,{o:toObject(iterated),a:getKeys(iterated),i:0,k:kind})}$iter.create(DictIterator,"Dict",function(){var iter=this[ITER],O=iter.o,keys=iter.a,kind=iter.k,key;do{if(iter.i>=keys.length){iter.o=undefined;return step(1)}}while(!has(O,key=keys[iter.i++]));if(kind=="keys")return step(0,key);if(kind=="values")return step(0,O[key]);return step(0,[key,O[key]])});function createDictIter(kind){return function(it){return new DictIterator(it,kind)}}function generic(A,B){return typeof A=="function"?A:B}function createDictMethod(TYPE){var IS_MAP=TYPE==1,IS_EVERY=TYPE==4;return function(object,callbackfn,that){var f=ctx(callbackfn,that,3),O=toObject(object),result=IS_MAP||TYPE==7||TYPE==2?new(generic(this,Dict)):undefined,key,val,res;for(key in O)if(has(O,key)){val=O[key];res=f(val,key,object);if(TYPE){if(IS_MAP)result[key]=res;else if(res)switch(TYPE){case 2:result[key]=val;break;case 3:return true;case 5:return val;case 6:return key;case 7:result[res[0]]=res[1]}else if(IS_EVERY)return false}}return TYPE==3||IS_EVERY?IS_EVERY:result}}function createDictReduce(IS_TURN){return function(object,mapfn,init){assert.fn(mapfn);var O=toObject(object),keys=getKeys(O),length=keys.length,i=0,memo,key,result;if(IS_TURN){memo=init==undefined?new(generic(this,Dict)):Object(init)}else if(arguments.length<3){assert(length,"Reduce of empty object with no initial value");memo=O[keys[i++]]}else memo=Object(init);while(length>i)if(has(O,key=keys[i++])){result=mapfn(memo,O[key],key,object);if(IS_TURN){if(result===false)break}else memo=result}return memo}}var findKey=createDictMethod(6);$def($def.G+$def.F,{Dict:$.mix(Dict,{keys:createDictIter("keys"),values:createDictIter("values"),entries:createDictIter("entries"),forEach:createDictMethod(0),map:createDictMethod(1),filter:createDictMethod(2),some:createDictMethod(3),every:createDictMethod(4),find:createDictMethod(5),findKey:findKey,mapPairs:createDictMethod(7),reduce:createDictReduce(false),turn:createDictReduce(true),keyOf:keyOf,includes:function(object,el){return(el==el?keyOf(object,el):findKey(object,function(it){return it!=it}))!==undefined},has:has,get:function(object,key){if(has(object,key))return object[key]},set:$.def,isDict:function(it){return $.isObject(it)&&$.getProto(it)===Dict.prototype}})})},{"./$":58,"./$.assert":40,"./$.assign":41,"./$.ctx":47,"./$.def":48,"./$.for-of":51,"./$.iter":57,"./$.keyof":59,"./$.uid":70}],78:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def");$.core._=$.path._=$.path._||{};$def($def.P+$def.F,"Function",{part:require("./$.partial")})},{"./$":58,"./$.def":48,"./$.partial":61}],79:[function(require,module,exports){var $def=require("./$.def");$def($def.G+$def.F,{global:require("./$").g})},{"./$":58,"./$.def":48}],80:[function(require,module,exports){var core=require("./$").core,$iter=require("./$.iter");core.isIterable=$iter.is;core.getIterator=$iter.get},{"./$":58,"./$.iter":57}],81:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),log={},enabled=true;$.each.call(("assert,clear,count,debug,dir,dirxml,error,exception,"+"group,groupCollapsed,groupEnd,info,isIndependentlyComposed,log,"+"markTimeline,profile,profileEnd,table,time,timeEnd,timeline,"+"timelineEnd,timeStamp,trace,warn").split(","),function(key){log[key]=function(){if(enabled&&$.g.console&&$.isFunction(console[key])){return Function.apply.call(console[key],console,arguments)}}});$def($def.G+$def.F,{log:require("./$.assign")(log.log,log,{enable:function(){enabled=true},disable:function(){enabled=false}})})},{"./$":58,"./$.assign":41,"./$.def":48}],82:[function(require,module,exports){"use strict";var $=require("./$"),ITER=require("./$.uid").safe("iter");require("./$.iter-define")(Number,"Number",function(iterated){$.set(this,ITER,{l:$.toLength(iterated),i:0})},function(){var iter=this[ITER],i=iter.i++,done=i>=iter.l;return{done:done,value:done?undefined:i}})},{"./$":58,"./$.iter-define":55,"./$.uid":70}],83:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def"),invoke=require("./$.invoke"),methods={};methods.random=function(lim){var a=+this,b=lim==undefined?0:+lim,m=Math.min(a,b);return Math.random()*(Math.max(a,b)-m)+m};if($.FW)$.each.call(("round,floor,ceil,abs,sin,asin,cos,acos,tan,atan,exp,sqrt,max,min,pow,atan2,"+"acosh,asinh,atanh,cbrt,clz32,cosh,expm1,hypot,imul,log1p,log10,log2,sign,sinh,tanh,trunc").split(","),function(key){var fn=Math[key];if(fn)methods[key]=function(){var args=[+this],i=0;while(arguments.length>i)args.push(arguments[i++]);return invoke(fn,args)}});$def($def.P+$def.F,"Number",methods)},{"./$":58,"./$.def":48,"./$.invoke":53}],84:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),ownKeys=require("./$.own-keys");function define(target,mixin){var keys=ownKeys($.toObject(mixin)),length=keys.length,i=0,key;while(length>i)$.setDesc(target,key=keys[i++],$.getDesc(mixin,key));return target}$def($def.S+$def.F,"Object",{isObject:$.isObject,classof:require("./$.cof").classof,define:define,make:function(proto,mixin){return define($.create(proto),mixin)}})},{"./$":58,"./$.cof":42,"./$.def":48,"./$.own-keys":60}],85:[function(require,module,exports){var $def=require("./$.def"),replacer=require("./$.replacer");var escapeHTMLDict={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},unescapeHTMLDict={},key;for(key in escapeHTMLDict)unescapeHTMLDict[escapeHTMLDict[key]]=key;$def($def.P+$def.F,"String",{escapeHTML:replacer(/[&<>"']/g,escapeHTMLDict),unescapeHTML:replacer(/&(?:amp|lt|gt|quot|apos);/g,unescapeHTMLDict)})},{"./$.def":48,"./$.replacer":62}],86:[function(require,module,exports){var $=require("./$"),cel=require("./$.dom-create"),cof=require("./$.cof"),$def=require("./$.def"),invoke=require("./$.invoke"),arrayMethod=require("./$.array-methods"),IE_PROTO=require("./$.uid").safe("__proto__"),assert=require("./$.assert"),assertObject=assert.obj,ObjectProto=Object.prototype,html=$.html,A=[],_slice=A.slice,_join=A.join,classof=cof.classof,has=$.has,defineProperty=$.setDesc,getOwnDescriptor=$.getDesc,defineProperties=$.setDescs,isFunction=$.isFunction,toObject=$.toObject,toLength=$.toLength,toIndex=$.toIndex,IE8_DOM_DEFINE=false,$indexOf=require("./$.array-includes")(false),$forEach=arrayMethod(0),$map=arrayMethod(1),$filter=arrayMethod(2),$some=arrayMethod(3),$every=arrayMethod(4);if(!$.DESC){try{IE8_DOM_DEFINE=defineProperty(cel("div"),"x",{get:function(){return 8}}).x==8}catch(e){}$.setDesc=function(O,P,Attributes){if(IE8_DOM_DEFINE)try{return defineProperty(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)assertObject(O)[P]=Attributes.value;return O};$.getDesc=function(O,P){if(IE8_DOM_DEFINE)try{return getOwnDescriptor(O,P)}catch(e){}if(has(O,P))return $.desc(!ObjectProto.propertyIsEnumerable.call(O,P),O[P])};$.setDescs=defineProperties=function(O,Properties){assertObject(O);var keys=$.getKeys(Properties),length=keys.length,i=0,P;while(length>i)$.setDesc(O,P=keys[i++],Properties[P]);return O}}$def($def.S+$def.F*!$.DESC,"Object",{getOwnPropertyDescriptor:$.getDesc,defineProperty:$.setDesc,defineProperties:defineProperties});var keys1=("constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,"+"toLocaleString,toString,valueOf").split(","),keys2=keys1.concat("length","prototype"),keysLen1=keys1.length;var createDict=function(){var iframe=cel("iframe"),i=keysLen1,gt=">",iframeDocument;iframe.style.display="none";html.appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write("<script>document.F=Object</script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict.prototype[keys1[i]];return createDict()};function createGetKeys(names,length){return function(object){var O=toObject(object),i=0,result=[],key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(length>i)if(has(O,key=names[i++])){~$indexOf(result,key)||result.push(key)}return result}}function isPrimitive(it){return!$.isObject(it)}function Empty(){}$def($def.S,"Object",{getPrototypeOf:$.getProto=$.getProto||function(O){O=Object(assert.def(O));if(has(O,IE_PROTO))return O[IE_PROTO];if(isFunction(O.constructor)&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null},getOwnPropertyNames:$.getNames=$.getNames||createGetKeys(keys2,keys2.length,true),create:$.create=$.create||function(O,Properties){var result;if(O!==null){Empty.prototype=assertObject(O);result=new Empty;Empty.prototype=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:defineProperties(result,Properties)},keys:$.getKeys=$.getKeys||createGetKeys(keys1,keysLen1,false),seal:$.it,freeze:$.it,preventExtensions:$.it,isSealed:isPrimitive,isFrozen:isPrimitive,isExtensible:$.isObject});$def($def.P,"Function",{bind:function(that){var fn=assert.fn(this),partArgs=_slice.call(arguments,1);function bound(){var args=partArgs.concat(_slice.call(arguments));return invoke(fn,args,this instanceof bound?$.create(fn.prototype):that)}if(fn.prototype)bound.prototype=fn.prototype;return bound}});if(!(0 in Object("z")&&"z"[0]=="z")){$.ES5Object=function(it){return cof(it)=="String"?it.split(""):Object(it)}}var buggySlice=true;try{if(html)_slice.call(html);buggySlice=false}catch(e){}$def($def.P+$def.F*buggySlice,"Array",{slice:function slice(begin,end){var len=toLength(this.length),klass=cof(this);end=end===undefined?len:end;if(klass=="Array")return _slice.call(this,begin,end);var start=toIndex(begin,len),upTo=toIndex(end,len),size=toLength(upTo-start),cloned=Array(size),i=0;for(;i<size;i++)cloned[i]=klass=="String"?this.charAt(start+i):this[start+i];return cloned}});$def($def.P+$def.F*($.ES5Object!=Object),"Array",{join:function join(){return _join.apply($.ES5Object(this),arguments)}});$def($def.S,"Array",{isArray:function(arg){return cof(arg)=="Array"}});function createArrayReduce(isRight){return function(callbackfn,memo){assert.fn(callbackfn);var O=toObject(this),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(arguments.length<2)for(;;){if(index in O){memo=O[index];index+=i;break}index+=i;assert(isRight?index>=0:length>index,"Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)if(index in O){memo=callbackfn(memo,O[index],index,this)}return memo}}$def($def.P,"Array",{forEach:$.each=$.each||function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1])},map:function map(callbackfn){return $map(this,callbackfn,arguments[1])},filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1])},some:function some(callbackfn){return $some(this,callbackfn,arguments[1])},every:function every(callbackfn){return $every(this,callbackfn,arguments[1])},reduce:createArrayReduce(false),reduceRight:createArrayReduce(true),indexOf:function indexOf(el){return $indexOf(this,el,arguments[1])},lastIndexOf:function(el,fromIndex){var O=toObject(this),length=toLength(O.length),index=length-1;if(arguments.length>1)index=Math.min(index,$.toInteger(fromIndex));if(index<0)index=toLength(length+index);for(;index>=0;index--)if(index in O)if(O[index]===el)return index;return-1}});$def($def.P,"String",{trim:require("./$.replacer")(/^\s*([\s\S]*\S)?\s*$/,"$1")});$def($def.S,"Date",{now:function(){return+new Date}});function lz(num){return num>9?num:"0"+num}var date=new Date(-5e13-1),brokenDate=!(date.toISOString&&date.toISOString()=="0385-07-25T07:06:39.999Z"&&require("./$.throws")(function(){new Date(NaN).toISOString()}));$def($def.P+$def.F*brokenDate,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}});if(classof(function(){return arguments}())=="Object")cof.classof=function(it){var tag=classof(it);return tag=="Object"&&isFunction(it.callee)?"Arguments":tag}},{"./$":58,"./$.array-includes":38,"./$.array-methods":39,"./$.assert":40,"./$.cof":42,"./$.def":48,"./$.dom-create":49,"./$.invoke":53,"./$.replacer":62,"./$.throws":69,"./$.uid":70}],87:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def"),toIndex=$.toIndex;$def($def.P,"Array",{copyWithin:function copyWithin(target,start){var O=Object($.assertDefined(this)),len=$.toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments[2],fin=end===undefined?len:toIndex(end,len),count=Math.min(fin-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from=from+count-1;to=to+count-1}while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O}});require("./$.unscope")("copyWithin")},{"./$":58,"./$.def":48,"./$.unscope":71}],88:[function(require,module,exports){"use strict";var $=require("./$"),$def=require("./$.def"),toIndex=$.toIndex;$def($def.P,"Array",{fill:function fill(value){var O=Object($.assertDefined(this)),length=$.toLength(O.length),index=toIndex(arguments[1],length),end=arguments[2],endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O}});require("./$.unscope")("fill")},{"./$":58,"./$.def":48,"./$.unscope":71}],89:[function(require,module,exports){"use strict";var KEY="findIndex",$def=require("./$.def"),forced=true,$find=require("./$.array-methods")(6);if(KEY in[])Array(1)[KEY](function(){forced=false});$def($def.P+$def.F*forced,"Array",{findIndex:function findIndex(callbackfn){return $find(this,callbackfn,arguments[1])}});require("./$.unscope")(KEY)},{"./$.array-methods":39,"./$.def":48,"./$.unscope":71}],90:[function(require,module,exports){"use strict";var KEY="find",$def=require("./$.def"),forced=true,$find=require("./$.array-methods")(5);if(KEY in[])Array(1)[KEY](function(){forced=false});$def($def.P+$def.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments[1])}});require("./$.unscope")(KEY)},{"./$.array-methods":39,"./$.def":48,"./$.unscope":71}],91:[function(require,module,exports){var $=require("./$"),ctx=require("./$.ctx"),$def=require("./$.def"),$iter=require("./$.iter"),call=require("./$.iter-call");$def($def.S+$def.F*!require("./$.iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=Object($.assertDefined(arrayLike)),mapfn=arguments[1],mapping=mapfn!==undefined,f=mapping?ctx(mapfn,arguments[2],2):undefined,index=0,length,result,step,iterator;if($iter.is(O)){iterator=$iter.get(O);result=new(typeof this=="function"?this:Array);for(;!(step=iterator.next()).done;index++){result[index]=mapping?call(iterator,f,[step.value,index],true):step.value}}else{result=new(typeof this=="function"?this:Array)(length=$.toLength(O.length));for(;length>index;index++){result[index]=mapping?f(O[index],index):O[index]}}result.length=index;return result}})},{"./$":58,"./$.ctx":47,"./$.def":48,"./$.iter":57,"./$.iter-call":54,"./$.iter-detect":56}],92:[function(require,module,exports){var $=require("./$"),setUnscope=require("./$.unscope"),ITER=require("./$.uid").safe("iter"),$iter=require("./$.iter"),step=$iter.step,Iterators=$iter.Iterators;require("./$.iter-define")(Array,"Array",function(iterated,kind){$.set(this,ITER,{o:$.toObject(iterated),i:0,k:kind})},function(){var iter=this[ITER],O=iter.o,kind=iter.k,index=iter.i++;if(!O||index>=O.length){iter.o=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;setUnscope("keys");setUnscope("values");setUnscope("entries")},{"./$":58,"./$.iter":57,"./$.iter-define":55,"./$.uid":70,"./$.unscope":71}],93:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"Array",{of:function of(){var index=0,length=arguments.length,result=new(typeof this=="function"?this:Array)(length);while(length>index)result[index]=arguments[index++];result.length=length;return result}})},{"./$.def":48}],94:[function(require,module,exports){require("./$.species")(Array)},{"./$.species":64}],95:[function(require,module,exports){var $=require("./$"),HAS_INSTANCE=require("./$.wks")("hasInstance"),FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))$.setDesc(FunctionProto,HAS_INSTANCE,{value:function(O){if(!$.isFunction(this)||!$.isObject(O))return false;if(!$.isObject(this.prototype))return O instanceof this;while(O=$.getProto(O))if(this.prototype===O)return true;return false}})},{"./$":58,"./$.wks":72}],96:[function(require,module,exports){"use strict";var $=require("./$"),NAME="name",setDesc=$.setDesc,FunctionProto=Function.prototype;NAME in FunctionProto||$.FW&&$.DESC&&setDesc(FunctionProto,NAME,{configurable:true,get:function(){var match=String(this).match(/^\s*function ([^ (]*)/),name=match?match[1]:"";$.has(this,NAME)||setDesc(this,NAME,$.desc(5,name));return name},set:function(value){$.has(this,NAME)||setDesc(this,NAME,$.desc(0,value))}})},{"./$":58}],97:[function(require,module,exports){"use strict";var strong=require("./$.collection-strong");require("./$.collection")("Map",{get:function get(key){var entry=strong.getEntry(this,key);return entry&&entry.v},set:function set(key,value){return strong.def(this,key===0?0:key,value)}},strong,true)},{"./$.collection":46,"./$.collection-strong":43}],98:[function(require,module,exports){var Infinity=1/0,$def=require("./$.def"),E=Math.E,pow=Math.pow,abs=Math.abs,exp=Math.exp,log=Math.log,sqrt=Math.sqrt,ceil=Math.ceil,floor=Math.floor,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126);function roundTiesToEven(n){return n+1/EPSILON-1/EPSILON}function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1}function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):log(x+sqrt(x*x+1))}function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:exp(x)-1}$def($def.S,"Math",{acosh:function acosh(x){return(x=+x)<1?NaN:isFinite(x)?log(x/E+sqrt(x+1)*sqrt(x-1)/E)+1:x},asinh:asinh,atanh:function atanh(x){return(x=+x)==0?x:log((1+x)/(1-x))/2},cbrt:function cbrt(x){return sign(x=+x)*pow(abs(x),1/3)},clz32:function clz32(x){return(x>>>=0)?31-floor(log(x+.5)*Math.LOG2E):32},cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2},expm1:expm1,fround:function fround(x){var $abs=abs(x),$sign=sign(x),a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result},hypot:function hypot(value1,value2){var sum=0,len1=arguments.length,len2=len1,args=Array(len1),larg=0,arg;while(len1--){arg=args[len1]=abs(arguments[len1]);if(arg==Infinity)return Infinity;if(arg>larg)larg=arg}larg=larg||1;while(len2--)sum+=pow(args[len2]/larg,2);return larg*sqrt(sum)},imul:function imul(x,y){var UInt16=65535,xn=+x,yn=+y,xl=UInt16&xn,yl=UInt16&yn;return 0|xl*yl+((UInt16&xn>>>16)*yl+xl*(UInt16&yn>>>16)<<16>>>0)},log1p:function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:log(1+x)},log10:function log10(x){return log(x)/Math.LN10},log2:function log2(x){return log(x)/Math.LN2},sign:sign,sinh:function sinh(x){return abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(E/2)},tanh:function tanh(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))},trunc:function trunc(it){return(it>0?floor:ceil)(it)}})},{"./$.def":48}],99:[function(require,module,exports){"use strict";var $=require("./$"),isObject=$.isObject,isFunction=$.isFunction,NUMBER="Number",$Number=$.g[NUMBER],Base=$Number,proto=$Number.prototype;function toPrimitive(it){var fn,val;if(isFunction(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(isFunction(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to number")}function toNumber(it){if(isObject(it))it=toPrimitive(it);if(typeof it=="string"&&it.length>2&&it.charCodeAt(0)==48){var binary=false;switch(it.charCodeAt(1)){case 66:case 98:binary=true;case 79:case 111:return parseInt(it.slice(2),binary?2:8)}}return+it}if($.FW&&!($Number("0o1")&&$Number("0b1"))){$Number=function Number(it){return this instanceof $Number?new Base(toNumber(it)):toNumber(it)};$.each.call($.DESC?$.getNames(Base):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),function(key){if($.has(Base,key)&&!$.has($Number,key)){$.setDesc($Number,key,$.getDesc(Base,key))}});$Number.prototype=proto;proto.constructor=$Number;$.hide($.g,NUMBER,$Number)}},{"./$":58}],100:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),abs=Math.abs,floor=Math.floor,_isFinite=$.g.isFinite,MAX_SAFE_INTEGER=9007199254740991;function isInteger(it){return!$.isObject(it)&&_isFinite(it)&&floor(it)===it}$def($def.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)},isInteger:isInteger,isNaN:function isNaN(number){return number!=number},isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MIN_SAFE_INTEGER:-MAX_SAFE_INTEGER,parseFloat:parseFloat,parseInt:parseInt})},{"./$":58,"./$.def":48}],101:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"Object",{assign:require("./$.assign")})},{"./$.assign":41,"./$.def":48}],102:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"Object",{is:function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}})},{"./$.def":48}],103:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"Object",{setPrototypeOf:require("./$.set-proto").set})},{"./$.def":48,"./$.set-proto":63}],104:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),isObject=$.isObject,toObject=$.toObject;function wrapObjectMethod(METHOD,MODE){var fn=($.core.Object||{})[METHOD]||Object[METHOD],f=0,o={};

o[METHOD]=MODE==1?function(it){return isObject(it)?fn(it):it}:MODE==2?function(it){return isObject(it)?fn(it):true}:MODE==3?function(it){return isObject(it)?fn(it):false}:MODE==4?function getOwnPropertyDescriptor(it,key){return fn(toObject(it),key)}:MODE==5?function getPrototypeOf(it){return fn(Object($.assertDefined(it)))}:function(it){return fn(toObject(it))};try{fn("z")}catch(e){f=1}$def($def.S+$def.F*f,"Object",o)}wrapObjectMethod("freeze",1);wrapObjectMethod("seal",1);wrapObjectMethod("preventExtensions",1);wrapObjectMethod("isFrozen",2);wrapObjectMethod("isSealed",2);wrapObjectMethod("isExtensible",3);wrapObjectMethod("getOwnPropertyDescriptor",4);wrapObjectMethod("getPrototypeOf",5);wrapObjectMethod("keys");wrapObjectMethod("getOwnPropertyNames")},{"./$":58,"./$.def":48}],105:[function(require,module,exports){"use strict";var $=require("./$"),cof=require("./$.cof"),src=String({}.toString),tmp={};function toString(){return"[object "+cof.classof(this)+"]"}toString.toString=function(){return src};tmp[require("./$.wks")("toStringTag")]="z";if($.FW&&cof(tmp)!="z")$.hide(Object.prototype,"toString",toString)},{"./$":58,"./$.cof":42,"./$.wks":72}],106:[function(require,module,exports){"use strict";var $=require("./$"),ctx=require("./$.ctx"),cof=require("./$.cof"),$def=require("./$.def"),assert=require("./$.assert"),forOf=require("./$.for-of"),setProto=require("./$.set-proto").set,species=require("./$.species"),SPECIES=require("./$.wks")("species"),RECORD=require("./$.uid").safe("record"),PROMISE="Promise",global=$.g,process=global.process,asap=process&&process.nextTick||require("./$.task").set,P=global[PROMISE],isFunction=$.isFunction,isObject=$.isObject,assertFunction=assert.fn,assertObject=assert.obj;var useNative=function(){var test,works=false;function P2(x){var self=new P(x);setProto(self,P2.prototype);return self}try{works=isFunction(P)&&isFunction(P.resolve)&&P.resolve(test=new P(function(){}))==test;setProto(P2,P);P2.prototype=$.create(P.prototype,{constructor:{value:P2}});if(!(P2.resolve(5).then(function(){})instanceof P2)){works=false}}catch(e){works=false}return works}();function getConstructor(C){var S=assertObject(C)[SPECIES];return S!=undefined?S:C}function isThenable(it){var then;if(isObject(it))then=it.then;return isFunction(then)?then:false}function notify(record){var chain=record.c;if(chain.length)asap(function(){var value=record.v,ok=record.s==1,i=0;function run(react){var cb=ok?react.ok:react.fail,ret,then;try{if(cb){if(!ok)record.h=true;ret=cb===true?value:cb(value);if(ret===react.P){react.rej(TypeError("Promise-chain cycle"))}else if(then=isThenable(ret)){then.call(ret,react.res,react.rej)}else react.res(ret)}else react.rej(value)}catch(err){react.rej(err)}}while(chain.length>i)run(chain[i++]);chain.length=0})}function isUnhandled(promise){var record=promise[RECORD],chain=record.a||record.c,i=0,react;if(record.h)return false;while(chain.length>i){react=chain[i++];if(react.fail||!isUnhandled(react.P))return false}return true}function $reject(value){var record=this,promise;if(record.d)return;record.d=true;record=record.r||record;record.v=value;record.s=2;record.a=record.c.slice();setTimeout(function(){asap(function(){if(isUnhandled(promise=record.p)){if(cof(process)=="process"){process.emit("unhandledRejection",value,promise)}else if(global.console&&isFunction(console.error)){console.error("Unhandled promise rejection",value)}}record.a=undefined})},1);notify(record)}function $resolve(value){var record=this,then,wrapper;if(record.d)return;record.d=true;record=record.r||record;try{if(then=isThenable(value)){wrapper={r:record,d:false};then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}else{record.v=value;record.s=1;notify(record)}}catch(err){$reject.call(wrapper||{r:record,d:false},err)}}if(!useNative){P=function Promise(executor){assertFunction(executor);var record={p:assert.inst(this,P,PROMISE),c:[],a:undefined,s:0,d:false,v:undefined,h:false};$.hide(this,RECORD,record);try{executor(ctx($resolve,record,1),ctx($reject,record,1))}catch(err){$reject.call(record,err)}};$.mix(P.prototype,{then:function then(onFulfilled,onRejected){var S=assertObject(assertObject(this).constructor)[SPECIES];var react={ok:isFunction(onFulfilled)?onFulfilled:true,fail:isFunction(onRejected)?onRejected:false};var promise=react.P=new(S!=undefined?S:P)(function(res,rej){react.res=assertFunction(res);react.rej=assertFunction(rej)});var record=this[RECORD];record.c.push(react);if(record.a)record.a.push(react);record.s&&notify(record);return promise},catch:function(onRejected){return this.then(undefined,onRejected)}})}$def($def.G+$def.W+$def.F*!useNative,{Promise:P});cof.set(P,PROMISE);species(P);species($.core[PROMISE]);$def($def.S+$def.F*!useNative,PROMISE,{reject:function reject(r){return new(getConstructor(this))(function(res,rej){rej(r)})},resolve:function resolve(x){return isObject(x)&&RECORD in x&&$.getProto(x)===this.prototype?x:new(getConstructor(this))(function(res){res(x)})}});$def($def.S+$def.F*!(useNative&&require("./$.iter-detect")(function(iter){P.all(iter)["catch"](function(){})})),PROMISE,{all:function all(iterable){var C=getConstructor(this),values=[];return new C(function(res,rej){forOf(iterable,false,values.push,values);var remaining=values.length,results=Array(remaining);if(remaining)$.each.call(values,function(promise,index){C.resolve(promise).then(function(value){results[index]=value;--remaining||res(results)},rej)});else res(results)})},race:function race(iterable){var C=getConstructor(this);return new C(function(res,rej){forOf(iterable,false,function(promise){C.resolve(promise).then(res,rej)})})}})},{"./$":58,"./$.assert":40,"./$.cof":42,"./$.ctx":47,"./$.def":48,"./$.for-of":51,"./$.iter-detect":56,"./$.set-proto":63,"./$.species":64,"./$.task":68,"./$.uid":70,"./$.wks":72}],107:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),setProto=require("./$.set-proto"),$iter=require("./$.iter"),ITERATOR=require("./$.wks")("iterator"),ITER=require("./$.uid").safe("iter"),step=$iter.step,assert=require("./$.assert"),isObject=$.isObject,getProto=$.getProto,$Reflect=$.g.Reflect,_apply=Function.apply,assertObject=assert.obj,_isExtensible=Object.isExtensible||$.isObject,_preventExtensions=Object.preventExtensions||$.it,buggyEnumerate=!($Reflect&&$Reflect.enumerate&&ITERATOR in $Reflect.enumerate({}));function Enumerate(iterated){$.set(this,ITER,{o:iterated,k:undefined,i:0})}$iter.create(Enumerate,"Object",function(){var iter=this[ITER],keys=iter.k,key;if(keys==undefined){iter.k=keys=[];for(key in iter.o)keys.push(key)}do{if(iter.i>=keys.length)return step(1)}while(!((key=keys[iter.i++])in iter.o));return step(0,key)});var reflect={apply:function apply(target,thisArgument,argumentsList){return _apply.call(target,thisArgument,argumentsList)},construct:function construct(target,argumentsList){var proto=assert.fn(arguments.length<3?target:arguments[2]).prototype,instance=$.create(isObject(proto)?proto:Object.prototype),result=_apply.call(target,instance,argumentsList);return isObject(result)?result:instance},defineProperty:function defineProperty(target,propertyKey,attributes){assertObject(target);try{$.setDesc(target,propertyKey,attributes);return true}catch(e){return false}},deleteProperty:function deleteProperty(target,propertyKey){var desc=$.getDesc(assertObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]},get:function get(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc=$.getDesc(assertObject(target),propertyKey),proto;if(desc)return $.has(desc,"value")?desc.value:desc.get===undefined?undefined:desc.get.call(receiver);return isObject(proto=getProto(target))?get(proto,propertyKey,receiver):undefined},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return $.getDesc(assertObject(target),propertyKey)},getPrototypeOf:function getPrototypeOf(target){return getProto(assertObject(target))},has:function has(target,propertyKey){return propertyKey in target},isExtensible:function isExtensible(target){return _isExtensible(assertObject(target))},ownKeys:require("./$.own-keys"),preventExtensions:function preventExtensions(target){assertObject(target);try{_preventExtensions(target);return true}catch(e){return false}},set:function set(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=$.getDesc(assertObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getProto(target))){return set(proto,propertyKey,V,receiver)}ownDesc=$.desc(0)}if($.has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=$.getDesc(receiver,propertyKey)||$.desc(0);existingDescriptor.value=V;$.setDesc(receiver,propertyKey,existingDescriptor);return true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}};if(setProto)reflect.setPrototypeOf=function setPrototypeOf(target,proto){setProto.check(target,proto);try{setProto.set(target,proto);return true}catch(e){return false}};$def($def.G,{Reflect:{}});$def($def.S+$def.F*buggyEnumerate,"Reflect",{enumerate:function enumerate(target){return new Enumerate(assertObject(target))}});$def($def.S,"Reflect",reflect)},{"./$":58,"./$.assert":40,"./$.def":48,"./$.iter":57,"./$.own-keys":60,"./$.set-proto":63,"./$.uid":70,"./$.wks":72}],108:[function(require,module,exports){var $=require("./$"),cof=require("./$.cof"),$RegExp=$.g.RegExp,Base=$RegExp,proto=$RegExp.prototype,re=/a/g,CORRECT_NEW=new $RegExp(re)!==re,ALLOWS_RE_WITH_FLAGS=function(){try{return $RegExp(re,"i")=="/a/i"}catch(e){}}();if($.FW&&$.DESC){if(!CORRECT_NEW||!ALLOWS_RE_WITH_FLAGS){$RegExp=function RegExp(pattern,flags){var patternIsRegExp=cof(pattern)=="RegExp",flagsIsUndefined=flags===undefined;if(!(this instanceof $RegExp)&&patternIsRegExp&&flagsIsUndefined)return pattern;return CORRECT_NEW?new Base(patternIsRegExp&&!flagsIsUndefined?pattern.source:pattern,flags):new Base(patternIsRegExp?pattern.source:pattern,patternIsRegExp&&flagsIsUndefined?pattern.flags:flags)};$.each.call($.getNames(Base),function(key){key in $RegExp||$.setDesc($RegExp,key,{configurable:true,get:function(){return Base[key]},set:function(it){Base[key]=it}})});proto.constructor=$RegExp;$RegExp.prototype=proto;$.hide($.g,"RegExp",$RegExp)}if(/./g.flags!="g")$.setDesc(proto,"flags",{configurable:true,get:require("./$.replacer")(/^.*\/(\w*)$/,"$1")})}require("./$.species")($RegExp)},{"./$":58,"./$.cof":42,"./$.replacer":62,"./$.species":64}],109:[function(require,module,exports){"use strict";var strong=require("./$.collection-strong");require("./$.collection")("Set",{add:function add(value){return strong.def(this,value=value===0?0:value,value)}},strong)},{"./$.collection":46,"./$.collection-strong":43}],110:[function(require,module,exports){"use strict";var $def=require("./$.def"),$at=require("./$.string-at")(false);$def($def.P,"String",{codePointAt:function codePointAt(pos){return $at(this,pos)}})},{"./$.def":48,"./$.string-at":65}],111:[function(require,module,exports){"use strict";var $=require("./$"),cof=require("./$.cof"),$def=require("./$.def"),toLength=$.toLength;$def($def.P+$def.F*!require("./$.throws")(function(){"q".endsWith(/./)}),"String",{endsWith:function endsWith(searchString){if(cof(searchString)=="RegExp")throw TypeError();var that=String($.assertDefined(this)),endPosition=arguments[1],len=toLength(that.length),end=endPosition===undefined?len:Math.min(toLength(endPosition),len);searchString+="";return that.slice(end-searchString.length,end)===searchString}})},{"./$":58,"./$.cof":42,"./$.def":48,"./$.throws":69}],112:[function(require,module,exports){var $def=require("./$.def"),toIndex=require("./$").toIndex,fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$def($def.S+$def.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function fromCodePoint(x){var res=[],len=arguments.length,i=0,code;while(len>i){code=+arguments[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}})},{"./$":58,"./$.def":48}],113:[function(require,module,exports){"use strict";var $=require("./$"),cof=require("./$.cof"),$def=require("./$.def");$def($def.P,"String",{includes:function includes(searchString){if(cof(searchString)=="RegExp")throw TypeError();return!!~String($.assertDefined(this)).indexOf(searchString,arguments[1])}})},{"./$":58,"./$.cof":42,"./$.def":48}],114:[function(require,module,exports){var set=require("./$").set,$at=require("./$.string-at")(true),ITER=require("./$.uid").safe("iter"),$iter=require("./$.iter"),step=$iter.step;require("./$.iter-define")(String,"String",function(iterated){set(this,ITER,{o:String(iterated),i:0})},function(){var iter=this[ITER],O=iter.o,index=iter.i,point;if(index>=O.length)return step(1);point=$at(O,index);iter.i+=point.length;return step(0,point)})},{"./$":58,"./$.iter":57,"./$.iter-define":55,"./$.string-at":65,"./$.uid":70}],115:[function(require,module,exports){var $=require("./$"),$def=require("./$.def");$def($def.S,"String",{raw:function raw(callSite){var tpl=$.toObject(callSite.raw),len=$.toLength(tpl.length),sln=arguments.length,res=[],i=0;while(len>i){res.push(String(tpl[i++]));if(i<sln)res.push(String(arguments[i]))}return res.join("")}})},{"./$":58,"./$.def":48}],116:[function(require,module,exports){var $def=require("./$.def");$def($def.P,"String",{repeat:require("./$.string-repeat")})},{"./$.def":48,"./$.string-repeat":67}],117:[function(require,module,exports){"use strict";var $=require("./$"),cof=require("./$.cof"),$def=require("./$.def");$def($def.P+$def.F*!require("./$.throws")(function(){"q".startsWith(/./)}),"String",{startsWith:function startsWith(searchString){if(cof(searchString)=="RegExp")throw TypeError();var that=String($.assertDefined(this)),index=$.toLength(Math.min(arguments[1],that.length));searchString+="";return that.slice(index,index+searchString.length)===searchString}})},{"./$":58,"./$.cof":42,"./$.def":48,"./$.throws":69}],118:[function(require,module,exports){"use strict";var $=require("./$"),setTag=require("./$.cof").set,uid=require("./$.uid"),$def=require("./$.def"),keyOf=require("./$.keyof"),enumKeys=require("./$.enum-keys"),assertObject=require("./$.assert").obj,has=$.has,$create=$.create,getDesc=$.getDesc,setDesc=$.setDesc,desc=$.desc,getNames=$.getNames,toObject=$.toObject,$Symbol=$.g.Symbol,setter=false,TAG=uid("tag"),HIDDEN=uid("hidden"),SymbolRegistry={},AllSymbols={},useNative=$.isFunction($Symbol);function wrap(tag){var sym=AllSymbols[tag]=$.set($create($Symbol.prototype),TAG,tag);$.DESC&&setter&&setDesc(Object.prototype,tag,{configurable:true,set:function(value){if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setDesc(this,tag,desc(1,value))}});return sym}function defineProperty(it,key,D){if(D&&has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))setDesc(it,HIDDEN,desc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D.enumerable=false}}return setDesc(it,key,D)}function defineProperties(it,P){assertObject(it);var keys=enumKeys(P=toObject(P)),i=0,l=keys.length,key;while(l>i)defineProperty(it,key=keys[i++],P[key]);return it}function create(it,P){return P===undefined?$create(it):defineProperties($create(it),P)}function getOwnPropertyDescriptor(it,key){var D=getDesc(it=toObject(it),key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D}function getOwnPropertyNames(it){var names=getNames(toObject(it)),result=[],i=0,key;while(names.length>i)if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN)result.push(key);return result}function getOwnPropertySymbols(it){var names=getNames(toObject(it)),result=[],i=0,key;while(names.length>i)if(has(AllSymbols,key=names[i++]))result.push(AllSymbols[key]);return result}if(!useNative){$Symbol=function Symbol(description){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");return wrap(uid(description))};$.hide($Symbol.prototype,"toString",function(){return this[TAG]});$.create=create;$.setDesc=defineProperty;$.getDesc=getOwnPropertyDescriptor;$.setDescs=defineProperties;$.getNames=getOwnPropertyNames;$.getSymbols=getOwnPropertySymbols}var symbolStatics={for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){return keyOf(SymbolRegistry,key)},useSetter:function(){setter=true},useSimple:function(){setter=false}};$.each.call(("hasInstance,isConcatSpreadable,iterator,match,replace,search,"+"species,split,toPrimitive,toStringTag,unscopables").split(","),function(it){var sym=require("./$.wks")(it);symbolStatics[it]=useNative?sym:wrap(sym)});setter=true;$def($def.G+$def.W,{Symbol:$Symbol});$def($def.S,"Symbol",symbolStatics);$def($def.S+$def.F*!useNative,"Object",{create:create,defineProperty:defineProperty,defineProperties:defineProperties,getOwnPropertyDescriptor:getOwnPropertyDescriptor,getOwnPropertyNames:getOwnPropertyNames,getOwnPropertySymbols:getOwnPropertySymbols});setTag($Symbol,"Symbol");setTag(Math,"Math",true);setTag($.g.JSON,"JSON",true)},{"./$":58,"./$.assert":40,"./$.cof":42,"./$.def":48,"./$.enum-keys":50,"./$.keyof":59,"./$.uid":70,"./$.wks":72}],119:[function(require,module,exports){"use strict";var $=require("./$"),weak=require("./$.collection-weak"),leakStore=weak.leakStore,ID=weak.ID,WEAK=weak.WEAK,has=$.has,isObject=$.isObject,isFrozen=Object.isFrozen||$.core.Object.isFrozen,tmp={};var WeakMap=require("./$.collection")("WeakMap",{get:function get(key){if(isObject(key)){if(isFrozen(key))return leakStore(this).get(key);if(has(key,WEAK))return key[WEAK][this[ID]]}},set:function set(key,value){return weak.def(this,key,value)}},weak,true,true);if($.FW&&(new WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)!=7){$.each.call(["delete","has","get","set"],function(key){var method=WeakMap.prototype[key];WeakMap.prototype[key]=function(a,b){if(isObject(a)&&isFrozen(a)){var result=leakStore(this)[key](a,b);return key=="set"?this:result}return method.call(this,a,b)}})}},{"./$":58,"./$.collection":46,"./$.collection-weak":45}],120:[function(require,module,exports){"use strict";var weak=require("./$.collection-weak");require("./$.collection")("WeakSet",{add:function add(value){return weak.def(this,value,true)}},weak,false,true)},{"./$.collection":46,"./$.collection-weak":45}],121:[function(require,module,exports){var $def=require("./$.def"),$includes=require("./$.array-includes")(true);$def($def.P,"Array",{includes:function includes(el){return $includes(this,el,arguments[1])}});require("./$.unscope")("includes")},{"./$.array-includes":38,"./$.def":48,"./$.unscope":71}],122:[function(require,module,exports){require("./$.collection-to-json")("Map")},{"./$.collection-to-json":44}],123:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),ownKeys=require("./$.own-keys");$def($def.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=$.toObject(object),result={};$.each.call(ownKeys(O),function(key){$.setDesc(result,key,$.desc(0,$.getDesc(O,key)))});return result}})},{"./$":58,"./$.def":48,"./$.own-keys":60}],124:[function(require,module,exports){var $=require("./$"),$def=require("./$.def");function createObjectToArray(isEntries){return function(object){var O=$.toObject(object),keys=$.getKeys(O),length=keys.length,i=0,result=Array(length),key;if(isEntries)while(length>i)result[i]=[key=keys[i++],O[key]];else while(length>i)result[i]=O[keys[i++]];return result}}$def($def.S,"Object",{values:createObjectToArray(false),entries:createObjectToArray(true)})},{"./$":58,"./$.def":48}],125:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"RegExp",{escape:require("./$.replacer")(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})},{"./$.def":48,"./$.replacer":62}],126:[function(require,module,exports){require("./$.collection-to-json")("Set")},{"./$.collection-to-json":44}],127:[function(require,module,exports){"use strict";var $def=require("./$.def"),$at=require("./$.string-at")(true);$def($def.P,"String",{at:function at(pos){return $at(this,pos)}})},{"./$.def":48,"./$.string-at":65}],128:[function(require,module,exports){"use strict";var $def=require("./$.def"),$pad=require("./$.string-pad");$def($def.P,"String",{lpad:function lpad(n){return $pad(this,n,arguments[1],true)}})},{"./$.def":48,"./$.string-pad":66}],129:[function(require,module,exports){"use strict";var $def=require("./$.def"),$pad=require("./$.string-pad");$def($def.P,"String",{rpad:function rpad(n){return $pad(this,n,arguments[1],false)}})},{"./$.def":48,"./$.string-pad":66}],130:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),$Array=$.core.Array||Array,statics={};function setStatics(keys,length){$.each.call(keys.split(","),function(key){if(length==undefined&&key in $Array)statics[key]=$Array[key];else if(key in[])statics[key]=require("./$.ctx")(Function.call,[][key],length)})}setStatics("pop,reverse,shift,keys,values,entries",1);setStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$def($def.S,"Array",statics)},{"./$":58,"./$.ctx":47,"./$.def":48}],131:[function(require,module,exports){require("./es6.array.iterator");var $=require("./$"),Iterators=require("./$.iter").Iterators,ITERATOR=require("./$.wks")("iterator"),ArrayValues=Iterators.Array,NodeList=$.g.NodeList;if($.FW&&NodeList&&!(ITERATOR in NodeList.prototype)){$.hide(NodeList.prototype,ITERATOR,ArrayValues)}Iterators.NodeList=ArrayValues},{"./$":58,"./$.iter":57,"./$.wks":72,"./es6.array.iterator":92}],132:[function(require,module,exports){var $def=require("./$.def"),$task=require("./$.task");$def($def.G+$def.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{"./$.def":48,"./$.task":68}],133:[function(require,module,exports){var $=require("./$"),$def=require("./$.def"),invoke=require("./$.invoke"),partial=require("./$.partial"),navigator=$.g.navigator,MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent);function wrap(set){return MSIE?function(fn,time){return set(invoke(partial,[].slice.call(arguments,2),$.isFunction(fn)?fn:Function(fn)),time)}:set}$def($def.G+$def.B+$def.F*MSIE,{setTimeout:wrap($.g.setTimeout),setInterval:wrap($.g.setInterval)})},{"./$":58,"./$.def":48,"./$.invoke":53,"./$.partial":61}],134:[function(require,module,exports){require("./modules/es5");require("./modules/es6.symbol");require("./modules/es6.object.assign");require("./modules/es6.object.is");require("./modules/es6.object.set-prototype-of");require("./modules/es6.object.to-string");require("./modules/es6.object.statics-accept-primitives");require("./modules/es6.function.name");require("./modules/es6.function.has-instance");require("./modules/es6.number.constructor");require("./modules/es6.number.statics");require("./modules/es6.math");require("./modules/es6.string.from-code-point");require("./modules/es6.string.raw");require("./modules/es6.string.iterator");require("./modules/es6.string.code-point-at");require("./modules/es6.string.ends-with");require("./modules/es6.string.includes");require("./modules/es6.string.repeat");require("./modules/es6.string.starts-with");require("./modules/es6.array.from");require("./modules/es6.array.of");require("./modules/es6.array.iterator");require("./modules/es6.array.species");require("./modules/es6.array.copy-within");require("./modules/es6.array.fill");require("./modules/es6.array.find");require("./modules/es6.array.find-index");require("./modules/es6.regexp");require("./modules/es6.promise");require("./modules/es6.map");require("./modules/es6.set");require("./modules/es6.weak-map");require("./modules/es6.weak-set");require("./modules/es6.reflect");require("./modules/es7.array.includes");require("./modules/es7.string.at");require("./modules/es7.string.lpad");require("./modules/es7.string.rpad");require("./modules/es7.regexp.escape");require("./modules/es7.object.get-own-property-descriptors");require("./modules/es7.object.to-array");require("./modules/es7.map.to-json");require("./modules/es7.set.to-json");require("./modules/js.array.statics");require("./modules/web.timers");require("./modules/web.immediate");require("./modules/web.dom.iterable");module.exports=require("./modules/$").core},{"./modules/$":58,"./modules/es5":86,"./modules/es6.array.copy-within":87,"./modules/es6.array.fill":88,"./modules/es6.array.find":90,"./modules/es6.array.find-index":89,"./modules/es6.array.from":91,"./modules/es6.array.iterator":92,"./modules/es6.array.of":93,"./modules/es6.array.species":94,"./modules/es6.function.has-instance":95,"./modules/es6.function.name":96,"./modules/es6.map":97,"./modules/es6.math":98,"./modules/es6.number.constructor":99,"./modules/es6.number.statics":100,"./modules/es6.object.assign":101,"./modules/es6.object.is":102,"./modules/es6.object.set-prototype-of":103,"./modules/es6.object.statics-accept-primitives":104,"./modules/es6.object.to-string":105,"./modules/es6.promise":106,"./modules/es6.reflect":107,"./modules/es6.regexp":108,"./modules/es6.set":109,"./modules/es6.string.code-point-at":110,"./modules/es6.string.ends-with":111,"./modules/es6.string.from-code-point":112,"./modules/es6.string.includes":113,"./modules/es6.string.iterator":114,"./modules/es6.string.raw":115,"./modules/es6.string.repeat":116,"./modules/es6.string.starts-with":117,"./modules/es6.symbol":118,"./modules/es6.weak-map":119,"./modules/es6.weak-set":120,"./modules/es7.array.includes":121,"./modules/es7.map.to-json":122,"./modules/es7.object.get-own-property-descriptors":123,"./modules/es7.object.to-array":124,"./modules/es7.regexp.escape":125,"./modules/es7.set.to-json":126,"./modules/es7.string.at":127,"./modules/es7.string.lpad":128,"./modules/es7.string.rpad":129,"./modules/js.array.statics":130,"./modules/web.dom.iterable":131,"./modules/web.immediate":132,"./modules/web.timers":133}],135:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":136}],136:[function(require,module,exports){"use strict";var invariant=require("./invariant");var _lastID=1;var _prefix="ID_";function Dispatcher(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;this.$Dispatcher_callbacks[id]=callback;return id};Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id);delete this.$Dispatcher_callbacks[id]};Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];if(this.$Dispatcher_isPending[id]){invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while "+"waiting for `%s`.",id);continue}invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id);this.$Dispatcher_invokeCallback(id)}};Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[id]){continue}this.$Dispatcher_invokeCallback(id)}}finally{this.$Dispatcher_stopDispatching()}};Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=true;this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[id]=true};Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[id]=false;this.$Dispatcher_isHandled[id]=false}this.$Dispatcher_pendingPayload=payload;this.$Dispatcher_isDispatching=true};Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};module.exports=Dispatcher},{"./invariant":137}],137:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(false){if(format===undefined){throw new Error("invariant requires an error message argument")}}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}error.framesToPop=1;throw error}};module.exports=invariant},{}],138:[function(require,module,exports){var baseFlatten=require("../internal/baseFlatten"),baseUniq=require("../internal/baseUniq"),restParam=require("../function/restParam");var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});module.exports=union},{"../function/restParam":140,"../internal/baseFlatten":148,"../internal/baseUniq":152}],139:[function(require,module,exports){var baseDifference=require("../internal/baseDifference"),isArrayLike=require("../internal/isArrayLike"),restParam=require("../function/restParam");var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[]});module.exports=without},{"../function/restParam":140,"../internal/baseDifference":147,"../internal/isArrayLike":161}],140:[function(require,module,exports){var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}module.exports=restParam},{}],141:[function(require,module,exports){(function(global){(function(){var undefined;var VERSION="3.8.0";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LAZY_DROP_WHILE_FLAG=0,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);

var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var whitespace=" 	\f \ufeff"+"\n\r\u2028\u2029"+" ᠎             　";var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var debounceOptions={leading:false,maxWait:0,trailing:false};var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={function:true,object:true};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsReflexive=value===value,othIsReflexive=other===other;if(value>other||!valIsReflexive||value===undefined&&othIsReflexive){return 1}if(value<other||!othIsReflexive||other===undefined&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){if(typeof value=="string"){return value}return value==null?"":value+""}function charAtCallback(string){return string.charCodeAt(0)}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}return result*(orders[index]?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var document=(document=context.window)&&document.document;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=context._;var reIsNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=isNative(ArrayBuffer=context.ArrayBuffer)&&ArrayBuffer,bufferSlice=isNative(bufferSlice=ArrayBuffer&&new ArrayBuffer(0).slice)&&bufferSlice,ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,getOwnPropertySymbols=isNative(getOwnPropertySymbols=Object.getOwnPropertySymbols)&&getOwnPropertySymbols,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,push=arrayProto.push,preventExtensions=isNative(preventExtensions=Object.preventExtensions)&&preventExtensions,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=isNative(Set=context.Set)&&Set,setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=isNative(Uint8Array=context.Uint8Array)&&Uint8Array,WeakMap=isNative(WeakMap=context.WeakMap)&&WeakMap;var Float64Array=function(){try{var func=isNative(func=context.Float64Array)&&func,result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result}();var nativeAssign=function(){var func=preventExtensions&&isNative(func=Object.assign)&&func;try{if(func){var object=preventExtensions({1:0});object[0]=1}}catch(e){try{func(object,"xo")}catch(e){}return!object[1]&&func}return false}();var nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsFinite=context.isFinite,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeNow=isNative(nativeNow=Date.now)&&nativeNow,nativeNumIsFinite=isNative(nativeNumIsFinite=Number.isFinite)&&nativeNumIsFinite,nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0;var MAX_SAFE_INTEGER=Math.pow(2,53)-1;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};(function(x){var Ctor=function(){this.x=x},args=arguments,object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor){props.push(key)}support.funcDecomp=/\bthis\b/.test(function(){return this});support.funcNames=typeof Function.name=="string";try{support.dom=document.createDocumentFragment().nodeType===11}catch(e){support.dom=false}try{support.nonEnumArgs=!propertyIsEnumerable.call(args,1)}catch(e){support.nonEnumArgs=true}})(1,0);lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=false;this.__iteratees__=null;this.__takeCount__=POSITIVE_INFINITY;this.__views__=null}function lazyClone(){var actions=this.__actions__,iteratees=this.__iteratees__,views=this.__views__,result=new LazyWrapper(this.__wrapped__);result.__actions__=actions?arrayCopy(actions):null;result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=iteratees?arrayCopy(iteratees):null;result.__takeCount__=this.__takeCount__;result.__views__=views?arrayCopy(views):null;return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value();if(!isArray(array)){return baseWrapperValue(array,this.__actions__)}var dir=this.__dir__,isRight=dir<0,view=getView(0,array.length,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,takeCount=nativeMin(length,this.__takeCount__),iteratees=this.__iteratees__,iterLength=iteratees?iteratees.length:0,resIndex=0,result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type;if(type==LAZY_DROP_WHILE_FLAG){if(data.done&&(isRight?index>data.index:index<data.index)){data.count=0;data.done=false}data.index=index;if(!data.done){var limit=data.limit;if(!(data.done=limit>-1?data.count++>=limit:!iteratee(value))){continue outer}}}else{var computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayMax(array){var index=-1,length=array.length,result=NEGATIVE_INFINITY;while(++index<length){var value=array[index];if(value>result){result=value}}return result}function arrayMin(array){var index=-1,length=array.length,result=POSITIVE_INFINITY;while(++index<length){var value=array[index];if(value<result){result=value}}return result}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array){var length=array.length,result=0;while(length--){result+=+array[length]||0}return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function assignWith(object,source,customizer){var props=keys(source);push.apply(props,getSymbols(source));var index=-1,length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}var baseAssign=nativeAssign||function(object,source){return source==null?object:baseCopy(source,getSymbols(source),baseCopy(source,keys(source),object))};function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr&&collection.length,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=isNil?undefined:collection[key]}}return result}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value)}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)});return result}var baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}function baseFlatten(array,isDeep,isStrict){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){value=baseFlatten(value,isDeep,isStrict)}var valIndex=-1,valLength=value.length;while(++valIndex<valLength){result[++resIndex]=value[valIndex]}}else if(!isStrict){result[++resIndex]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=-1,length=path.length;while(object!=null&&++index<length){object=object[path[index]]}return index&&index==length?object:undefined}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true}var valType=typeof value,othType=typeof other;if(valType!="function"&&valType!="object"&&othType!="function"&&othType!="object"||value==null||other==null){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var valWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(valWrapped||othWrapped){return equalFunc(valWrapped?object.value():object,othWrapped?other.value():other,customizer,isLoose,stackA,stackB)}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,props,values,strictCompareFlags,customizer){var index=-1,length=props.length,noCustomizer=!customizer;while(++index<length){if(noCustomizer&&strictCompareFlags[index]?values[index]!==object[props[index]]:!(props[index]in object)){return false}}index=-1;while(++index<length){var key=props[index],objValue=object[key],srcValue=values[index];if(noCustomizer&&strictCompareFlags[index]){var result=objValue!==undefined||key in object}else{result=customizer?customizer(objValue,srcValue,key):undefined;if(result===undefined){result=baseIsEqual(srcValue,objValue,customizer,true)}}if(!result){return false}}return true}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var props=keys(source),length=props.length;if(!length){return constant(true)}if(length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=source[props[length]];values[length]=value;strictCompareFlags[length]=isStrictComparable(value)}return function(object){return object!=null&&baseIsMatch(toObject(object),props,values,strictCompareFlags)}}function baseMatchesProperty(path,value){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(value),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===value?value!==undefined||key in object:baseIsEqual(value,object[key],null,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source));if(!isSrcArr){var props=keys(source);push.apply(props,getSymbols(source))}arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key]}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue}if((isSrcArr||result!==undefined)&&(isCommon||(result===result?result!==value:value===value))){object[key]=result}}});return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB)}else if(result===result?result!==value:value===value){object[key]=result}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=parseFloat(indexes[length]);if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)});return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee)});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0});return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=200,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var args=[result],action=actions[index];push.apply(args,action.args);result=action.func.apply(action.thisArg,args)}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(retHighest?computed<=value:computed<value){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsUndef=value===undefined;while(low<high){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsUndef){setLow=isReflexive&&(retHighest||computed!==undefined)}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}if(!bufferSlice){bufferClone=!(ArrayBuffer&&Uint8Array)?constant(null):function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);

if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}if(byteLength!=offset){view=new Uint8Array(result,offset);view.set(new Uint8Array(buffer,offset))}return result}}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(argsLength+leftLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)})}return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2&&sources[length-2],guard=length>2&&sources[2],thisArg=length>1&&sources[length-1];if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:null;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?null:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}var createCache=!(nativeCreate&&Set)?constant(null):function(values){return new SetCache(values)};function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,arguments);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=null}var result=createWrapper(func,flag,null,null,null,null,null,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createExtremum(arrayFunc,isMin){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}if(noIteratee){var isArr=isArray(collection);if(!isArr&&isString(collection)){iteratee=charAtCallback}else{return arrayFunc(isArr?collection:toIterable(collection))}}return extremumBy(collection,iteratee,isMin)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var length=arguments.length;if(!length){return function(){return arguments[0]}}var wrapper,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var funcName=wrapper?"":getFuncName(func);wrapper=funcName=="wrapper"?new LodashWrapper([]):wrapper}index=wrapper?-1:length;while(++index<length){func=funcs[index];funcName=getFuncName(func);var data=funcName=="wrapper"?getData(func):null;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments;if(wrapper&&args.length==1&&isArray(args[0])){return wrapper.plant(args[0]).value()}var index=0,result=funcs[index].apply(this,args);while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value});return result}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,null,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG;var Ctor=!isBindKey&&createCtorWrapper(func),key=func;function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):null,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:null,newHoldersRight=isCurry?null:argsHolders,newPartials=isCurry?args:null,newPartialsRight=isCurry?null:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this;if(isBindKey){func=thisBinding[key]}if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}var fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtorWrapper(func):func;return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,ceil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(argsLength+leftLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var func=getCallback(iteratee);return func===baseCallback&&iteratee==null?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,func(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=null}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=null}var data=isBindKey?null:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length,result=true;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(result&&++index<arrLength){var arrValue=array[index],othValue=other[index];result=undefined;if(customizer){result=isLoose?customizer(othValue,arrValue,index):customizer(arrValue,othValue,index)}if(result===undefined){if(isLoose){var othIndex=othLength;while(othIndex--){othValue=other[othIndex];result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB);if(result){break}}}else{result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}}}return!!result}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var skipCtor=isLoose,index=-1;while(++index<objLength){var key=objProps[index],result=isLoose?key in other:hasOwnProperty.call(other,key);if(result){var objValue=object[key],othValue=other[key];result=undefined;if(customizer){result=isLoose?customizer(othValue,objValue,key):customizer(objValue,othValue,key)}if(result===undefined){result=objValue&&objValue===othValue||equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB)}}if(!result){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function extremumBy(collection,iteratee,isMin){var exValue=isMin?POSITIVE_INFINITY:NEGATIVE_INFINITY,computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=iteratee(value,index,collection);if((isMin?current<computed:current>computed)||current===exValue&&current===result){computed=current;result=value}});return result}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};var getFuncName=function(){if(!support.funcNames){return constant("")}if(constant.name=="constant"){return baseProperty("name")}return function(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}}();function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");var getSymbols=!getOwnPropertySymbols?constant([]):function(object){return getOwnPropertySymbols(toObject(object))};function getView(start,end,transforms){var index=-1,length=transforms?transforms.length:0;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path)}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args)}function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=+value;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}function isKey(value,object){var type=typeof value;if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);return!!funcName&&func===lodash[funcName]&&funcName in LazyWrapper.prototype}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimIsPlainObject(value){var Ctor,support=lodash.support;if(!(isObjectLike(value)&&objToString.call(value)==objectTag)||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,function(subValue,key){result=key});return result===undefined||hasOwnProperty.call(value,result)}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,support=lodash.support;var allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isArrayLike(value)){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(+size||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(ceil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,baseFlatten(values,false,true)):[]});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value),other=array[index];if(value===value?value===other:other!==other){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=[],indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArrayLike(value)){args.push(value);caches.push(isCommon&&value.length>=120?createCache(argsIndex&&value):null)}}argsLength=args.length;if(argsLength<2){return result}var array=args[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){argsIndex=argsLength;while(--argsIndex){var cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?null:isSorted;isSorted=false}var func=getCallback();if(!(func===baseCallback&&iteratee==null)){iteratee=func(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){if(!(array&&array.length)){return[]}var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true}});var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}var result=unzip(array);if(iteratee==null){return result}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,true)})}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[]});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?baseDifference(result,array).concat(baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=arrays[length-2],thisArg=arrays[length-1];if(length>2&&typeof iteratee=="function"){length-=2}else{iteratee=length>1&&typeof thisArg=="function"?(--length,thisArg):undefined;thisArg=undefined}arrays.length=length;return unzipWith(arrays,iteratee,thisArg)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){if(this.__actions__.length){value=new LazyWrapper(this)}return new LodashWrapper(value.reverse(),this.__chain__)}return this.thru(function(value){return value.reverse()})}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props))});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(!length){return false}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<length&&collection.indexOf(target,fromIndex)>-1:getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=="function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp&&value!=null&&value[path];result[++index]=func?func.apply(value,args):invokePath(value,path,args)});return result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);

function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(n<0?0:+n||0,result.length);return result}function shuffle(collection){collection=toIterable(collection);var index=-1,length=collection.length,result=Array(length);while(++index<length){var rand=baseRandom(0,index);if(index!=rand){result[index]=result[rand]}result[rand]=collection[index]}return result}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}});return baseSortBy(result,compareAscending)}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[]}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1}return baseSortByOrder(collection,baseFlatten(iteratees),[])});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=null}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,iteratees,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=null}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,null,null,null,null,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=null}return result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}debounced.cancel=cancel;return debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,cache=memoized.cache,key=resolver?resolver.apply(this,args):args[0];if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,null,null,null,baseFlatten(indexes))});function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=+wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,null,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,isDeep,customizer)}function cloneDeep(value,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,true,customizer)}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&objToString.call(value)==argsTag}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&objToString.call(value).indexOf("Element")>-1}if(!support.dom){isElement=function(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);if(!customizer&&isStrictComparable(value)&&isStrictComparable(other)){return value===other}var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}var isFinite=nativeNumIsFinite||function(value){return typeof value=="number"&&nativeIsFinite(value)};var isFunction=!(baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array))?baseIsFunction:function(value){return objToString.call(value)==funcTag};function isObject(value){var type=typeof value;return type=="function"||!!value&&type=="object"}function isMatch(object,source,customizer,thisArg){var props=keys(source),length=props.length;if(!length){return true}if(object==null){return false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);object=toObject(object);if(!customizer&&length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return value===object[key]&&(value!==undefined||key in object)}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=values[length]=source[props[length]];strictCompareFlags[length]=isStrictComparable(value)}return baseIsMatch(object,props,values,strictCompareFlags,customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(objToString.call(value)==funcTag){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&objToString.call(value)==objectTag)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return isObjectLike(value)&&objToString.call(value)==regexpTag}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=null}return properties?baseAssign(result,properties):result}var defaults=restParam(function(args){var object=args[0];if(object==null){return object}args.push(assignDefaults);return assign.apply(undefined,args)});var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(object==null){return false}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path);result=object!=null&&hasOwnProperty.call(object,path)}return result}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=null}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object!=null&&object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var merge=createAssigner(baseMerge);var omit=restParam(function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}function set(object,path,value){if(object==null){return object}var pathKey=path+"";path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,endIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==endIndex){nested[key]=value}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{}}}nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)&&Ctor.prototype)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(typeof end==="undefined"){end=start;start=0}else{end=+end||0}return value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=null}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=floor(mid),rightLength=ceil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard&&isIterateeCall(string,radix,guard)){radix=0}return nativeParseInt(string,radix)}if(nativeParseInt(whitespace+"08")!=8){parseInt=function(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=floor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=null}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=null}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=null}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=null}return isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(path,value){return baseMatchesProperty(path,baseClone(value,true))}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args)}});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args)}});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj&&keys(source),methodNames=props&&props.length&&baseFunctions(source,props);if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}var args=[this.value()];push.apply(args,arguments);return func.apply(object,args)}}(func)}}return object}function noConflict(){context._=oldDash;return this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=null}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(ceil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=floor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var max=createExtremum(arrayMax);var min=createExtremum(arrayMin,true);function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}return noIteratee?arraySum(isArray(collection)?collection:toIterable(collection)):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.get=get;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;

lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru(function(value){return sample(value,n)})};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["dropWhile","filter","map","takeWhile"],function(methodName,type){var isFilter=type!=LAZY_MAP_FLAG,isDropWhile=type==LAZY_DROP_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var filtered=this.__filtered__,result=filtered&&isDropWhile?new LazyWrapper(this):this.clone(),iteratees=result.__iteratees__||(result.__iteratees__=[]);iteratees.push({done:false,count:0,index:0,iteratee:getCallback(iteratee,thisArg,1),limit:-1,type:type});result.__filtered__=filtered||isFilter;return result}});arrayEach(["drop","take"],function(methodName,index){var whileName=methodName+"While";LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__,result=filtered&&!index?this.dropWhile():this.clone();n=n==null?1:nativeMax(floor(n)||0,0);if(filtered){if(index){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{last(result.__iteratees__).limit=n}}else{var views=result.__views__||(result.__views__=[]);views.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()};LazyWrapper.prototype[methodName+"RightWhile"]=function(predicate,thisArg){return this.reverse()[whileName](predicate,thisArg).reverse()}});arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this[dropName](1)}});arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value)})};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=this;if(start<0){result=this.takeRight(-start)}else if(start){result=this.drop(start)}if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.toArray=function(){return this.drop(0)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(!lodashFunc){return}var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){return onlyLazy?func.call(value):lodashFunc.call(lodash,this.value())}var interceptor=function(value){var otherArgs=[value];push.apply(otherArgs,args);return lodashFunc.apply(lodash,otherArgs)};if(useLazy){var wrapper=onlyLazy?value:new LazyWrapper(this),result=func.apply(wrapper,args);if(!retUnwrapped&&(isHybrid||result.__actions__)){var actions=result.__actions__||(result.__actions__=[]);actions.push({func:thru,args:[interceptor],thisArg:lodash})}return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}});arrayEach(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName](function(value){return func.apply(value,args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybridWrapper(null,BIND_KEY_FLAG).name]=[{name:"wrapper",func:null}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],142:[function(require,module,exports){(function(global){var cachePush=require("./cachePush"),isNative=require("../lang/isNative");var Set=isNative(Set=global.Set)&&Set;var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate;function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}SetCache.prototype.push=cachePush;module.exports=SetCache}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../lang/isNative":170,"./cachePush":155}],143:[function(require,module,exports){function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}module.exports=assignDefaults},{}],144:[function(require,module,exports){var getSymbols=require("./getSymbols"),keys=require("../object/keys");var arrayProto=Array.prototype;var push=arrayProto.push;function assignWith(object,source,customizer){var props=keys(source);push.apply(props,getSymbols(source));var index=-1,length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}module.exports=assignWith},{"../object/keys":174,"./getSymbols":159}],145:[function(require,module,exports){var baseCopy=require("./baseCopy"),getSymbols=require("./getSymbols"),isNative=require("../lang/isNative"),keys=require("../object/keys");var preventExtensions=isNative(preventExtensions=Object.preventExtensions)&&preventExtensions;var nativeAssign=function(){var func=preventExtensions&&isNative(func=Object.assign)&&func;try{if(func){var object=preventExtensions({1:0});object[0]=1}}catch(e){try{func(object,"xo")}catch(e){}return!object[1]&&func}return false}();var baseAssign=nativeAssign||function(object,source){return source==null?object:baseCopy(source,getSymbols(source),baseCopy(source,keys(source),object))};module.exports=baseAssign},{"../lang/isNative":170,"../object/keys":174,"./baseCopy":146,"./getSymbols":159}],146:[function(require,module,exports){function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],147:[function(require,module,exports){var baseIndexOf=require("./baseIndexOf"),cacheIndexOf=require("./cacheIndexOf"),createCache=require("./createCache");function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=baseIndexOf,isCommon=true,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}module.exports=baseDifference},{"./baseIndexOf":149,"./cacheIndexOf":154,"./createCache":157}],148:[function(require,module,exports){var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");function baseFlatten(array,isDeep,isStrict){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){value=baseFlatten(value,isDeep,isStrict)}var valIndex=-1,valLength=value.length;while(++valIndex<valLength){result[++resIndex]=value[valIndex]}}else if(!isStrict){result[++resIndex]=value}}return result}module.exports=baseFlatten},{"../lang/isArguments":168,"../lang/isArray":169,"./isArrayLike":161,"./isObjectLike":165}],149:[function(require,module,exports){var indexOfNaN=require("./indexOfNaN");function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}module.exports=baseIndexOf},{"./indexOfNaN":160}],150:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],151:[function(require,module,exports){function baseToString(value){if(typeof value=="string"){return value}return value==null?"":value+""}module.exports=baseToString},{}],152:[function(require,module,exports){var baseIndexOf=require("./baseIndexOf"),cacheIndexOf=require("./cacheIndexOf"),createCache=require("./createCache");function baseUniq(array,iteratee){var index=-1,indexOf=baseIndexOf,length=array.length,isCommon=true,isLarge=isCommon&&length>=200,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}module.exports=baseUniq},{"./baseIndexOf":149,"./cacheIndexOf":154,"./createCache":157}],153:[function(require,module,exports){var identity=require("../utility/identity");function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}module.exports=bindCallback},{"../utility/identity":179}],154:[function(require,module,exports){var isObject=require("../lang/isObject");function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}module.exports=cacheIndexOf},{"../lang/isObject":171}],155:[function(require,module,exports){var isObject=require("../lang/isObject");function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}module.exports=cachePush},{"../lang/isObject":171}],156:[function(require,module,exports){var bindCallback=require("./bindCallback"),isIterateeCall=require("./isIterateeCall"),restParam=require("../function/restParam");function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2&&sources[length-2],guard=length>2&&sources[2],thisArg=length>1&&sources[length-1];if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:null;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?null:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}module.exports=createAssigner},{"../function/restParam":140,"./bindCallback":153,"./isIterateeCall":163}],157:[function(require,module,exports){(function(global){var SetCache=require("./SetCache"),constant=require("../utility/constant"),isNative=require("../lang/isNative");var Set=isNative(Set=global.Set)&&Set;var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate;var createCache=!(nativeCreate&&Set)?constant(null):function(values){return new SetCache(values)};module.exports=createCache}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../lang/isNative":170,"../utility/constant":178,"./SetCache":142}],158:[function(require,module,exports){var baseProperty=require("./baseProperty");var getLength=baseProperty("length");module.exports=getLength},{"./baseProperty":150}],159:[function(require,module,exports){var constant=require("../utility/constant"),isNative=require("../lang/isNative"),toObject=require("./toObject");var getOwnPropertySymbols=isNative(getOwnPropertySymbols=Object.getOwnPropertySymbols)&&getOwnPropertySymbols;var getSymbols=!getOwnPropertySymbols?constant([]):function(object){return getOwnPropertySymbols(toObject(object))};module.exports=getSymbols},{"../lang/isNative":170,"../utility/constant":178,"./toObject":167}],160:[function(require,module,exports){function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}module.exports=indexOfNaN},{}],161:[function(require,module,exports){var getLength=require("./getLength"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(getLength(value))}module.exports=isArrayLike},{"./getLength":158,"./isLength":164}],162:[function(require,module,exports){var MAX_SAFE_INTEGER=Math.pow(2,53)-1;function isIndex(value,length){value=+value;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}module.exports=isIndex},{}],163:[function(require,module,exports){var isArrayLike=require("./isArrayLike"),isIndex=require("./isIndex"),isObject=require("../lang/isObject");function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}module.exports=isIterateeCall},{"../lang/isObject":171,"./isArrayLike":161,"./isIndex":162}],164:[function(require,module,exports){var MAX_SAFE_INTEGER=Math.pow(2,53)-1;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],165:[function(require,module,exports){function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isObjectLike},{}],166:[function(require,module,exports){var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("./isIndex"),isLength=require("./isLength"),keysIn=require("../object/keysIn"),support=require("../support");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}module.exports=shimKeys},{"../lang/isArguments":168,"../lang/isArray":169,"../object/keysIn":175,"../support":177,"./isIndex":162,"./isLength":164}],167:[function(require,module,exports){var isObject=require("../lang/isObject");function toObject(value){return isObject(value)?value:Object(value)}module.exports=toObject},{"../lang/isObject":171}],168:[function(require,module,exports){var isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike");var argsTag="[object Arguments]";var objectProto=Object.prototype;var objToString=objectProto.toString;function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&objToString.call(value)==argsTag}module.exports=isArguments},{"../internal/isArrayLike":161,"../internal/isObjectLike":165}],169:[function(require,module,exports){var isLength=require("../internal/isLength"),isNative=require("./isNative"),isObjectLike=require("../internal/isObjectLike");var arrayTag="[object Array]";var objectProto=Object.prototype;var objToString=objectProto.toString;var nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray;var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{"../internal/isLength":164,"../internal/isObjectLike":165,"./isNative":170}],170:[function(require,module,exports){var escapeRegExp=require("../string/escapeRegExp"),isObjectLike=require("../internal/isObjectLike");var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var objToString=objectProto.toString;var reIsNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function isNative(value){if(value==null){return false}if(objToString.call(value)==funcTag){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isNative},{"../internal/isObjectLike":165,"../string/escapeRegExp":176}],171:[function(require,module,exports){function isObject(value){var type=typeof value;return type=="function"||!!value&&type=="object"}module.exports=isObject},{}],172:[function(require,module,exports){var assignWith=require("../internal/assignWith"),baseAssign=require("../internal/baseAssign"),createAssigner=require("../internal/createAssigner");var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},{"../internal/assignWith":144,"../internal/baseAssign":145,"../internal/createAssigner":156}],173:[function(require,module,exports){var assign=require("./assign"),assignDefaults=require("../internal/assignDefaults"),restParam=require("../function/restParam");var defaults=restParam(function(args){var object=args[0];if(object==null){return object}args.push(assignDefaults);return assign.apply(undefined,args)});module.exports=defaults},{"../function/restParam":140,"../internal/assignDefaults":143,"./assign":172}],174:[function(require,module,exports){var isArrayLike=require("../internal/isArrayLike"),isNative=require("../lang/isNative"),isObject=require("../lang/isObject"),shimKeys=require("../internal/shimKeys");var nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys;var keys=!nativeKeys?shimKeys:function(object){var Ctor=object!=null&&object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};module.exports=keys},{"../internal/isArrayLike":161,"../internal/shimKeys":166,"../lang/isNative":170,"../lang/isObject":171}],175:[function(require,module,exports){var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("../internal/isIndex"),isLength=require("../internal/isLength"),isObject=require("../lang/isObject"),support=require("../support");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keysIn},{"../internal/isIndex":162,"../internal/isLength":164,"../lang/isArguments":168,"../lang/isArray":169,"../lang/isObject":171,"../support":177}],176:[function(require,module,exports){var baseToString=require("../internal/baseToString");var reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source);function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}module.exports=escapeRegExp},{"../internal/baseToString":151}],177:[function(require,module,exports){(function(global){var objectProto=Object.prototype;var document=(document=global.window)&&document.document;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var support={};(function(x){var Ctor=function(){this.x=x},args=arguments,object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor){props.push(key)}support.funcDecomp=/\bthis\b/.test(function(){return this});support.funcNames=typeof Function.name=="string";try{support.dom=document.createDocumentFragment().nodeType===11}catch(e){support.dom=false}try{support.nonEnumArgs=!propertyIsEnumerable.call(args,1)}catch(e){support.nonEnumArgs=true}})(1,0);module.exports=support}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],178:[function(require,module,exports){function constant(value){return function(){return value}}module.exports=constant},{}],179:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],180:[function(require,module,exports){function noop(){}module.exports=noop},{}],181:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var time=require("isomorph/time");var formats=require("./formats");var locales=require("./locales");var Field=require("./Field");var $__0=require("validators"),ValidationError=$__0.ValidationError;var $__1=require("./util"),strip=$__1.strip;var BaseTemporalField=Field.extend({inputFormatType:"",constructor:function BaseTemporalField(kwargs){kwargs=object.extend({inputFormats:null},kwargs);Field.call(this,kwargs);this.inputFormats=kwargs.inputFormats}});BaseTemporalField.prototype.toJavaScript=function(value){if(!is.Date(value)){value=strip(value)}if(is.String(value)){if(this.inputFormats===null){this.inputFormats=formats.getFormat(this.inputFormatType)}for(var i=0,l=this.inputFormats.length;i<l;i++){try{return this.strpdate(value,this.inputFormats[i])}catch(e){}}}throw ValidationError(this.errorMessages.invalid,{code:"invalid"})};BaseTemporalField.prototype.strpdate=function(value,format){return time.strpdate(value,format,locales.getDefaultLocale())};BaseTemporalField.prototype._hasChanged=function(initial,data){try{data=this.toJavaScript(data)}catch(e){if(!(e instanceof ValidationError)){throw e}return true}initial=this.toJavaScript(initial);if(!!initial&&!!data){return initial.getTime()!==data.getTime()}else{return initial!==data}};module.exports=BaseTemporalField},{"./Field":205,"./formats":254,"./locales":256,"./util":270,"isomorph/is":262,"isomorph/object":263,"isomorph/time":264,validators:267}],182:[function(require,module,exports){"use strict";var is=require("isomorph/is");var CheckboxInput=require("./CheckboxInput");var Field=require("./Field");var $__0=require("validators"),ValidationError=$__0.ValidationError;var BooleanField=Field.extend({widget:CheckboxInput,constructor:function BooleanField(kwargs){if(!(this instanceof BooleanField)){return new BooleanField(kwargs)}Field.call(this,kwargs)}});BooleanField.prototype.toJavaScript=function(value){if(is.String(value)&&(value.toLowerCase()=="false"||value=="0")){value=false}else{value=Boolean(value)}value=Field.prototype.toJavaScript.call(this,value);if(!value&&this.required){throw ValidationError(this.errorMessages.required,{code:"required"})}return value};BooleanField.prototype._hasChanged=function(initial,data){if(initial==="false"){initial=false}return Boolean(initial)!=Boolean(data)};module.exports=BooleanField},{"./CheckboxInput":187,"./Field":205,"isomorph/is":262,validators:267}],183:[function(require,module,exports){"use strict";var Concur=require("Concur");var is=require("isomorph/is");var format=require("isomorph/format").formatObj;var object=require("isomorph/object");var React=require("react");var TextInput=require("./TextInput");var Textarea=require("./Textarea");var $__0=require("./util"),prettyName=$__0.prettyName;var BoundField=Concur.extend({constructor:function BoundField(form,field,name){if(!(this instanceof BoundField)){return new BoundField(form,field,name)}this.form=form;this.field=field;this.name=name;this.htmlName=form.addPrefix(name);this.htmlInitialName=form.addInitialPrefix(name);this.htmlInitialId=form.addInitialPrefix(this.autoId());this.label=this.field.label!==null?this.field.label:prettyName(name);this.helpText=field.helpText||""}});BoundField.prototype.isEmpty=function(){return this.field.isEmptyValue(this.value())};BoundField.prototype.isPending=function(){return typeof this.form._pendingAsyncValidation[this.name]!="undefined"};BoundField.prototype.isCleaned=function(){return typeof this.form.cleanedData[this.name]!="undefined"};BoundField.prototype.isHidden=function(){return this.field.widget.isHidden};BoundField.prototype.status=function(){if(this.isPending()){return"pending"}if(this.errors().isPopulated()){return"error"}if(this.isCleaned()){return"valid"}return"default"};BoundField.prototype.autoId=function(){var autoId=this.form.autoId;if(autoId){autoId=""+autoId;if(autoId.indexOf("{name}")!=-1){return format(autoId,{name:this.htmlName})}return this.htmlName}return""};BoundField.prototype.data=function(){return this.field.widget.valueFromData(this.form.data,this.form.files,this.htmlName)};BoundField.prototype.errors=function(){return this.form.errors(this.name)||new this.form.errorConstructor};BoundField.prototype.errorMessage=function(){return this.errors().first()};BoundField.prototype.errorMessages=function(){return this.errors().messages()};BoundField.prototype.idForLabel=function(){var widget=this.field.widget;var id=object.get(widget.attrs,"id",this.autoId());return widget.idForLabel(id)};BoundField.prototype.value=function(){var data;if(this.form.isInitialRender){data=this.initialValue()}else{data=this.field.boundData(this.data(),object.get(this.form.initial,this.name,this.field.initial))}return this.field.prepareValue(data)};BoundField.prototype.initialValue=function(){var value=object.get(this.form.initial,this.name,this.field.initial);if(is.Function(value)){value=value()}return value};BoundField.prototype.asWidget=function(kwargs){kwargs=object.extend({widget:null,attrs:null,onlyInitial:false},kwargs);var widget=kwargs.widget!==null?kwargs.widget:this.field.widget;var attrs=kwargs.attrs!==null?kwargs.attrs:{};var autoId=this.autoId();var name=!kwargs.onlyInitial?this.htmlName:this.htmlInitialName;if(autoId&&typeof attrs.id=="undefined"&&typeof widget.attrs.id=="undefined"){attrs.id=!kwargs.onlyInitial?autoId:this.htmlInitialId}if(typeof attrs.key=="undefined"){attrs.key=name}var controlled=this._isControlled(widget);var validation=this._validation(widget);attrs.onChange=this.form._handleFieldEvent.bind(this.form,{event:"onChange",validate:!!validation.onChange,delay:validation.onChangeDelay});if(validation!="manual"&&validation.events){for(var i=0,l=validation.events.length;i<l;i++){var eventName=validation.events[i];attrs[eventName]=this.form._handleFieldEvent.bind(this.form,{event:eventName})}}var renderKwargs={attrs:attrs,controlled:controlled};if(widget.needsInitialValue){renderKwargs.initialValue=this.initialValue()}return widget.render(name,this.value(),renderKwargs)};BoundField.prototype.asHidden=function(kwargs){kwargs=object.extend({},kwargs,{widget:new this.field.hiddenWidget});return this.asWidget(kwargs)};BoundField.prototype.asText=function(kwargs){kwargs=object.extend({},kwargs,{widget:TextInput()});return this.asWidget(kwargs)};BoundField.prototype.asTextarea=function(kwargs){kwargs=object.extend({},kwargs,{widget:Textarea()});return this.asWidget(kwargs)};BoundField.prototype.cssClasses=function(extraCssClasses){var cssClasses=extraCssClasses?[extraCssClasses]:[];if(this.field.cssClass!==null){cssClasses.push(this.field.cssClass)}if(typeof this.form.rowCssClass!="undefined"){cssClasses.push(this.form.rowCssClass)}var status=this.status();if(typeof this.form[status+"CssClass"]!="undefined"){cssClasses.push(this.form[status+"CssClass"])}if(this.field.required){if(typeof this.form.requiredCssClass!="undefined"){cssClasses.push(this.form.requiredCssClass)}}else if(typeof this.form.optionalCssClass!="undefined"){cssClasses.push(this.form.optionalCssClass)}return cssClasses.join(" ")};BoundField.prototype.helpTextTag=function(kwargs){kwargs=object.extend({tagName:"span",attrs:null,contents:this.helpText},kwargs);if(kwargs.contents){var attrs=object.extend({
className:"helpText"},kwargs.attrs);var contents=kwargs.contents;if(is.Object(contents)&&object.hasOwn(contents,"__html")){attrs.dangerouslySetInnerHTML=contents;return React.createElement(kwargs.tagName,attrs)}return React.createElement(kwargs.tagName,attrs,contents)}};BoundField.prototype.labelTag=function(kwargs){kwargs=object.extend({contents:this.label,attrs:null,labelSuffix:this.form.labelSuffix},kwargs);var contents=this._addLabelSuffix(kwargs.contents,kwargs.labelSuffix);var widget=this.field.widget;var id=object.get(widget.attrs,"id",this.autoId());if(id){var attrs=object.extend(kwargs.attrs||{},{htmlFor:widget.idForLabel(id)});contents=React.createElement("label",attrs,contents)}return contents};BoundField.prototype.render=function(kwargs){if(this.field.showHiddenInitial){return React.createElement("div",null,this.asWidget(kwargs),this.asHidden({onlyInitial:true}))}return this.asWidget(kwargs)};BoundField.prototype.subWidgets=function(){var id=this.field.widget.attrs.id||this.autoId();var kwargs={attrs:{}};if(id){kwargs.attrs.id=id}return this.field.widget.subWidgets(this.htmlName,this.value(),kwargs)};BoundField.prototype._addLabelSuffix=function(label,labelSuffix){if(labelSuffix&&":?.!".indexOf(label.charAt(label.length-1))==-1){return label+labelSuffix}return label};BoundField.prototype._isControlled=function(widget){if(arguments.length===0){widget=this.field.widget}var controlled=false;if(widget.isValueSettable){controlled=this.field.controlled!==null?this.field.controlled:this.form.controlled}return controlled};BoundField.prototype._validation=function(widget){if(arguments.length===0){widget=this.field.widget}var validation=this.field.validation||this.form.validation;if(validation!=="manual"&&widget.validation!==null){validation=widget.validation}return validation};module.exports=BoundField},{"./TextInput":243,"./Textarea":244,"./util":270,Concur:258,"isomorph/format":261,"isomorph/is":262,"isomorph/object":263,react:590}],184:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Field=require("./Field");var PasswordInput=require("./PasswordInput");var TextInput=require("./TextInput");var $__0=require("validators"),MinLengthValidator=$__0.MinLengthValidator,MaxLengthValidator=$__0.MaxLengthValidator;var CharField=Field.extend({constructor:function CharField(kwargs){if(!(this instanceof CharField)){return new CharField(kwargs)}kwargs=object.extend({maxLength:null,minLength:null},kwargs);this.maxLength=kwargs.maxLength;this.minLength=kwargs.minLength;Field.call(this,kwargs);if(this.minLength!==null){this.validators.push(MinLengthValidator(this.minLength))}if(this.maxLength!==null){this.validators.push(MaxLengthValidator(this.maxLength))}}});CharField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return""}return""+value};CharField.prototype.getWidgetAttrs=function(widget){var attrs=Field.prototype.getWidgetAttrs.call(this,widget);if(this.maxLength!==null&&(widget instanceof TextInput||widget instanceof PasswordInput)){attrs.maxLength=""+this.maxLength}return attrs};module.exports=CharField},{"./Field":205,"./PasswordInput":227,"./TextInput":243,"isomorph/object":263,validators:267}],185:[function(require,module,exports){"use strict";var is=require("isomorph/is");var ChoiceInput=require("./ChoiceInput");var CheckboxChoiceInput=ChoiceInput.extend({constructor:function CheckboxChoiceInput(name,value,attrs,controlled,choice,index){if(!(this instanceof CheckboxChoiceInput)){return new CheckboxChoiceInput(name,value,attrs,controlled,choice,index)}if(!is.Array(value)){value=[value]}ChoiceInput.call(this,name,value,attrs,controlled,choice,index);for(var i=0,l=this.value.length;i<l;i++){this.value[i]=""+this.value[i]}},inputType:"checkbox"});CheckboxChoiceInput.prototype.isChecked=function(){return this.value.indexOf(this.choiceValue)!==-1};module.exports=CheckboxChoiceInput},{"./ChoiceInput":191,"isomorph/is":262}],186:[function(require,module,exports){"use strict";var CheckboxChoiceInput=require("./CheckboxChoiceInput");var ChoiceFieldRenderer=require("./ChoiceFieldRenderer");var CheckboxFieldRenderer=ChoiceFieldRenderer.extend({constructor:function CheckboxFieldRenderer(name,value,attrs,controlled,choices){if(!(this instanceof CheckboxFieldRenderer)){return new CheckboxFieldRenderer(name,value,attrs,controlled,choices)}ChoiceFieldRenderer.apply(this,arguments)},choiceInputConstructor:CheckboxChoiceInput});module.exports=CheckboxFieldRenderer},{"./CheckboxChoiceInput":185,"./ChoiceFieldRenderer":190}],187:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var React=require("react");var Widget=require("./Widget");function defaultCheckTest(value){return value!==false&&value!=null&&value!==""}var CheckboxInput=Widget.extend({constructor:function CheckboxInput(kwargs){if(!(this instanceof Widget)){return new CheckboxInput(kwargs)}kwargs=object.extend({checkTest:defaultCheckTest},kwargs);Widget.call(this,kwargs);this.checkTest=kwargs.checkTest},validation:{onChange:true}});CheckboxInput.prototype.render=function(name,value,kwargs){kwargs=object.extend({},kwargs);var finalAttrs=this.buildAttrs(kwargs.attrs,{type:"checkbox",name:name});if(value!==""&&value!==true&&value!==false&&value!==null&&value!==undefined){finalAttrs.value=value}var checkedAttr=kwargs.controlled?"checked":"defaultChecked";finalAttrs[checkedAttr]=this.checkTest(value);return React.createElement("input",finalAttrs)};CheckboxInput.prototype.valueFromData=function(data,files,name){if(typeof data[name]=="undefined"){return false}var value=data[name];var values={true:true,false:false};if(is.String(value)){value=object.get(values,value.toLowerCase(),value)}return!!value};module.exports=CheckboxInput},{"./Widget":251,"isomorph/is":262,"isomorph/object":263,react:590}],188:[function(require,module,exports){"use strict";var CheckboxFieldRenderer=require("./CheckboxFieldRenderer");var RendererMixin=require("./RendererMixin");var SelectMultiple=require("./SelectMultiple");var CheckboxSelectMultiple=SelectMultiple.extend({__mixins__:[RendererMixin],constructor:function(kwargs){if(!(this instanceof CheckboxSelectMultiple)){return new CheckboxSelectMultiple(kwargs)}RendererMixin.call(this,kwargs);SelectMultiple.call(this,kwargs)},renderer:CheckboxFieldRenderer,_emptyValue:[]});module.exports=CheckboxSelectMultiple},{"./CheckboxFieldRenderer":186,"./RendererMixin":235,"./SelectMultiple":237}],189:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var Field=require("./Field");var Select=require("./Select");var $__0=require("validators"),ValidationError=$__0.ValidationError;var $__1=require("./util"),normaliseChoices=$__1.normaliseChoices;var ChoiceField=Field.extend({widget:Select,defaultErrorMessages:{invalidChoice:"Select a valid choice. {value} is not one of the available choices."},constructor:function ChoiceField(kwargs){if(!(this instanceof ChoiceField)){return new ChoiceField(kwargs)}kwargs=object.extend({choices:[]},kwargs);Field.call(this,kwargs);this.setChoices(kwargs.choices)}});ChoiceField.prototype.choices=function(){return this._choices};ChoiceField.prototype.setChoices=function(choices){this._choices=this.widget.choices=normaliseChoices(choices)};ChoiceField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return""}return""+value};ChoiceField.prototype.validate=function(value){Field.prototype.validate.call(this,value);if(value&&!this.validValue(value)){throw ValidationError(this.errorMessages.invalidChoice,{code:"invalidChoice",params:{value:value}})}};ChoiceField.prototype.validValue=function(value){var choices=this.choices();for(var i=0,l=choices.length;i<l;i++){if(is.Array(choices[i][1])){var optgroupChoices=choices[i][1];for(var j=0,m=optgroupChoices.length;j<m;j++){if(value===""+optgroupChoices[j][0]){return true}}}else if(value===""+choices[i][0]){return true}}return false};module.exports=ChoiceField},{"./Field":205,"./Select":236,"./util":270,"isomorph/is":262,"isomorph/object":263,validators:267}],190:[function(require,module,exports){"use strict";var Concur=require("Concur");var is=require("isomorph/is");var object=require("isomorph/object");var React=require("react");var ChoiceFieldRenderer=Concur.extend({constructor:function ChoiceFieldRenderer(name,value,attrs,controlled,choices){if(!(this instanceof ChoiceFieldRenderer)){return new ChoiceFieldRenderer(name,value,attrs,controlled,choices)}this.name=name;this.value=value;this.attrs=attrs;this.controlled=controlled;this.choices=choices},choiceInputConstructor:null});ChoiceFieldRenderer.prototype.choiceInputs=function(){var inputs=[];for(var i=0,l=this.choices.length;i<l;i++){inputs.push(this.choiceInputConstructor(this.name,this.value,object.extend({},this.attrs),this.controlled,this.choices[i],i))}return inputs};ChoiceFieldRenderer.prototype.choiceInput=function(i){if(i>=this.choices.length){throw new Error("Index out of bounds: "+i)}return this.choiceInputConstructor(this.name,this.value,object.extend({},this.attrs),this.controlled,this.choices[i],i)};ChoiceFieldRenderer.prototype.render=function(){var id=object.get(this.attrs,"id",null);var key=object.pop(this.attrs,"key",null);var items=[];for(var i=0,l=this.choices.length;i<l;i++){var choice=this.choices[i];var choiceValue=choice[0];var choiceLabel=choice[1];if(is.Array(choiceLabel)){var attrsPlus=object.extend({},this.attrs);if(id){attrsPlus.id+="_"+i}if(key){attrsPlus.key+="_"+i}var subRenderer=ChoiceFieldRenderer(this.name,this.value,attrsPlus,this.controlled,choiceLabel);subRenderer.choiceInputConstructor=this.choiceInputConstructor;items.push(React.createElement("li",null,choiceValue,subRenderer.render()))}else{var w=this.choiceInputConstructor(this.name,this.value,object.extend({},this.attrs),this.controlled,choice,i);items.push(React.createElement("li",null,w.render()))}}var listAttrs={};if(id){listAttrs.id=id}return React.createElement("ul",listAttrs,items)};module.exports=ChoiceFieldRenderer},{Concur:258,"isomorph/is":262,"isomorph/object":263,react:590}],191:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var SubWidget=require("./SubWidget");var Widget=require("./Widget");var ChoiceInput=SubWidget.extend({constructor:function ChoiceInput(name,value,attrs,controlled,choice,index){this.name=name;this.value=value;this.attrs=attrs;this.controlled=controlled;this.choiceValue=""+choice[0];this.choiceLabel=""+choice[1];this.index=index;if(typeof this.attrs.id!="undefined"){this.attrs.id+="_"+this.index}if(typeof this.attrs.key!="undefined"){this.attrs.key+="_"+this.index}},inputType:null});ChoiceInput.prototype.render=function(){var labelAttrs={};if(this.idForLabel()){labelAttrs.htmlFor=this.idForLabel()}return React.createElement("label",labelAttrs,this.tag()," ",this.choiceLabel)};ChoiceInput.prototype.isChecked=function(){return this.value===this.choiceValue};ChoiceInput.prototype.tag=function(){var finalAttrs=Widget.prototype.buildAttrs.call(this,{},{type:this.inputType,name:this.name,value:this.choiceValue});var checkedAttr=this.controlled?"checked":"defaultChecked";finalAttrs[checkedAttr]=this.isChecked();return React.createElement("input",finalAttrs)};ChoiceInput.prototype.idForLabel=function(){return object.get(this.attrs,"id","")};module.exports=ChoiceInput},{"./SubWidget":242,"./Widget":251,"isomorph/object":263,react:590}],192:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var CheckboxInput=require("./CheckboxInput");var FileInput=require("./FileInput");var $__0=require("./util"),formatToArray=$__0.formatToArray;var FILE_INPUT_CONTRADICTION={};var ClearableFileInput=FileInput.extend({needsInitialValue:true,isValueSettable:false,constructor:function ClearableFileInput(kwargs){if(!(this instanceof ClearableFileInput)){return new ClearableFileInput(kwargs)}FileInput.call(this,kwargs)},initialText:"Currently",inputText:"Change",clearCheckboxLabel:"Clear",templateWithInitial:function(params){return formatToArray("{initialText}: {initial} {clearTemplate}{br}{inputText}: {input}",object.extend(params,{br:React.createElement("br",null)}))},templateWithClear:function(params){return formatToArray("{checkbox} {label}",object.extend(params,{label:React.createElement("label",{htmlFor:params.checkboxId},params.label)}))},urlMarkupTemplate:function(href,name){return React.createElement("a",{href:href},name)}});ClearableFileInput.FILE_INPUT_CONTRADICTION=FILE_INPUT_CONTRADICTION;ClearableFileInput.prototype.clearCheckboxName=function(name){return name+"-clear"};ClearableFileInput.prototype.clearCheckboxId=function(name){return name+"_id"};ClearableFileInput.prototype.render=function(name,value,kwargs){kwargs=object.extend({attrs:{}},kwargs);kwargs.attrs.key="input";var input=FileInput.prototype.render.call(this,name,value,kwargs);var initialValue=kwargs.initialValue;if(!initialValue&&value&&typeof value.url!="undefined"){initialValue=value}if(initialValue&&typeof initialValue.url!="undefined"){var clearTemplate;if(!this.isRequired){var clearCheckboxName=this.clearCheckboxName(name);var clearCheckboxId=this.clearCheckboxId(clearCheckboxName);clearTemplate=this.templateWithClear({checkbox:CheckboxInput().render(clearCheckboxName,false,{attrs:{id:clearCheckboxId}}),checkboxId:clearCheckboxId,label:this.clearCheckboxLabel})}var contents=this.templateWithInitial({initialText:this.initialText,initial:this.urlMarkupTemplate(initialValue.url,""+initialValue),clearTemplate:clearTemplate,inputText:this.inputText,input:input});return React.createElement("span",null,contents)}else{return React.createElement("span",null,input)}};ClearableFileInput.prototype.valueFromData=function(data,files,name){var upload=FileInput.prototype.valueFromData(data,files,name);if(!this.isRequired&&CheckboxInput.prototype.valueFromData.call(this,data,files,this.clearCheckboxName(name))){if(upload){return FILE_INPUT_CONTRADICTION}return false}return upload};module.exports=ClearableFileInput},{"./CheckboxInput":187,"./FileInput":207,"./util":270,"isomorph/object":263,react:590}],193:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Field=require("./Field");var ComboField=Field.extend({constructor:function ComboField(kwargs){if(!(this instanceof ComboField)){return new ComboField(kwargs)}kwargs=object.extend({fields:[]},kwargs);Field.call(this,kwargs);for(var i=0,l=kwargs.fields.length;i<l;i++){kwargs.fields[i].required=false}this.fields=kwargs.fields}});ComboField.prototype.clean=function(value){Field.prototype.clean.call(this,value);for(var i=0,l=this.fields.length;i<l;i++){value=this.fields[i].clean(value)}return value};module.exports=ComboField},{"./Field":205,"isomorph/object":263}],194:[function(require,module,exports){"use strict";var BaseTemporalField=require("./BaseTemporalField");var DateInput=require("./DateInput");var DateField=BaseTemporalField.extend({widget:DateInput,inputFormatType:"DATE_INPUT_FORMATS",defaultErrorMessages:{invalid:"Enter a valid date."},constructor:function DateField(kwargs){if(!(this instanceof DateField)){return new DateField(kwargs)}BaseTemporalField.call(this,kwargs)}});DateField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return null}if(value instanceof Date){return new Date(value.getFullYear(),value.getMonth(),value.getDate())}return BaseTemporalField.prototype.toJavaScript.call(this,value)};module.exports=DateField},{"./BaseTemporalField":181,"./DateInput":195}],195:[function(require,module,exports){"use strict";var DateTimeBaseInput=require("./DateTimeBaseInput");var DateInput=DateTimeBaseInput.extend({formatType:"DATE_INPUT_FORMATS",constructor:function DateInput(kwargs){if(!(this instanceof DateInput)){return new DateInput(kwargs)}DateTimeBaseInput.call(this,kwargs)}});module.exports=DateInput},{"./DateTimeBaseInput":196}],196:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var time=require("isomorph/time");var formats=require("./formats");var locales=require("./locales");var TextInput=require("./TextInput");var DateTimeBaseInput=TextInput.extend({formatType:"",constructor:function DateTimeBaseInput(kwargs){kwargs=object.extend({format:null},kwargs);TextInput.call(this,kwargs);this.format=kwargs.format}});DateTimeBaseInput.prototype._formatValue=function(value){if(is.Date(value)){if(this.format===null){this.format=formats.getFormat(this.formatType)[0]}return time.strftime(value,this.format,locales.getDefaultLocale())}return value};module.exports=DateTimeBaseInput},{"./TextInput":243,"./formats":254,"./locales":256,"isomorph/is":262,"isomorph/object":263,"isomorph/time":264}],197:[function(require,module,exports){"use strict";var is=require("isomorph/is");var BaseTemporalField=require("./BaseTemporalField");var DateTimeInput=require("./DateTimeInput");var $__0=require("validators"),ValidationError=$__0.ValidationError;var DateTimeField=BaseTemporalField.extend({widget:DateTimeInput,inputFormatType:"DATETIME_INPUT_FORMATS",defaultErrorMessages:{invalid:"Enter a valid date/time."},constructor:function DateTimeField(kwargs){if(!(this instanceof DateTimeField)){return new DateTimeField(kwargs)}BaseTemporalField.call(this,kwargs)}});DateTimeField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return null}if(value instanceof Date){return value}if(is.Array(value)){if(value.length!=2){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}if(this.isEmptyValue(value[0])&&this.isEmptyValue(value[1])){return null}value=value.join(" ")}return BaseTemporalField.prototype.toJavaScript.call(this,value)};module.exports=DateTimeField},{"./BaseTemporalField":181,"./DateTimeInput":198,"isomorph/is":262,validators:267}],198:[function(require,module,exports){"use strict";var DateTimeBaseInput=require("./DateTimeBaseInput");var DateTimeInput=DateTimeBaseInput.extend({formatType:"DATETIME_INPUT_FORMATS",constructor:function DateTimeInput(kwargs){if(!(this instanceof DateTimeInput)){return new DateTimeInput(kwargs)}DateTimeBaseInput.call(this,kwargs)}});module.exports=DateTimeInput},{"./DateTimeBaseInput":196}],199:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Field=require("./Field");var IntegerField=require("./IntegerField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var $__1=require("./util"),strip=$__1.strip;var DecimalField=IntegerField.extend({defaultErrorMessages:{invalid:"Enter a number.",maxDigits:"Ensure that there are no more than {max} digits in total.",maxDecimalPlaces:"Ensure that there are no more than {max} decimal places.",maxWholeDigits:"Ensure that there are no more than {max} digits before the decimal point."},constructor:function DecimalField(kwargs){if(!(this instanceof DecimalField)){return new DecimalField(kwargs)}kwargs=object.extend({maxDigits:null,decimalPlaces:null},kwargs);this.maxDigits=kwargs.maxDigits;this.decimalPlaces=kwargs.decimalPlaces;IntegerField.call(this,kwargs)}});DecimalField.DECIMAL_REGEXP=/^[-+]?(?:\d+(?:\.\d*)?|(?:\d+)?\.\d+)$/;DecimalField.prototype.clean=function(value){Field.prototype.validate.call(this,value);if(this.isEmptyValue(value)){return null}value=strip(""+value);if(!DecimalField.DECIMAL_REGEXP.test(value)){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}var negative=false;if(value.charAt(0)=="+"||value.charAt(0)=="-"){negative=value.charAt(0)=="-";value=value.substr(1)}value=value.replace(/^0+/,"");if(value===""||value=="."){value="0"}if(value.indexOf(".")==value.length-1){value=value.substring(0,value.length-1)}var pieces=value.split(".");var wholeDigits=pieces[0].length;var decimals=pieces.length==2?pieces[1].length:0;var digits=wholeDigits+decimals;if(this.maxDigits!==null&&digits>this.maxDigits){throw ValidationError(this.errorMessages.maxDigits,{code:"maxDigits",params:{max:this.maxDigits}})}if(this.decimalPlaces!==null&&decimals>this.decimalPlaces){throw ValidationError(this.errorMessages.maxDecimalPlaces,{code:"maxDecimalPlaces",params:{max:this.decimalPlaces}})}if(this.maxDigits!==null&&this.decimalPlaces!==null&&wholeDigits>this.maxDigits-this.decimalPlaces){throw ValidationError(this.errorMessages.maxWholeDigits,{code:"maxWholeDigits",params:{max:this.maxDigits-this.decimalPlaces}})}if(value.charAt(0)=="."){value="0"+value}if(negative){value="-"+value}this.runValidators(parseFloat(value));return value};DecimalField.prototype.getWidgetAttrs=function(widget){var attrs=IntegerField.prototype.getWidgetAttrs.call(this,widget);if(!object.hasOwn(widget.attrs,"step")){var step="any";if(this.decimalPlaces!==null){if(this.decimalPlaces===0){step="1"}else if(this.decimalPlaces<7){step="0."+"000001".slice(-this.decimalPlaces)}else{step="1e-"+this.decimalPlaces}}object.setDefault(attrs,"step",step)}return attrs};module.exports=DecimalField},{"./Field":205,"./IntegerField":218,"./util":270,"isomorph/object":263,validators:267}],200:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var Field=require("./Field");function DeclarativeFieldsMeta(prototypeProps){var fields=[];Object.keys(prototypeProps).forEach(function(name){if(prototypeProps[name]instanceof Field){fields.push([name,prototypeProps[name]]);delete prototypeProps[name]}});fields.sort(function(a,b){return a[1].creationCounter-b[1].creationCounter});prototypeProps.declaredFields=object.fromItems(fields);var declaredFields={};if(object.hasOwn(this,"declaredFields")){object.extend(declaredFields,this.declaredFields)}if(object.hasOwn(prototypeProps,"__mixins__")){var mixins=prototypeProps.__mixins__;if(!is.Array(mixins)){mixins=[mixins]}for(var i=0,l=mixins.length;i<l;i++){var mixin=mixins[i];if(is.Function(mixin)&&object.hasOwn(mixin.prototype,"declaredFields")){object.extend(declaredFields,mixin.prototype.declaredFields);Object.keys(mixin.prototype).forEach(function(name){if(object.hasOwn(declaredFields,name)){delete declaredFields[name]}});var mixinPrototype=object.extend({},mixin.prototype);delete mixinPrototype.baseFields;delete mixinPrototype.declaredFields;delete mixinPrototype.constructor;mixins[i]=mixinPrototype}}prototypeProps.__mixins__=mixins}object.extend(declaredFields,prototypeProps.declaredFields);Object.keys(prototypeProps).forEach(function(name){if(object.hasOwn(declaredFields,name)){delete declaredFields[name]}});prototypeProps.baseFields=declaredFields;prototypeProps.declaredFields=declaredFields;if(object.hasOwn(prototypeProps,"clean")&&is.Array(prototypeProps.clean)){var clean=prototypeProps.clean.pop();clean.fields=object.lookup(prototypeProps.clean);prototypeProps.clean=clean}}module.exports=DeclarativeFieldsMeta},{"./Field":205,"isomorph/is":262,"isomorph/object":263}],201:[function(require,module,exports){"use strict";var util=require("./util");var CharField=require("./CharField");var EmailInput=require("./EmailInput");var $__0=require("validators"),validateEmail=$__0.validateEmail;var EmailField=CharField.extend({widget:EmailInput,defaultValidators:[validateEmail],constructor:function EmailField(kwargs){if(!(this instanceof EmailField)){return new EmailField(kwargs)}CharField.call(this,kwargs)}});EmailField.prototype.clean=function(value){value=util.strip(this.toJavaScript(value));return CharField.prototype.clean.call(this,value)};module.exports=EmailField},{"./CharField":184,"./EmailInput":202,"./util":270,validators:267}],202:[function(require,module,exports){"use strict";var TextInput=require("./TextInput");var EmailInput=TextInput.extend({constructor:function EmailInput(kwargs){if(!(this instanceof EmailInput)){return new EmailInput(kwargs)}TextInput.call(this,kwargs)},inputType:"email"});module.exports=EmailInput},{"./TextInput":243}],203:[function(require,module,exports){"use strict";var Concur=require("Concur");var object=require("isomorph/object");var React=require("react");var $__0=require("validators"),ValidationError=$__0.ValidationError;var ErrorList=Concur.extend({constructor:function ErrorList(list){if(!(this instanceof ErrorList)){return new ErrorList(list)}this.data=list||[]}});ErrorList.fromJSON=function(list){var result=new ErrorList;result.fromJSON(list);return result};ErrorList.prototype.extend=function(errorList){this.data.push.apply(this.data,errorList)};ErrorList.prototype.length=function(){return this.data.length};ErrorList.prototype.isPopulated=function(){return this.length()>0};ErrorList.prototype.first=function(){if(this.data.length>0){var error=this.data[0];if(error instanceof ValidationError){error=error.messages()[0]}return error}};ErrorList.prototype.messages=function(){var messages=[];for(var i=0,l=this.data.length;i<l;i++){var error=this.data[i];if(error instanceof ValidationError){error=error.messages()[0]}messages.push(error)}return messages};ErrorList.prototype.render=function(kwargs){return this.asUl(kwargs)};ErrorList.prototype.asUl=function(kwargs){if(!this.isPopulated()){return}kwargs=object.extend({className:"errorlist"},kwargs);return React.createElement("ul",{className:kwargs.className},this.messages().map(function(error){return React.createElement("li",null,error)}))};ErrorList.prototype.asText=ErrorList.prototype.toString=function(){return this.messages().map(function(error){return"* "+error}).join("\n")};ErrorList.prototype.asData=function(){return this.data};ErrorList.prototype.toJSON=function(){return new ValidationError(this.data).errorList.map(function(error){return{message:error.messages()[0],code:error.code||""}})};ErrorList.prototype.fromJSON=function(list){this.data=list.map(function(err){return new ValidationError(err.message,{code:err.code})})};module.exports=ErrorList},{Concur:258,"isomorph/object":263,react:590,validators:267}],204:[function(require,module,exports){"use strict";var Concur=require("Concur");var object=require("isomorph/object");var React=require("react");var ErrorList=require("./ErrorList");var ErrorObject=Concur.extend({constructor:function ErrorObject(){if(!(this instanceof ErrorObject)){return new ErrorObject}this.errors={}}});ErrorObject.fromJSON=function(jsonObj,errorConstructor){var result=new ErrorObject;result.fromJSON(jsonObj,errorConstructor);return result};ErrorObject.prototype.set=function(fieldName,errors){this.errors[fieldName]=errors};ErrorObject.prototype.get=function(fieldName){return this.errors[fieldName]};ErrorObject.prototype.remove=function(fieldName){return delete this.errors[fieldName]};ErrorObject.prototype.removeAll=function(fieldNames){for(var i=0,l=fieldNames.length;i<l;i++){delete this.errors[fieldNames[i]]}};ErrorObject.prototype.hasField=function(fieldName){return object.hasOwn(this.errors,fieldName)};ErrorObject.prototype.length=function(){return Object.keys(this.errors).length};ErrorObject.prototype.isPopulated=function(){return this.length()>0};ErrorObject.prototype.render=function(kwargs){return this.asUl(kwargs)};ErrorObject.prototype.asUl=function(kwargs){kwargs=object.extend({className:"errorlist"},kwargs);var items=Object.keys(this.errors).map(function(fieldName){return React.createElement("li",null,fieldName,this.errors[fieldName].asUl())}.bind(this));if(items.length===0){return}return React.createElement("ul",{className:kwargs.className},items)};ErrorObject.prototype.asText=ErrorObject.prototype.toString=function(){return Object.keys(this.errors).map(function(fieldName){var messages=this.errors[fieldName].messages();return["* "+fieldName].concat(messages.map(function(message){return"  * "+message})).join("\n")}.bind(this)).join("\n")};ErrorObject.prototype.asData=function(){var data={};Object.keys(this.errors).map(function(fieldName){data[fieldName]=this.errors[fieldName].asData()}.bind(this));return data};ErrorObject.prototype.toJSON=function(){var jsonObj={};Object.keys(this.errors).map(function(fieldName){jsonObj[fieldName]=this.errors[fieldName].toJSON()}.bind(this));return jsonObj};ErrorObject.prototype.fromJSON=function(jsonObj,errorConstructor){errorConstructor=errorConstructor||ErrorList;this.errors={};var fieldNames=Object.keys(jsonObj);for(var i=0,l=fieldNames.length;i<l;i++){var fieldName=fieldNames[i];this.errors[fieldName]=errorConstructor.fromJSON(jsonObj[fieldName])}};module.exports=ErrorObject},{"./ErrorList":203,Concur:258,"isomorph/object":263,react:590}],205:[function(require,module,exports){"use strict";var Concur=require("Concur");var is=require("isomorph/is");var object=require("isomorph/object");var HiddenInput=require("./HiddenInput");var Widget=require("./Widget");var TextInput=require("./TextInput");var $__0=require("validators"),EMPTY_VALUES=$__0.EMPTY_VALUES,ValidationError=$__0.ValidationError;var $__1=require("./util"),normaliseValidation=$__1.normaliseValidation;var Field=Concur.extend({widget:TextInput,hiddenWidget:HiddenInput,defaultValidators:[],defaultErrorMessages:{required:"This field is required."},emptyValues:EMPTY_VALUES.slice(),emptyValueArray:true,constructor:function Field(kwargs){kwargs=object.extend({required:true,widget:null,label:null,initial:null,helpText:null,errorMessages:null,showHiddenInitial:false,validators:[],cssClass:null,validation:null,controlled:null,custom:null,widgetAttrs:{}},kwargs);this.required=kwargs.required;this.label=kwargs.label;this.initial=kwargs.initial;this.showHiddenInitial=kwargs.showHiddenInitial;this.helpText=kwargs.helpText||"";this.cssClass=kwargs.cssClass;this.validation=normaliseValidation(kwargs.validation);this.controlled=kwargs.controlled;this.custom=kwargs.custom;this.widgetAttrs=kwargs.widgetAttrs;var widget=kwargs.widget||this.widget;if(!(widget instanceof Widget)){widget=new widget}widget.isRequired=this.required;object.extend(widget.attrs,this.getWidgetAttrs(widget));this.widget=widget;this.creationCounter=Field.creationCounter++;var messages=[{}];for(var i=this.constructor.__mro__.length-1;i>=0;i--){messages.push(object.get(this.constructor.__mro__[i].prototype,"defaultErrorMessages",null))}messages.push(kwargs.errorMessages);this.errorMessages=object.extend.apply(object,messages);this.validators=this.defaultValidators.concat(kwargs.validators)}});Field.creationCounter=0;Field.prototype.prepareValue=function(value){return value};Field.prototype.toJavaScript=function(value){return value};Field.prototype.isEmptyValue=function(value){if(this.emptyValues.indexOf(value)!=-1){return true}return this.emptyValueArray===true&&is.Array(value)&&value.length===0};Field.prototype.validate=function(value){if(this.required&&this.isEmptyValue(value)){throw ValidationError(this.errorMessages.required,{code:"required"})}};Field.prototype.runValidators=function(value){if(this.isEmptyValue(value)){return}var errors=[];for(var i=0,l=this.validators.length;i<l;i++){var validator=this.validators[i];try{validator(value)}catch(e){if(!(e instanceof ValidationError)){throw e}if(object.hasOwn(e,"code")&&object.hasOwn(this.errorMessages,e.code)){e.message=this.errorMessages[e.code]}errors.push.apply(errors,e.errorList)}}if(errors.length>0){throw ValidationError(errors)}};Field.prototype.clean=function(value){value=this.toJavaScript(value);this.validate(value);this.runValidators(value);return value};Field.prototype.boundData=function(data,initial){return data};Field.prototype.getWidgetAttrs=function(widget){return object.extend({},this.widgetAttrs)};Field.prototype._hasChanged=function(initial,data){var initialValue=initial===null?"":initial;try{data=this.toJavaScript(data);if(typeof this._coerce=="function"){data=this._coerce(data)}}catch(e){if(!(e instanceof ValidationError)){throw e}return true}var dataValue=data===null?"":data;return""+initialValue!=""+dataValue};module.exports=Field},{"./HiddenInput":214,"./TextInput":243,"./Widget":251,"./util":270,Concur:258,"isomorph/is":262,"isomorph/object":263,validators:267}],206:[function(require,module,exports){"use strict";var is=require("isomorph/is");

var object=require("isomorph/object");var env=require("./env");var ClearableFileInput=require("./ClearableFileInput");var Field=require("./Field");var $__0=require("validators"),ValidationError=$__0.ValidationError;var FileField=Field.extend({widget:ClearableFileInput,defaultErrorMessages:{invalid:"No file was submitted. Check the encoding type on the form.",missing:"No file was submitted.",empty:"The submitted file is empty.",maxLength:"Ensure this filename has at most {max} characters (it has {length}).",contradiction:"Please either submit a file or check the clear checkbox, not both."},constructor:function FileField(kwargs){if(!(this instanceof FileField)){return new FileField(kwargs)}kwargs=object.extend({maxLength:null,allowEmptyFile:false},kwargs);this.maxLength=kwargs.maxLength;this.allowEmptyFile=kwargs.allowEmptyFile;delete kwargs.maxLength;Field.call(this,kwargs)}});FileField.prototype.toJavaScript=function(data,initial){if(this.isEmptyValue(data)){return null}if(env.browser&&is.String(data)){return data}if(typeof data.name=="undefined"||typeof data.size=="undefined"){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}var name=data.name;var suze=Number(data.size);if(this.maxLength!==null&&name.length>this.maxLength){throw ValidationError(this.errorMessages.maxLength,{code:"maxLength",params:{max:this.maxLength,length:name.length}})}if(!name){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}if(!this.allowEmptyFile&&suze===0){throw ValidationError(this.errorMessages.empty,{code:"empty"})}return data};FileField.prototype.clean=function(data,initial){if(data===ClearableFileInput.FILE_INPUT_CONTRADICTION){throw ValidationError(this.errorMessages.contradiction,{code:"contradiction"})}if(data===false){if(!this.required){return false}data=null}if(!data&&initial){return initial}return Field.prototype.clean.call(this,data)};FileField.prototype.boundData=function(data,initial){if(data===null||data===ClearableFileInput.FILE_INPUT_CONTRADICTION){return initial}return data};FileField.prototype._hasChanged=function(initial,data){return data!==null};module.exports=FileField},{"./ClearableFileInput":192,"./Field":205,"./env":253,"isomorph/is":262,"isomorph/object":263,validators:267}],207:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Input=require("./Input");var env=require("./env");var FileInput=Input.extend({constructor:function FileInput(kwargs){if(!(this instanceof FileInput)){return new FileInput(kwargs)}Input.call(this,kwargs)},inputType:"file",needsMultipartForm:true,validation:{onChange:true},isValueSettable:false});FileInput.prototype.render=function(name,value,kwargs){return Input.prototype.render.call(this,name,null,kwargs)};FileInput.prototype.valueFromData=function(data,files,name){var dataSource=files;if(env.browser&&!(name in files)){dataSource=data}return object.get(dataSource,name,null)};module.exports=FileInput},{"./Input":217,"./env":253,"isomorph/object":263}],208:[function(require,module,exports){"use strict";var object=require("isomorph/object");var ChoiceField=require("./ChoiceField");var FilePathField=ChoiceField.extend({constructor:function FilePathField(path,kwargs){if(!(this instanceof FilePathField)){return new FilePathField(path,kwargs)}kwargs=object.extend({match:null,recursive:false,required:true,widget:null,label:null,initial:null,helpText:null,allowFiles:true,allowFolders:false},kwargs);this.path=path;this.match=object.pop(kwargs,"match");this.recursive=object.pop(kwargs,"recursive");this.allowFiles=object.pop(kwargs,"allowFiles");this.allowFolders=object.pop(kwargs,"allowFolders");delete kwargs.match;delete kwargs.recursive;kwargs.choices=[];ChoiceField.call(this,kwargs);if(this.required){this.setChoices([])}else{this.setChoices([["","---------"]])}if(this.match!==null){this.matchRE=new RegExp(this.match)}this.widget.choices=this.choices()}});module.exports=FilePathField},{"./ChoiceField":189,"isomorph/object":263}],209:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Field=require("./Field");var IntegerField=require("./IntegerField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var $__1=require("./util"),strip=$__1.strip;var FloatField=IntegerField.extend({defaultErrorMessages:{invalid:"Enter a number."},constructor:function FloatField(kwargs){if(!(this instanceof FloatField)){return new FloatField(kwargs)}IntegerField.call(this,kwargs)}});FloatField.FLOAT_REGEXP=/^[-+]?(?:\d+(?:\.\d*)?|(?:\d+)?\.\d+)$/;FloatField.prototype.toJavaScript=function(value){value=Field.prototype.toJavaScript.call(this,value);if(this.isEmptyValue(value)){return null}value=strip(value);if(!FloatField.FLOAT_REGEXP.test(value)){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}value=parseFloat(value);if(isNaN(value)){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}return value};FloatField.prototype._hasChanged=function(initial,data){var dataValue=data===null?"":data;var initialValue=initial===null?"":initial;if(initialValue===dataValue){return false}else if(initialValue===""||dataValue===""){return true}return parseFloat(""+initialValue)!=parseFloat(""+dataValue)};FloatField.prototype.getWidgetAttrs=function(widget){var attrs=IntegerField.prototype.getWidgetAttrs.call(this,widget);if(!object.hasOwn(widget.attrs,"step")){object.setDefault(attrs,"step","any")}return attrs};module.exports=FloatField},{"./Field":205,"./IntegerField":218,"./util":270,"isomorph/object":263,validators:267}],210:[function(require,module,exports){(function(process){"use strict";var Concur=require("Concur");var getFormData=require("get-form-data");var copy=require("isomorph/copy");var $__0=require("isomorph/format"),formatObj=$__0.formatObj;var is=require("isomorph/is");var object=require("isomorph/object");var constants=require("./constants");var BoundField=require("./BoundField");var DeclarativeFieldsMeta=require("./DeclarativeFieldsMeta");var ErrorList=require("./ErrorList");var ErrorObject=require("./ErrorObject");var FileField=require("./FileField");var MultipleFileField=require("./MultipleFileField");var $__1=require("validators"),ValidationError=$__1.ValidationError;var $__2=require("./util"),cancellable=$__2.cancellable,debounce=$__2.debounce,info=$__2.info,warning=$__2.warning,normaliseValidation=$__2.normaliseValidation;function noop(){}var sentinel={};var NON_FIELD_ERRORS=constants.NON_FIELD_ERRORS;function fieldDataHasChanged(previous,current){if(is.Array(previous)&&is.Array(current)){if(previous.length!=current.length){return true}for(var i=0,l=previous.length;i<l;i++){if(previous[i]!=current[i]){return true}}return false}return previous!=current}if("production"!==process.env.NODE_ENV){var warnedOnImpliedValidateAuto=false}var Form=Concur.extend({__meta__:DeclarativeFieldsMeta,prefixFormat:"{prefix}-{name}",constructor:function Form(kwargs){kwargs=object.extend({data:null,files:null,autoId:"id_{name}",prefix:null,initial:null,errorConstructor:ErrorList,labelSuffix:":",emptyPermitted:false,validation:null,controlled:false,onChange:null,errors:null},kwargs);this.isInitialRender=kwargs.data==null&&kwargs.files==null;this.data=kwargs.data||{};this.files=kwargs.files||{};this.autoId=kwargs.autoId;this.prefix=kwargs.prefix;this.initial=kwargs.initial||{};this.cleanedData={};this.errorConstructor=kwargs.errorConstructor;this.labelSuffix=kwargs.labelSuffix;this.emptyPermitted=kwargs.emptyPermitted;this.controlled=kwargs.controlled;this.onChange=kwargs.onChange;if(is.Function(kwargs.onChange)){if("production"!==process.env.NODE_ENV){if(!warnedOnImpliedValidateAuto&&kwargs.validation==="auto"){info("Passing onChange to a Form or FormSet constructor also "+"implies validation: 'auto' by default - you don't have "+"to set it manually.");warnedOnImpliedValidateAuto=true}}if(kwargs.validation==null){kwargs.validation="auto"}}this.validation=normaliseValidation(kwargs.validation||"manual");this._errors=kwargs.errors;this._pendingEventValidation={};this._lastValidatedData={};this._lastHasChanged=null;this._pendingValidation={};this._pendingAsyncValidation={};this._runCleanAfter={};this._onValidate=null;this.fields=copy.deepCopy(this.baseFields);if("production"!==process.env.NODE_ENV){if(!is.Function(kwargs.onChange)&&this._needsOnChange()){warning("You didn't provide an onChange callback for a "+this._formName()+" which has controlled fields. This "+"will result in read-only fields.")}}if(this.isInitialRender){this._copyInitialToData()}}});var _extend=Form.extend;Form.extend=function(prototypeProps,constructorProps){return _extend.call(this,object.extend({},prototypeProps),constructorProps)};Form.prototype._stateChanged=function(){if(typeof this.onChange=="function"){this.onChange()}};Form.prototype._copyInitialToData=function(){var initialData=object.extend(this._fieldInitialData(),this.initial);var initialFieldNames=Object.keys(initialData);for(var i=0,l=initialFieldNames.length;i<l;i++){var fieldName=initialFieldNames[i];if(typeof this.fields[fieldName]=="undefined"){continue}if(!this.fields[fieldName].widget.isValueSettable){continue}this.data[this.addPrefix(fieldName)]=initialData[fieldName]}};Form.prototype._fieldInitialData=function(){var fieldInitial={};var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var fieldName=fieldNames[i];var initial=this.fields[fieldName].initial;if(initial!==null){fieldInitial[fieldName]=initial}}return fieldInitial};Form.prototype._formName=function(){var name=this.displayName||this.constructor.name;return name?"'"+name+"'":"Form"};Form.prototype._needsOnChange=function(){if(this.controlled===true){return true}var names=Object.keys(this.fields);for(var i=0,l=names.length;i<l;i++){if(this.fields[names[i]].controlled===true){return true}}return false};Form.prototype.validate=function(form,cb){this._cancelPendingOperations();if(is.Function(form)){cb=form;form=null}if(form){if(typeof form.getDOMNode=="function"){form=form.getDOMNode()}this.data=getFormData(form)}return this.isAsync()?this._validateAsync(cb):this._validateSync()};Form.prototype._validateAsync=function(cb){if(!is.Function(cb)){throw new Error("You must provide a callback to validate() when a form has "+"asynchronous validation.")}if(this.isInitialRender){this.isInitialRender=false}this._onValidate=cb;this.fullClean();this._stateChanged()};Form.prototype._validateSync=function(){if(this.isInitialRender){this.isInitialRender=false}this.fullClean();this._stateChanged();return this.isValid()};Form.prototype.fullClean=function(){this._errors=new ErrorObject;if(this.isInitialRender){return}this.cleanedData={};if(this.emptyPermitted&&!this.hasChanged()){this._finishedValidation(null);return}this._cleanFields()};Form.prototype.partialClean=function(fields){this._removeErrors(fields);if(this.emptyPermitted&&!this.hasChanged()){if(this._errors.isPopulated()){this._errors=ErrorObject()}return}this._preCleanFields(fields);for(var i=0,l=fields.length;i<l;i++){this._cleanField(fields[i])}};Form.prototype._cleanFields=function(){var fieldNames=Object.keys(this.fields);this._preCleanFields(fieldNames);for(var i=0,l=fieldNames.length;i<l;i++){this._cleanField(fieldNames[i])}};Form.prototype._preCleanFields=function(fieldNames){object.extend(this._pendingValidation,object.lookup(fieldNames));var i,l;if(typeof this.clean.fields!="undefined"){for(i=0,l=fieldNames.length;i<l;i++){if(this.clean.fields[fieldNames[i]]){this._runCleanAfter[fieldNames[i]]=true}}}else{for(i=0,l=fieldNames.length;i<l;i++){if(this.fields[fieldNames[i]]){this._runCleanAfter[fieldNames[i]]=true}}}};Form.prototype._cleanField=function(name){if(!object.hasOwn(this.fields,name)){throw new Error(this._formName()+" has no field named '"+name+"'")}var field=this.fields[name];var value=field.widget.valueFromData(this.data,this.files,this.addPrefix(name));var async=false;var error=null;try{if(field instanceof FileField){var initial=object.get(this.initial,name,field.initial);value=field.clean(value,initial)}else{value=field.clean(value)}this.cleanedData[name]=value;var customClean=this._getCustomClean(name);if(is.Function(customClean)){async=this._runCustomClean(name,customClean)}}catch(e){if(e instanceof ValidationError){this.addError(name,e)}else{error=e}}if(!async){this._fieldCleaned(name,error)}};Form.prototype._getCustomClean=function(fieldName){return this["clean"+fieldName.charAt(0).toUpperCase()+fieldName.substr(1)]||this["clean_"+fieldName]};Form.prototype._runCustomClean=function(fieldName,customClean){if(customClean.length===0){customClean.call(this);return false}if(typeof this._pendingAsyncValidation[fieldName]!="undefined"){object.pop(this._pendingAsyncValidation,fieldName).cancel()}var callback=function(err,validationError){if(validationError){this.addError(fieldName==NON_FIELD_ERRORS?null:fieldName,validationError)}this._fieldCleaned(fieldName,err);this._stateChanged()}.bind(this);var cancellableCallback=cancellable(callback);var returnValue=customClean.call(this,cancellableCallback);if(returnValue!==false){if(returnValue&&typeof returnValue.onCancel=="function"){callback.onCancel=returnValue.onCancel}this._pendingAsyncValidation[fieldName]=cancellableCallback;return true}};Form.prototype._fieldCleaned=function(fieldName,err){var wasPending=delete this._pendingValidation[fieldName];if(this._pendingAsyncValidation[fieldName]){delete this._pendingAsyncValidation[fieldName]}if(err){if("production"!==process.env.NODE_ENV){console.error("Error cleaning "+this._formName()+"."+fieldName+":"+err.message)}this._pendingValidation={};this._runCleanAfter={};this._finishedValidation(err);return}if(this._runCleanAfter[fieldName]){delete this._runCleanAfter[fieldName];if(is.Empty(this._runCleanAfter)){this._cleanForm();return}}if(wasPending&&is.Empty(this._pendingValidation)){this._finishedValidation(null)}};Form.prototype.clean=noop;Form.prototype._cleanForm=function(){var async=false;var error=null;try{if(this.clean!==noop){async=this._runCustomClean(NON_FIELD_ERRORS,this.clean)}}catch(e){if(e instanceof ValidationError){this.addError(null,e)}else{error=e}}if(!async){this._fieldCleaned(NON_FIELD_ERRORS,error)}};Form.prototype._finishedValidation=function(err){if(!this.isAsync()){if(err){throw err}return}if(is.Function(this._onValidate)){var callback=this._onValidate;this._onValidate=null;if(err){return callback(err)}var isValid=this.isValid();callback(null,isValid,isValid?this.cleanedData:null)}};Form.prototype._cancelPendingOperations=function(){Object.keys(this._pendingEventValidation).forEach(function(field){object.pop(this._pendingEventValidation,field).cancel()}.bind(this));Object.keys(this._pendingAsyncValidation).forEach(function(field){object.pop(this._pendingAsyncValidation,field).cancel()}.bind(this))};Form.prototype._handleFieldEvent=function(validation,e){var htmlName=e.target.name;var fieldName=this.removePrefix(e.target.getAttribute("data-newforms-field")||htmlName);var field=this.fields[fieldName];var targetData=getFormData.getNamedFormElementData(e.target.form,htmlName);this.data[htmlName]=targetData;if(field instanceof FileField&&"files"in e.target){var files=e.target.files;this.files[htmlName]=field instanceof MultipleFileField?Array.prototype.slice.call(files):files[0]}if(this.isInitialRender){this.isInitialRender=false}if(this.controlled||field.controlled){this._stateChanged()}if(validation.validate===false){return}var validate=false;if(validation.event=="onBlur"){if(typeof this._pendingEventValidation[fieldName]!="undefined"){this._pendingEventValidation[fieldName].trigger();return}validate=field.required&&field.isEmptyValue(targetData)}if(!validate){var lastValidatedData=object.get(this._lastValidatedData,fieldName,sentinel);validate=lastValidatedData===sentinel}if(!validate){var fieldData=field.widget.valueFromData(this.data,this.files,this.addPrefix(fieldName));validate=fieldDataHasChanged(lastValidatedData,fieldData)}if(!validate&&typeof this._pendingEventValidation[fieldName]!="undefined"){object.pop(this._pendingEventValidation,fieldName).cancel()}if(!validate){return}if(validation.delay){this._delayedFieldValidation(fieldName,validation.delay)}else{this._immediateFieldValidation(fieldName)}};Form.prototype._delayedFieldValidation=function(fieldName,delay){if(typeof this._pendingEventValidation[fieldName]=="undefined"){this._pendingEventValidation[fieldName]=debounce(function(){delete this._pendingEventValidation[fieldName];this._immediateFieldValidation(fieldName)}.bind(this),delay)}this._pendingEventValidation[fieldName]()};Form.prototype._immediateFieldValidation=function(fieldName){if(typeof this._pendingEventValidation[fieldName]!="undefined"){object.pop(this._pendingEventValidation,fieldName).cancel()}this._lastValidatedData[fieldName]=this.fields[fieldName].widget.valueFromData(this.data,this.files,this.addPrefix(fieldName));this.partialClean([fieldName]);this._stateChanged()};Form.prototype.reset=function(newInitial){this._cancelPendingOperations();if(typeof newInitial!="undefined"){this.initial=newInitial}this.data={};this.cleanedData={};this.isInitialRender=true;this._errors=null;this._lastHasChanged=null;this._pendingValidation={};this._runCleanAfter={};this._lastValidatedData={};this._onValidate=null;this._copyInitialToData();this._stateChanged()};Form.prototype.setData=function(data,kwargs){kwargs=object.extend({prefixed:false,validate:true,_triggerStateChange:true},kwargs);this.data=kwargs.prefixed?data:this._prefixData(data);if(this.isInitialRender){this.isInitialRender=false}if(kwargs.validate){this._errors=null;var isValid=this.isValid()}else{this._errors=new ErrorObject}if(kwargs._triggerStateChange){this._stateChanged()}if(kwargs.validate&&!this.isAsync()){return isValid}};Form.prototype.setFormData=function(formData,kwargs){return this.setData(formData,object.extend(kwargs||{},{prefixed:true}))};Form.prototype.updateData=function(data,kwargs){kwargs=object.extend({prefixed:false,validate:true,clearValidation:true},kwargs);object.extend(this.data,kwargs.prefixed?data:this._prefixData(data));if(this.isInitialRender){this.isInitialRender=false}var fields=Object.keys(data);if(kwargs.prefixed){fields=fields.map(this.removePrefix.bind(this))}if(kwargs.validate){this.partialClean(fields)}else if(kwargs.clearValidation){this._removeErrors(fields);this._removeCleanedData(fields);this._cleanForm()}this._stateChanged()};Form.prototype._removeCleanedData=function(fields){for(var i=0,l=fields.length;i<l;i++){delete this.cleanedData[fields[i]]}};Form.prototype.boundField=function(name){if(!object.hasOwn(this.fields,name)){throw new Error(this._formName()+" does not have a '"+name+"' field.")}return new BoundField(this,this.fields[name],name)};Form.prototype.boundFields=function(test){var bfs=[];var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var fieldName=fieldNames[i];if(!test||test(this.fields[fieldName],fieldName)){bfs.push(new BoundField(this,this.fields[fieldName],fieldName))}}return bfs};Form.prototype.boundFieldsObj=function(){var bfs={};var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var fieldName=fieldNames[i];bfs[fieldName]=new BoundField(this,this.fields[fieldName],fieldName)}return bfs};Form.prototype.hiddenFields=function(){return this.boundFields(function(field){return field.widget.isHidden})};Form.prototype.visibleFields=function(){return this.boundFields(function(field){return!field.widget.isHidden})};Form.prototype.addError=function(field,error){if(!(error instanceof ValidationError)){error=ValidationError(error)}if(object.hasOwn(error,"errorObj")){if(field!==null){throw new Error("The 'field' argument to form.addError() must be null when "+"the 'error' argument contains errors for multiple fields.")}error=error.errorObj}else{var errorList=error.errorList;error={};error[field||NON_FIELD_ERRORS]=errorList}var fields=Object.keys(error);for(var i=0,l=fields.length;i<l;i++){field=fields[i];errorList=error[field];if(!this._errors.hasField(field)){if(field!==NON_FIELD_ERRORS&&!object.hasOwn(this.fields,field)){throw new Error(this._formName()+" has no field named '"+field+"'")}this._errors.set(field,new this.errorConstructor)}else{var messageLookup=object.lookup(this._errors.get(field).messages());var newMessages=ErrorList(errorList).messages();for(var j=errorList.length-1;j>=0;j--){if(messageLookup[newMessages[j]]){errorList.splice(j,1)}}}if(errorList.length>0){this._errors.get(field).extend(errorList)}if(object.hasOwn(this.cleanedData,field)){delete this.cleanedData[field]}}};Form.prototype.errors=function(name){if(this._errors==null){this.fullClean()}if(name){return this._errors.get(name)}return this._errors};Form.prototype.nonFieldErrors=function(){return this.errors(NON_FIELD_ERRORS)||new this.errorConstructor};Form.prototype.setErrors=function(errors){this._errors=errors;this._stateChanged()};Form.prototype._removeErrors=function(fields){if(this._errors==null){this._errors=ErrorObject()}else{this._errors.remove(NON_FIELD_ERRORS);this._errors.removeAll(fields)}};Form.prototype.changedData=function(_hasChangedCheck){var changedData=[];var initialValue;var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var name=fieldNames[i];var field=this.fields[name];var prefixedName=this.addPrefix(name);var dataValue=field.widget.valueFromData(this.data,this.files,prefixedName);if(!field.showHiddenInitial){initialValue=object.get(this.initial,name,field.initial);if(is.Function(initialValue)){initialValue=initialValue()}}else{var initialPrefixedName=this.addInitialPrefix(name);var hiddenWidget=new field.hiddenWidget;try{initialValue=hiddenWidget.valueFromData(this.data,this.files,initialPrefixedName)}catch(e){if(!(e instanceof ValidationError)){throw e}if(_hasChangedCheck){return true}changedData.push(name);continue}}if(field._hasChanged(initialValue,dataValue)){if(_hasChangedCheck){return true}changedData.push(name)}}if(_hasChangedCheck){return false}return changedData};Form.prototype.hasChanged=function(){this._lastHasChanged=this.changedData(true);return this._lastHasChanged};Form.prototype.isAsync=function(){if(this.clean.length==1){return true}var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var customClean=this._getCustomClean(fieldNames[i]);if(is.Function(customClean)&&customClean.length==1){return true}}return false};Form.prototype.isComplete=function(){if(!this.isValid()||this.isPending()){return false}var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){var fieldName=fieldNames[i];if(this.fields[fieldName].required&&typeof this.cleanedData[fieldName]=="undefined"){return false}}return true};Form.prototype.isMultipart=function(){var fieldNames=Object.keys(this.fields);for(var i=0,l=fieldNames.length;i<l;i++){if(this.fields[fieldNames[i]].widget.needsMultipartForm){return true}}return false};Form.prototype.isPending=function(){return!is.Empty(this._pendingAsyncValidation)};Form.prototype.isValid=function(){if(this.isInitialRender){return false}return!this.errors().isPopulated()};Form.prototype.nonFieldPending=function(){return typeof this._pendingAsyncValidation[NON_FIELD_ERRORS]!="undefined"};Form.prototype.notEmpty=function(){return this.emptyPermitted&&this._lastHasChanged===true};Form.prototype.addInitialPrefix=function(fieldName){return"initial-"+this.addPrefix(fieldName)};Form.prototype.addPrefix=function(fieldName){if(this.prefix!==null){return formatObj(this.prefixFormat,{prefix:this.prefix,name:fieldName})}return fieldName};Form.prototype.removePrefix=function(htmlName){if(this.prefix!==null){var partialPrefix=this.prefixFormat.replace("{prefix}",this.prefix);var startIndex=partialPrefix.indexOf("{name}");var lengthDiff=htmlName.length-partialPrefix.length;return htmlName.substr(startIndex,6+lengthDiff)}return htmlName};Form.prototype._deprefixData=function(data){if(this.prefix==null){return data}var prefixedData={};var fieldNames=Object.keys(data);for(var i=0,l=fieldNames.length;i<l;i++){prefixedData[this.removePrefix(fieldNames[i])]=data[fieldNames[i]]}return prefixedData};Form.prototype._prefixData=function(data){if(this.prefix==null){return data}var prefixedData={};var fieldNames=Object.keys(data);for(var i=0,l=fieldNames.length;i<l;i++){prefixedData[this.addPrefix(fieldNames[i])]=data[fieldNames[i]]}return prefixedData};module.exports=Form}).call(this,require("_process"))},{"./BoundField":183,"./DeclarativeFieldsMeta":200,"./ErrorList":203,"./ErrorObject":204,"./FileField":206,"./MultipleFileField":222,"./constants":252,"./util":270,Concur:258,_process:35,"get-form-data":259,"isomorph/copy":260,"isomorph/format":261,"isomorph/is":262,"isomorph/object":263,validators:267}],211:[function(require,module,exports){"use strict";var React=require("react");var BoundField=require("./BoundField");var ProgressMixin=require("./ProgressMixin");var FormRow=React.createClass({displayName:"FormRow",mixins:[ProgressMixin],propTypes:{bf:React.PropTypes.instanceOf(BoundField),className:React.PropTypes.string,component:React.PropTypes.any,content:React.PropTypes.any,hidden:React.PropTypes.bool,__all__:function(props){if(!props.bf&&!props.content){return new Error("Invalid props supplied to `FormRow`, either `bf` or `content` "+"must be specified.")}if(props.bf&&props.content){return new Error("Both `bf` and `content` props were passed to `FormRow` - `bf` "+"will be ignored.")}}},getDefaultProps:function(){return{component:"div"}},render:function(){var attrs={};if(this.props.className){attrs.className=this.props.className}if(this.props.hidden){attrs.style={display:"none"}}if(this.props.content){return React.createElement(this.props.component,React.__spread({},attrs),this.props.content)}var bf=this.props.bf;var isPending=bf.isPending();return React.createElement(this.props.component,React.__spread({},attrs),bf.label&&bf.labelTag()," ",bf.render(),isPending&&" ",isPending&&this.renderProgress(),bf.errors().render(),bf.helpText&&" ",bf.helpTextTag())}});module.exports=FormRow},{"./BoundField":183,"./ProgressMixin":228,react:590}],212:[function(require,module,exports){(function(process){"use strict";var Concur=require("Concur");var getFormData=require("get-form-data");var is=require("isomorph/is");var $__0=require("isomorph/format"),formatObj=$__0.formatObj;var object=require("isomorph/object");var constants=require("./constants");var env=require("./env");var BooleanField=require("./BooleanField");var ErrorList=require("./ErrorList");var Form=require("./Form");var HiddenInput=require("./HiddenInput");var IntegerField=require("./IntegerField");var isFormAsync=require("./isFormAsync");var $__1=require("validators"),ValidationError=$__1.ValidationError;var $__2=require("./util"),cancellable=$__2.cancellable;function noop(){}var CLEAN_VALIDATION="clean";var DELETION_FIELD_NAME="DELETE";var INITIAL_FORM_COUNT="INITIAL_FORMS";var MAX_NUM_FORM_COUNT="MAX_NUM_FORMS";var MIN_NUM_FORM_COUNT="MIN_NUM_FORMS";var ORDERING_FIELD_NAME="ORDER";var TOTAL_FORM_COUNT="TOTAL_FORMS";var DEFAULT_MIN_NUM=constants.FORMSET_DEFAULT_MIN_NUM;var DEFAULT_MAX_NUM=constants.FORMSET_DEFAULT_MAX_NUM;var ManagementForm=function(){var fields={};fields[TOTAL_FORM_COUNT]=IntegerField({widget:HiddenInput});fields[INITIAL_FORM_COUNT]=IntegerField({widget:HiddenInput});fields[MIN_NUM_FORM_COUNT]=IntegerField({required:false,widget:HiddenInput});fields[MAX_NUM_FORM_COUNT]=IntegerField({required:false,widget:HiddenInput});return Form.extend(fields)}();var FormSet=Concur.extend({prefixFormat:"{prefix}-{index}",constructor:function FormSet(kwargs){kwargs=object.extend({form:this.form||null,extra:is.Number(this.extra)?this.extra:1,canOrder:this.canOrder||false,canDelete:this.canDelete||false,maxNum:is.Number(this.maxNum)?this.maxNum:DEFAULT_MAX_NUM,validateMax:this.validateMax||false,minNum:is.Number(this.minNum)?this.minNum:DEFAULT_MIN_NUM,validateMin:this.validateMin||false,managementFormCssClass:this.magagementFormCssClass||null,data:null,files:null,autoId:"id_{name}",prefix:null,initial:null,errorConstructor:ErrorList,validation:null,controlled:false,onChange:null},kwargs);if(!is.Function(kwargs.form)){throw new Error("A FormSet must be given a Form constructor to use, either via its "+"constructor's `form` option or via its prototype, passing a `form` "+"property to `FormSet.extend()`.")}this.form=kwargs.form;this.extra=kwargs.extra+kwargs.minNum;this.canOrder=kwargs.canOrder;this.canDelete=kwargs.canDelete;this.maxNum=kwargs.maxNum;this.validateMax=kwargs.validateMax;this.minNum=kwargs.minNum;this.validateMin=kwargs.validateMin;this.absoluteMax=kwargs.maxNum+DEFAULT_MAX_NUM;this.isInitialRender=kwargs.data===null&&kwargs.files===null;this.prefix=kwargs.prefix||this.getDefaultPrefix();this.autoId=kwargs.autoId;this.data=kwargs.data||{};this.files=kwargs.files||{};this.initial=kwargs.initial;this.errorConstructor=kwargs.errorConstructor;this.managementFormCssClass=kwargs.managementFormCssClass;this.validation=kwargs.validation;this.controlled=kwargs.controlled;this.onChange=kwargs.onChange;this._forms=null;this._errors=null;this._nonFormErrors=null;this._pendingValidation={};this._pendingAsyncValidation={};this._cleanFormsetAfter={};this._onValidate=null}});FormSet.prototype._formsetName=function(){var name=this.displayName||this.constructor.name;return name?"'"+name+"'":"FormSet"};FormSet.prototype._stateChanged=function(){if(typeof this.onChange=="function"){this.onChange()}};FormSet.prototype.validate=function(form,cb){this._cancelPendingOperations();if(is.Function(form)){cb=form;form=null}if(form){if(typeof form.getDOMNode=="function"){form=form.getDOMNode()}this.setData(getFormData(form),{validate:false,_triggerStateChange:false})}return this.isAsync()?this._validateAsync(cb):this._validateSync()};FormSet.prototype._validateAsync=function(cb){if(!is.Function(cb)){throw new Error("You must provide a callback to validate() when a formset or its form "+"has asynchronous validation.")}if(this.isInitialRender){this.isInitialRender=false}this._onValidate=cb;this.fullClean();this._stateChanged()};FormSet.prototype._validateSync=function(){if(this.isInitialRender){this.isInitialRender=false}this.fullClean();this._stateChanged();return this.isValid()};FormSet.prototype.fullClean=function(){this._errors=[];this._nonFormErrors=new this.errorConstructor;if(this.isInitialRender){return}this._cleanForms()};FormSet.prototype._cleanForms=function(){var forms=this.forms();var formIndexLookup=object.lookup(Object.keys(forms));object.extend(this._pendingValidation,formIndexLookup);object.extend(this._cleanFormsetAfter,formIndexLookup);for(var i=0,l=forms.length;i<l;i++){this._cleanForm(i,forms[i])}if(forms.length===0){this._cleanFormsetAfter.empty=true;this._formCleaned("empty",null)}};FormSet.prototype._cleanForm=function(index,form){if(!form.isAsync()){form.validate();this._errors[index]=form.errors();this._formCleaned(index,null);return}if(typeof this._pendingAsyncValidation[index]!="undefined"){object.pop(this._pendingAsyncValidation,index).cancel()}var callback=function(err){if(!err){this._errors[index]=form.errors()}this._formCleaned(index,err);this._stateChanged()}.bind(this);callback.onCancel=function(){form._cancelPendingOperations()};this._pendingAsyncValidation[index]=cancellable(callback);form.validate(callback)};FormSet.prototype._formCleaned=function(name,err){delete this._pendingValidation[name];if(this._pendingAsyncValidation[name]){delete this._pendingAsyncValidation[name]}if(err){if("production"!==process.env.NODE_ENV){console.error("Error cleaning formset["+name+"]:"+err.message)}this._pendingValidation={};this._cleanFormsetAfter={};this._finishedValidation(err);return}if(this._cleanFormsetAfter[name]){delete this._cleanFormsetAfter[name];if(is.Empty(this._cleanFormsetAfter)){this._cleanFormset();return}}if(name==CLEAN_VALIDATION){this._finishedValidation(null)}};FormSet.prototype.clean=noop;FormSet.prototype._cleanFormset=function(){
var async=false;var error=null;try{var totalFormCount=this.totalFormCount();var deletedFormCount=this.deletedForms().length;if(this.validateMax&&totalFormCount-deletedFormCount>this.maxNum||!env.browser&&this.managementForm().cleanedData[TOTAL_FORM_COUNT]>this.absoluteMax){throw ValidationError("Please submit "+this.maxNum+" or fewer forms.",{code:"tooManyForms"})}if(this.validateMin&&totalFormCount-deletedFormCount<this.minNum){throw ValidationError("Please submit "+this.minNum+" or more forms.",{code:"tooFewForms"})}if(this.clean!==noop){async=this._runCustomClean(CLEAN_VALIDATION,this.clean)}}catch(e){if(e instanceof ValidationError){this._nonFormErrors=new this.errorConstructor(e.messages())}else{error=e}}if(!async){this._formCleaned(CLEAN_VALIDATION,error)}};FormSet.prototype._runCustomClean=function(name,customClean){if(customClean.length===0){customClean.call(this);return false}if(typeof this._pendingAsyncValidation[name]!="undefined"){object.pop(this._pendingAsyncValidation,name).cancel()}var callback=function(err,validationError){if(typeof validationError!="undefined"){this.addError(validationError)}this._formCleaned(name,err);this._stateChanged()}.bind(this);var returnValue=customClean.call(this,callback);if(returnValue!==false){if(returnValue&&typeof returnValue.onCancel=="function"){callback.onCancel=returnValue.onCancel}this._pendingAsyncValidation[name]=cancellable(callback);return true}};FormSet.prototype._finishedValidation=function(err){if(!this.isAsync()){if(err){throw err}return}if(is.Function(this._onValidate)){var callback=this._onValidate;this._onValidate=null;if(err){return callback(err)}var isValid=this.isValid();callback(null,isValid,isValid?this.cleanedData():null)}};FormSet.prototype._cancelPendingOperations=function(){Object.keys(this._pendingAsyncValidation).forEach(function(field){object.pop(this._pendingAsyncValidation,field).cancel()}.bind(this))};FormSet.prototype.cleanedData=function(){var forms=this.initialForms();forms.push.apply(forms,this.extraForms().filter(function(form){return form.hasChanged()&&form.isComplete()}));return forms.map(function(form){return form.cleanedData})};FormSet.prototype.setData=function(data,kwargs){kwargs=object.extend({validate:true,_triggerStateChange:true},kwargs);this.data=data;var formDataSettingOptions={prefixed:true,validate:kwargs.validate,_triggerStateChange:false};this.forms().forEach(function(form){form.setData(data,formDataSettingOptions)});if(this.isInitialRender){this.isInitialRender=false}if(kwargs.validate){this._errors=null;var isValid=this.isValid()}else{this._errors=[];this._nonFormErrors=new this.errorConstructor}if(kwargs._triggerStateChange){this._stateChanged()}if(kwargs.validate){return isValid}};FormSet.prototype.setFormData=FormSet.prototype.setData;FormSet.prototype.managementForm=function(){var form;if(!env.browser&&!this.isInitialRender){form=new ManagementForm({data:this.data,autoId:this.autoId,prefix:this.prefix});if(!form.isValid()){throw ValidationError("ManagementForm data is missing or has been tampered with",{code:"missing_management_form"})}}else{var initial={};initial[TOTAL_FORM_COUNT]=this.totalFormCount();initial[INITIAL_FORM_COUNT]=this.initialFormCount();initial[MIN_NUM_FORM_COUNT]=this.minNum;initial[MAX_NUM_FORM_COUNT]=this.maxNum;form=new ManagementForm({autoId:this.autoId,prefix:this.prefix,initial:initial})}if(this.managementFormCssClass!==null){form.hiddenFieldRowCssClass=this.managementFormCssClass}return form};FormSet.prototype.totalFormCount=function(){if(!env.browser&&!this.isInitialRender){return Math.min(this.managementForm().cleanedData[TOTAL_FORM_COUNT],this.absoluteMax)}else{var initialForms=this.initialFormCount();var totalForms=this.initialFormCount()+this.extra;if(this.maxNum!==null&&initialForms>this.maxNum&&this.maxNum>=0){totalForms=initialForms}if(this.maxNum!==null&&totalForms>this.maxNum&&this.maxNum>=0){totalForms=this.maxNum}return totalForms}};FormSet.prototype.initialFormCount=function(){if(!env.browser&&!this.isInitialRender){return this.managementForm().cleanedData[INITIAL_FORM_COUNT]}else{return this.initial!==null&&this.initial.length>0?this.initial.length:0}};FormSet.prototype.forms=function(){if(this._forms!==null){return this._forms}var forms=[];var totalFormCount=this.totalFormCount();for(var i=0;i<totalFormCount;i++){forms.push(this._constructForm(i))}this._forms=forms;return forms};FormSet.prototype.addAnother=function(){var currentFormCount=this.totalFormCount();this.extra++;if(this._forms!==null){this._forms[currentFormCount]=this._constructForm(currentFormCount)}this._stateChanged()};FormSet.prototype.removeForm=function(index){if(this.extra===0){throw new Error("Can't remove a form when there are no extra forms")}this.extra--;if(this._forms!==null){this._forms.splice(index,1)}if(this._errors!==null){this._errors.splice(index,1)}this._stateChanged()};FormSet.prototype._constructForm=function(i){var defaults={autoId:this.autoId,prefix:this.addPrefix(i),errorConstructor:this.errorConstructor,validation:this.validation,controlled:this.controlled,onChange:this.onChange};if(!this.isInitialRender){defaults.data=this.data;defaults.files=this.files}if(this.initial!==null&&this.initial.length>0){if(typeof this.initial[i]!="undefined"){defaults.initial=this.initial[i]}}if(i>=this.initialFormCount()){defaults.emptyPermitted=true}var form=new this.form(defaults);this.addFields(form,i);return form};FormSet.prototype.initialForms=function(){return this.forms().slice(0,this.initialFormCount())};FormSet.prototype.extraForms=function(){return this.forms().slice(this.initialFormCount())};FormSet.prototype.emptyForm=function(){var kwargs={autoId:this.autoId,prefix:this.addPrefix("__prefix__"),emptyPermitted:true};var form=new this.form(kwargs);this.addFields(form,null);return form};FormSet.prototype.deletedForms=function(){if(!this.isValid()||!this.canDelete){return[]}var forms=this.forms();if(typeof this._deletedFormIndexes=="undefined"){this._deletedFormIndexes=[];for(var i=0,l=forms.length;i<l;i++){var form=forms[i];if(i>=this.initialFormCount()&&!form.hasChanged()){continue}if(this._shouldDeleteForm(form)){this._deletedFormIndexes.push(i)}}}return this._deletedFormIndexes.map(function(i){return forms[i]})};FormSet.prototype.orderedForms=function(){if(!this.isValid()||!this.canOrder){throw new Error(this.constructor.name+" object has no attribute 'orderedForms'")}var forms=this.forms();if(typeof this._ordering=="undefined"){this._ordering=[];for(var i=0,l=forms.length;i<l;i++){var form=forms[i];if(i>=this.initialFormCount()&&!form.hasChanged()){continue}if(this.canDelete&&this._shouldDeleteForm(form)){continue}this._ordering.push([i,form.cleanedData[ORDERING_FIELD_NAME]])}this._ordering.sort(function(x,y){if(x[1]===null&&y[1]===null){return x[0]-y[0]}if(x[1]===null){return 1}if(y[1]===null){return-1}return x[1]-y[1]})}return this._ordering.map(function(ordering){return forms[ordering[0]]})};FormSet.prototype.addFields=function(form,index){if(this.canOrder){if(index!=null&&index<this.initialFormCount()){form.fields[ORDERING_FIELD_NAME]=IntegerField({label:"Order",initial:index+1,required:false})}else{form.fields[ORDERING_FIELD_NAME]=IntegerField({label:"Order",required:false})}}if(this.canDelete){form.fields[DELETION_FIELD_NAME]=BooleanField({label:"Delete",required:false})}};FormSet.prototype._shouldDeleteForm=function(form){return object.get(form.cleanedData,DELETION_FIELD_NAME,false)};FormSet.prototype.addError=function(error){if(!(error instanceof ValidationError)){error=ValidationError(error)}this._nonFormErrors.extend(error.errorList)};FormSet.prototype.errors=function(){if(this._errors===null){this.fullClean()}return this._errors};FormSet.prototype.nonFormErrors=function(){if(this._nonFormErrors===null){this.fullClean()}return this._nonFormErrors};FormSet.prototype.totalErrorCount=function(){return this.nonFormErrors().length()+this.errors().reduce(function(sum,formErrors){return sum+formErrors.length()},0)};FormSet.prototype.hasChanged=function(){var forms=this.forms();for(var i=0,l=forms.length;i<l;i++){if(forms[i].hasChanged()){return true}}return false};FormSet.prototype.isAsync=function(){return this.clean.length==1||isFormAsync(this.form)};FormSet.prototype.isMultipart=function(){return this.forms().length>0&&this.forms()[0].isMultipart()};FormSet.prototype.isPending=function(){return!is.Empty(this._pendingAsyncValidation)};FormSet.prototype.isValid=function(){if(this.isInitialRender){return false}var errors=this.errors();var forms=this.forms();for(var i=0,l=errors.length;i<l;i++){if(errors[i].isPopulated()){if(this.canDelete&&this._shouldDeleteForm(forms[i])){continue}return false}}return!this.nonFormErrors().isPopulated()};FormSet.prototype.nonFormPending=function(){return typeof this._pendingAsyncValidation[CLEAN_VALIDATION]!="undefined"};FormSet.prototype.addPrefix=function(index){return formatObj(this.prefixFormat,{prefix:this.prefix,index:index})};FormSet.prototype.getDefaultPrefix=function(){return"form"};module.exports=FormSet}).call(this,require("_process"))},{"./BooleanField":182,"./ErrorList":203,"./Form":210,"./HiddenInput":214,"./IntegerField":218,"./constants":252,"./env":253,"./isFormAsync":255,"./util":270,Concur:258,_process:35,"get-form-data":259,"isomorph/format":261,"isomorph/is":262,"isomorph/object":263,validators:267}],213:[function(require,module,exports){"use strict";var object=require("isomorph/object");var validators=require("validators");var CharField=require("./CharField");var cleanIPv6Address=validators.ipv6.cleanIPv6Address;var GenericIPAddressField=CharField.extend({constructor:function GenericIPAddressField(kwargs){if(!(this instanceof GenericIPAddressField)){return new GenericIPAddressField(kwargs)}kwargs=object.extend({protocol:"both",unpackIPv4:false},kwargs);this.unpackIPv4=kwargs.unpackIPv4;this.defaultValidators=validators.ipAddressValidators(kwargs.protocol,kwargs.unpackIPv4).validators;CharField.call(this,kwargs)}});GenericIPAddressField.prototype.toJavaScript=function(value){if(!value){return""}if(value&&value.indexOf(":")!=-1){return cleanIPv6Address(value,{unpackIPv4:this.unpackIPv4})}return value};module.exports=GenericIPAddressField},{"./CharField":184,"isomorph/object":263,validators:267}],214:[function(require,module,exports){"use strict";var Input=require("./Input");var HiddenInput=Input.extend({constructor:function HiddenInput(kwargs){if(!(this instanceof HiddenInput)){return new HiddenInput(kwargs)}Input.call(this,kwargs)},inputType:"hidden",isHidden:true});module.exports=HiddenInput},{"./Input":217}],215:[function(require,module,exports){"use strict";var CharField=require("./CharField");var $__0=require("validators"),validateIPv4Address=$__0.validateIPv4Address;var IPAddressField=CharField.extend({defaultValidators:[validateIPv4Address],constructor:function IPAddressField(kwargs){if(!(this instanceof IPAddressField)){return new IPAddressField(kwargs)}CharField.call(this,kwargs)}});module.exports=IPAddressField},{"./CharField":184,validators:267}],216:[function(require,module,exports){"use strict";var FileField=require("./FileField");var ImageField=FileField.extend({defaultErrorMessages:{invalidImage:"Upload a valid image. The file you uploaded was either not an image or a corrupted image."},constructor:function ImageField(kwargs){if(!(this instanceof ImageField)){return new ImageField(kwargs)}FileField.call(this,kwargs)}});ImageField.prototype.toJavaScript=function(data,initial){var f=FileField.prototype.toJavaScript.call(this,data,initial);if(f===null){return null}return f};ImageField.prototype.getWidgetAttrs=function(widget){var attrs=FileField.prototype.getWidgetAttrs.call(this,widget);attrs.accept="image/*";return attrs};module.exports=ImageField},{"./FileField":206}],217:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var Widget=require("./Widget");var Input=Widget.extend({constructor:function Input(kwargs){if(!(this instanceof Input)){return new Input(kwargs)}Widget.call(this,kwargs)},inputType:null});Input.prototype._formatValue=function(value){return value};Input.prototype.render=function(name,value,kwargs){kwargs=object.extend({attrs:null},kwargs);if(value===null){value=""}var finalAttrs=this.buildAttrs(kwargs.attrs,{type:this.inputType,name:name});var valueAttr=kwargs.controlled||this.isHidden?"value":"defaultValue";if(!(valueAttr=="defaultValue"&&value==="")){finalAttrs[valueAttr]=value!==""?""+this._formatValue(value):value}return React.createElement("input",finalAttrs)};module.exports=Input},{"./Widget":251,"isomorph/object":263,react:590}],218:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Field=require("./Field");var NumberInput=require("./NumberInput");var $__0=require("validators"),MaxValueValidator=$__0.MaxValueValidator,MinValueValidator=$__0.MinValueValidator,ValidationError=$__0.ValidationError;var IntegerField=Field.extend({widget:NumberInput,defaultErrorMessages:{invalid:"Enter a whole number."},constructor:function IntegerField(kwargs){if(!(this instanceof IntegerField)){return new IntegerField(kwargs)}kwargs=object.extend({maxValue:null,minValue:null},kwargs);this.maxValue=kwargs.maxValue;this.minValue=kwargs.minValue;Field.call(this,kwargs);if(this.minValue!==null){this.validators.push(MinValueValidator(this.minValue))}if(this.maxValue!==null){this.validators.push(MaxValueValidator(this.maxValue))}}});IntegerField.prototype.toJavaScript=function(value){value=Field.prototype.toJavaScript.call(this,value);if(this.isEmptyValue(value)){return null}value=Number(value);if(isNaN(value)||value.toString().indexOf(".")!=-1){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}return value};IntegerField.prototype.getWidgetAttrs=function(widget){var attrs=Field.prototype.getWidgetAttrs.call(this,widget);if(this.minValue!==null&&!object.hasOwn(widget.attrs,"min")){object.setDefault(attrs,"min",this.minValue)}if(this.maxValue!==null&&!object.hasOwn(widget.attrs,"max")){object.setDefault(attrs,"max",this.maxValue)}return attrs};module.exports=IntegerField},{"./Field":205,"./NumberInput":226,"isomorph/object":263,validators:267}],219:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var Field=require("./Field");var $__0=require("validators"),ValidationError=$__0.ValidationError;var MultiValueField=Field.extend({defaultErrorMessages:{invalid:"Enter a list of values.",incomplete:"Enter a complete value."},constructor:function MultiValueField(kwargs){if(!(this instanceof Field)){return new MultiValueField(kwargs)}kwargs=object.extend({fields:[]},kwargs);this.requireAllFields=object.pop(kwargs,"requireAllFields",true);Field.call(this,kwargs);for(var i=0,l=kwargs.fields.length;i<l;i++){var f=kwargs.fields[i];object.setDefault(f.errorMessages,"incomplete",this.errorMessages.incomplete);if(this.requireAllFields){f.required=false}}this.fields=kwargs.fields}});MultiValueField.prototype.validate=function(){};MultiValueField.prototype.clean=function(value){var cleanData=[];var errors=[];if(!value||is.Array(value)){var allValuesEmpty=true;if(is.Array(value)){for(var i=0,l=value.length;i<l;i++){if(value[i]){allValuesEmpty=false;break}}}if(!value||allValuesEmpty){if(this.required){throw ValidationError(this.errorMessages.required,{code:"required"})}else{return this.compress([])}}}else{throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}for(i=0,l=this.fields.length;i<l;i++){var field=this.fields[i];var fieldValue=value[i];if(fieldValue===undefined){fieldValue=null}if(this.isEmptyValue(fieldValue)){if(this.requireAllFields){if(this.required){throw ValidationError(this.errorMessages.required,{code:"required"})}}else if(field.required){if(errors.indexOf(field.errorMessages.incomplete)==-1){errors.push(field.errorMessages.incomplete)}continue}}try{cleanData.push(field.clean(fieldValue))}catch(e){if(!(e instanceof ValidationError)){throw e}errors=errors.concat(e.messages().filter(function(m){return errors.indexOf(m)==-1}))}}if(errors.length!==0){throw ValidationError(errors)}var out=this.compress(cleanData);this.validate(out);this.runValidators(out);return out};MultiValueField.prototype.compress=function(dataList){throw new Error("Subclasses must implement this method.")};MultiValueField.prototype._hasChanged=function(initial,data){if(initial===null){initial=[];for(var i=0,l=data.length;i<l;i++){initial.push("")}}else if(!is.Array(initial)){initial=this.widget.decompress(initial)}for(i=0,l=this.fields.length;i<l;i++){if(this.fields[i]._hasChanged(initial[i],data[i])){return true}}return false};module.exports=MultiValueField},{"./Field":205,"isomorph/is":262,"isomorph/object":263,validators:267}],220:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var React=require("react");var Widget=require("./Widget");var MultiWidget=Widget.extend({constructor:function MultiWidget(widgets,kwargs){if(!(this instanceof MultiWidget)){return new MultiWidget(widgets,kwargs)}this.widgets=[];var needsMultipartForm=false;for(var i=0,l=widgets.length;i<l;i++){var widget=widgets[i]instanceof Widget?widgets[i]:new widgets[i];if(widget.needsMultipartForm){needsMultipartForm=true}this.widgets.push(widget)}this.needsMultipartForm=needsMultipartForm;Widget.call(this,kwargs)}});MultiWidget.prototype.render=function(name,value,kwargs){kwargs=object.extend({},kwargs);if(!is.Array(value)){value=this.decompress(value)}var finalAttrs=this.buildAttrs(kwargs.attrs,{"data-newforms-field":name});var id=object.get(finalAttrs,"id",null);var key=object.get(finalAttrs,"key",null);var renderedWidgets=[];for(var i=0,l=this.widgets.length;i<l;i++){var widget=this.widgets[i];var widgetValue=null;if(typeof value[i]!="undefined"){widgetValue=value[i]}if(id){finalAttrs.id=id+"_"+i}if(key){finalAttrs.key=key+"_"+i}renderedWidgets.push(widget.render(name+"_"+i,widgetValue,{attrs:finalAttrs,controlled:kwargs.controlled}))}return this.formatOutput(renderedWidgets)};MultiWidget.prototype.idForLabel=function(id){if(id){id+="_0"}return id};MultiWidget.prototype.valueFromData=function(data,files,name){var values=[];for(var i=0,l=this.widgets.length;i<l;i++){values[i]=this.widgets[i].valueFromData(data,files,name+"_"+i)}return values};MultiWidget.prototype.formatOutput=function(renderedWidgets){return React.createElement("div",null,renderedWidgets)};MultiWidget.prototype.decompress=function(value){throw new Error("MultiWidget subclasses must implement a decompress() method.")};module.exports=MultiWidget},{"./Widget":251,"isomorph/is":262,"isomorph/object":263,react:590}],221:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var ChoiceField=require("./ChoiceField");var MultipleHiddenInput=require("./MultipleHiddenInput");var SelectMultiple=require("./SelectMultiple");var $__0=require("validators"),ValidationError=$__0.ValidationError;var MultipleChoiceField=ChoiceField.extend({hiddenWidget:MultipleHiddenInput,widget:SelectMultiple,defaultErrorMessages:{invalidChoice:"Select a valid choice. {value} is not one of the available choices.",invalidList:"Enter a list of values."},constructor:function MultipleChoiceField(kwargs){if(!(this instanceof MultipleChoiceField)){return new MultipleChoiceField(kwargs)}ChoiceField.call(this,kwargs)}});MultipleChoiceField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return[]}else if(!is.Array(value)){throw ValidationError(this.errorMessages.invalidList,{code:"invalidList"})}var stringValues=[];for(var i=0,l=value.length;i<l;i++){stringValues.push(""+value[i])}return stringValues};MultipleChoiceField.prototype.validate=function(value){if(this.required&&!value.length){throw ValidationError(this.errorMessages.required,{code:"required"})}for(var i=0,l=value.length;i<l;i++){if(!this.validValue(value[i])){throw ValidationError(this.errorMessages.invalidChoice,{code:"invalidChoice",params:{value:value[i]}})}}};MultipleChoiceField.prototype._hasChanged=function(initial,data){if(initial===null){initial=[]}if(data===null){data=[]}if(initial.length!=data.length){return true}var dataLookup=object.lookup(data);for(var i=0,l=initial.length;i<l;i++){if(typeof dataLookup[""+initial[i]]=="undefined"){return true}}return false};module.exports=MultipleChoiceField},{"./ChoiceField":189,"./MultipleHiddenInput":223,"./SelectMultiple":237,"isomorph/is":262,"isomorph/object":263,validators:267}],222:[function(require,module,exports){"use strict";var is=require("isomorph/is");var env=require("./env");var Field=require("./Field");var FileInput=require("./FileInput");var FileField=require("./FileField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var MultipleFileField=FileField.extend({widget:FileInput,defaultErrorMessages:{invalid:"No files were submitted. Check the encoding type on the form.",missing:"No files were submitted.",empty:"{name} is empty.",maxLength:"Ensure filenames have at most {max} characters ({name} has {length})."},constructor:function MultipleFileField(kwargs){if(!(this instanceof MultipleFileField)){return new MultipleFileField(kwargs)}FileField.call(this,kwargs)}});MultipleFileField.prototype.getWidgetAttrs=function(widget){var attrs=FileField.prototype.getWidgetAttrs.call(this,widget);attrs.multiple=true;return attrs};MultipleFileField.prototype.toJavaScript=function(data,initial){if(this.isEmptyValue(data)){return[]}if(env.browser&&is.String(data)){return data}for(var i=0,l=data.length;i<l;i++){var file=data[i];if(typeof file.name=="undefined"||typeof file.size=="undefined"){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}var name=file.name;var size=Number(file.size);if(this.maxLength!==null&&name.length>this.maxLength){throw ValidationError(this.errorMessages.maxLength,{code:"maxLength",params:{max:this.maxLength,name:name,length:name.length}})}if(!name){throw ValidationError(this.errorMessages.invalid,{code:"invalid"})}if(!this.allowEmptyFile&&size===0){throw ValidationError(this.errorMessages.empty,{code:"empty",params:{name:name}})}}return data};MultipleFileField.prototype.clean=function(data,initial){if(this.isEmptyValue(data)&&!this.isEmptyValue(initial)){return initial}return Field.prototype.clean.call(this,data)};MultipleFileField.prototype.validate=function(value){if(this.required&&!value.length){throw ValidationError(this.errorMessages.required,{code:"required"})}};MultipleFileField.prototype._hasChanged=function(initial,data){return!this.isEmptyValue(data)};module.exports=MultipleFileField},{"./Field":205,"./FileField":206,"./FileInput":207,"./env":253,"isomorph/is":262,validators:267}],223:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var HiddenInput=require("./HiddenInput");var MultipleHiddenInput=HiddenInput.extend({constructor:function MultipleHiddenInput(kwargs){if(!(this instanceof MultipleHiddenInput)){return new MultipleHiddenInput(kwargs)}HiddenInput.call(this,kwargs)}});MultipleHiddenInput.prototype.render=function(name,value,kwargs){kwargs=object.extend({attrs:null},kwargs);if(value===null){value=[]}var finalAttrs=this.buildAttrs(kwargs.attrs,{type:this.inputType,name:name});var id=object.get(finalAttrs,"id",null);var key=object.get(finalAttrs,"key",null);var inputs=[];for(var i=0,l=value.length;i<l;i++){var inputAttrs=object.extend({},finalAttrs,{value:value[i]});if(id){inputAttrs.id=id+"_"+i}if(key){inputAttrs.key=id+"_"+i}inputs.push(React.createElement("input",inputAttrs))}return React.createElement("div",null,inputs)};MultipleHiddenInput.prototype.valueFromData=function(data,files,name){if(typeof data[name]!="undefined"){return[].concat(data[name])}return null};module.exports=MultipleHiddenInput},{"./HiddenInput":214,"isomorph/object":263,react:590}],224:[function(require,module,exports){"use strict";var BooleanField=require("./BooleanField");var NullBooleanSelect=require("./NullBooleanSelect");var NullBooleanField=BooleanField.extend({widget:NullBooleanSelect,constructor:function NullBooleanField(kwargs){if(!(this instanceof NullBooleanField)){return new NullBooleanField(kwargs)}BooleanField.call(this,kwargs)}});NullBooleanField.prototype.toJavaScript=function(value){if(value===true||value=="True"||value=="true"||value=="1"){return true}else if(value===false||value=="False"||value=="false"||value=="0"){return false}return null};NullBooleanField.prototype.validate=function(value){};NullBooleanField.prototype._hasChanged=function(initial,data){if(initial!==null){initial=Boolean(initial)}if(data!==null){data=Boolean(data)}return initial!=data};module.exports=NullBooleanField},{"./BooleanField":182,"./NullBooleanSelect":225}],225:[function(require,module,exports){"use strict";var Select=require("./Select");var NullBooleanSelect=Select.extend({constructor:function NullBooleanSelect(kwargs){if(!(this instanceof NullBooleanSelect)){return new NullBooleanSelect(kwargs)}kwargs=kwargs||{};kwargs.choices=[["1","Unknown"],["2","Yes"],["3","No"]];Select.call(this,kwargs)}});NullBooleanSelect.prototype.render=function(name,value,kwargs){if(value===true||value=="2"){value="2"}else if(value===false||value=="3"){value="3"}else{value="1"}return Select.prototype.render.call(this,name,value,kwargs)};NullBooleanSelect.prototype.valueFromData=function(data,files,name){var value=null;if(typeof data[name]!="undefined"){var dataValue=data[name];if(dataValue===true||dataValue=="True"||dataValue=="true"||dataValue=="2"){value=true}else if(dataValue===false||dataValue=="False"||dataValue=="false"||dataValue=="3"){value=false}}return value};module.exports=NullBooleanSelect},{"./Select":236}],226:[function(require,module,exports){"use strict";var TextInput=require("./TextInput");var NumberInput=TextInput.extend({constructor:function NumberInput(kwargs){if(!(this instanceof NumberInput)){return new NumberInput(kwargs)}TextInput.call(this,kwargs)},inputType:"number"});module.exports=NumberInput},{"./TextInput":243}],227:[function(require,module,exports){"use strict";var object=require("isomorph/object");var env=require("./env");var TextInput=require("./TextInput");var PasswordInput=TextInput.extend({constructor:function PasswordInput(kwargs){if(!(this instanceof PasswordInput)){return new PasswordInput(kwargs)}kwargs=object.extend({renderValue:false},kwargs);TextInput.call(this,kwargs);this.renderValue=kwargs.renderValue},inputType:"password"});PasswordInput.prototype.render=function(name,value,kwargs){if(!env.browser&&!this.renderValue){value=""}return TextInput.prototype.render.call(this,name,value,kwargs)};module.exports=PasswordInput},{"./TextInput":243,"./env":253,"isomorph/object":263}],228:[function(require,module,exports){"use strict";var is=require("isomorph/is");var React=require("react");var ProgressMixin={propTypes:{progress:React.PropTypes.any},renderProgress:function(){if(!this.props.progress){return React.createElement("progress",null,"Validating...")}if(is.Function(this.props.progress)){return this.props.progress()}return React.createElement(this.props.progress,null)}};module.exports=ProgressMixin},{"isomorph/is":262,react:590}],229:[function(require,module,exports){"use strict";var ChoiceInput=require("./ChoiceInput");var RadioChoiceInput=ChoiceInput.extend({constructor:function RadioChoiceInput(name,value,attrs,controlled,choice,index){if(!(this instanceof RadioChoiceInput)){return new RadioChoiceInput(name,value,attrs,controlled,choice,index)}ChoiceInput.call(this,name,value,attrs,controlled,choice,index);this.value=""+this.value},inputType:"radio"});module.exports=RadioChoiceInput},{"./ChoiceInput":191}],230:[function(require,module,exports){"use strict";var ChoiceFieldRenderer=require("./ChoiceFieldRenderer");var RadioChoiceInput=require("./RadioChoiceInput");var RadioFieldRenderer=ChoiceFieldRenderer.extend({constructor:function RadioFieldRenderer(name,value,attrs,controlled,choices){if(!(this instanceof RadioFieldRenderer)){return new RadioFieldRenderer(name,value,attrs,controlled,choices)}ChoiceFieldRenderer.apply(this,arguments)},choiceInputConstructor:RadioChoiceInput});module.exports=RadioFieldRenderer},{"./ChoiceFieldRenderer":190,"./RadioChoiceInput":229}],231:[function(require,module,exports){"use strict";var RadioFieldRenderer=require("./RadioFieldRenderer");var RendererMixin=require("./RendererMixin");var Select=require("./Select");var RadioSelect=Select.extend({__mixins__:[RendererMixin],constructor:function(kwargs){if(!(this instanceof RadioSelect)){return new RadioSelect(kwargs)}RendererMixin.call(this,kwargs);Select.call(this,kwargs)},renderer:RadioFieldRenderer,_emptyValue:""});module.exports=RadioSelect},{"./RadioFieldRenderer":230,"./RendererMixin":235,"./Select":236}],232:[function(require,module,exports){"use strict";var is=require("isomorph/is");var CharField=require("./CharField");var $__0=require("validators"),RegexValidator=$__0.RegexValidator;var RegexField=CharField.extend({constructor:function RegexField(regex,kwargs){if(!(this instanceof RegexField)){return new RegexField(regex,kwargs)}CharField.call(this,kwargs);if(is.String(regex)){regex=new RegExp(regex)}this.regex=regex;this.validators.push(RegexValidator({regex:this.regex}))}});module.exports=RegexField},{"./CharField":184,"isomorph/is":262,validators:267}],233:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var ErrorObject=require("./ErrorObject");var Form=require("./Form");var FormRow=require("./FormRow");var ProgressMixin=require("./ProgressMixin");var $__0=require("./constants"),NON_FIELD_ERRORS=$__0.NON_FIELD_ERRORS;var $__1=require("./util"),autoIdChecker=$__1.autoIdChecker,getProps=$__1.getProps;var formProps={autoId:autoIdChecker,controlled:React.PropTypes.bool,data:React.PropTypes.object,emptyPermitted:React.PropTypes.bool,errorConstructor:React.PropTypes.func,errors:React.PropTypes.instanceOf(ErrorObject),files:React.PropTypes.object,initial:React.PropTypes.object,labelSuffix:React.PropTypes.string,onChange:React.PropTypes.func,prefix:React.PropTypes.string,validation:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.object])};var RenderForm=React.createClass({displayName:"RenderForm",mixins:[ProgressMixin],propTypes:object.extend({},formProps,{className:React.PropTypes.string,component:React.PropTypes.any,form:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.instanceOf(Form)]).isRequired,row:React.PropTypes.any,rowComponent:React.PropTypes.any}),childContextTypes:{form:React.PropTypes.instanceOf(Form)},getChildContext:function(){return{form:this.form}},getDefaultProps:function(){return{component:"div",row:FormRow,rowComponent:"div"}},componentWillMount:function(){if(this.props.form instanceof Form){this.form=this.props.form}else{this.form=new this.props.form(object.extend({onChange:this.forceUpdate.bind(this)},getProps(this.props,Object.keys(formProps))))}},getForm:function(){return this.form},render:function(){if(React.Children.count(this.props.children)!==0){return React.cloneElement(React.Children.only(this.props.children),{form:this.form})}var $__0=this,form=$__0.form,props=$__0.props;var attrs={};if(this.props.className){attrs.className=props.className}var topErrors=form.nonFieldErrors();var hiddenFields=form.hiddenFields().map(function(bf){var errors=bf.errors();if(errors.isPopulated){topErrors.extend(errors.messages().map(function(error){return"(Hidden field "+bf.name+") "+error}))}return bf.render()});return React.createElement(props.component,React.__spread({},attrs),topErrors.isPopulated()&&React.createElement(props.row,{className:form.errorCssClass,component:props.rowComponent,content:topErrors.render(),key:form.addPrefix(NON_FIELD_ERRORS)}),form.visibleFields().map(function(bf){return React.createElement(props.row,{bf:bf,className:bf.cssClasses(),component:props.rowComponent,
key:bf.htmlName,progress:props.progress})}),form.nonFieldPending()&&React.createElement(props.row,{className:form.pendingRowCssClass,component:props.rowComponent,content:this.renderProgress(),key:form.addPrefix("__pending__")}),hiddenFields.length>0&&React.createElement(props.row,{className:form.hiddenFieldRowCssClass,component:props.rowComponent,content:hiddenFields,hidden:true,key:form.addPrefix("__hidden__")}))}});module.exports=RenderForm},{"./ErrorObject":204,"./Form":210,"./FormRow":211,"./ProgressMixin":228,"./constants":252,"./util":270,"isomorph/object":263,react:590}],234:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var FormRow=require("./FormRow");var FormSet=require("./FormSet");var ProgressMixin=require("./ProgressMixin");var RenderForm=require("./RenderForm");var $__0=require("./constants"),NON_FIELD_ERRORS=$__0.NON_FIELD_ERRORS;var $__1=require("./util"),autoIdChecker=$__1.autoIdChecker,getProps=$__1.getProps;var formsetProps={canDelete:React.PropTypes.bool,canOrder:React.PropTypes.bool,extra:React.PropTypes.number,form:React.PropTypes.func,maxNum:React.PropTypes.number,minNum:React.PropTypes.number,validateMax:React.PropTypes.bool,validateMin:React.PropTypes.bool,autoId:autoIdChecker,controlled:React.PropTypes.bool,data:React.PropTypes.object,errorConstructor:React.PropTypes.func,files:React.PropTypes.object,initial:React.PropTypes.object,onChange:React.PropTypes.func,prefix:React.PropTypes.string,validation:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.object])};var RenderFormSet=React.createClass({displayName:"RenderFormSet",mixins:[ProgressMixin],propTypes:object.extend({},formsetProps,{className:React.PropTypes.string,component:React.PropTypes.any,formComponent:React.PropTypes.any,formset:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.instanceOf(FormSet)]),row:React.PropTypes.any,rowComponent:React.PropTypes.any,useManagementForm:React.PropTypes.bool,__all__:function(props){if(!props.form&&!props.formset){return new Error("Invalid props supplied to `RenderFormSet`, either `form` or "+"`formset` must be specified.")}}}),getDefaultProps:function(){return{component:"div",formComponent:"div",formset:FormSet,row:FormRow,rowComponent:"div",useManagementForm:false}},componentWillMount:function(){if(this.props.formset instanceof FormSet){this.formset=this.props.formset}else{this.formset=new this.props.formset(object.extend({onChange:this.forceUpdate.bind(this)},getProps(this.props,Object.keys(formsetProps))))}},getFormset:function(){return this.formset},render:function(){var $__0=this,formset=$__0.formset,props=$__0.props;var attrs={};if(this.props.className){attrs.className=props.className}var topErrors=formset.nonFormErrors();return React.createElement(props.component,React.__spread({},attrs),topErrors.isPopulated()&&React.createElement(props.row,{className:formset.errorCssClass,content:topErrors.render(),key:formset.addPrefix(NON_FIELD_ERRORS),rowComponent:props.rowComponent}),formset.forms().map(function(form){return React.createElement(RenderForm,{form:form,formComponent:props.formComponent,progress:props.progress,row:props.row,rowComponent:props.rowComponent})}),formset.nonFormPending()&&React.createElement(props.row,{className:formset.pendingRowCssClass,content:this.renderProgress(),key:formset.addPrefix("__pending__"),rowComponent:props.rowComponent}),props.useManagementForm&&React.createElement(RenderForm,{form:formset.managementForm(),formComponent:props.formComponent,row:props.row,rowComponent:props.rowComponent}))}});module.exports=RenderFormSet},{"./FormRow":211,"./FormSet":212,"./ProgressMixin":228,"./RenderForm":233,"./constants":252,"./util":270,"isomorph/object":263,react:590}],235:[function(require,module,exports){"use strict";var Concur=require("Concur");var object=require("isomorph/object");var RendererMixin=Concur.extend({constructor:function RendererMixin(kwargs){kwargs=object.extend({renderer:null},kwargs);if(kwargs.renderer!==null){this.renderer=kwargs.renderer}},_emptyValue:null,validation:{onChange:true}});RendererMixin.prototype.subWidgets=function(name,value,kwargs){return this.getRenderer(name,value,kwargs).choiceInputs()};RendererMixin.prototype.getRenderer=function(name,value,kwargs){kwargs=object.extend({choices:[],controlled:false},kwargs);if(value===null){value=this._emptyValue}var finalAttrs=this.buildAttrs(kwargs.attrs);var choices=this.choices.concat(kwargs.choices);return new this.renderer(name,value,finalAttrs,kwargs.controlled,choices)};RendererMixin.prototype.render=function(name,value,kwargs){return this.getRenderer(name,value,kwargs).render()};RendererMixin.prototype.idForLabel=function(id){if(id){id+="_0"}return id};module.exports=RendererMixin},{Concur:258,"isomorph/object":263}],236:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var React=require("react");var Widget=require("./Widget");var $__0=require("./util"),normaliseChoices=$__0.normaliseChoices;var Select=Widget.extend({constructor:function Select(kwargs){if(!(this instanceof Select)){return new Select(kwargs)}kwargs=object.extend({choices:[]},kwargs);Widget.call(this,kwargs);this.choices=normaliseChoices(kwargs.choices)},allowMultipleSelected:false,validation:{onChange:true}});Select.prototype.render=function(name,selectedValue,kwargs){kwargs=object.extend({choices:[]},kwargs);if(selectedValue===null){selectedValue=""}var finalAttrs=this.buildAttrs(kwargs.attrs,{name:name});var options=this.renderOptions(kwargs.choices,[selectedValue]);var valueAttr=kwargs.controlled?"value":"defaultValue";finalAttrs[valueAttr]=selectedValue;return React.createElement("select",finalAttrs,options)};Select.prototype.renderOptions=function(additionalChoices,selectedValues){var selectedValuesLookup=object.lookup(selectedValues);var options=[];var choices=this.choices.concat(normaliseChoices(additionalChoices));for(var i=0,l=choices.length,choice;i<l;i++){choice=choices[i];if(is.Array(choice[1])){var optgroupOptions=[];var optgroupChoices=choice[1];for(var j=0,m=optgroupChoices.length;j<m;j++){optgroupOptions.push(this.renderOption(selectedValuesLookup,optgroupChoices[j][0],optgroupChoices[j][1]))}options.push(React.createElement("optgroup",{label:choice[0],key:choice[9]},optgroupOptions))}else{options.push(this.renderOption(selectedValuesLookup,choice[0],choice[1]))}}return options};Select.prototype.renderOption=function(selectedValuesLookup,optValue,optLabel){optValue=""+optValue;var attrs={value:optValue,key:optValue+optLabel};if(typeof selectedValuesLookup[optValue]!="undefined"){attrs["selected"]="selected";if(!this.allowMultipleSelected){delete selectedValuesLookup[optValue]}}return React.createElement("option",attrs,optLabel)};module.exports=Select},{"./Widget":251,"./util":270,"isomorph/is":262,"isomorph/object":263,react:590}],237:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var React=require("react");var Select=require("./Select");var SelectMultiple=Select.extend({constructor:function SelectMultiple(kwargs){if(!(this instanceof SelectMultiple)){return new SelectMultiple(kwargs)}Select.call(this,kwargs)},allowMultipleSelected:true,validation:{onChange:true}});SelectMultiple.prototype.render=function(name,selectedValues,kwargs){kwargs=object.extend({choices:[]},kwargs);if(selectedValues===null){selectedValues=[]}if(!is.Array(selectedValues)){selectedValues=[selectedValues]}var finalAttrs=this.buildAttrs(kwargs.attrs,{name:name,multiple:"multiple"});var options=this.renderOptions(kwargs.choices,selectedValues);var valueAttr=kwargs.controlled?"value":"defaultValue";finalAttrs[valueAttr]=selectedValues;return React.createElement("select",finalAttrs,options)};SelectMultiple.prototype.valueFromData=function(data,files,name){if(object.hasOwn(data,name)&&data[name]!=null){return[].concat(data[name])}return null};module.exports=SelectMultiple},{"./Select":236,"isomorph/is":262,"isomorph/object":263,react:590}],238:[function(require,module,exports){"use strict";var validators=require("validators");var CharField=require("./CharField");var $__0=require("./util"),strip=$__0.strip;var SlugField=CharField.extend({defaultValidators:[validators.validateSlug],constructor:function SlugField(kwargs){if(!(this instanceof SlugField)){return new SlugField(kwargs)}CharField.call(this,kwargs)}});SlugField.prototype.clean=function(value){value=strip(this.toJavaScript(value));return CharField.prototype.clean.call(this,value)};module.exports=SlugField},{"./CharField":184,"./util":270,validators:267}],239:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var DateField=require("./DateField");var MultiValueField=require("./MultiValueField");var SplitDateTimeWidget=require("./SplitDateTimeWidget");var SplitHiddenDateTimeWidget=require("./SplitHiddenDateTimeWidget");var TimeField=require("./TimeField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var SplitDateTimeField=MultiValueField.extend({hiddenWidget:SplitHiddenDateTimeWidget,widget:SplitDateTimeWidget,defaultErrorMessages:{invalidDate:"Enter a valid date.",invalidTime:"Enter a valid time."},constructor:function SplitDateTimeField(kwargs){if(!(this instanceof SplitDateTimeField)){return new SplitDateTimeField(kwargs)}kwargs=object.extend({inputDateFormats:null,inputTimeFormats:null},kwargs);var errors=object.extend({},this.defaultErrorMessages);if(typeof kwargs.errorMessages!="undefined"){object.extend(errors,kwargs.errorMessages)}kwargs.fields=[DateField({inputFormats:kwargs.inputDateFormats,errorMessages:{invalid:errors.invalidDate}}),TimeField({inputFormats:kwargs.inputTimeFormats,errorMessages:{invalid:errors.invalidTime}})];MultiValueField.call(this,kwargs)}});SplitDateTimeField.prototype.compress=function(dataList){if(is.Array(dataList)&&dataList.length>0){var d=dataList[0];var t=dataList[1];if(this.isEmptyValue(d)){throw ValidationError(this.errorMessages.invalidDate,{code:"invalidDate"})}if(this.isEmptyValue(t)){throw ValidationError(this.errorMessages.invalidTime,{code:"invalidTime"})}return new Date(d.getFullYear(),d.getMonth(),d.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}return null};module.exports=SplitDateTimeField},{"./DateField":194,"./MultiValueField":219,"./SplitDateTimeWidget":240,"./SplitHiddenDateTimeWidget":241,"./TimeField":245,"isomorph/is":262,"isomorph/object":263,validators:267}],240:[function(require,module,exports){"use strict";var object=require("isomorph/object");var DateInput=require("./DateInput");var MultiWidget=require("./MultiWidget");var TimeInput=require("./TimeInput");var SplitDateTimeWidget=MultiWidget.extend({constructor:function SplitDateTimeWidget(kwargs){if(!(this instanceof SplitDateTimeWidget)){return new SplitDateTimeWidget(kwargs)}kwargs=object.extend({dateFormat:null,timeFormat:null},kwargs);var widgets=[DateInput({attrs:kwargs.attrs,format:kwargs.dateFormat}),TimeInput({attrs:kwargs.attrs,format:kwargs.timeFormat})];MultiWidget.call(this,widgets,kwargs.attrs)}});SplitDateTimeWidget.prototype.decompress=function(value){if(value){return[new Date(value.getFullYear(),value.getMonth(),value.getDate()),new Date(1900,0,1,value.getHours(),value.getMinutes(),value.getSeconds())]}return[null,null]};module.exports=SplitDateTimeWidget},{"./DateInput":195,"./MultiWidget":220,"./TimeInput":246,"isomorph/object":263}],241:[function(require,module,exports){"use strict";var SplitDateTimeWidget=require("./SplitDateTimeWidget");var SplitHiddenDateTimeWidget=SplitDateTimeWidget.extend({constructor:function SplitHiddenDateTimeWidget(kwargs){if(!(this instanceof SplitHiddenDateTimeWidget)){return new SplitHiddenDateTimeWidget(kwargs)}SplitDateTimeWidget.call(this,kwargs);for(var i=0,l=this.widgets.length;i<l;i++){this.widgets[i].inputType="hidden";this.widgets[i].isHidden=true}},isHidden:true});module.exports=SplitHiddenDateTimeWidget},{"./SplitDateTimeWidget":240}],242:[function(require,module,exports){"use strict";var Concur=require("Concur");var object=require("isomorph/object");var SubWidget=Concur.extend({constructor:function SubWidget(parentWidget,name,value,kwargs){if(!(this instanceof SubWidget)){return new SubWidget(parentWidget,name,value,kwargs)}this.parentWidget=parentWidget;this.name=name;this.value=value;kwargs=object.extend({attrs:null,choices:[]},kwargs);this.attrs=kwargs.attrs;this.choices=kwargs.choices}});SubWidget.prototype.render=function(){var kwargs={attrs:this.attrs};if(this.choices.length){kwargs.choices=this.choices}return this.parentWidget.render(this.name,this.value,kwargs)};module.exports=SubWidget},{Concur:258,"isomorph/object":263}],243:[function(require,module,exports){"use strict";var object=require("isomorph/object");var Input=require("./Input");var TextInput=Input.extend({constructor:function TextInput(kwargs){if(!(this instanceof TextInput)){return new TextInput(kwargs)}kwargs=object.extend({attrs:null},kwargs);if(kwargs.attrs!=null){this.inputType=object.pop(kwargs.attrs,"type",this.inputType)}Input.call(this,kwargs)},inputType:"text"});module.exports=TextInput},{"./Input":217,"isomorph/object":263}],244:[function(require,module,exports){"use strict";var object=require("isomorph/object");var React=require("react");var Widget=require("./Widget");var Textarea=Widget.extend({constructor:function Textarea(kwargs){if(!(this instanceof Textarea)){return new Textarea(kwargs)}kwargs=object.extend({attrs:null},kwargs);kwargs.attrs=object.extend({rows:"3",cols:"40"},kwargs.attrs);Widget.call(this,kwargs)}});Textarea.prototype.render=function(name,value,kwargs){kwargs=object.extend({},kwargs);if(value===null){value=""}var finalAttrs=this.buildAttrs(kwargs.attrs,{name:name});var valueAttr=kwargs.controlled?"value":"defaultValue";finalAttrs[valueAttr]=value;return React.createElement("textarea",finalAttrs)};module.exports=Textarea},{"./Widget":251,"isomorph/object":263,react:590}],245:[function(require,module,exports){"use strict";var time=require("isomorph/time");var locales=require("./locales");var BaseTemporalField=require("./BaseTemporalField");var TimeInput=require("./TimeInput");var TimeField=BaseTemporalField.extend({widget:TimeInput,inputFormatType:"TIME_INPUT_FORMATS",defaultErrorMessages:{invalid:"Enter a valid time."},constructor:function TimeField(kwargs){if(!(this instanceof TimeField)){return new TimeField(kwargs)}BaseTemporalField.call(this,kwargs)}});TimeField.prototype.toJavaScript=function(value){if(this.isEmptyValue(value)){return null}if(value instanceof Date){return new Date(1900,0,1,value.getHours(),value.getMinutes(),value.getSeconds())}return BaseTemporalField.prototype.toJavaScript.call(this,value)};TimeField.prototype.strpdate=function(value,format){var t=time.strptime(value,format,locales.getDefaultLocale());return new Date(1900,0,1,t[3],t[4],t[5])};module.exports=TimeField},{"./BaseTemporalField":181,"./TimeInput":246,"./locales":256,"isomorph/time":264}],246:[function(require,module,exports){"use strict";var DateTimeBaseInput=require("./DateTimeBaseInput");var TimeInput=DateTimeBaseInput.extend({formatType:"TIME_INPUT_FORMATS",constructor:function TimeInput(kwargs){if(!(this instanceof TimeInput)){return new TimeInput(kwargs)}DateTimeBaseInput.call(this,kwargs)}});module.exports=TimeInput},{"./DateTimeBaseInput":196}],247:[function(require,module,exports){"use strict";var object=require("isomorph/object");var ChoiceField=require("./ChoiceField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var TypedChoiceField=ChoiceField.extend({constructor:function TypedChoiceField(kwargs){if(!(this instanceof TypedChoiceField)){return new TypedChoiceField(kwargs)}kwargs=object.extend({coerce:function(val){return val},emptyValue:""},kwargs);this.coerce=object.pop(kwargs,"coerce");this.emptyValue=object.pop(kwargs,"emptyValue");ChoiceField.call(this,kwargs)}});TypedChoiceField.prototype._coerce=function(value){if(value===this.emptyValue||this.isEmptyValue(value)){return this.emptyValue}try{value=this.coerce(value)}catch(e){throw ValidationError(this.errorMessages.invalidChoice,{code:"invalidChoice",params:{value:value}})}return value};TypedChoiceField.prototype.clean=function(value){value=ChoiceField.prototype.clean.call(this,value);return this._coerce(value)};module.exports=TypedChoiceField},{"./ChoiceField":189,"isomorph/object":263,validators:267}],248:[function(require,module,exports){"use strict";var is=require("isomorph/is");var object=require("isomorph/object");var MultipleChoiceField=require("./MultipleChoiceField");var $__0=require("validators"),ValidationError=$__0.ValidationError;var TypedMultipleChoiceField=MultipleChoiceField.extend({constructor:function TypedMultipleChoiceField(kwargs){if(!(this instanceof TypedMultipleChoiceField)){return new TypedMultipleChoiceField(kwargs)}kwargs=object.extend({coerce:function(val){return val},emptyValue:[]},kwargs);this.coerce=object.pop(kwargs,"coerce");this.emptyValue=object.pop(kwargs,"emptyValue");MultipleChoiceField.call(this,kwargs)}});TypedMultipleChoiceField.prototype._coerce=function(value){if(value===this.emptyValue||this.isEmptyValue(value)||is.Array(value)&&!value.length){return this.emptyValue}var newValue=[];for(var i=0,l=value.length;i<l;i++){try{newValue.push(this.coerce(value[i]))}catch(e){throw ValidationError(this.errorMessages.invalidChoice,{code:"invalidChoice",params:{value:value[i]}})}}return newValue};TypedMultipleChoiceField.prototype.clean=function(value){value=MultipleChoiceField.prototype.clean.call(this,value);return this._coerce(value)};TypedMultipleChoiceField.prototype.validate=function(value){if(value!==this.emptyValue||is.Array(value)&&value.length){MultipleChoiceField.prototype.validate.call(this,value)}else if(this.required){throw ValidationError(this.errorMessages.required,{code:"required"})}};module.exports=TypedMultipleChoiceField},{"./MultipleChoiceField":221,"isomorph/is":262,"isomorph/object":263,validators:267}],249:[function(require,module,exports){"use strict";var url=require("isomorph/url");var CharField=require("./CharField");var URLInput=require("./URLInput");var $__0=require("validators"),URLValidator=$__0.URLValidator;var $__1=require("./util"),strip=$__1.strip;var URLField=CharField.extend({widget:URLInput,defaultErrorMessages:{invalid:"Enter a valid URL."},defaultValidators:[URLValidator()],constructor:function URLField(kwargs){if(!(this instanceof URLField)){return new URLField(kwargs)}CharField.call(this,kwargs)}});URLField.prototype.toJavaScript=function(value){if(value){var urlFields=url.parseUri(value);if(!urlFields.protocol){urlFields.protocol="http"}if(!urlFields.path){urlFields.path="/"}value=url.makeUri(urlFields)}return CharField.prototype.toJavaScript.call(this,value)};URLField.prototype.clean=function(value){value=strip(this.toJavaScript(value));return CharField.prototype.clean.call(this,value)};module.exports=URLField},{"./CharField":184,"./URLInput":250,"./util":270,"isomorph/url":265,validators:267}],250:[function(require,module,exports){"use strict";var TextInput=require("./TextInput");var URLInput=TextInput.extend({constructor:function URLInput(kwargs){if(!(this instanceof URLInput)){return new URLInput(kwargs)}TextInput.call(this,kwargs)},inputType:"url"});module.exports=URLInput},{"./TextInput":243}],251:[function(require,module,exports){"use strict";var Concur=require("Concur");var object=require("isomorph/object");var SubWidget=require("./SubWidget");var Widget=Concur.extend({constructor:function Widget(kwargs){kwargs=object.extend({attrs:null},kwargs);this.attrs=object.extend({},kwargs.attrs)},isHidden:false,needsMultipartForm:false,isRequired:false,validation:null,needsInitialValue:false,isValueSettable:true});Widget.prototype.subWidgets=function(name,value,kwargs){return[SubWidget(this,name,value,kwargs)]};Widget.prototype.render=function(name,value,kwargs){throw new Error("Constructors extending Widget must implement a render() method.")};Widget.prototype.buildAttrs=function(kwargAttrs,renderAttrs){return object.extend({},this.attrs,renderAttrs,kwargAttrs)};Widget.prototype.valueFromData=function(data,files,name){return object.get(data,name,null)};Widget.prototype.idForLabel=function(id){return id};module.exports=Widget},{"./SubWidget":242,Concur:258,"isomorph/object":263}],252:[function(require,module,exports){"use strict";module.exports={FORMSET_DEFAULT_MAX_NUM:1e3,FORMSET_DEFAULT_MIN_NUM:0,NON_FIELD_ERRORS:"__all__"}},{}],253:[function(require,module,exports){"use strict";module.exports={browser:typeof window!="undefined"}},{}],254:[function(require,module,exports){"use strict";var object=require("isomorph/object");var locales=require("./locales");var ISO_INPUT_FORMATS={DATE_INPUT_FORMATS:["%Y-%m-%d"],TIME_INPUT_FORMATS:["%H:%M:%S","%H:%M"],DATETIME_INPUT_FORMATS:["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M","%Y-%m-%d"]};var formatCache={};function getFormat(formatType,lang){if(!lang){lang=locales.getDefaultLocale()}var cacheKey=formatType+":"+lang;if(!object.hasOwn(formatCache,cacheKey)){var langLocales=locales.getLocales(lang);var localeFormats=[];for(var i=0,l=langLocales.length;i<l;i++){var locale=langLocales[i];if(object.hasOwn(locale,formatType)){localeFormats=locale[formatType].slice();break}}if(object.hasOwn(ISO_INPUT_FORMATS,formatType)){var isoFormats=ISO_INPUT_FORMATS[formatType];for(var j=0,m=isoFormats.length;j<m;j++){var isoFormat=isoFormats[j];if(localeFormats.indexOf(isoFormat)==-1){localeFormats.push(isoFormat)}}}formatCache[cacheKey]=localeFormats}return formatCache[cacheKey]}module.exports={getFormat:getFormat}},{"./locales":256,"isomorph/object":263}],255:[function(require,module,exports){"use strict";var is=require("isomorph/is");function isFormAsync(constructor){var proto=constructor.prototype;if(proto.clean.length==1){return true}var fieldNames=Object.keys(proto.baseFields);for(var i=0,l=fieldNames.length;i<l;i++){var customClean=proto._getCustomClean(fieldNames[i]);if(is.Function(customClean)&&customClean.length==1){return true}}return false}module.exports=isFormAsync},{"isomorph/is":262}],256:[function(require,module,exports){"use strict";var object=require("isomorph/object");var time=require("isomorph/time");var defaultLocale={lang:"en"};var localeCache={en:{DATE_INPUT_FORMATS:["%Y-%m-%d","%m/%d/%Y","%m/%d/%y","%b %d %Y","%b %d, %Y","%d %b %Y","%d %b, %Y","%B %d %Y","%B %d, %Y","%d %B %Y","%d %B, %Y"],DATETIME_INPUT_FORMATS:["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M","%Y-%m-%d","%m/%d/%Y %H:%M:%S","%m/%d/%Y %H:%M","%m/%d/%Y","%m/%d/%y %H:%M:%S","%m/%d/%y %H:%M","%m/%d/%y"]},en_GB:{DATE_INPUT_FORMATS:["%d/%m/%Y","%d/%m/%y","%b %d %Y","%b %d, %Y","%d %b %Y","%d %b, %Y","%B %d %Y","%B %d, %Y","%d %B %Y","%d %B, %Y"],DATETIME_INPUT_FORMATS:["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M","%Y-%m-%d","%d/%m/%Y %H:%M:%S","%d/%m/%Y %H:%M","%d/%m/%Y","%d/%m/%y %H:%M:%S","%d/%m/%y %H:%M","%d/%m/%y"]}};function addLocale(lang,locale){localeCache[lang]=locale;time.locales[lang]=locale}function getLocale(lang){if(lang){if(object.hasOwn(localeCache,lang)){return localeCache[lang]}if(lang.indexOf("_")!=-1){lang=lang.split("_")[0];if(object.hasOwn(localeCache,lang)){return localeCache[lang]}}}return localeCache[defaultLocale.lang]}function getLocales(lang){if(lang){var locales=[];if(object.hasOwn(localeCache,lang)){locales.push(localeCache[lang])}if(lang.indexOf("_")!=-1){lang=lang.split("_")[0];if(object.hasOwn(localeCache,lang)){locales.push(localeCache[lang])}}if(locales.length){return locales}}return[localeCache[defaultLocale.lang]]}function setDefaultLocale(lang){if(!object.hasOwn(localeCache,lang)){throw new Error("Unknown locale: "+lang)}defaultLocale.lang=lang}function getDefaultLocale(){return defaultLocale.lang}module.exports={addLocale:addLocale,getDefaultLocale:getDefaultLocale,getLocale:getLocale,getLocales:getLocales,setDefaultLocale:setDefaultLocale}},{"isomorph/object":263,"isomorph/time":264}],257:[function(require,module,exports){"use strict";var validators=require("validators");var locales=require("./locales");var util=require("./util");module.exports={addLocale:locales.addLocale,allValid:util.allValid,BaseTemporalField:require("./BaseTemporalField"),BooleanField:require("./BooleanField"),BoundField:require("./BoundField"),CharField:require("./CharField"),CheckboxChoiceInput:require("./CheckboxChoiceInput"),CheckboxFieldRenderer:require("./CheckboxFieldRenderer"),CheckboxInput:require("./CheckboxInput"),CheckboxSelectMultiple:require("./CheckboxSelectMultiple"),ChoiceField:require("./ChoiceField"),ChoiceFieldRenderer:require("./ChoiceFieldRenderer"),ChoiceInput:require("./ChoiceInput"),ClearableFileInput:require("./ClearableFileInput"),ComboField:require("./ComboField"),DateField:require("./DateField"),DateInput:require("./DateInput"),DateTimeBaseInput:require("./DateTimeBaseInput"),DateTimeField:require("./DateTimeField"),DateTimeInput:require("./DateTimeInput"),DecimalField:require("./DecimalField"),EmailField:require("./EmailField"),EmailInput:require("./EmailInput"),env:require("./env"),ErrorList:require("./ErrorList"),ErrorObject:require("./ErrorObject"),Field:require("./Field"),FileField:require("./FileField"),FileInput:require("./FileInput"),FilePathField:require("./FilePathField"),FloatField:require("./FloatField"),Form:require("./Form"),formats:require("./formats"),FormRow:require("./FormRow"),FormSet:require("./FormSet"),GenericIPAddressField:require("./GenericIPAddressField"),getFormData:util.getFormData,HiddenInput:require("./HiddenInput"),ImageField:require("./ImageField"),Input:require("./Input"),IntegerField:require("./IntegerField"),IPAddressField:require("./IPAddressField"),isFormAsync:require("./isFormAsync"),locales:locales,MultipleChoiceField:require("./MultipleChoiceField"),MultipleFileField:require("./MultipleFileField"),MultipleHiddenInput:require("./MultipleHiddenInput"),MultiValueField:require("./MultiValueField"),MultiWidget:require("./MultiWidget"),NullBooleanField:require("./NullBooleanField"),NullBooleanSelect:require("./NullBooleanSelect"),NumberInput:require("./NumberInput"),PasswordInput:require("./PasswordInput"),RadioChoiceInput:require("./RadioChoiceInput"),RadioFieldRenderer:require("./RadioFieldRenderer"),RadioSelect:require("./RadioSelect"),RegexField:require("./RegexField"),RendererMixin:require("./RendererMixin"),RenderForm:require("./RenderForm"),RenderFormSet:require("./RenderFormSet"),Select:require("./Select"),SelectMultiple:require("./SelectMultiple"),setDefaultLocale:locales.setDefaultLocale,SlugField:require("./SlugField"),SplitDateTimeField:require("./SplitDateTimeField"),SplitDateTimeWidget:require("./SplitDateTimeWidget"),SplitHiddenDateTimeWidget:require("./SplitHiddenDateTimeWidget"),SubWidget:require("./SubWidget"),Textarea:require("./Textarea"),TextInput:require("./TextInput"),TimeField:require("./TimeField"),TimeInput:require("./TimeInput"),TypedChoiceField:require("./TypedChoiceField"),TypedMultipleChoiceField:require("./TypedMultipleChoiceField"),URLField:require("./URLField"),util:util,validateAll:util.validateAll,ValidationError:validators.ValidationError,validators:validators,Widget:require("./Widget")}},{"./BaseTemporalField":181,"./BooleanField":182,"./BoundField":183,"./CharField":184,"./CheckboxChoiceInput":185,"./CheckboxFieldRenderer":186,"./CheckboxInput":187,"./CheckboxSelectMultiple":188,"./ChoiceField":189,"./ChoiceFieldRenderer":190,"./ChoiceInput":191,"./ClearableFileInput":192,"./ComboField":193,"./DateField":194,"./DateInput":195,"./DateTimeBaseInput":196,"./DateTimeField":197,"./DateTimeInput":198,"./DecimalField":199,"./EmailField":201,"./EmailInput":202,"./ErrorList":203,"./ErrorObject":204,"./Field":205,"./FileField":206,"./FileInput":207,"./FilePathField":208,"./FloatField":209,"./Form":210,"./FormRow":211,"./FormSet":212,"./GenericIPAddressField":213,"./HiddenInput":214,"./IPAddressField":215,"./ImageField":216,"./Input":217,"./IntegerField":218,"./MultiValueField":219,"./MultiWidget":220,"./MultipleChoiceField":221,"./MultipleFileField":222,"./MultipleHiddenInput":223,"./NullBooleanField":224,"./NullBooleanSelect":225,"./NumberInput":226,"./PasswordInput":227,"./RadioChoiceInput":229,"./RadioFieldRenderer":230,"./RadioSelect":231,"./RegexField":232,"./RenderForm":233,"./RenderFormSet":234,"./RendererMixin":235,"./Select":236,"./SelectMultiple":237,"./SlugField":238,"./SplitDateTimeField":239,"./SplitDateTimeWidget":240,"./SplitHiddenDateTimeWidget":241,"./SubWidget":242,"./TextInput":243,"./Textarea":244,"./TimeField":245,"./TimeInput":246,"./TypedChoiceField":247,"./TypedMultipleChoiceField":248,"./URLField":249,"./Widget":251,"./env":253,"./formats":254,"./isFormAsync":255,"./locales":256,"./util":270,validators:267}],258:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;function type(obj){return toString.call(obj).slice(8,-1).toLowerCase()}function inherits(childConstructor,parentConstructor){var F=function(){};F.prototype=parentConstructor.prototype;childConstructor.prototype=new F;childConstructor.prototype.constructor=childConstructor;return childConstructor}function extend(dest,src){for(var prop in src){if(hasOwn.call(src,prop)){dest[prop]=src[prop]}}return dest}function mixin(dest,src){if(type(src)=="function"){extend(dest,src.prototype)}else{extend(dest,src)}}function applyMixins(properties){var mixins=properties.__mixins__;if(type(mixins)!="array"){mixins=[mixins]}var mixedProperties={};for(var i=0,l=mixins.length;i<l;i++){mixin(mixedProperties,mixins[i])}delete properties.__mixins__;return extend(mixedProperties,properties)}function inheritFrom(parentConstructor,childConstructor,prototypeProps,constructorProps){if(childConstructor==null){childConstructor=function(){parentConstructor.apply(this,arguments)}}prototypeProps.constructor=childConstructor;if(parentConstructor!==Concur){inherits(childConstructor,parentConstructor);childConstructor.__super__=parentConstructor.prototype}extend(childConstructor.prototype,prototypeProps);extend(childConstructor,constructorProps);return childConstructor}var Concur=module.exports=function(){};Concur.__mro__=[];Concur.extend=function(prototypeProps,constructorProps){prototypeProps=prototypeProps||{};constructorProps=constructorProps||{};if(typeof this.prototype.__meta__!="undefined"){this.prototype.__meta__(prototypeProps,constructorProps)}var childConstructor=hasOwn.call(prototypeProps,"constructor")?prototypeProps.constructor:null;if(hasOwn.call(prototypeProps,"__mixins__")){prototypeProps=applyMixins(prototypeProps)}if(hasOwn.call(constructorProps,"__mixins__")){constructorProps=applyMixins(constructorProps)}childConstructor=inheritFrom(this,childConstructor,prototypeProps,constructorProps);childConstructor.extend=this.extend;childConstructor.__mro__=[childConstructor].concat(this.__mro__);return childConstructor}},{}],259:[function(require,module,exports){"use strict";var NODE_LIST_CLASSES={"[object HTMLCollection]":true,"[object NodeList]":true,"[object RadioNodeList]":true};var IGNORED_INPUT_TYPES={button:true,reset:true,submit:true,fieldset:true};var CHECKED_INPUT_TYPES={checkbox:true,radio:true};var TRIM_RE=/^\s+|\s+$/g;var slice=Array.prototype.slice;var toString=Object.prototype.toString;function getFormData(form,options){if(!form){throw new Error("A form is required by getFormData, was given form="+form)}if(!options){options={trim:false}}var data={};var elementName;var elementNames=[];var elementNameLookup={};for(var i=0,l=form.elements.length;i<l;i++){var element=form.elements[i];if(IGNORED_INPUT_TYPES[element.type]||element.disabled){continue}elementName=element.name||element.id;if(elementName&&!elementNameLookup[elementName]){elementNames.push(elementName);elementNameLookup[elementName]=true}}for(i=0,l=elementNames.length;i<l;i++){elementName=elementNames[i];var value=getNamedFormElementData(form,elementName,options);

if(value!=null){data[elementName]=value}}return data}function getNamedFormElementData(form,elementName,options){if(!form){throw new Error("A form is required by getNamedFormElementData, was given form="+form)}if(!elementName&&toString.call(elementName)!=="[object String]"){throw new Error("A form element name is required by getNamedFormElementData, was given elementName="+elementName)}var element=form.elements[elementName];if(!element||element.disabled){return null}var trim=!!(options&&options.trim);if(!NODE_LIST_CLASSES[toString.call(element)]){return getFormElementValue(element,trim)}var data=[];var allRadios=true;for(var i=0,l=element.length;i<l;i++){if(element[i].disabled){continue}if(allRadios&&element[i].type!=="radio"){allRadios=false}var value=getFormElementValue(element[i],trim);if(value!=null){data=data.concat(value)}}if(allRadios&&data.length===1){return data[0]}return data.length>0?data:null}function getFormElementValue(element,trim){var value=null;if(element.type==="select-one"){if(element.options.length){value=element.options[element.selectedIndex].value}return value}if(element.type==="select-multiple"){value=[];for(var i=0,l=element.options.length;i<l;i++){if(element.options[i].selected){value.push(element.options[i].value)}}if(value.length===0){value=null}return value}if(element.type==="file"&&"files"in element){if(element.multiple){value=slice.call(element.files);if(value.length===0){value=null}}else{value=element.files[0]}return value}if(!CHECKED_INPUT_TYPES[element.type]){value=trim?element.value.replace(TRIM_RE,""):element.value}else if(element.checked){value=element.value}return value}getFormData.getNamedFormElementData=getNamedFormElementData;module.exports=getFormData},{}],260:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;var type=function(obj){return toString.call(obj).slice(8,-1).toLowerCase()};var primitiveWrapperTypes={boolean:true,number:true,string:true};var stringPropsRE=/^(?:\d+|length)$/;function Clone(){}function clone(target){if(typeof target=="object"){Clone.prototype=target;return new Clone}else{return target}}function copy(target){var c,property;if(typeof target!="object"){return target}else{var value=target.valueOf();if(target==value){c=new target.constructor(value);var notString=type(target)!="string";for(property in target){if(hasOwn.call(target,property)&&(notString||!stringPropsRE.test(property))){c[property]=target[property]}}return c}else{if(target instanceof target.constructor&&target.constructor!==Object){c=clone(target.constructor.prototype);for(property in target){if(hasOwn.call(target,property)){c[property]=target[property]}}}else{c={};for(property in target){c[property]=target[property]}}return c}}}var deepCopiers=[];function DeepCopier(config){for(var key in config){this[key]=config[key]}}DeepCopier.prototype={constructor:DeepCopier,canCopy:function(source){return false},create:function(source){},populate:function(deepCopyAlgorithm,source,result){}};function DeepCopyAlgorithm(){this.copiedObjects=[];var thisPass=this;this.recursiveDeepCopy=function(source){return thisPass.deepCopy(source)};this.depth=0}DeepCopyAlgorithm.prototype={constructor:DeepCopyAlgorithm,maxDepth:256,cacheResult:function(source,result){this.copiedObjects.push([source,result])},getCachedResult:function(source){var copiedObjects=this.copiedObjects;var length=copiedObjects.length;for(var i=0;i<length;i++){if(copiedObjects[i][0]===source){return copiedObjects[i][1]}}return undefined},deepCopy:function(source){if(source===null){return null}if(typeof source!="object"){return source}var cachedResult=this.getCachedResult(source);if(cachedResult){return cachedResult}for(var i=0;i<deepCopiers.length;i++){var deepCopier=deepCopiers[i];if(deepCopier.canCopy(source)){return this.applyDeepCopier(deepCopier,source)}}throw new Error("no DeepCopier is able to copy "+source)},applyDeepCopier:function(deepCopier,source){var result=deepCopier.create(source);this.cacheResult(source,result);this.depth++;if(this.depth>this.maxDepth){throw new Error("Exceeded max recursion depth in deep copy.")}deepCopier.populate(this.recursiveDeepCopy,source,result);this.depth--;return result}};function deepCopy(source,maxDepth){var deepCopyAlgorithm=new DeepCopyAlgorithm;if(maxDepth){deepCopyAlgorithm.maxDepth=maxDepth}return deepCopyAlgorithm.deepCopy(source)}deepCopy.DeepCopier=DeepCopier;deepCopy.deepCopiers=deepCopiers;deepCopy.register=function(deepCopier){if(!(deepCopier instanceof DeepCopier)){deepCopier=new DeepCopier(deepCopier)}deepCopiers.unshift(deepCopier)};deepCopy.register({canCopy:function(source){return true},create:function(source){if(source instanceof source.constructor){return clone(source.constructor.prototype)}else{return{}}},populate:function(deepCopy,source,result){for(var key in source){if(hasOwn.call(source,key)){result[key]=deepCopy(source[key])}}return result}});deepCopy.register({canCopy:function(source){return primitiveWrapperTypes[type(source)]},create:function(source){return new source.constructor(source.valueOf())},populate:function(deepCopy,source,result){var notString=type(source)!="string";for(var key in source){if(hasOwn.call(source,key)&&(notString||!stringPropsRE.test(key))){result[key]=deepCopy(source[key])}}return result}});deepCopy.register({canCopy:function(source){return type(source)=="regexp"},create:function(source){return source}});deepCopy.register({canCopy:function(source){return type(source)=="date"},create:function(source){return new Date(source)}});deepCopy.register({canCopy:function(source){return type(source)=="array"},create:function(source){return new source.constructor},populate:function(deepCopy,source,result){for(var i=0;i<source.length;i++){result.push(deepCopy(source[i]))}return result}});module.exports={DeepCopyAlgorithm:DeepCopyAlgorithm,copy:copy,clone:clone,deepCopy:deepCopy}},{}],261:[function(require,module,exports){"use strict";var slice=Array.prototype.slice,formatRegExp=/%[%s]/g,formatObjRegExp=/({{?)(\w+)}/g;function format(s){return formatArr(s,slice.call(arguments,1))}function formatArr(s,a){var i=0;return s.replace(formatRegExp,function(m){return m=="%%"?"%":a[i++]})}function formatObj(s,o){return s.replace(formatObjRegExp,function(m,b,p){return b.length==2?m.slice(1):o[p]})}var units="kMGTPEZY",stripDecimals=/\.00$|0$/;function fileSize(bytes,threshold){threshold=Math.min(threshold||768,1024);var i=-1,unit="bytes",size=bytes;while(size>threshold&&i<units.length){size=size/1024;i++}if(i>-1){unit=units.charAt(i)+"B"}return size.toFixed(2).replace(stripDecimals,"")+" "+unit}module.exports={format:format,formatArr:formatArr,formatObj:formatObj,fileSize:fileSize}},{}],262:[function(require,module,exports){"use strict";var toString=Object.prototype.toString;function isArray(o){return toString.call(o)=="[object Array]"}function isBoolean(o){return toString.call(o)=="[object Boolean]"}function isDate(o){return toString.call(o)=="[object Date]"}function isError(o){return toString.call(o)=="[object Error]"}function isFunction(o){return toString.call(o)=="[object Function]"}function isNumber(o){return toString.call(o)=="[object Number]"}function isObject(o){return toString.call(o)=="[object Object]"}function isRegExp(o){return toString.call(o)=="[object RegExp]"}function isString(o){return toString.call(o)=="[object String]"}function isEmpty(o){for(var prop in o){return false}return true}module.exports={Array:isArray,Boolean:isBoolean,Date:isDate,Empty:isEmpty,Error:isError,Function:isFunction,NaN:isNaN,Number:isNumber,Object:isObject,RegExp:isRegExp,String:isString}},{}],263:[function(require,module,exports){"use strict";var hasOwn=function(){var hasOwnProperty=Object.prototype.hasOwnProperty;return function(obj,prop){return hasOwnProperty.call(obj,prop)}}();var type=function(){var toString=Object.prototype.toString;return function(obj){return toString.call(obj).slice(8,-1).toLowerCase()}}();function extend(dest){for(var i=1,l=arguments.length,src;i<l;i++){src=arguments[i];if(src){for(var prop in src){if(hasOwn(src,prop)){dest[prop]=src[prop]}}}}return dest}function inherits(childConstructor,parentConstructor){var F=function(){};F.prototype=parentConstructor.prototype;childConstructor.prototype=new F;childConstructor.prototype.constructor=childConstructor;return childConstructor}function items(obj){var items_=[];for(var prop in obj){if(hasOwn(obj,prop)){items_.push([prop,obj[prop]])}}return items_}function fromItems(items){var obj={};for(var i=0,l=items.length,item;i<l;i++){item=items[i];obj[item[0]]=item[1]}return obj}function lookup(arr){var obj={};for(var i=0,l=arr.length;i<l;i++){obj[""+arr[i]]=true}return obj}function get(obj,prop,defaultValue){return hasOwn(obj,prop)?obj[prop]:defaultValue}function pop(obj,prop,defaultValue){if(obj==null){throw new Error("pop was given "+obj)}if(hasOwn(obj,prop)){var value=obj[prop];delete obj[prop];return value}else if(arguments.length==2){throw new Error("pop was given an object which didn't have an own '"+prop+"' property, without a default value to return")}return defaultValue}function setDefault(obj,prop,defaultValue){if(obj==null){throw new Error("setDefault was given "+obj)}defaultValue=defaultValue||null;if(hasOwn(obj,prop)){return obj[prop]}else{obj[prop]=defaultValue;return defaultValue}}module.exports={hasOwn:hasOwn,type:type,extend:extend,inherits:inherits,items:items,fromItems:fromItems,lookup:lookup,get:get,pop:pop,setDefault:setDefault}},{}],264:[function(require,module,exports){"use strict";var is=require("./is");function pad(number){return number<10?"0"+number:number}function indexOf(item,list){for(var i=0,l=list.length;i<l;i++){if(item===list[i]){return i}}return-1}var parserDirectives={b:function(l){return"("+l.b.join("|")+")"},B:function(l){return"("+l.B.join("|")+")"},p:function(l){return"("+l.AM+"|"+l.PM+")"},d:"(\\d\\d?)",H:"(\\d\\d?)",I:"(\\d\\d?)",m:"(\\d\\d?)",M:"(\\d\\d?)",S:"(\\d\\d?)",y:"(\\d\\d?)",Y:"(\\d{4})","%":"%"};var formatterDirectives={a:function(d,l){return l.a[d.getDay()]},A:function(d,l){return l.A[d.getDay()]},b:function(d,l){return l.b[d.getMonth()]},B:function(d,l){return l.B[d.getMonth()]},d:function(d){return pad(d.getDate(),2)},H:function(d){return pad(d.getHours(),2)},M:function(d){return pad(d.getMinutes(),2)},m:function(d){return pad(d.getMonth()+1,2)},S:function(d){return pad(d.getSeconds(),2)},w:function(d){return d.getDay()},Y:function(d){return d.getFullYear()},"%":function(d){return"%"}};var strftimeFormatCheck=/[^%]%$/;function TimeParser(format,locale){this.format=format;this.locale=locale;var cachedPattern=TimeParser._cache[locale.name+"|"+format];if(cachedPattern!==undefined){this.re=cachedPattern[0];this.matchOrder=cachedPattern[1]}else{this.compilePattern()}}TimeParser._cache={};TimeParser.prototype.compilePattern=function(){var format=this.format.split(/(?:\s|\t|\n)+/).join(" "),pattern=[],matchOrder=[],c,directive;for(var i=0,l=format.length;i<l;i++){c=format.charAt(i);if(c!="%"){if(c===" "){pattern.push(" +")}else{pattern.push(c)}continue}if(i==l-1){throw new Error("strptime format ends with raw %")}c=format.charAt(++i);directive=parserDirectives[c];if(directive===undefined){throw new Error("strptime format contains an unknown directive: %"+c)}else if(is.Function(directive)){pattern.push(directive(this.locale))}else{pattern.push(directive)}if(c!="%"){matchOrder.push(c)}}this.re=new RegExp("^"+pattern.join("")+"$");this.matchOrder=matchOrder;TimeParser._cache[this.locale.name+"|"+this.format]=[this.re,matchOrder]};TimeParser.prototype.parse=function(input){var matches=this.re.exec(input);if(matches===null){throw new Error("Time data did not match format: data="+input+", format="+this.format)}var time=[1900,1,1,0,0,0],data={};for(var i=1,l=matches.length;i<l;i++){data[this.matchOrder[i-1]]=matches[i]}if(data.hasOwnProperty("Y")){time[0]=parseInt(data.Y,10)}else if(data.hasOwnProperty("y")){var year=parseInt(data.y,10);if(year<68){year=2e3+year}else if(year<100){year=1900+year}time[0]=year}if(data.hasOwnProperty("m")){var month=parseInt(data.m,10);if(month<1||month>12){throw new Error("Month is out of range: "+month)}time[1]=month}else if(data.hasOwnProperty("B")){time[1]=indexOf(data.B,this.locale.B)+1}else if(data.hasOwnProperty("b")){time[1]=indexOf(data.b,this.locale.b)+1}if(data.hasOwnProperty("d")){var day=parseInt(data.d,10);if(day<1||day>31){throw new Error("Day is out of range: "+day)}time[2]=day}var hour;if(data.hasOwnProperty("H")){hour=parseInt(data.H,10);if(hour>23){throw new Error("Hour is out of range: "+hour)}time[3]=hour}else if(data.hasOwnProperty("I")){hour=parseInt(data.I,10);if(hour<1||hour>12){throw new Error("Hour is out of range: "+hour)}if(hour==12){hour=0}time[3]=hour;if(data.hasOwnProperty("p")){if(data.p==this.locale.PM){time[3]=time[3]+12}}}if(data.hasOwnProperty("M")){var minute=parseInt(data.M,10);if(minute>59){throw new Error("Minute is out of range: "+minute)}time[4]=minute}if(data.hasOwnProperty("S")){var second=parseInt(data.S,10);if(second>59){throw new Error("Second is out of range: "+second)}time[5]=second}day=time[2],month=time[1],year=time[0];if((month==4||month==6||month==9||month==11)&&day>30||month==2&&day>(year%4===0&&year%100!==0||year%400===0?29:28)){throw new Error("Day is out of range: "+day)}return time};var time={defaultLocale:"en",locales:{en:{name:"en",a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],AM:"AM",b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],PM:"PM"}}};var getLocale=time.getLocale=function(code){if(code){if(time.locales.hasOwnProperty(code)){return time.locales[code]}else if(code.length>2){var languageCode=code.substring(0,2);if(time.locales.hasOwnProperty(languageCode)){return time.locales[languageCode]}}}return time.locales[time.defaultLocale]};var strptime=time.strptime=function(input,format,locale){return new TimeParser(format,getLocale(locale)).parse(input)};time.strpdate=function(input,format,locale){var t=strptime(input,format,locale);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])};time.strftime=function(date,format,locale){if(strftimeFormatCheck.test(format)){throw new Error("strftime format ends with raw %")}locale=getLocale(locale);return format.replace(/(%.)/g,function(s,f){var code=f.charAt(1);if(typeof formatterDirectives[code]=="undefined"){throw new Error("strftime format contains an unknown directive: "+f)}return formatterDirectives[code](date,locale)})};module.exports=time},{"./is":262}],265:[function(require,module,exports){"use strict";function parseUri(str){var o=parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||""}uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1){uri[o.q.name][$1]=$2}});return uri}parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function makeUri(u){var uri="";if(u.protocol){uri+=u.protocol+"://"}if(u.user){uri+=u.user}if(u.password){uri+=":"+u.password}if(u.user||u.password){uri+="@"}if(u.host){uri+=u.host}if(u.port){uri+=":"+u.port}if(u.path){uri+=u.path}var qk=u.queryKey;var qs=[];for(var k in qk){if(!qk.hasOwnProperty(k)){continue}var v=encodeURIComponent(qk[k]);k=encodeURIComponent(k);if(v){qs.push(k+"="+v)}else{qs.push(k)}}if(qs.length>0){uri+="?"+qs.join("&")}if(u.anchor){uri+="#"+u.anchor}return uri}module.exports={parseUri:parseUri,makeUri:makeUri}},{}],266:[function(require,module,exports){"use strict";var Concur=require("Concur");var format=require("isomorph/format").formatObj;var is=require("isomorph/is");var object=require("isomorph/object");var NON_FIELD_ERRORS="__all__";var ValidationError=Concur.extend({constructor:function ValidationError(message,kwargs){if(!(this instanceof ValidationError)){return new ValidationError(message,kwargs)}kwargs=object.extend({code:null,params:null},kwargs);var code=kwargs.code;var params=kwargs.params;if(message instanceof ValidationError){if(object.hasOwn(message,"errorObj")){message=message.errorObj}else if(object.hasOwn(message,"message")){message=message.errorList}else{code=message.code;params=message.params;message=message.message}}if(is.Object(message)){this.errorObj={};Object.keys(message).forEach(function(field){var messages=message[field];if(!(messages instanceof ValidationError)){messages=ValidationError(messages)}this.errorObj[field]=messages.errorList}.bind(this))}else if(is.Array(message)){this.errorList=[];message.forEach(function(message){if(!(message instanceof ValidationError)){message=ValidationError(message)}this.errorList.push.apply(this.errorList,message.errorList)}.bind(this))}else{this.message=message;this.code=code;this.params=params;this.errorList=[this]}}});ValidationError.prototype.messageObj=function(){if(!object.hasOwn(this,"errorObj")){throw new Error("ValidationError has no errorObj")}return this.__iter__()};ValidationError.prototype.messages=function(){if(object.hasOwn(this,"errorObj")){var messages=[];Object.keys(this.errorObj).forEach(function(field){var errors=this.errorObj[field];messages.push.apply(messages,ValidationError(errors).__iter__())}.bind(this));return messages}else{return this.__iter__()}};ValidationError.prototype.__iter__=function(){if(object.hasOwn(this,"errorObj")){var messageObj={};Object.keys(this.errorObj).forEach(function(field){var errors=this.errorObj[field];messageObj[field]=ValidationError(errors).__iter__()}.bind(this));return messageObj}else{return this.errorList.map(function(error){var message=error.message;if(error.params){message=format(message,error.params)}return message})}};ValidationError.prototype.updateErrorObj=function(errorObj){if(object.hasOwn(this,"errorObj")){if(errorObj){Object.keys(this.errorObj).forEach(function(field){if(!object.hasOwn(errorObj,field)){errorObj[field]=[]}var errors=errorObj[field];errors.push.apply(errors,this.errorObj[field])}.bind(this))}else{errorObj=this.errorObj}}else{if(!object.hasOwn(errorObj,NON_FIELD_ERRORS)){errorObj[NON_FIELD_ERRORS]=[]}var nonFieldErrors=errorObj[NON_FIELD_ERRORS];nonFieldErrors.push.apply(nonFieldErrors,this.errorList)}return errorObj};ValidationError.prototype.toString=function(){return"ValidationError("+JSON.stringify(this.__iter__())+")"};module.exports={ValidationError:ValidationError}},{Concur:258,"isomorph/format":261,"isomorph/is":262,"isomorph/object":263}],267:[function(require,module,exports){"use strict";module.exports=require("./validators")},{"./validators":269}],268:[function(require,module,exports){"use strict";var object=require("isomorph/object");var errors=require("./errors");var ValidationError=errors.ValidationError;var hexRE=/^[0-9a-f]+$/;function cleanIPv6Address(ipStr,kwargs){kwargs=object.extend({unpackIPv4:false,errorMessage:"This is not a valid IPv6 address."},kwargs);var bestDoublecolonStart=-1;var bestDoublecolonLen=0;var doublecolonStart=-1;var doublecolonLen=0;if(!isValidIPv6Address(ipStr)){throw ValidationError(kwargs.errorMessage,{code:"invalid"})}ipStr=_explodeShorthandIPstring(ipStr);ipStr=_sanitiseIPv4Mapping(ipStr);if(kwargs.unpackIPv4){var ipv4Unpacked=_unpackIPv4(ipStr);if(ipv4Unpacked){return ipv4Unpacked}}var hextets=ipStr.split(":");for(var i=0,l=hextets.length;i<l;i++){hextets[i]=hextets[i].replace(/^0+/,"");if(hextets[i]===""){hextets[i]="0"}if(hextets[i]=="0"){doublecolonLen+=1;if(doublecolonStart==-1){doublecolonStart=i}if(doublecolonLen>bestDoublecolonLen){bestDoublecolonLen=doublecolonLen;bestDoublecolonStart=doublecolonStart}}else{doublecolonLen=0;doublecolonStart=-1}}if(bestDoublecolonLen>1){var bestDoublecolonEnd=bestDoublecolonStart+bestDoublecolonLen;if(bestDoublecolonEnd==hextets.length){hextets.push("")}hextets.splice(bestDoublecolonStart,bestDoublecolonLen,"");if(bestDoublecolonStart===0){hextets.unshift("")}}return hextets.join(":").toLowerCase()}function _sanitiseIPv4Mapping(ipStr){if(ipStr.toLowerCase().indexOf("0000:0000:0000:0000:0000:ffff:")!==0){return ipStr}var hextets=ipStr.split(":");if(hextets[hextets.length-1].indexOf(".")!=-1){return ipStr}var ipv4Address=[parseInt(hextets[6].substring(0,2),16),parseInt(hextets[6].substring(2,4),16),parseInt(hextets[7].substring(0,2),16),parseInt(hextets[7].substring(2,4),16)].join(".");return hextets.slice(0,6).join(":")+":"+ipv4Address}function _unpackIPv4(ipStr){if(ipStr.toLowerCase().indexOf("0000:0000:0000:0000:0000:ffff:")!==0){return null}var hextets=ipStr.split(":");return hextets.pop()}function isValidIPv6Address(ipStr){var validateIPv4Address=require("./validators").validateIPv4Address;if(ipStr.indexOf(":")==-1){return false}if(String_count(ipStr,"::")>1){return false}if(ipStr.indexOf(":::")!=-1){return false}if(ipStr.charAt(0)==":"&&ipStr.charAt(1)!=":"||ipStr.charAt(ipStr.length-1)==":"&&ipStr.charAt(ipStr.length-2)!=":"){return false}if(String_count(ipStr,":")>7){return false}if(ipStr.indexOf("::")==-1&&String_count(ipStr,":")!=7){if(String_count(ipStr,".")!=3){return false}}ipStr=_explodeShorthandIPstring(ipStr);var hextets=ipStr.split(":");for(var i=0,l=hextets.length,hextet;i<l;i++){hextet=hextets[i];if(String_count(hextet,".")==3){if(ipStr.split(":").pop()!=hextet){return false}try{validateIPv4Address(hextet)}catch(e){if(!(e instanceof ValidationError)){throw e}return false}}else{if(!hexRE.test(hextet)){return false}var intValue=parseInt(hextet,16);if(isNaN(intValue)||intValue<0||intValue>65535){return false}}}return true}function _explodeShorthandIPstring(ipStr){if(!_isShortHand(ipStr)){return ipStr}var newIp=[];var hextets=ipStr.split("::");var fillTo=ipStr.split(":").pop().indexOf(".")!=-1?7:8;if(hextets.length>1){var sep=hextets[0].split(":").length+hextets[1].split(":").length;newIp=hextets[0].split(":");for(var i=0,l=fillTo-sep;i<l;i++){newIp.push("0000")}newIp=newIp.concat(hextets[1].split(":"))}else{newIp=ipStr.split(":")}var retIp=[];for(i=0,l=newIp.length;i<l;i++){retIp.push(zeroPadding(newIp[i],4)+newIp[i].toLowerCase())}return retIp.join(":")}function _isShortHand(ipStr){if(String_count(ipStr,"::")==1){return true}var parts=ipStr.split(":");for(var i=0,l=parts.length;i<l;i++){if(parts[i].length<4){return true}}return false}function zeroPadding(str,length){if(str.length>=length){return""}return new Array(length-str.length+1).join("0")}function String_count(str,subStr){return str.split(subStr).length-1}module.exports={cleanIPv6Address:cleanIPv6Address,isValidIPv6Address:isValidIPv6Address}},{"./errors":266,"./validators":269,"isomorph/object":263}],269:[function(require,module,exports){"use strict";var Concur=require("Concur");var is=require("isomorph/is");var object=require("isomorph/object");var punycode=require("punycode");var url=require("isomorph/url");var errors=require("./errors");var ipv6=require("./ipv6");var ValidationError=errors.ValidationError;var isValidIPv6Address=ipv6.isValidIPv6Address;var EMPTY_VALUES=[null,undefined,""];function String_rsplit(str,sep,maxsplit){var split=str.split(sep);return maxsplit?[split.slice(0,-maxsplit).join(sep)].concat(split.slice(-maxsplit)):split}var RegexValidator=Concur.extend({constructor:function(kwargs){if(!(this instanceof RegexValidator)){return new RegexValidator(kwargs)}kwargs=object.extend({regex:null,message:null,code:null,inverseMatch:null},kwargs);if(kwargs.regex){this.regex=kwargs.regex}if(kwargs.message){this.message=kwargs.message}if(kwargs.code){this.code=kwargs.code}if(kwargs.inverseMatch){this.inverseMatch=kwargs.inverseMatch}if(is.String(this.regex)){this.regex=new RegExp(this.regex)}return this.__call__.bind(this)},regex:"",message:"Enter a valid value.",code:"invalid",inverseMatch:false,__call__:function(value){if(this.inverseMatch===this.regex.test(""+value)){throw ValidationError(this.message,{code:this.code})}}});var URLValidator=RegexValidator.extend({regex:new RegExp("^(?:[a-z0-9\\.\\-]*)://"+"(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}\\.?|[A-Z0-9-]{2,}\\.?)|"+"localhost|"+"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|"+"\\[?[A-F0-9]*:[A-F0-9:]+\\]?)"+"(?::\\d+)?"+"(?:/?|[/?]\\S+)$","i"),message:"Enter a valid URL.",schemes:["http","https","ftp","ftps"],constructor:function(kwargs){if(!(this instanceof URLValidator)){return new URLValidator(kwargs)}kwargs=object.extend({schemes:null},kwargs);RegexValidator.call(this,kwargs);if(kwargs.schemes!==null){this.schemes=kwargs.schemes}return this.__call__.bind(this)},__call__:function(value){value=""+value;var scheme=value.split("://")[0].toLowerCase();if(this.schemes.indexOf(scheme)===-1){throw ValidationError(this.message,{code:this.code})}try{RegexValidator.prototype.__call__.call(this,value)}catch(e){if(!(e instanceof ValidationError)){throw e}var urlFields=url.parseUri(value);try{urlFields.host=punycode.toASCII(urlFields.host)}catch(unicodeError){throw e}value=url.makeUri(urlFields);RegexValidator.prototype.__call__.call(this,value)}}});var EmailValidator=Concur.extend({message:"Enter a valid email address.",code:"invalid",userRegex:new RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*$"+'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"$)',"i"),domainRegex:new RegExp("^(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}|[A-Z0-9-]{2,})$"+"|^\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i"),domainWhitelist:["localhost"],constructor:function(kwargs){if(!(this instanceof EmailValidator)){return new EmailValidator(kwargs)}kwargs=object.extend({message:null,code:null,whitelist:null},kwargs);if(kwargs.message!==null){this.message=kwargs.message}if(kwargs.code!==null){this.code=kwargs.code}if(kwargs.whitelist!==null){this.domainWhitelist=kwargs.whitelist}return this.__call__.bind(this)},__call__:function(value){value=""+value;if(!value||value.indexOf("@")==-1){throw ValidationError(this.message,{code:this.code})}var parts=String_rsplit(value,"@",1);var userPart=parts[0];var domainPart=parts[1];if(!this.userRegex.test(userPart)){throw ValidationError(this.message,{code:this.code})}if(this.domainWhitelist.indexOf(domainPart)==-1&&!this.domainRegex.test(domainPart)){try{domainPart=punycode.toASCII(domainPart);if(this.domainRegex.test(domainPart)){return}}catch(unicodeError){}throw ValidationError(this.message,{code:this.code})}}});var validateEmail=EmailValidator();var SLUG_RE=/^[-a-zA-Z0-9_]+$/;var validateSlug=RegexValidator({regex:SLUG_RE,message:'Enter a valid "slug" consisting of letters, numbers, underscores or hyphens.',code:"invalid"});var IPV4_RE=/^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}$/;var validateIPv4Address=RegexValidator({regex:IPV4_RE,message:"Enter a valid IPv4 address.",code:"invalid"});function validateIPv6Address(value){if(!isValidIPv6Address(value)){throw ValidationError("Enter a valid IPv6 address.",{code:"invalid"})}}function validateIPv46Address(value){try{validateIPv4Address(value)}catch(e){if(!(e instanceof ValidationError)){throw e}try{validateIPv6Address(value)}catch(e){if(!(e instanceof ValidationError)){throw e}throw ValidationError("Enter a valid IPv4 or IPv6 address.",{code:"invalid"})}}}var ipAddressValidatorLookup={both:{validators:[validateIPv46Address],message:"Enter a valid IPv4 or IPv6 address."},ipv4:{validators:[validateIPv4Address],message:"Enter a valid IPv4 address."},ipv6:{validators:[validateIPv6Address],message:"Enter a valid IPv6 address."}};function ipAddressValidators(protocol,unpackIPv4){if(protocol!="both"&&unpackIPv4){throw new Error('You can only use unpackIPv4 if protocol is set to "both"')}protocol=protocol.toLowerCase();if(typeof ipAddressValidatorLookup[protocol]=="undefined"){throw new Error('The protocol "'+protocol+'" is unknown')}return ipAddressValidatorLookup[protocol]}var COMMA_SEPARATED_INT_LIST_RE=/^[\d,]+$/;var validateCommaSeparatedIntegerList=RegexValidator({regex:COMMA_SEPARATED_INT_LIST_RE,message:"Enter only digits separated by commas.",code:"invalid"});var BaseValidator=Concur.extend({constructor:function(limitValue){if(!(this instanceof BaseValidator)){return new BaseValidator(limitValue)}this.limitValue=limitValue;return this.__call__.bind(this)},compare:function(a,b){return a!==b},clean:function(x){return x},message:"Ensure this value is {limitValue} (it is {showValue}).",code:"limitValue",__call__:function(value){var cleaned=this.clean(value);var params={limitValue:this.limitValue,showValue:cleaned};if(this.compare(cleaned,this.limitValue)){throw ValidationError(this.message,{code:this.code,params:params})}}});var MaxValueValidator=BaseValidator.extend({constructor:function(limitValue){if(!(this instanceof MaxValueValidator)){return new MaxValueValidator(limitValue)}return BaseValidator.call(this,limitValue)},compare:function(a,b){return a>b},message:"Ensure this value is less than or equal to {limitValue}.",code:"maxValue"});var MinValueValidator=BaseValidator.extend({constructor:function(limitValue){if(!(this instanceof MinValueValidator)){return new MinValueValidator(limitValue)}return BaseValidator.call(this,limitValue)},compare:function(a,b){return a<b},message:"Ensure this value is greater than or equal to {limitValue}.",code:"minValue"});var MinLengthValidator=BaseValidator.extend({constructor:function(limitValue){if(!(this instanceof MinLengthValidator)){return new MinLengthValidator(limitValue)}return BaseValidator.call(this,limitValue)},compare:function(a,b){return a<b},clean:function(x){return x.length},message:"Ensure this value has at least {limitValue} characters (it has {showValue}).",code:"minLength"});var MaxLengthValidator=BaseValidator.extend({constructor:function(limitValue){if(!(this instanceof MaxLengthValidator)){return new MaxLengthValidator(limitValue)}return BaseValidator.call(this,limitValue)},compare:function(a,b){return a>b},clean:function(x){return x.length},message:"Ensure this value has at most {limitValue} characters (it has {showValue}).",code:"maxLength"});module.exports={EMPTY_VALUES:EMPTY_VALUES,RegexValidator:RegexValidator,URLValidator:URLValidator,EmailValidator:EmailValidator,validateEmail:validateEmail,validateSlug:validateSlug,validateIPv4Address:validateIPv4Address,validateIPv6Address:validateIPv6Address,validateIPv46Address:validateIPv46Address,ipAddressValidators:ipAddressValidators,validateCommaSeparatedIntegerList:validateCommaSeparatedIntegerList,BaseValidator:BaseValidator,MaxValueValidator:MaxValueValidator,MinValueValidator:MinValueValidator,MaxLengthValidator:MaxLengthValidator,MinLengthValidator:MinLengthValidator,ValidationError:ValidationError,ipv6:ipv6}},{"./errors":266,"./ipv6":268,Concur:258,"isomorph/is":262,"isomorph/object":263,"isomorph/url":265,punycode:36}],270:[function(require,module,exports){(function(process){"use strict";var getFormData=require("get-form-data");var is=require("isomorph/is");var object=require("isomorph/object");function formatToArray(str,obj,options){var parts=str.split(/\{(\w+)\}/g);for(var i=1,l=parts.length;i<l;i+=2){parts[i]=object.hasOwn(obj,parts[i])?obj[parts[i]]:"{"+parts[i]+"}"}if(!options||options&&options.strip!==false){parts=parts.filter(function(p){return p!==""})}return parts}function getProps(src,props){var result={};for(var i=0,l=props.length;i<l;i++){var prop=props[i];if(object.hasOwn(src,prop)){result[prop]=src[prop]}}return result}function maybeCall(obj,prop){var value=obj[prop];if(is.Function(value)){
value=value.call(obj)}return value}function makeChoices(list,valueProp,labelProp){return list.map(function(item){return[maybeCall(item,valueProp),maybeCall(item,labelProp)]})}function normaliseChoices(choices){if(!choices.length){return choices}var normalisedChoices=[];for(var i=0,l=choices.length,choice;i<l;i++){choice=choices[i];if(!is.Array(choice)){choice=[choice,choice]}if(choice.length!=2){throw new Error("Choices in a choice list must contain exactly 2 values, "+"but got "+JSON.stringify(choice))}if(is.Array(choice[1])){var normalisedOptgroupChoices=[];var optgroupChoices=choice[1];for(var j=0,m=optgroupChoices.length,optgroupChoice;j<m;j++){optgroupChoice=optgroupChoices[j];if(!is.Array(optgroupChoice)){optgroupChoice=[optgroupChoice,optgroupChoice]}if(optgroupChoice.length!=2){throw new Error("Choices in an optgroup choice list must contain "+"exactly 2 values, but got "+JSON.stringify(optgroupChoice))}normalisedOptgroupChoices.push(optgroupChoice)}normalisedChoices.push([choice[0],normalisedOptgroupChoices])}else{normalisedChoices.push(choice)}}return normalisedChoices}function normaliseValidationEvents(events){events=events.map(function(event){if(event.indexOf("on")===0){return event}return"on"+event.charAt(0).toUpperCase()+event.substr(1)});var onChangeIndex=events.indexOf("onChange");if(onChangeIndex!=-1){events.splice(onChangeIndex,1)}return{events:events,onChange:onChangeIndex!=-1}}function normaliseValidationString(events){return normaliseValidationEvents(strip(events).split(/ +/g))}function normaliseValidation(validation){if(!validation||validation==="manual"){return validation}else if(validation==="auto"){return{events:["onBlur"],onChange:true,onChangeDelay:369}}else if(is.String(validation)){return normaliseValidationString(validation)}else if(is.Object(validation)){var normalised;if(is.String(validation.on)){normalised=normaliseValidationString(validation.on)}else if(is.Array(validation.on)){normalised=normaliseValidationEvents(validation.on)}else{throw new Error("Validation config Objects must have an 'on' String or Array")}normalised.onChangeDelay=object.get(validation,"onChangeDelay",validation.delay);return normalised}throw new Error("Unexpected validation config: "+validation)}var prettyName=function(){var capsRE=/([A-Z]+)/g;var splitRE=/[ _]+/;var allCapsRE=/^[A-Z][A-Z0-9]+$/;return function(name){var parts=name.replace(capsRE," $1").split(splitRE);if(parts[0]===""){parts.splice(0,1)}for(var i=0,l=parts.length;i<l;i++){if(i===0){parts[0]=parts[0].charAt(0).toUpperCase()+parts[0].substr(1)}else if(!allCapsRE.test(parts[i])){parts[i]=parts[i].charAt(0).toLowerCase()+parts[i].substr(1)}}return parts.join(" ")}}();var strip=function(){var stripRE=/(^\s+|\s+$)/g;return function strip(s){return(""+s).replace(stripRE,"")}}();function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;var debounced=function(){context=this;args=arguments;timestamp=new Date;var later=function(){var last=new Date-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args)}}};var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait)}if(callNow){result=func.apply(context,args)}return result};debounced.cancel=function(){if(timeout){clearTimeout(timeout)}};debounced.trigger=function(){debounced.cancel();return func.apply(context,args)};return debounced}function cancellable(func){var cancelled=false;var cancellabled=function(){if(!cancelled){func.apply(null,arguments)}};cancellabled.cancel=function(){cancelled=true;if(is.Function(func.onCancel)){func.onCancel()}};return cancellabled}function getMaybeReactFormData(form){if(typeof form.getDOMNode=="function"){form=form.getDOMNode()}return getFormData(form)}function validateAll(form,formsAndFormsets){var data=getMaybeReactFormData(form);var isValid=true;for(var i=0,l=formsAndFormsets.length;i<l;i++){if(!formsAndFormsets[i].setFormData(data)){isValid=false}}return isValid}function allValid(formsOrFormsets){var valid=true;for(var i=0,l=formsOrFormsets.length;i<l;i++){if(!formsOrFormsets[i].isValid()){valid=false}}return valid}var info=function(){};var warning=function(){};if("production"!==process.env.NODE_ENV){info=function(message){console.warn("[newforms] "+message)};warning=function(message){console.warn("[newforms] Warning: "+message)}}function autoIdChecker(props,propName,componentName,location){var autoId=props.autoId;if(props.autoId&&!(is.String(autoId)&&autoId.indexOf("{name}")!=-1)){return new Error("Invalid `autoId` "+location+" supplied to "+"`"+componentName+"`. Must be falsy or a String containing a "+"`{name}` placeholder")}}module.exports={allValid:allValid,autoIdChecker:autoIdChecker,cancellable:cancellable,debounce:debounce,info:info,formatToArray:formatToArray,getFormData:getMaybeReactFormData,getProps:getProps,makeChoices:makeChoices,normaliseChoices:normaliseChoices,normaliseValidation:normaliseValidation,prettyName:prettyName,strip:strip,validateAll:validateAll,warning:warning}}).call(this,require("_process"))},{_process:35,"get-form-data":259,"isomorph/is":262,"isomorph/object":263}],271:[function(require,module,exports){"use strict";var utils=require("./utils");var merge=require("./merge");var errors=require("./deps/errors");var EventEmitter=require("events").EventEmitter;var upsert=require("./deps/upsert");var Changes=require("./changes");var Promise=utils.Promise;function arrayFirst(arr,callback){for(var i=0;i<arr.length;i++){if(callback(arr[i],i)===true){return arr[i]}}return false}function yankError(callback){return function(err,results){if(err||results[0]&&results[0].error){callback(err||results[0])}else{callback(null,results.length?results[0]:results)}}}function computeHeight(revs){var height={};var edges=[];merge.traverseRevTree(revs,function(isLeaf,pos,id,prnt){var rev=pos+"-"+id;if(isLeaf){height[rev]=0}if(prnt!==undefined){edges.push({from:prnt,to:rev})}return rev});edges.reverse();edges.forEach(function(edge){if(height[edge.from]===undefined){height[edge.from]=1+height[edge.to]}else{height[edge.from]=Math.min(height[edge.from],1+height[edge.to])}});return height}function allDocsKeysQuery(api,opts,callback){var keys="limit"in opts?opts.keys.slice(opts.skip,opts.limit+opts.skip):opts.skip>0?opts.keys.slice(opts.skip):opts.keys;if(opts.descending){keys.reverse()}if(!keys.length){return api._allDocs({limit:0},callback)}var finalResults={offset:opts.skip};return Promise.all(keys.map(function(key){var subOpts=utils.extend(true,{key:key,deleted:"ok"},opts);["limit","skip","keys"].forEach(function(optKey){delete subOpts[optKey]});return new Promise(function(resolve,reject){api._allDocs(subOpts,function(err,res){if(err){return reject(err)}finalResults.total_rows=res.total_rows;resolve(res.rows[0]||{key:key,error:"not_found"})})})})).then(function(results){finalResults.rows=results;return finalResults})}utils.inherits(AbstractPouchDB,EventEmitter);module.exports=AbstractPouchDB;function AbstractPouchDB(){EventEmitter.call(this)}AbstractPouchDB.prototype.post=utils.adapterFun("post",function(doc,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}if(typeof doc!=="object"||Array.isArray(doc)){return callback(errors.error(errors.NOT_AN_OBJECT))}this.bulkDocs({docs:[doc]},opts,yankError(callback))});AbstractPouchDB.prototype.put=utils.adapterFun("put",utils.getArguments(function(args){var temp,temptype,opts,callback;var doc=args.shift();var id="_id"in doc;if(typeof doc!=="object"||Array.isArray(doc)){callback=args.pop();return callback(errors.error(errors.NOT_AN_OBJECT))}doc=utils.clone(doc);while(true){temp=args.shift();temptype=typeof temp;if(temptype==="string"&&!id){doc._id=temp;id=true}else if(temptype==="string"&&id&&!("_rev"in doc)){doc._rev=temp}else if(temptype==="object"){opts=temp}else if(temptype==="function"){callback=temp}if(!args.length){break}}opts=opts||{};var error=utils.invalidIdError(doc._id);if(error){return callback(error)}if(utils.isLocalId(doc._id)&&typeof this._putLocal==="function"){if(doc._deleted){return this._removeLocal(doc,callback)}else{return this._putLocal(doc,callback)}}this.bulkDocs({docs:[doc]},opts,yankError(callback))}));AbstractPouchDB.prototype.putAttachment=utils.adapterFun("putAttachment",function(docId,attachmentId,rev,blob,type,callback){var api=this;if(typeof type==="function"){callback=type;type=blob;blob=rev;rev=null}if(typeof type==="undefined"){type=blob;blob=rev;rev=null}function createAttachment(doc){doc._attachments=doc._attachments||{};doc._attachments[attachmentId]={content_type:type,data:blob};return api.put(doc)}return api.get(docId).then(function(doc){if(doc._rev!==rev){throw errors.error(errors.REV_CONFLICT)}return createAttachment(doc)},function(err){if(err.reason===errors.MISSING_DOC.message){return createAttachment({_id:docId})}else{throw err}})});AbstractPouchDB.prototype.removeAttachment=utils.adapterFun("removeAttachment",function(docId,attachmentId,rev,callback){var self=this;self.get(docId,function(err,obj){if(err){callback(err);return}if(obj._rev!==rev){callback(errors.error(errors.REV_CONFLICT));return}if(!obj._attachments){return callback()}delete obj._attachments[attachmentId];if(Object.keys(obj._attachments).length===0){delete obj._attachments}self.put(obj,callback)})});AbstractPouchDB.prototype.remove=utils.adapterFun("remove",function(docOrId,optsOrRev,opts,callback){var doc;if(typeof optsOrRev==="string"){doc={_id:docOrId,_rev:optsOrRev};if(typeof opts==="function"){callback=opts;opts={}}}else{doc=docOrId;if(typeof optsOrRev==="function"){callback=optsOrRev;opts={}}else{callback=opts;opts=optsOrRev}}opts=utils.clone(opts||{});opts.was_delete=true;var newDoc={_id:doc._id,_rev:doc._rev||opts.rev};newDoc._deleted=true;if(utils.isLocalId(newDoc._id)&&typeof this._removeLocal==="function"){return this._removeLocal(doc,callback)}this.bulkDocs({docs:[newDoc]},opts,yankError(callback))});AbstractPouchDB.prototype.revsDiff=utils.adapterFun("revsDiff",function(req,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);var ids=Object.keys(req);if(!ids.length){return callback(null,{})}var count=0;var missing=new utils.Map;function addToMissing(id,revId){if(!missing.has(id)){missing.set(id,{missing:[]})}missing.get(id).missing.push(revId)}function processDoc(id,rev_tree){var missingForId=req[id].slice(0);merge.traverseRevTree(rev_tree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+"-"+revHash;var idx=missingForId.indexOf(rev);if(idx===-1){return}missingForId.splice(idx,1);if(opts.status!=="available"){addToMissing(id,rev)}});missingForId.forEach(function(rev){addToMissing(id,rev)})}ids.map(function(id){this._getRevisionTree(id,function(err,rev_tree){if(err&&err.status===404&&err.message==="missing"){missing.set(id,{missing:req[id]})}else if(err){return callback(err)}else{processDoc(id,rev_tree)}if(++count===ids.length){var missingObj={};missing.forEach(function(value,key){missingObj[key]=value});return callback(null,missingObj)}})},this)});AbstractPouchDB.prototype.compactDocument=utils.adapterFun("compactDocument",function(docId,maxHeight,callback){var self=this;this._getRevisionTree(docId,function(err,revTree){if(err){return callback(err)}var height=computeHeight(revTree);var candidates=[];var revs=[];Object.keys(height).forEach(function(rev){if(height[rev]>maxHeight){candidates.push(rev)}});merge.traverseRevTree(revTree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+"-"+revHash;if(opts.status==="available"&&candidates.indexOf(rev)!==-1){revs.push(rev)}});self._doCompaction(docId,revs,callback)})});AbstractPouchDB.prototype.compact=utils.adapterFun("compact",function(opts,callback){if(typeof opts==="function"){callback=opts;opts={}}var self=this;opts=utils.clone(opts||{});self.get("_local/compaction").catch(function(){return false}).then(function(doc){if(typeof self._compact==="function"){if(doc&&doc.last_seq){opts.last_seq=doc.last_seq}return self._compact(opts,callback)}})});AbstractPouchDB.prototype._compact=function(opts,callback){var self=this;var changesOpts={returnDocs:false,last_seq:opts.last_seq||0};var promises=[];function onChange(row){promises.push(self.compactDocument(row.id,0))}function onComplete(resp){var lastSeq=resp.last_seq;Promise.all(promises).then(function(){return upsert(self,"_local/compaction",function deltaFunc(doc){if(!doc.last_seq||doc.last_seq<lastSeq){doc.last_seq=lastSeq;return doc}return false})}).then(function(){callback(null,{ok:true})}).catch(callback)}self.changes(changesOpts).on("change",onChange).on("complete",onComplete).on("error",callback)};AbstractPouchDB.prototype.get=utils.adapterFun("get",function(id,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}if(typeof id!=="string"){return callback(errors.error(errors.INVALID_ID))}if(utils.isLocalId(id)&&typeof this._getLocal==="function"){return this._getLocal(id,callback)}var leaves=[],self=this;function finishOpenRevs(){var result=[];var count=leaves.length;if(!count){return callback(null,result)}leaves.forEach(function(leaf){self.get(id,{rev:leaf,revs:opts.revs,attachments:opts.attachments},function(err,doc){if(!err){result.push({ok:doc})}else{result.push({missing:leaf})}count--;if(!count){callback(null,result)}})})}if(opts.open_revs){if(opts.open_revs==="all"){this._getRevisionTree(id,function(err,rev_tree){if(err){return callback(err)}leaves=merge.collectLeaves(rev_tree).map(function(leaf){return leaf.rev});finishOpenRevs()})}else{if(Array.isArray(opts.open_revs)){leaves=opts.open_revs;for(var i=0;i<leaves.length;i++){var l=leaves[i];if(!(typeof l==="string"&&/^\d+-/.test(l))){return callback(errors.error(errors.INVALID_REV))}}finishOpenRevs()}else{return callback(errors.error(errors.UNKNOWN_ERROR,"function_clause"))}}return}return this._get(id,opts,function(err,result){opts=utils.clone(opts);if(err){return callback(err)}var doc=result.doc;var metadata=result.metadata;var ctx=result.ctx;if(opts.conflicts){var conflicts=merge.collectConflicts(metadata);if(conflicts.length){doc._conflicts=conflicts}}if(utils.isDeleted(metadata,doc._rev)){doc._deleted=true}if(opts.revs||opts.revs_info){var paths=merge.rootToLeaf(metadata.rev_tree);var path=arrayFirst(paths,function(arr){return arr.ids.map(function(x){return x.id}).indexOf(doc._rev.split("-")[1])!==-1});var indexOfRev=path.ids.map(function(x){return x.id}).indexOf(doc._rev.split("-")[1])+1;var howMany=path.ids.length-indexOfRev;path.ids.splice(indexOfRev,howMany);path.ids.reverse();if(opts.revs){doc._revisions={start:path.pos+path.ids.length-1,ids:path.ids.map(function(rev){return rev.id})}}if(opts.revs_info){var pos=path.pos+path.ids.length;doc._revs_info=path.ids.map(function(rev){pos--;return{rev:pos+"-"+rev.id,status:rev.opts.status}})}}if(opts.local_seq){utils.info('The "local_seq" option is deprecated and will be removed');doc._local_seq=result.metadata.seq}if(opts.attachments&&doc._attachments){var attachments=doc._attachments;var count=Object.keys(attachments).length;if(count===0){return callback(null,doc)}Object.keys(attachments).forEach(function(key){this._getAttachment(attachments[key],{encode:true,ctx:ctx},function(err,data){var att=doc._attachments[key];att.data=data;delete att.stub;delete att.length;if(!--count){callback(null,doc)}})},self)}else{if(doc._attachments){for(var key in doc._attachments){if(doc._attachments.hasOwnProperty(key)){doc._attachments[key].stub=true}}}callback(null,doc)}})});AbstractPouchDB.prototype.getAttachment=utils.adapterFun("getAttachment",function(docId,attachmentId,opts,callback){var self=this;if(opts instanceof Function){callback=opts;opts={}}opts=utils.clone(opts);this._get(docId,opts,function(err,res){if(err){return callback(err)}if(res.doc._attachments&&res.doc._attachments[attachmentId]){opts.ctx=res.ctx;self._getAttachment(res.doc._attachments[attachmentId],opts,callback)}else{return callback(errors.error(errors.MISSING_DOC))}})});AbstractPouchDB.prototype.allDocs=utils.adapterFun("allDocs",function(opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);opts.skip=typeof opts.skip!=="undefined"?opts.skip:0;if("keys"in opts){if(!Array.isArray(opts.keys)){return callback(new TypeError("options.keys must be an array"))}var incompatibleOpt=["startkey","endkey","key"].filter(function(incompatibleOpt){return incompatibleOpt in opts})[0];if(incompatibleOpt){callback(errors.error(errors.QUERY_PARSE_ERROR,"Query parameter `"+incompatibleOpt+"` is not compatible with multi-get"));return}if(this.type()!=="http"){return allDocsKeysQuery(this,opts,callback)}}return this._allDocs(opts,callback)});AbstractPouchDB.prototype.changes=function(opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return new Changes(this,opts,callback)};AbstractPouchDB.prototype.close=utils.adapterFun("close",function(callback){this._closed=true;return this._close(callback)});AbstractPouchDB.prototype.info=utils.adapterFun("info",function(callback){var self=this;this._info(function(err,info){if(err){return callback(err)}info.db_name=info.db_name||self._db_name;info.auto_compaction=!!(self.auto_compaction&&self.type()!=="http");callback(null,info)})});AbstractPouchDB.prototype.id=utils.adapterFun("id",function(callback){return this._id(callback)});AbstractPouchDB.prototype.type=function(){return typeof this._type==="function"?this._type():this.adapter};AbstractPouchDB.prototype.bulkDocs=utils.adapterFun("bulkDocs",function(req,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);if(Array.isArray(req)){req={docs:req}}if(!req||!req.docs||!Array.isArray(req.docs)){return callback(errors.error(errors.MISSING_BULK_DOCS))}for(var i=0;i<req.docs.length;++i){if(typeof req.docs[i]!=="object"||Array.isArray(req.docs[i])){return callback(errors.error(errors.NOT_AN_OBJECT))}}req=utils.clone(req);if(!("new_edits"in opts)){if("new_edits"in req){opts.new_edits=req.new_edits}else{opts.new_edits=true}}if(!opts.new_edits&&this.type()!=="http"){req.docs.sort(function(a,b){var idCompare=utils.compare(a._id,b._id);if(idCompare!==0){return idCompare}var aStart=a._revisions?a._revisions.start:0;var bStart=b._revisions?b._revisions.start:0;return utils.compare(aStart,bStart)})}req.docs.forEach(function(doc){if(doc._deleted){delete doc._attachments}});return this._bulkDocs(req,opts,function(err,res){if(err){return callback(err)}if(!opts.new_edits){res=res.filter(function(x){return x.error})}callback(null,res)})});AbstractPouchDB.prototype.registerDependentDatabase=utils.adapterFun("registerDependentDatabase",function(dependentDb,callback){var depDB=new this.constructor(dependentDb,this.__opts);function diffFun(doc){doc.dependentDbs=doc.dependentDbs||{};if(doc.dependentDbs[dependentDb]){return false}doc.dependentDbs[dependentDb]=true;return doc}upsert(this,"_local/_pouch_dependentDbs",diffFun,function(err){if(err){return callback(err)}return callback(null,{db:depDB})})});AbstractPouchDB.prototype.destroy=utils.adapterFun("destroy",function(callback){var self=this;var usePrefix="use_prefix"in self?self.use_prefix:true;function destroyDb(){self._destroy(function(err,resp){if(err){return callback(err)}self.emit("destroyed");callback(null,resp||{ok:true})})}self.get("_local/_pouch_dependentDbs",function(err,localDoc){if(err){if(err.status!==404){return callback(err)}else{return destroyDb()}}var dependentDbs=localDoc.dependentDbs;var PouchDB=self.constructor;var deletedMap=Object.keys(dependentDbs).map(function(name){var trueName=usePrefix?name.replace(new RegExp("^"+PouchDB.prefix),""):name;return new PouchDB(trueName,self.__opts).destroy()});Promise.all(deletedMap).then(destroyDb,function(error){callback(error)})})})},{"./changes":283,"./deps/errors":289,"./deps/upsert":297,"./merge":302,"./utils":307,events:34}],272:[function(require,module,exports){(function(process){"use strict";var CHANGES_BATCH_SIZE=25;var MAX_URL_LENGTH=1800;var utils=require("../../utils");var errors=require("../../deps/errors");var log=require("debug")("pouchdb:http");var isBrowser=typeof process==="undefined"||process.browser;var buffer=require("../../deps/buffer");function encodeDocId(id){if(/^_design/.test(id)){return"_design/"+encodeURIComponent(id.slice(8))}if(/^_local/.test(id)){return"_local/"+encodeURIComponent(id.slice(7))}return encodeURIComponent(id)}function preprocessAttachments(doc){if(!doc._attachments||!Object.keys(doc._attachments)){return utils.Promise.resolve()}return utils.Promise.all(Object.keys(doc._attachments).map(function(key){var attachment=doc._attachments[key];if(attachment.data&&typeof attachment.data!=="string"){if(isBrowser){return new utils.Promise(function(resolve){utils.readAsBinaryString(attachment.data,function(binary){attachment.data=utils.btoa(binary);resolve()})})}else{attachment.data=attachment.data.toString("base64")}}}))}function getHost(name,opts){if(/http(s?):/.test(name)){var uri=utils.parseUri(name);uri.remote=true;if(uri.user||uri.password){uri.auth={username:uri.user,password:uri.password}}var parts=uri.path.replace(/(^\/|\/$)/g,"").split("/");uri.db=parts.pop();uri.path=parts.join("/");opts=opts||{};opts=utils.clone(opts);uri.headers=opts.headers||opts.ajax&&opts.ajax.headers||{};if(opts.auth||uri.auth){var nAuth=opts.auth||uri.auth;var token=utils.btoa(nAuth.username+":"+nAuth.password);uri.headers.Authorization="Basic "+token}if(opts.headers){uri.headers=opts.headers}return uri}return{host:"",path:"/",db:name,auth:false}}function genDBUrl(opts,path){return genUrl(opts,opts.db+"/"+path)}function genUrl(opts,path){if(opts.remote){var pathDel=!opts.path?"":"/";return opts.protocol+"://"+opts.host+":"+opts.port+"/"+opts.path+pathDel+path}return"/"+path}function HttpPouch(opts,callback){var api=this;api.getHost=opts.getHost?opts.getHost:getHost;var host=api.getHost(opts.name,opts);var dbUrl=genDBUrl(host,"");api.getUrl=function(){return dbUrl};api.getHeaders=function(){return utils.clone(host.headers)};var ajaxOpts=opts.ajax||{};opts=utils.clone(opts);function ajax(options,callback){var reqOpts=utils.extend(true,utils.clone(ajaxOpts),options);log(reqOpts.method+" "+reqOpts.url);return utils.ajax(reqOpts,callback)}var createDB=function(){ajax({headers:host.headers,method:"PUT",url:dbUrl},function(err){if(err&&err.status===401){ajax({headers:host.headers,method:"HEAD",url:dbUrl},function(err){if(err){callback(err)}else{callback(null,api)}})}else if(!err||err.status===412){callback(null,api)}else{callback(err)}})};if(!opts.skipSetup){ajax({headers:host.headers,method:"GET",url:dbUrl},function(err){if(err){if(err.status===404){utils.explain404("PouchDB is just detecting if the remote DB exists.");createDB()}else{callback(err)}}else{callback(null,api)}})}api.type=function(){return"http"};api.id=utils.adapterFun("id",function(callback){ajax({headers:host.headers,method:"GET",url:genUrl(host,"")},function(err,result){var uuid=result&&result.uuid?result.uuid+host.db:genDBUrl(host,"");callback(null,uuid)})});api.request=utils.adapterFun("request",function(options,callback){options.headers=host.headers;options.url=genDBUrl(host,options.url);ajax(options,callback)});api.compact=utils.adapterFun("compact",function(opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);ajax({headers:host.headers,url:genDBUrl(host,"_compact"),method:"POST"},function(){function ping(){api.info(function(err,res){if(!res.compact_running){callback(null,{ok:true})}else{setTimeout(ping,opts.interval||200)}})}if(typeof callback==="function"){ping()}})});api._info=function(callback){ajax({headers:host.headers,method:"GET",url:genDBUrl(host,"")},function(err,res){if(err){callback(err)}else{res.host=genDBUrl(host,"");callback(null,res)}})};api.get=utils.adapterFun("get",function(id,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);if(opts.auto_encode===undefined){opts.auto_encode=true}var params=[];if(opts.revs){params.push("revs=true")}if(opts.revs_info){params.push("revs_info=true")}if(opts.local_seq){params.push("local_seq=true")}if(opts.open_revs){if(opts.open_revs!=="all"){opts.open_revs=JSON.stringify(opts.open_revs)}params.push("open_revs="+opts.open_revs)}if(opts.attachments){params.push("attachments=true")}if(opts.rev){params.push("rev="+opts.rev)}if(opts.conflicts){params.push("conflicts="+opts.conflicts)}params=params.join("&");params=params===""?"":"?"+params;if(opts.auto_encode){id=encodeDocId(id)}var options={headers:host.headers,method:"GET",url:genDBUrl(host,id+params)};var getRequestAjaxOpts=opts.ajax||{};utils.extend(true,options,getRequestAjaxOpts);var parts=id.split("/");if(parts.length>1&&parts[0]!=="_design"&&parts[0]!=="_local"||parts.length>2&&parts[0]==="_design"&&parts[0]!=="_local"){options.binary=true}ajax(options,function(err,doc,xhr){if(err){return callback(err)}callback(null,doc,xhr)})});api.remove=utils.adapterFun("remove",function(docOrId,optsOrRev,opts,callback){var doc;if(typeof optsOrRev==="string"){doc={_id:docOrId,_rev:optsOrRev};if(typeof opts==="function"){callback=opts;opts={}}}else{doc=docOrId;if(typeof optsOrRev==="function"){callback=optsOrRev;opts={}}else{callback=opts;opts=optsOrRev}}var rev=doc._rev||opts.rev;ajax({headers:host.headers,method:"DELETE",url:genDBUrl(host,encodeDocId(doc._id))+"?rev="+rev},callback)});function encodeAttachmentId(attachmentId){return attachmentId.split("/").map(encodeURIComponent).join("/")}api.getAttachment=utils.adapterFun("getAttachment",function(docId,attachmentId,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);if(opts.auto_encode===undefined){opts.auto_encode=true}if(opts.auto_encode){docId=encodeDocId(docId)}opts.auto_encode=false;api.get(docId+"/"+encodeAttachmentId(attachmentId),opts,callback)});api.removeAttachment=utils.adapterFun("removeAttachment",function(docId,attachmentId,rev,callback){var url=genDBUrl(host,encodeDocId(docId)+"/"+encodeAttachmentId(attachmentId))+"?rev="+rev;ajax({headers:host.headers,method:"DELETE",url:url},callback)});api.putAttachment=utils.adapterFun("putAttachment",function(docId,attachmentId,rev,blob,type,callback){if(typeof type==="function"){callback=type;type=blob;blob=rev;rev=null}if(typeof type==="undefined"){type=blob;blob=rev;rev=null}var id=encodeDocId(docId)+"/"+encodeAttachmentId(attachmentId);var url=genDBUrl(host,id);if(rev){url+="?rev="+rev}if(typeof blob==="string"){var binary;try{binary=utils.atob(blob)}catch(err){return callback(errors.error(errors.BAD_ARG,"Attachments need to be base64 encoded"))}if(isBrowser){blob=utils.createBlob([utils.fixBinary(binary)],{type:type})}else{blob=binary?new buffer(binary,"binary"):""}}var opts={headers:utils.clone(host.headers),method:"PUT",url:url,processData:false,body:blob,timeout:6e4};opts.headers["Content-Type"]=type;ajax(opts,callback)});api.put=utils.adapterFun("put",utils.getArguments(function(args){var temp,temptype,opts;var doc=args.shift();var id="_id"in doc;var callback=args.pop();if(typeof doc!=="object"||Array.isArray(doc)){return callback(errors.error(errors.NOT_AN_OBJECT))}doc=utils.clone(doc);preprocessAttachments(doc).then(function(){while(true){temp=args.shift();temptype=typeof temp;if(temptype==="string"&&!id){doc._id=temp;id=true}else if(temptype==="string"&&id&&!("_rev"in doc)){doc._rev=temp}else if(temptype==="object"){opts=utils.clone(temp)}if(!args.length){break}}opts=opts||{};var error=utils.invalidIdError(doc._id);if(error){throw error}var params=[];if(opts&&typeof opts.new_edits!=="undefined"){params.push("new_edits="+opts.new_edits)}params=params.join("&");if(params!==""){params="?"+params}ajax({headers:host.headers,method:"PUT",url:genDBUrl(host,encodeDocId(doc._id))+params,body:doc},function(err,res){if(err){return callback(err)}res.ok=true;callback(null,res)})}).catch(callback)}));api.post=utils.adapterFun("post",function(doc,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);if(typeof doc!=="object"){return callback(errors.error(errors.NOT_AN_OBJECT))}if(!("_id"in doc)){doc._id=utils.uuid()}api.put(doc,opts,function(err,res){if(err){return callback(err)}res.ok=true;callback(null,res)})});api._bulkDocs=function(req,opts,callback){if(typeof opts.new_edits!=="undefined"){req.new_edits=opts.new_edits}utils.Promise.all(req.docs.map(preprocessAttachments)).then(function(){ajax({headers:host.headers,method:"POST",url:genDBUrl(host,"_bulk_docs"),body:req},function(err,results){if(err){return callback(err)}results.forEach(function(result){result.ok=true});callback(null,results)})}).catch(callback)};api.allDocs=utils.adapterFun("allDocs",function(opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.clone(opts);var params=[];var body;var method="GET";if(opts.conflicts){params.push("conflicts=true")}if(opts.descending){params.push("descending=true")}if(opts.include_docs){params.push("include_docs=true")}if(opts.attachments){params.push("attachments=true")}if(opts.key){params.push("key="+encodeURIComponent(JSON.stringify(opts.key)))}if(opts.startkey){params.push("startkey="+encodeURIComponent(JSON.stringify(opts.startkey)))}if(opts.endkey){params.push("endkey="+encodeURIComponent(JSON.stringify(opts.endkey)))}if(typeof opts.inclusive_end!=="undefined"){params.push("inclusive_end="+!!opts.inclusive_end)}if(typeof opts.limit!=="undefined"){params.push("limit="+opts.limit)}if(typeof opts.skip!=="undefined"){params.push("skip="+opts.skip)}params=params.join("&");if(params!==""){params="?"+params}if(typeof opts.keys!=="undefined"){var keysAsString="keys="+encodeURIComponent(JSON.stringify(opts.keys));if(keysAsString.length+params.length+1<=MAX_URL_LENGTH){params+=(params.indexOf("?")!==-1?"&":"?")+keysAsString}else{method="POST";body=JSON.stringify({keys:opts.keys})}}ajax({headers:host.headers,method:method,url:genDBUrl(host,"_all_docs"+params),body:body},callback)});api._changes=function(opts){var batchSize="batch_size"in opts?opts.batch_size:CHANGES_BATCH_SIZE;opts=utils.clone(opts);opts.timeout=opts.timeout||30*1e3;var params={timeout:opts.timeout-5*1e3};var limit=typeof opts.limit!=="undefined"?opts.limit:false;if(limit===0){limit=1}var returnDocs;if("returnDocs"in opts){returnDocs=opts.returnDocs}else{returnDocs=true}var leftToFetch=limit;if(opts.style){params.style=opts.style}if(opts.include_docs||opts.filter&&typeof opts.filter==="function"){params.include_docs=true}if(opts.attachments){params.attachments=true}if(opts.continuous){params.feed="longpoll"}if(opts.conflicts){params.conflicts=true}if(opts.descending){params.descending=true}if(opts.filter&&typeof opts.filter==="string"){params.filter=opts.filter;if(opts.filter==="_view"&&opts.view&&typeof opts.view==="string"){params.view=opts.view}}if(opts.query_params&&typeof opts.query_params==="object"){for(var param_name in opts.query_params){if(opts.query_params.hasOwnProperty(param_name)){params[param_name]=opts.query_params[param_name]}}}var method="GET";var body;if(opts.doc_ids){params.filter="_doc_ids";var docIdsJson=JSON.stringify(opts.doc_ids);if(docIdsJson.length<MAX_URL_LENGTH){params.doc_ids=docIdsJson}else{method="POST";body={doc_ids:opts.doc_ids}}}if(opts.continuous&&api._useSSE){return api.sse(opts,params,returnDocs)}var xhr;var lastFetchedSeq;var fetch=function(since,callback){if(opts.aborted){return}params.since=since;if(typeof params.since==="object"){params.since=JSON.stringify(params.since)}if(opts.descending){if(limit){params.limit=leftToFetch}}else{params.limit=!limit||leftToFetch>batchSize?batchSize:leftToFetch}var paramStr="?"+Object.keys(params).map(function(k){return k+"="+params[k]}).join("&");var xhrOpts={headers:host.headers,method:method,url:genDBUrl(host,"_changes"+paramStr),timeout:opts.timeout,body:body};lastFetchedSeq=since;if(opts.aborted){return}xhr=ajax(xhrOpts,callback)};var fetchTimeout=10;var fetchRetryCount=0;var results={results:[]};var fetched=function(err,res){if(opts.aborted){return}var raw_results_length=0;if(res&&res.results){raw_results_length=res.results.length;

results.last_seq=res.last_seq;var req={};req.query=opts.query_params;res.results=res.results.filter(function(c){leftToFetch--;var ret=utils.filterChange(opts)(c);if(ret){if(returnDocs){results.results.push(c)}utils.call(opts.onChange,c)}return ret})}else if(err){opts.aborted=true;utils.call(opts.complete,err);return}if(res&&res.last_seq){lastFetchedSeq=res.last_seq}var finished=limit&&leftToFetch<=0||res&&raw_results_length<batchSize||opts.descending;if(opts.continuous&&!(limit&&leftToFetch<=0)||!finished){if(err){fetchRetryCount+=1}else{fetchRetryCount=0}var timeoutMultiplier=1<<fetchRetryCount;var retryWait=fetchTimeout*timeoutMultiplier;var maximumWait=opts.maximumWait||3e4;if(retryWait>maximumWait){utils.call(opts.complete,err||errors.error(errors.UNKNOWN_ERROR));return}setTimeout(function(){fetch(lastFetchedSeq,fetched)},retryWait)}else{utils.call(opts.complete,null,results)}};fetch(opts.since||0,fetched);return{cancel:function(){opts.aborted=true;if(xhr){xhr.abort()}}}};api.sse=function(opts,params,returnDocs){params.feed="eventsource";params.since=opts.since||0;params.limit=opts.limit;delete params.timeout;var paramStr="?"+Object.keys(params).map(function(k){return k+"="+params[k]}).join("&");var url=genDBUrl(host,"_changes"+paramStr);var source=new EventSource(url);var results={results:[],last_seq:false};var dispatched=false;var open=false;source.addEventListener("message",msgHandler,false);source.onopen=function(){open=true};source.onerror=errHandler;return{cancel:function(){if(dispatched){return dispatched.cancel()}source.removeEventListener("message",msgHandler,false);source.close()}};function msgHandler(e){var data=JSON.parse(e.data);if(returnDocs){results.results.push(data)}results.last_seq=data.seq;utils.call(opts.onChange,data)}function errHandler(err){source.removeEventListener("message",msgHandler,false);if(open===false){api._useSSE=false;dispatched=api._changes(opts);return}source.close();utils.call(opts.complete,err)}};api._useSSE=false;api.revsDiff=utils.adapterFun("revsDiff",function(req,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}ajax({headers:host.headers,method:"POST",url:genDBUrl(host,"_revs_diff"),body:JSON.stringify(req)},callback)});api._close=function(callback){callback()};api._destroy=function(callback){ajax({url:genDBUrl(host,""),method:"DELETE",headers:host.headers},function(err,resp){if(err){api.emit("error",err);callback(err)}else{api.emit("destroyed");api.constructor.emit("destroyed",opts.name);callback(null,resp)}})}}HttpPouch.valid=function(){return true};module.exports=HttpPouch}).call(this,require("_process"))},{"../../deps/buffer":288,"../../deps/errors":289,"../../utils":307,_process:35,debug:310}],273:[function(require,module,exports){"use strict";var merge=require("../../merge");var errors=require("../../deps/errors");var idbUtils=require("./idb-utils");var idbConstants=require("./idb-constants");var ATTACH_STORE=idbConstants.ATTACH_STORE;var BY_SEQ_STORE=idbConstants.BY_SEQ_STORE;var DOC_STORE=idbConstants.DOC_STORE;var decodeDoc=idbUtils.decodeDoc;var decodeMetadata=idbUtils.decodeMetadata;var fetchAttachmentsIfNecessary=idbUtils.fetchAttachmentsIfNecessary;var postProcessAttachments=idbUtils.postProcessAttachments;var openTransactionSafely=idbUtils.openTransactionSafely;function createKeyRange(start,end,inclusiveEnd,key,descending){try{if(start&&end){if(descending){return IDBKeyRange.bound(end,start,!inclusiveEnd,false)}else{return IDBKeyRange.bound(start,end,false,!inclusiveEnd)}}else if(start){if(descending){return IDBKeyRange.upperBound(start)}else{return IDBKeyRange.lowerBound(start)}}else if(end){if(descending){return IDBKeyRange.lowerBound(end,!inclusiveEnd)}else{return IDBKeyRange.upperBound(end,!inclusiveEnd)}}else if(key){return IDBKeyRange.only(key)}}catch(e){return{error:e}}return null}function handleKeyRangeError(api,opts,err,callback){if(err.name==="DataError"&&err.code===0){return callback(null,{total_rows:api._meta.docCount,offset:opts.skip,rows:[]})}callback(errors.error(errors.IDB_ERROR,err.name,err.message))}function idbAllDocs(opts,api,idb,callback){function allDocsQuery(opts,callback){var start="startkey"in opts?opts.startkey:false;var end="endkey"in opts?opts.endkey:false;var key="key"in opts?opts.key:false;var skip=opts.skip||0;var limit=typeof opts.limit==="number"?opts.limit:-1;var inclusiveEnd=opts.inclusive_end!==false;var descending="descending"in opts&&opts.descending?"prev":null;var keyRange=createKeyRange(start,end,inclusiveEnd,key,descending);if(keyRange&&keyRange.error){return handleKeyRangeError(api,opts,keyRange.error,callback)}var stores=[DOC_STORE,BY_SEQ_STORE];if(opts.attachments){stores.push(ATTACH_STORE)}var txnResult=openTransactionSafely(idb,stores,"readonly");if(txnResult.error){return callback(txnResult.error)}var txn=txnResult.txn;var docStore=txn.objectStore(DOC_STORE);var seqStore=txn.objectStore(BY_SEQ_STORE);var cursor=descending?docStore.openCursor(keyRange,descending):docStore.openCursor(keyRange);var docIdRevIndex=seqStore.index("_doc_id_rev");var results=[];var docCount=0;function fetchDocAsynchronously(metadata,row,winningRev){var key=metadata.id+"::"+winningRev;docIdRevIndex.get(key).onsuccess=function onGetDoc(e){row.doc=decodeDoc(e.target.result);if(opts.conflicts){row.doc._conflicts=merge.collectConflicts(metadata)}fetchAttachmentsIfNecessary(row.doc,opts,txn)}}function allDocsInner(cursor,winningRev,metadata){var row={id:metadata.id,key:metadata.id,value:{rev:winningRev}};var deleted=metadata.deleted;if(opts.deleted==="ok"){results.push(row);if(deleted){row.value.deleted=true;row.doc=null}else if(opts.include_docs){fetchDocAsynchronously(metadata,row,winningRev)}}else if(!deleted&&skip--<=0){results.push(row);if(opts.include_docs){fetchDocAsynchronously(metadata,row,winningRev)}if(--limit===0){return}}cursor.continue()}function onGetCursor(e){docCount=api._meta.docCount;var cursor=e.target.result;if(!cursor){return}var metadata=decodeMetadata(cursor.value);var winningRev=metadata.winningRev;allDocsInner(cursor,winningRev,metadata)}function onResultsReady(){callback(null,{total_rows:docCount,offset:opts.skip,rows:results})}function onTxnComplete(){if(opts.attachments){postProcessAttachments(results).then(onResultsReady)}else{onResultsReady()}}txn.oncomplete=onTxnComplete;cursor.onsuccess=onGetCursor}function allDocs(opts,callback){if(opts.limit===0){return callback(null,{total_rows:api._meta.docCount,offset:opts.skip,rows:[]})}allDocsQuery(opts,callback)}allDocs(opts,callback)}module.exports=idbAllDocs},{"../../deps/errors":289,"../../merge":302,"./idb-constants":276,"./idb-utils":277}],274:[function(require,module,exports){"use strict";var utils=require("../../utils");var idbConstants=require("./idb-constants");var DETECT_BLOB_SUPPORT_STORE=idbConstants.DETECT_BLOB_SUPPORT_STORE;function checkBlobSupport(txn,idb){return new utils.Promise(function(resolve,reject){var blob=utils.createBlob([""],{type:"image/png"});txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,"key");txn.oncomplete=function(){var blobTxn=idb.transaction([DETECT_BLOB_SUPPORT_STORE],"readwrite");var getBlobReq=blobTxn.objectStore(DETECT_BLOB_SUPPORT_STORE).get("key");getBlobReq.onerror=reject;getBlobReq.onsuccess=function(e){var storedBlob=e.target.result;var url=URL.createObjectURL(storedBlob);utils.ajax({url:url,cache:true,binary:true},function(err,res){if(err&&err.status===405){resolve(true)}else{resolve(!!(res&&res.type==="image/png"));if(err&&err.status===404){utils.explain404("PouchDB is just detecting blob URL support.")}}URL.revokeObjectURL(url)})}}}).catch(function(){return false})}module.exports=checkBlobSupport},{"../../utils":307,"./idb-constants":276}],275:[function(require,module,exports){"use strict";var utils=require("../../utils");var errors=require("../../deps/errors");var idbUtils=require("./idb-utils");var idbConstants=require("./idb-constants");var ATTACH_AND_SEQ_STORE=idbConstants.ATTACH_AND_SEQ_STORE;var ATTACH_STORE=idbConstants.ATTACH_STORE;var BY_SEQ_STORE=idbConstants.BY_SEQ_STORE;var DOC_STORE=idbConstants.DOC_STORE;var LOCAL_STORE=idbConstants.LOCAL_STORE;var META_STORE=idbConstants.META_STORE;var compactRevs=idbUtils.compactRevs;var decodeMetadata=idbUtils.decodeMetadata;var encodeMetadata=idbUtils.encodeMetadata;var idbError=idbUtils.idbError;var openTransactionSafely=idbUtils.openTransactionSafely;function idbBulkDocs(req,opts,api,idb,Changes,callback){var docInfos=req.docs;var txn;var docStore;var bySeqStore;var attachStore;var attachAndSeqStore;var docInfoError;var docCountDelta=0;for(var i=0,len=docInfos.length;i<len;i++){var doc=docInfos[i];if(doc._id&&utils.isLocalId(doc._id)){continue}doc=docInfos[i]=utils.parseDoc(doc,opts.new_edits);if(doc.error&&!docInfoError){docInfoError=doc}}if(docInfoError){return callback(docInfoError)}var results=new Array(docInfos.length);var fetchedDocs=new utils.Map;var preconditionErrored=false;var blobType=api._meta.blobSupport?"blob":"base64";utils.preprocessAttachments(docInfos,blobType,function(err){if(err){return callback(err)}startTransaction()});function startTransaction(){var stores=[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,META_STORE,LOCAL_STORE,ATTACH_AND_SEQ_STORE];var txnResult=openTransactionSafely(idb,stores,"readwrite");if(txnResult.error){return callback(txnResult.error)}txn=txnResult.txn;txn.onerror=idbError(callback);txn.ontimeout=idbError(callback);txn.oncomplete=complete;docStore=txn.objectStore(DOC_STORE);bySeqStore=txn.objectStore(BY_SEQ_STORE);attachStore=txn.objectStore(ATTACH_STORE);attachAndSeqStore=txn.objectStore(ATTACH_AND_SEQ_STORE);verifyAttachments(function(err){if(err){preconditionErrored=true;return callback(err)}fetchExistingDocs()})}function processDocs(){utils.processDocs(docInfos,api,fetchedDocs,txn,results,writeDoc,opts)}function fetchExistingDocs(){if(!docInfos.length){return}var numFetched=0;function checkDone(){if(++numFetched===docInfos.length){processDocs()}}function readMetadata(event){var metadata=decodeMetadata(event.target.result);if(metadata){fetchedDocs.set(metadata.id,metadata)}checkDone()}for(var i=0,len=docInfos.length;i<len;i++){var docInfo=docInfos[i];if(docInfo._id&&utils.isLocalId(docInfo._id)){checkDone();continue}var req=docStore.get(docInfo.metadata.id);req.onsuccess=readMetadata}}function complete(){if(preconditionErrored){return}Changes.notify(api._meta.name);api._meta.docCount+=docCountDelta;callback(null,results)}function verifyAttachment(digest,callback){var req=attachStore.get(digest);req.onsuccess=function(e){if(!e.target.result){var err=errors.error(errors.MISSING_STUB,"unknown stub attachment with digest "+digest);err.status=412;callback(err)}else{callback()}}}function verifyAttachments(finish){var digests=[];docInfos.forEach(function(docInfo){if(docInfo.data&&docInfo.data._attachments){Object.keys(docInfo.data._attachments).forEach(function(filename){var att=docInfo.data._attachments[filename];if(att.stub){digests.push(att.digest)}})}});if(!digests.length){return finish()}var numDone=0;var err;function checkDone(){if(++numDone===digests.length){finish(err)}}digests.forEach(function(digest){verifyAttachment(digest,function(attErr){if(attErr&&!err){err=attErr}checkDone()})})}function writeDoc(docInfo,winningRev,winningRevIsDeleted,newRevIsDeleted,isUpdate,delta,resultsIdx,callback){docCountDelta+=delta;var doc=docInfo.data;doc._id=docInfo.metadata.id;doc._rev=docInfo.metadata.rev;if(newRevIsDeleted){doc._deleted=true}var hasAttachments=doc._attachments&&Object.keys(doc._attachments).length;if(hasAttachments){return writeAttachments(docInfo,winningRev,winningRevIsDeleted,isUpdate,resultsIdx,callback)}finishDoc(docInfo,winningRev,winningRevIsDeleted,isUpdate,resultsIdx,callback)}function autoCompact(docInfo){var revsToDelete=utils.compactTree(docInfo.metadata);compactRevs(revsToDelete,docInfo.metadata.id,txn)}function finishDoc(docInfo,winningRev,winningRevIsDeleted,isUpdate,resultsIdx,callback){var doc=docInfo.data;var metadata=docInfo.metadata;doc._doc_id_rev=metadata.id+"::"+metadata.rev;delete doc._id;delete doc._rev;function afterPutDoc(e){if(isUpdate&&api.auto_compaction){autoCompact(docInfo)}metadata.seq=e.target.result;delete metadata.rev;var metadataToStore=encodeMetadata(metadata,winningRev,winningRevIsDeleted);var metaDataReq=docStore.put(metadataToStore);metaDataReq.onsuccess=afterPutMetadata}function afterPutDocError(e){e.preventDefault();e.stopPropagation();var index=bySeqStore.index("_doc_id_rev");var getKeyReq=index.getKey(doc._doc_id_rev);getKeyReq.onsuccess=function(e){var putReq=bySeqStore.put(doc,e.target.result);putReq.onsuccess=afterPutDoc}}function afterPutMetadata(){results[resultsIdx]={ok:true,id:metadata.id,rev:winningRev};fetchedDocs.set(docInfo.metadata.id,docInfo.metadata);insertAttachmentMappings(docInfo,metadata.seq,callback)}var putReq=bySeqStore.put(doc);putReq.onsuccess=afterPutDoc;putReq.onerror=afterPutDocError}function writeAttachments(docInfo,winningRev,winningRevIsDeleted,isUpdate,resultsIdx,callback){var doc=docInfo.data;var numDone=0;var attachments=Object.keys(doc._attachments);function collectResults(){if(numDone===attachments.length){finishDoc(docInfo,winningRev,winningRevIsDeleted,isUpdate,resultsIdx,callback)}}function attachmentSaved(){numDone++;collectResults()}attachments.forEach(function(key){var att=docInfo.data._attachments[key];if(!att.stub){var data=att.data;delete att.data;var digest=att.digest;saveAttachment(digest,data,attachmentSaved)}else{numDone++;collectResults()}})}function insertAttachmentMappings(docInfo,seq,callback){var attsAdded=0;var attsToAdd=Object.keys(docInfo.data._attachments||{});if(!attsToAdd.length){return callback()}function checkDone(){if(++attsAdded===attsToAdd.length){callback()}}function add(att){var digest=docInfo.data._attachments[att].digest;var req=attachAndSeqStore.put({seq:seq,digestSeq:digest+"::"+seq});req.onsuccess=checkDone;req.onerror=function(e){e.preventDefault();e.stopPropagation();checkDone()}}for(var i=0;i<attsToAdd.length;i++){add(attsToAdd[i])}}function saveAttachment(digest,data,callback){var getKeyReq=attachStore.count(digest);getKeyReq.onsuccess=function(e){var count=e.target.result;if(count){return callback()}var newAtt={digest:digest,body:data};var putReq=attachStore.put(newAtt);putReq.onsuccess=callback}}}module.exports=idbBulkDocs},{"../../deps/errors":289,"../../utils":307,"./idb-constants":276,"./idb-utils":277}],276:[function(require,module,exports){"use strict";exports.ADAPTER_VERSION=5;exports.DOC_STORE="document-store";exports.BY_SEQ_STORE="by-sequence";exports.ATTACH_STORE="attach-store";exports.ATTACH_AND_SEQ_STORE="attach-seq-store";exports.META_STORE="meta-store";exports.LOCAL_STORE="local-store";exports.DETECT_BLOB_SUPPORT_STORE="detect-blob-support"},{}],277:[function(require,module,exports){(function(process){"use strict";var errors=require("../../deps/errors");var utils=require("../../utils");var constants=require("./idb-constants");function tryCode(fun,that,args){try{fun.apply(that,args)}catch(err){if(typeof PouchDB!=="undefined"){PouchDB.emit("error",err)}}}exports.taskQueue={running:false,queue:[]};exports.applyNext=function(){if(exports.taskQueue.running||!exports.taskQueue.queue.length){return}exports.taskQueue.running=true;var item=exports.taskQueue.queue.shift();item.action(function(err,res){tryCode(item.callback,this,[err,res]);exports.taskQueue.running=false;process.nextTick(exports.applyNext)})};exports.idbError=function(callback){return function(event){var message=event.target&&event.target.error&&event.target.error.name||event.target;callback(errors.error(errors.IDB_ERROR,message,event.type))}};exports.encodeMetadata=function(metadata,winningRev,deleted){return{data:utils.safeJsonStringify(metadata),winningRev:winningRev,deletedOrLocal:deleted?"1":"0",seq:metadata.seq,id:metadata.id}};exports.decodeMetadata=function(storedObject){if(!storedObject){return null}var metadata=utils.safeJsonParse(storedObject.data);metadata.winningRev=storedObject.winningRev;metadata.deleted=storedObject.deletedOrLocal==="1";metadata.seq=storedObject.seq;return metadata};exports.decodeDoc=function(doc){if(!doc){return doc}var idx=utils.lastIndexOf(doc._doc_id_rev,":");doc._id=doc._doc_id_rev.substring(0,idx-1);doc._rev=doc._doc_id_rev.substring(idx+1);delete doc._doc_id_rev;return doc};exports.readBlobData=function(body,type,encode,callback){if(encode){if(!body){callback("")}else if(typeof body!=="string"){utils.readAsBinaryString(body,function(binary){callback(utils.btoa(binary))})}else{callback(body)}}else{if(!body){callback(utils.createBlob([""],{type:type}))}else if(typeof body!=="string"){callback(body)}else{body=utils.fixBinary(atob(body));callback(utils.createBlob([body],{type:type}))}}};exports.fetchAttachmentsIfNecessary=function(doc,opts,txn,cb){var attachments=Object.keys(doc._attachments||{});if(!attachments.length){return cb&&cb()}var numDone=0;function checkDone(){if(++numDone===attachments.length&&cb){cb()}}function fetchAttachment(doc,att){var attObj=doc._attachments[att];var digest=attObj.digest;var req=txn.objectStore(constants.ATTACH_STORE).get(digest);req.onsuccess=function(e){attObj.body=e.target.result.body;checkDone()}}attachments.forEach(function(att){if(opts.attachments&&opts.include_docs){fetchAttachment(doc,att)}else{doc._attachments[att].stub=true;checkDone()}})};exports.postProcessAttachments=function(results){return utils.Promise.all(results.map(function(row){if(row.doc&&row.doc._attachments){var attNames=Object.keys(row.doc._attachments);return utils.Promise.all(attNames.map(function(att){var attObj=row.doc._attachments[att];if(!("body"in attObj)){return}var body=attObj.body;var type=attObj.content_type;return new utils.Promise(function(resolve){exports.readBlobData(body,type,true,function(base64){row.doc._attachments[att]=utils.extend(utils.pick(attObj,["digest","content_type"]),{data:base64});resolve()})})}))}}))};exports.compactRevs=function(revs,docId,txn){var possiblyOrphanedDigests=[];var seqStore=txn.objectStore(constants.BY_SEQ_STORE);var attStore=txn.objectStore(constants.ATTACH_STORE);var attAndSeqStore=txn.objectStore(constants.ATTACH_AND_SEQ_STORE);var count=revs.length;function checkDone(){count--;if(!count){deleteOrphanedAttachments()}}function deleteOrphanedAttachments(){if(!possiblyOrphanedDigests.length){return}possiblyOrphanedDigests.forEach(function(digest){var countReq=attAndSeqStore.index("digestSeq").count(IDBKeyRange.bound(digest+"::",digest+"::￿",false,false));countReq.onsuccess=function(e){var count=e.target.result;if(!count){attStore.delete(digest)}}})}revs.forEach(function(rev){var index=seqStore.index("_doc_id_rev");var key=docId+"::"+rev;index.getKey(key).onsuccess=function(e){var seq=e.target.result;if(typeof seq!=="number"){return checkDone()}seqStore.delete(seq);var cursor=attAndSeqStore.index("seq").openCursor(IDBKeyRange.only(seq));cursor.onsuccess=function(event){var cursor=event.target.result;if(cursor){var digest=cursor.value.digestSeq.split("::")[0];possiblyOrphanedDigests.push(digest);attAndSeqStore.delete(cursor.primaryKey);cursor.continue()}else{checkDone()}}}})};exports.openTransactionSafely=function(idb,stores,mode){try{return{txn:idb.transaction(stores,mode)}}catch(err){return{error:err}}}}).call(this,require("_process"))},{"../../deps/errors":289,"../../utils":307,"./idb-constants":276,_process:35}],278:[function(require,module,exports){(function(process){"use strict";var utils=require("../../utils");var merge=require("../../merge");var errors=require("../../deps/errors");var idbUtils=require("./idb-utils");var idbConstants=require("./idb-constants");var idbBulkDocs=require("./idb-bulk-docs");var idbAllDocs=require("./idb-all-docs");var checkBlobSupport=require("./idb-blob-support");var ADAPTER_VERSION=idbConstants.ADAPTER_VERSION;var ATTACH_AND_SEQ_STORE=idbConstants.ATTACH_AND_SEQ_STORE;var ATTACH_STORE=idbConstants.ATTACH_STORE;var BY_SEQ_STORE=idbConstants.BY_SEQ_STORE;var DETECT_BLOB_SUPPORT_STORE=idbConstants.DETECT_BLOB_SUPPORT_STORE;var DOC_STORE=idbConstants.DOC_STORE;var LOCAL_STORE=idbConstants.LOCAL_STORE;var META_STORE=idbConstants.META_STORE;var applyNext=idbUtils.applyNext;var compactRevs=idbUtils.compactRevs;var decodeDoc=idbUtils.decodeDoc;var decodeMetadata=idbUtils.decodeMetadata;var encodeMetadata=idbUtils.encodeMetadata;var fetchAttachmentsIfNecessary=idbUtils.fetchAttachmentsIfNecessary;var idbError=idbUtils.idbError;var postProcessAttachments=idbUtils.postProcessAttachments;var readBlobData=idbUtils.readBlobData;var taskQueue=idbUtils.taskQueue;var openTransactionSafely=idbUtils.openTransactionSafely;var cachedDBs={};var blobSupportPromise;function IdbPouch(opts,callback){var api=this;taskQueue.queue.push({action:function(thisCallback){init(api,opts,thisCallback)},callback:callback});applyNext()}function init(api,opts,callback){var dbName=opts.name;var idb=null;api._meta=null;function createSchema(db){var docStore=db.createObjectStore(DOC_STORE,{keyPath:"id"});db.createObjectStore(BY_SEQ_STORE,{autoIncrement:true}).createIndex("_doc_id_rev","_doc_id_rev",{unique:true});db.createObjectStore(ATTACH_STORE,{keyPath:"digest"});db.createObjectStore(META_STORE,{keyPath:"id",autoIncrement:false});db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);docStore.createIndex("deletedOrLocal","deletedOrLocal",{unique:false});db.createObjectStore(LOCAL_STORE,{keyPath:"_id"});var attAndSeqStore=db.createObjectStore(ATTACH_AND_SEQ_STORE,{autoIncrement:true});attAndSeqStore.createIndex("seq","seq");attAndSeqStore.createIndex("digestSeq","digestSeq",{unique:true})}function addDeletedOrLocalIndex(txn,callback){var docStore=txn.objectStore(DOC_STORE);docStore.createIndex("deletedOrLocal","deletedOrLocal",{unique:false});docStore.openCursor().onsuccess=function(event){var cursor=event.target.result;if(cursor){var metadata=cursor.value;var deleted=utils.isDeleted(metadata);metadata.deletedOrLocal=deleted?"1":"0";docStore.put(metadata);cursor.continue()}else{callback()}}}function createLocalStoreSchema(db){db.createObjectStore(LOCAL_STORE,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:true})}function migrateLocalStore(txn,cb){var localStore=txn.objectStore(LOCAL_STORE);var docStore=txn.objectStore(DOC_STORE);var seqStore=txn.objectStore(BY_SEQ_STORE);var cursor=docStore.openCursor();cursor.onsuccess=function(event){var cursor=event.target.result;if(cursor){var metadata=cursor.value;var docId=metadata.id;var local=utils.isLocalId(docId);var rev=merge.winningRev(metadata);if(local){var docIdRev=docId+"::"+rev;var start=docId+"::";var end=docId+"::~";var index=seqStore.index("_doc_id_rev");var range=IDBKeyRange.bound(start,end,false,false);var seqCursor=index.openCursor(range);seqCursor.onsuccess=function(e){seqCursor=e.target.result;if(!seqCursor){docStore.delete(cursor.primaryKey);cursor.continue()}else{var data=seqCursor.value;if(data._doc_id_rev===docIdRev){localStore.put(data)}seqStore.delete(seqCursor.primaryKey);seqCursor.continue()}}}else{cursor.continue()}}else if(cb){cb()}}}function addAttachAndSeqStore(db){var attAndSeqStore=db.createObjectStore(ATTACH_AND_SEQ_STORE,{autoIncrement:true});attAndSeqStore.createIndex("seq","seq");attAndSeqStore.createIndex("digestSeq","digestSeq",{unique:true})}function migrateAttsAndSeqs(txn,callback){var seqStore=txn.objectStore(BY_SEQ_STORE);var attStore=txn.objectStore(ATTACH_STORE);var attAndSeqStore=txn.objectStore(ATTACH_AND_SEQ_STORE);var req=attStore.count();req.onsuccess=function(e){var count=e.target.result;if(!count){return callback()}seqStore.openCursor().onsuccess=function(e){var cursor=e.target.result;if(!cursor){return callback()}var doc=cursor.value;var seq=cursor.primaryKey;var atts=Object.keys(doc._attachments||{});var digestMap={};for(var j=0;j<atts.length;j++){var att=doc._attachments[atts[j]];digestMap[att.digest]=true}var digests=Object.keys(digestMap);for(j=0;j<digests.length;j++){var digest=digests[j];attAndSeqStore.put({seq:seq,digestSeq:digest+"::"+seq})}cursor.continue()}}}function migrateMetadata(txn){function decodeMetadataCompat(storedObject){if(!storedObject.data){storedObject.deleted=storedObject.deletedOrLocal==="1";return storedObject}return decodeMetadata(storedObject)}var bySeqStore=txn.objectStore(BY_SEQ_STORE);var docStore=txn.objectStore(DOC_STORE);var cursor=docStore.openCursor();cursor.onsuccess=function(e){var cursor=e.target.result;if(!cursor){return}var metadata=decodeMetadataCompat(cursor.value);metadata.winningRev=metadata.winningRev||merge.winningRev(metadata);function fetchMetadataSeq(){var start=metadata.id+"::";var end=metadata.id+"::￿";var req=bySeqStore.index("_doc_id_rev").openCursor(IDBKeyRange.bound(start,end));var metadataSeq=0;req.onsuccess=function(e){var cursor=e.target.result;if(!cursor){metadata.seq=metadataSeq;return onGetMetadataSeq()}var seq=cursor.primaryKey;if(seq>metadataSeq){metadataSeq=seq}cursor.continue()}}function onGetMetadataSeq(){var metadataToStore=encodeMetadata(metadata,metadata.winningRev,metadata.deleted);var req=docStore.put(metadataToStore);req.onsuccess=function(){cursor.continue()}}if(metadata.seq){return onGetMetadataSeq()}fetchMetadataSeq()}}api.type=function(){return"idb"};api._id=utils.toPromise(function(callback){callback(null,api._meta.instanceId)});api._bulkDocs=function idb_bulkDocs(req,opts,callback){idbBulkDocs(req,opts,api,idb,IdbPouch.Changes,callback)};api._get=function idb_get(id,opts,callback){var doc;var metadata;var err;var txn;opts=utils.clone(opts);if(opts.ctx){txn=opts.ctx}else{var txnResult=openTransactionSafely(idb,[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly");if(txnResult.error){return callback(txnResult.error)}txn=txnResult.txn}function finish(){callback(err,{doc:doc,metadata:metadata,ctx:txn})}txn.objectStore(DOC_STORE).get(id).onsuccess=function(e){metadata=decodeMetadata(e.target.result);if(!metadata){err=errors.error(errors.MISSING_DOC,"missing");return finish()}if(utils.isDeleted(metadata)&&!opts.rev){err=errors.error(errors.MISSING_DOC,"deleted");return finish()}var objectStore=txn.objectStore(BY_SEQ_STORE);var rev=opts.rev||metadata.winningRev;var key=metadata.id+"::"+rev;objectStore.index("_doc_id_rev").get(key).onsuccess=function(e){doc=e.target.result;if(doc){doc=decodeDoc(doc)}if(!doc){err=errors.error(errors.MISSING_DOC,"missing");return finish()}finish()}}};api._getAttachment=function(attachment,opts,callback){var txn;opts=utils.clone(opts);if(opts.ctx){txn=opts.ctx}else{var txnResult=openTransactionSafely(idb,[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly");if(txnResult.error){return callback(txnResult.error)}txn=txnResult.txn}var digest=attachment.digest;var type=attachment.content_type;txn.objectStore(ATTACH_STORE).get(digest).onsuccess=function(e){var body=e.target.result.body;readBlobData(body,type,opts.encode,function(blobData){callback(null,blobData)})}};api._info=function idb_info(callback){if(idb===null||!cachedDBs[dbName]){var error=new Error("db isn't open");error.id="idbNull";return callback(error)}var updateSeq;var docCount;var txnResult=openTransactionSafely(idb,[BY_SEQ_STORE],"readonly");if(txnResult.error){return callback(txnResult.error)}var txn=txnResult.txn;var cursor=txn.objectStore(BY_SEQ_STORE).openCursor(null,"prev");cursor.onsuccess=function(event){var cursor=event.target.result;updateSeq=cursor?cursor.key:0;docCount=api._meta.docCount};txn.oncomplete=function(){callback(null,{doc_count:docCount,update_seq:updateSeq,idb_attachment_format:api._meta.blobSupport?"binary":"base64"})}};api._allDocs=function idb_allDocs(opts,callback){idbAllDocs(opts,api,idb,callback)};api._changes=function(opts){opts=utils.clone(opts);if(opts.continuous){var id=dbName+":"+utils.uuid();IdbPouch.Changes.addListener(dbName,id,api,opts);IdbPouch.Changes.notify(dbName);return{cancel:function(){IdbPouch.Changes.removeListener(dbName,id)}}}var docIds=opts.doc_ids&&new utils.Set(opts.doc_ids);var descending=opts.descending?"prev":null;opts.since=opts.since||0;var lastSeq=opts.since;var limit="limit"in opts?opts.limit:-1;if(limit===0){limit=1}var returnDocs;if("returnDocs"in opts){returnDocs=opts.returnDocs}else{returnDocs=true}var results=[];var numResults=0;var filter=utils.filterChange(opts);var docIdsToMetadata=new utils.Map;var txn;var bySeqStore;var docStore;function onGetCursor(cursor){var doc=decodeDoc(cursor.value);var seq=cursor.key;if(docIds&&!docIds.has(doc._id)){return cursor.continue()}var metadata;function onGetMetadata(){if(metadata.seq!==seq){return cursor.continue()}lastSeq=seq;if(metadata.winningRev===doc._rev){return onGetWinningDoc(doc)}fetchWinningDoc()}function fetchWinningDoc(){var docIdRev=doc._id+"::"+metadata.winningRev;var req=bySeqStore.index("_doc_id_rev").openCursor(IDBKeyRange.bound(docIdRev,docIdRev+"￿"));req.onsuccess=function(e){onGetWinningDoc(decodeDoc(e.target.result.value))}}function onGetWinningDoc(winningDoc){var change=opts.processChange(winningDoc,metadata,opts);change.seq=metadata.seq;if(filter(change)){numResults++;if(returnDocs){results.push(change)}if(opts.attachments&&opts.include_docs){fetchAttachmentsIfNecessary(winningDoc,opts,txn,function(){postProcessAttachments([change]).then(function(){opts.onChange(change)})})}else{opts.onChange(change)}}if(numResults!==limit){cursor.continue()}}metadata=docIdsToMetadata.get(doc._id);if(metadata){return onGetMetadata()}docStore.get(doc._id).onsuccess=function(event){metadata=decodeMetadata(event.target.result);docIdsToMetadata.set(doc._id,metadata);onGetMetadata()}}function onsuccess(event){var cursor=event.target.result;if(!cursor){return}onGetCursor(cursor)}function fetchChanges(){var objectStores=[DOC_STORE,BY_SEQ_STORE];if(opts.attachments){objectStores.push(ATTACH_STORE)}var txnResult=openTransactionSafely(idb,objectStores,"readonly");if(txnResult.error){return opts.complete(txnResult.error)}txn=txnResult.txn;txn.onerror=idbError(opts.complete);txn.oncomplete=onTxnComplete;bySeqStore=txn.objectStore(BY_SEQ_STORE);docStore=txn.objectStore(DOC_STORE);var req;if(descending){req=bySeqStore.openCursor(null,descending)}else{req=bySeqStore.openCursor(IDBKeyRange.lowerBound(opts.since,true))}req.onsuccess=onsuccess}fetchChanges();function onTxnComplete(){function finish(){opts.complete(null,{results:results,last_seq:lastSeq})}if(!opts.continuous&&opts.attachments){postProcessAttachments(results).then(finish)}else{finish()}}};api._close=function(callback){if(idb===null){return callback(errors.error(errors.NOT_OPEN))}idb.close();delete cachedDBs[dbName];idb=null;callback()};api._getRevisionTree=function(docId,callback){var txnResult=openTransactionSafely(idb,[DOC_STORE],"readonly");if(txnResult.error){return callback(txnResult.error)}var txn=txnResult.txn;var req=txn.objectStore(DOC_STORE).get(docId);req.onsuccess=function(event){var doc=decodeMetadata(event.target.result);if(!doc){callback(errors.error(errors.MISSING_DOC))}else{callback(null,doc.rev_tree)}}};api._doCompaction=function(docId,revs,callback){var stores=[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,ATTACH_AND_SEQ_STORE];var txnResult=openTransactionSafely(idb,stores,"readwrite");if(txnResult.error){return callback(txnResult.error)}var txn=txnResult.txn;var docStore=txn.objectStore(DOC_STORE);docStore.get(docId).onsuccess=function(event){var metadata=decodeMetadata(event.target.result);merge.traverseRevTree(metadata.rev_tree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+"-"+revHash;if(revs.indexOf(rev)!==-1){opts.status="missing"}});compactRevs(revs,docId,txn);var winningRev=metadata.winningRev;var deleted=metadata.deleted;txn.objectStore(DOC_STORE).put(encodeMetadata(metadata,winningRev,deleted))};txn.onerror=idbError(callback);txn.oncomplete=function(){utils.call(callback)}};api._getLocal=function(id,callback){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],"readonly");if(txnResult.error){return callback(txnResult.error)}var tx=txnResult.txn;var req=tx.objectStore(LOCAL_STORE).get(id);req.onerror=idbError(callback);req.onsuccess=function(e){var doc=e.target.result;

if(!doc){callback(errors.error(errors.MISSING_DOC))}else{delete doc["_doc_id_rev"];callback(null,doc)}}};api._putLocal=function(doc,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}delete doc._revisions;var oldRev=doc._rev;var id=doc._id;if(!oldRev){doc._rev="0-1"}else{doc._rev="0-"+(parseInt(oldRev.split("-")[1],10)+1)}var tx=opts.ctx;var ret;if(!tx){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],"readwrite");if(txnResult.error){return callback(txnResult.error)}tx=txnResult.txn;tx.onerror=idbError(callback);tx.oncomplete=function(){if(ret){callback(null,ret)}}}var oStore=tx.objectStore(LOCAL_STORE);var req;if(oldRev){req=oStore.get(id);req.onsuccess=function(e){var oldDoc=e.target.result;if(!oldDoc||oldDoc._rev!==oldRev){callback(errors.error(errors.REV_CONFLICT))}else{var req=oStore.put(doc);req.onsuccess=function(){ret={ok:true,id:doc._id,rev:doc._rev};if(opts.ctx){callback(null,ret)}}}}}else{req=oStore.add(doc);req.onerror=function(e){callback(errors.error(errors.REV_CONFLICT));e.preventDefault();e.stopPropagation()};req.onsuccess=function(){ret={ok:true,id:doc._id,rev:doc._rev};if(opts.ctx){callback(null,ret)}}}};api._removeLocal=function(doc,callback){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],"readwrite");if(txnResult.error){return callback(txnResult.error)}var tx=txnResult.txn;var ret;tx.oncomplete=function(){if(ret){callback(null,ret)}};var id=doc._id;var oStore=tx.objectStore(LOCAL_STORE);var req=oStore.get(id);req.onerror=idbError(callback);req.onsuccess=function(e){var oldDoc=e.target.result;if(!oldDoc||oldDoc._rev!==doc._rev){callback(errors.error(errors.MISSING_DOC))}else{oStore.delete(id);ret={ok:true,id:id,rev:"0-0"}}}};api._destroy=function(callback){IdbPouch.Changes.removeAllListeners(dbName);if(IdbPouch.openReqList[dbName]&&IdbPouch.openReqList[dbName].result){IdbPouch.openReqList[dbName].result.close();delete cachedDBs[dbName]}var req=indexedDB.deleteDatabase(dbName);req.onsuccess=function(){if(IdbPouch.openReqList[dbName]){IdbPouch.openReqList[dbName]=null}if(utils.hasLocalStorage()&&dbName in localStorage){delete localStorage[dbName]}callback(null,{ok:true})};req.onerror=idbError(callback)};var cached=cachedDBs[dbName];if(cached){idb=cached.idb;api._meta=cached.global;process.nextTick(function(){callback(null,api)});return}var req=indexedDB.open(dbName,ADAPTER_VERSION);if(!("openReqList"in IdbPouch)){IdbPouch.openReqList={}}IdbPouch.openReqList[dbName]=req;req.onupgradeneeded=function(e){var db=e.target.result;if(e.oldVersion<1){return createSchema(db)}var txn=e.currentTarget.transaction;if(e.oldVersion<3){createLocalStoreSchema(db)}if(e.oldVersion<4){addAttachAndSeqStore(db)}var migrations=[addDeletedOrLocalIndex,migrateLocalStore,migrateAttsAndSeqs,migrateMetadata];var i=e.oldVersion;function next(){var migration=migrations[i-1];i++;if(migration){migration(txn,next)}}next()};req.onsuccess=function(e){idb=e.target.result;idb.onversionchange=function(){idb.close();delete cachedDBs[dbName]};idb.onabort=function(){idb.close();delete cachedDBs[dbName]};var txn=idb.transaction([META_STORE,DETECT_BLOB_SUPPORT_STORE,DOC_STORE],"readwrite");var req=txn.objectStore(META_STORE).get(META_STORE);var blobSupport=null;var docCount=null;var instanceId=null;req.onsuccess=function(e){var checkSetupComplete=function(){if(blobSupport===null||docCount===null||instanceId===null){return}else{api._meta={name:dbName,instanceId:instanceId,blobSupport:blobSupport,docCount:docCount};cachedDBs[dbName]={idb:idb,global:api._meta};callback(null,api)}};var meta=e.target.result||{id:META_STORE};if(dbName+"_id"in meta){instanceId=meta[dbName+"_id"];checkSetupComplete()}else{instanceId=utils.uuid();meta[dbName+"_id"]=instanceId;txn.objectStore(META_STORE).put(meta).onsuccess=function(){checkSetupComplete()}}if(!blobSupportPromise){blobSupportPromise=checkBlobSupport(txn,idb)}blobSupportPromise.then(function(val){blobSupport=val;checkSetupComplete()});var index=txn.objectStore(DOC_STORE).index("deletedOrLocal");index.count(IDBKeyRange.only("0")).onsuccess=function(e){docCount=e.target.result;checkSetupComplete()}}};req.onerror=idbError(callback)}IdbPouch.valid=function(){var isSafari=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!isSafari&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"};IdbPouch.Changes=new utils.Changes;module.exports=IdbPouch}).call(this,require("_process"))},{"../../deps/errors":289,"../../merge":302,"../../utils":307,"./idb-all-docs":273,"./idb-blob-support":274,"./idb-bulk-docs":275,"./idb-constants":276,"./idb-utils":277,_process:35}],279:[function(require,module,exports){"use strict";var utils=require("../../utils");var errors=require("../../deps/errors");var websqlUtils=require("./websql-utils");var websqlConstants=require("./websql-constants");var DOC_STORE=websqlConstants.DOC_STORE;var BY_SEQ_STORE=websqlConstants.BY_SEQ_STORE;var ATTACH_STORE=websqlConstants.ATTACH_STORE;var ATTACH_AND_SEQ_STORE=websqlConstants.ATTACH_AND_SEQ_STORE;var select=websqlUtils.select;var stringifyDoc=websqlUtils.stringifyDoc;var compactRevs=websqlUtils.compactRevs;var unknownError=websqlUtils.unknownError;function websqlBulkDocs(req,opts,api,db,Changes,callback){var newEdits=opts.new_edits;var userDocs=req.docs;var docInfos=userDocs.map(function(doc){if(doc._id&&utils.isLocalId(doc._id)){return doc}var newDoc=utils.parseDoc(doc,newEdits);return newDoc});var docInfoErrors=docInfos.filter(function(docInfo){return docInfo.error});if(docInfoErrors.length){return callback(docInfoErrors[0])}var tx;var results=new Array(docInfos.length);var fetchedDocs=new utils.Map;var preconditionErrored;function complete(){if(preconditionErrored){return callback(preconditionErrored)}Changes.notify(api._name);api._docCount=-1;callback(null,results)}function verifyAttachment(digest,callback){var sql="SELECT count(*) as cnt FROM "+ATTACH_STORE+" WHERE digest=?";tx.executeSql(sql,[digest],function(tx,result){if(result.rows.item(0).cnt===0){var err=errors.error(errors.MISSING_STUB,"unknown stub attachment with digest "+digest);callback(err)}else{callback()}})}function verifyAttachments(finish){var digests=[];docInfos.forEach(function(docInfo){if(docInfo.data&&docInfo.data._attachments){Object.keys(docInfo.data._attachments).forEach(function(filename){var att=docInfo.data._attachments[filename];if(att.stub){digests.push(att.digest)}})}});if(!digests.length){return finish()}var numDone=0;var err;function checkDone(){if(++numDone===digests.length){finish(err)}}digests.forEach(function(digest){verifyAttachment(digest,function(attErr){if(attErr&&!err){err=attErr}checkDone()})})}function writeDoc(docInfo,winningRev,winningRevIsDeleted,newRevIsDeleted,isUpdate,delta,resultsIdx,callback){function finish(){var data=docInfo.data;var deletedInt=newRevIsDeleted?1:0;var id=data._id;var rev=data._rev;var json=stringifyDoc(data);var sql="INSERT INTO "+BY_SEQ_STORE+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);";var sqlArgs=[id,rev,json,deletedInt];function insertAttachmentMappings(seq,callback){var attsAdded=0;var attsToAdd=Object.keys(data._attachments||{});if(!attsToAdd.length){return callback()}function checkDone(){if(++attsAdded===attsToAdd.length){callback()}return false}function add(att){var sql="INSERT INTO "+ATTACH_AND_SEQ_STORE+" (digest, seq) VALUES (?,?)";var sqlArgs=[data._attachments[att].digest,seq];tx.executeSql(sql,sqlArgs,checkDone,checkDone)}for(var i=0;i<attsToAdd.length;i++){add(attsToAdd[i])}}tx.executeSql(sql,sqlArgs,function(tx,result){var seq=result.insertId;insertAttachmentMappings(seq,function(){dataWritten(tx,seq)})},function(){var fetchSql=select("seq",BY_SEQ_STORE,null,"doc_id=? AND rev=?");tx.executeSql(fetchSql,[id,rev],function(tx,res){var seq=res.rows.item(0).seq;var sql="UPDATE "+BY_SEQ_STORE+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;";var sqlArgs=[json,deletedInt,id,rev];tx.executeSql(sql,sqlArgs,function(tx){insertAttachmentMappings(seq,function(){dataWritten(tx,seq)})})});return false})}function collectResults(attachmentErr){if(!err){if(attachmentErr){err=attachmentErr;callback(err)}else if(recv===attachments.length){finish()}}}var err=null;var recv=0;docInfo.data._id=docInfo.metadata.id;docInfo.data._rev=docInfo.metadata.rev;var attachments=Object.keys(docInfo.data._attachments||{});if(newRevIsDeleted){docInfo.data._deleted=true}function attachmentSaved(err){recv++;collectResults(err)}attachments.forEach(function(key){var att=docInfo.data._attachments[key];if(!att.stub){var data=att.data;delete att.data;var digest=att.digest;saveAttachment(digest,data,attachmentSaved)}else{recv++;collectResults()}});if(!attachments.length){finish()}function autoCompact(){if(!isUpdate||!api.auto_compaction){return}var id=docInfo.metadata.id;var revsToDelete=utils.compactTree(docInfo.metadata);compactRevs(revsToDelete,id,tx)}function dataWritten(tx,seq){autoCompact();docInfo.metadata.seq=seq;delete docInfo.metadata.rev;var sql=isUpdate?"UPDATE "+DOC_STORE+" SET json=?, max_seq=?, winningseq="+"(SELECT seq FROM "+BY_SEQ_STORE+" WHERE doc_id="+DOC_STORE+".id AND rev=?) WHERE id=?":"INSERT INTO "+DOC_STORE+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);";var metadataStr=utils.safeJsonStringify(docInfo.metadata);var id=docInfo.metadata.id;var params=isUpdate?[metadataStr,seq,winningRev,id]:[id,seq,seq,metadataStr];tx.executeSql(sql,params,function(){results[resultsIdx]={ok:true,id:docInfo.metadata.id,rev:winningRev};fetchedDocs.set(id,docInfo.metadata);callback()})}}function processDocs(){utils.processDocs(docInfos,api,fetchedDocs,tx,results,writeDoc,opts)}function fetchExistingDocs(callback){if(!docInfos.length){return callback()}var numFetched=0;function checkDone(){if(++numFetched===docInfos.length){callback()}}docInfos.forEach(function(docInfo){if(docInfo._id&&utils.isLocalId(docInfo._id)){return checkDone()}var id=docInfo.metadata.id;tx.executeSql("SELECT json FROM "+DOC_STORE+" WHERE id = ?",[id],function(tx,result){if(result.rows.length){var metadata=utils.safeJsonParse(result.rows.item(0).json);fetchedDocs.set(id,metadata)}checkDone()})})}function saveAttachment(digest,data,callback){var sql="SELECT digest FROM "+ATTACH_STORE+" WHERE digest=?";tx.executeSql(sql,[digest],function(tx,result){if(result.rows.length){return callback()}sql="INSERT INTO "+ATTACH_STORE+" (digest, body, escaped) VALUES (?,?,1)";tx.executeSql(sql,[digest,websqlUtils.escapeBlob(data)],function(){callback()},function(){callback();return false})})}utils.preprocessAttachments(docInfos,"binary",function(err){if(err){return callback(err)}db.transaction(function(txn){tx=txn;verifyAttachments(function(err){if(err){preconditionErrored=err}else{fetchExistingDocs(processDocs)}})},unknownError(callback),complete)})}module.exports=websqlBulkDocs},{"../../deps/errors":289,"../../utils":307,"./websql-constants":280,"./websql-utils":281}],280:[function(require,module,exports){"use strict";function quote(str){return"'"+str+"'"}exports.ADAPTER_VERSION=7;exports.DOC_STORE=quote("document-store");exports.BY_SEQ_STORE=quote("by-sequence");exports.ATTACH_STORE=quote("attach-store");exports.LOCAL_STORE=quote("local-store");exports.META_STORE=quote("metadata-store");exports.ATTACH_AND_SEQ_STORE=quote("attach-seq-store")},{}],281:[function(require,module,exports){"use strict";var utils=require("../../utils");var errors=require("../../deps/errors");var websqlConstants=require("./websql-constants");var BY_SEQ_STORE=websqlConstants.BY_SEQ_STORE;var ATTACH_STORE=websqlConstants.ATTACH_STORE;var ATTACH_AND_SEQ_STORE=websqlConstants.ATTACH_AND_SEQ_STORE;function escapeBlob(str){return str.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function unescapeBlob(str){return str.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function stringifyDoc(doc){delete doc._id;delete doc._rev;return JSON.stringify(doc)}function unstringifyDoc(doc,id,rev){doc=JSON.parse(doc);doc._id=id;doc._rev=rev;return doc}function qMarks(num){var s="(";while(num--){s+="?";if(num){s+=","}}return s+")"}function select(selector,table,joiner,where,orderBy){return"SELECT "+selector+" FROM "+(typeof table==="string"?table:table.join(" JOIN "))+(joiner?" ON "+joiner:"")+(where?" WHERE "+(typeof where==="string"?where:where.join(" AND ")):"")+(orderBy?" ORDER BY "+orderBy:"")}function compactRevs(revs,docId,tx){if(!revs.length){return}var numDone=0;var seqs=[];function checkDone(){if(++numDone===revs.length){deleteOrphans()}}function deleteOrphans(){if(!seqs.length){return}var sql="SELECT DISTINCT digest AS digest FROM "+ATTACH_AND_SEQ_STORE+" WHERE seq IN "+qMarks(seqs.length);tx.executeSql(sql,seqs,function(tx,res){var digestsToCheck=[];for(var i=0;i<res.rows.length;i++){digestsToCheck.push(res.rows.item(i).digest)}if(!digestsToCheck.length){return}var sql="DELETE FROM "+ATTACH_AND_SEQ_STORE+" WHERE seq IN ("+seqs.map(function(){return"?"}).join(",")+")";tx.executeSql(sql,seqs,function(tx){var sql="SELECT digest FROM "+ATTACH_AND_SEQ_STORE+" WHERE digest IN ("+digestsToCheck.map(function(){return"?"}).join(",")+")";tx.executeSql(sql,digestsToCheck,function(tx,res){var nonOrphanedDigests=new utils.Set;for(var i=0;i<res.rows.length;i++){nonOrphanedDigests.add(res.rows.item(i).digest)}digestsToCheck.forEach(function(digest){if(nonOrphanedDigests.has(digest)){return}tx.executeSql("DELETE FROM "+ATTACH_AND_SEQ_STORE+" WHERE digest=?",[digest]);tx.executeSql("DELETE FROM "+ATTACH_STORE+" WHERE digest=?",[digest])})})})})}revs.forEach(function(rev){var sql="SELECT seq FROM "+BY_SEQ_STORE+" WHERE doc_id=? AND rev=?";tx.executeSql(sql,[docId,rev],function(tx,res){if(!res.rows.length){return checkDone()}var seq=res.rows.item(0).seq;seqs.push(seq);tx.executeSql("DELETE FROM "+BY_SEQ_STORE+" WHERE seq=?",[seq],checkDone)})})}function unknownError(callback){return function(event){var errorNameMatch=event&&event.constructor.toString().match(/function ([^\(]+)/);var errorName=errorNameMatch&&errorNameMatch[1]||event.type;var errorReason=event.target||event.message;callback(errors.error(errors.WSQ_ERROR,errorReason,errorName))}}function getSize(opts){if("size"in opts){return opts.size*1e6}var isAndroid=/Android/.test(window.navigator.userAgent);return isAndroid?5e6:1}function createOpenDBFunction(){if(typeof sqlitePlugin!=="undefined"){return sqlitePlugin.openDatabase.bind(sqlitePlugin)}if(typeof openDatabase!=="undefined"){return function openDB(opts){return openDatabase(opts.name,opts.version,opts.description,opts.size)}}}var cachedDatabases={};function openDB(opts){var openDBFunction=createOpenDBFunction();var db=cachedDatabases[opts.name];if(!db){db=cachedDatabases[opts.name]=openDBFunction(opts);db._sqlitePlugin=typeof sqlitePlugin!=="undefined"}return db}function valid(){return typeof openDatabase!=="undefined"||typeof SQLitePlugin!=="undefined"}module.exports={escapeBlob:escapeBlob,unescapeBlob:unescapeBlob,stringifyDoc:stringifyDoc,unstringifyDoc:unstringifyDoc,qMarks:qMarks,select:select,compactRevs:compactRevs,unknownError:unknownError,getSize:getSize,openDB:openDB,valid:valid}},{"../../deps/errors":289,"../../utils":307,"./websql-constants":280}],282:[function(require,module,exports){"use strict";var utils=require("../../utils");var merge=require("../../merge");var errors=require("../../deps/errors");var parseHexString=require("../../deps/parse-hex");var websqlConstants=require("./websql-constants");var websqlUtils=require("./websql-utils");var websqlBulkDocs=require("./websql-bulk-docs");var ADAPTER_VERSION=websqlConstants.ADAPTER_VERSION;var DOC_STORE=websqlConstants.DOC_STORE;var BY_SEQ_STORE=websqlConstants.BY_SEQ_STORE;var ATTACH_STORE=websqlConstants.ATTACH_STORE;var LOCAL_STORE=websqlConstants.LOCAL_STORE;var META_STORE=websqlConstants.META_STORE;var ATTACH_AND_SEQ_STORE=websqlConstants.ATTACH_AND_SEQ_STORE;var qMarks=websqlUtils.qMarks;var stringifyDoc=websqlUtils.stringifyDoc;var unstringifyDoc=websqlUtils.unstringifyDoc;var select=websqlUtils.select;var compactRevs=websqlUtils.compactRevs;var unknownError=websqlUtils.unknownError;var getSize=websqlUtils.getSize;var openDB=websqlUtils.openDB;function fetchAttachmentsIfNecessary(doc,opts,api,txn,cb){var attachments=Object.keys(doc._attachments||{});if(!attachments.length){return cb&&cb()}var numDone=0;function checkDone(){if(++numDone===attachments.length&&cb){cb()}}function fetchAttachment(doc,att){var attObj=doc._attachments[att];var attOpts={encode:true,ctx:txn};api._getAttachment(attObj,attOpts,function(_,base64){doc._attachments[att]=utils.extend(utils.pick(attObj,["digest","content_type"]),{data:base64});checkDone()})}attachments.forEach(function(att){if(opts.attachments&&opts.include_docs){fetchAttachment(doc,att)}else{doc._attachments[att].stub=true;checkDone()}})}var POUCH_VERSION=1;var BY_SEQ_STORE_DELETED_INDEX_SQL="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+BY_SEQ_STORE+" (seq, deleted)";var BY_SEQ_STORE_DOC_ID_REV_INDEX_SQL="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+BY_SEQ_STORE+" (doc_id, rev)";var DOC_STORE_WINNINGSEQ_INDEX_SQL="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+DOC_STORE+" (winningseq)";var ATTACH_AND_SEQ_STORE_SEQ_INDEX_SQL="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+ATTACH_AND_SEQ_STORE+" (seq)";var ATTACH_AND_SEQ_STORE_ATTACH_INDEX_SQL="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+ATTACH_AND_SEQ_STORE+" (digest, seq)";var DOC_STORE_AND_BY_SEQ_JOINER=BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq";var SELECT_DOCS=BY_SEQ_STORE+".seq AS seq, "+BY_SEQ_STORE+".deleted AS deleted, "+BY_SEQ_STORE+".json AS data, "+BY_SEQ_STORE+".rev AS rev, "+DOC_STORE+".json AS metadata";function WebSqlPouch(opts,callback){var api=this;var instanceId=null;var size=getSize(opts);var idRequests=[];var encoding;api._docCount=-1;api._name=opts.name;var db=openDB({name:api._name,version:POUCH_VERSION,description:api._name,size:size,location:opts.location,createFromLocation:opts.createFromLocation});if(!db){return callback(errors.error(errors.UNKNOWN_ERROR))}else if(typeof db.readTransaction!=="function"){db.readTransaction=db.transaction}function dbCreated(){if(utils.hasLocalStorage()){window.localStorage["_pouch__websqldb_"+api._name]=true}callback(null,api)}function runMigration2(tx,callback){tx.executeSql(DOC_STORE_WINNINGSEQ_INDEX_SQL);tx.executeSql("ALTER TABLE "+BY_SEQ_STORE+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){tx.executeSql(BY_SEQ_STORE_DELETED_INDEX_SQL);tx.executeSql("ALTER TABLE "+DOC_STORE+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){tx.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+DOC_STORE+" (local, id)");var sql="SELECT "+DOC_STORE+".winningseq AS seq, "+DOC_STORE+".json AS metadata FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq";tx.executeSql(sql,[],function(tx,result){var deleted=[];var local=[];for(var i=0;i<result.rows.length;i++){var item=result.rows.item(i);var seq=item.seq;var metadata=JSON.parse(item.metadata);if(utils.isDeleted(metadata)){deleted.push(seq)}if(utils.isLocalId(metadata.id)){local.push(metadata.id)}}tx.executeSql("UPDATE "+DOC_STORE+"SET local = 1 WHERE id IN "+qMarks(local.length),local,function(){tx.executeSql("UPDATE "+BY_SEQ_STORE+" SET deleted = 1 WHERE seq IN "+qMarks(deleted.length),deleted,callback)})})})})}function runMigration3(tx,callback){var local="CREATE TABLE IF NOT EXISTS "+LOCAL_STORE+" (id UNIQUE, rev, json)";tx.executeSql(local,[],function(){var sql="SELECT "+DOC_STORE+".id AS id, "+BY_SEQ_STORE+".json AS data "+"FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq WHERE local = 1";tx.executeSql(sql,[],function(tx,res){var rows=[];for(var i=0;i<res.rows.length;i++){rows.push(res.rows.item(i))}function doNext(){if(!rows.length){return callback(tx)}var row=rows.shift();var rev=JSON.parse(row.data)._rev;tx.executeSql("INSERT INTO "+LOCAL_STORE+" (id, rev, json) VALUES (?,?,?)",[row.id,rev,row.data],function(tx){tx.executeSql("DELETE FROM "+DOC_STORE+" WHERE id=?",[row.id],function(tx){tx.executeSql("DELETE FROM "+BY_SEQ_STORE+" WHERE seq=?",[row.seq],function(){doNext()})})})}doNext()})})}function runMigration4(tx,callback){function updateRows(rows){function doNext(){if(!rows.length){return callback(tx)}var row=rows.shift();var doc_id_rev=parseHexString(row.hex,encoding);var idx=doc_id_rev.lastIndexOf("::");var doc_id=doc_id_rev.substring(0,idx);var rev=doc_id_rev.substring(idx+2);var sql="UPDATE "+BY_SEQ_STORE+" SET doc_id=?, rev=? WHERE doc_id_rev=?";tx.executeSql(sql,[doc_id,rev,doc_id_rev],function(){doNext()})}doNext()}var sql="ALTER TABLE "+BY_SEQ_STORE+" ADD COLUMN doc_id";tx.executeSql(sql,[],function(tx){var sql="ALTER TABLE "+BY_SEQ_STORE+" ADD COLUMN rev";tx.executeSql(sql,[],function(tx){tx.executeSql(BY_SEQ_STORE_DOC_ID_REV_INDEX_SQL,[],function(tx){var sql="SELECT hex(doc_id_rev) as hex FROM "+BY_SEQ_STORE;tx.executeSql(sql,[],function(tx,res){var rows=[];for(var i=0;i<res.rows.length;i++){rows.push(res.rows.item(i))}updateRows(rows)})})})})}function runMigration5(tx,callback){function migrateAttsAndSeqs(tx){var sql="SELECT COUNT(*) AS cnt FROM "+ATTACH_STORE;tx.executeSql(sql,[],function(tx,res){var count=res.rows.item(0).cnt;if(!count){return callback(tx)}var offset=0;var pageSize=10;function nextPage(){var sql=select(SELECT_DOCS+", "+DOC_STORE+".id AS id",[DOC_STORE,BY_SEQ_STORE],DOC_STORE_AND_BY_SEQ_JOINER,null,DOC_STORE+".id ");sql+=" LIMIT "+pageSize+" OFFSET "+offset;offset+=pageSize;tx.executeSql(sql,[],function(tx,res){if(!res.rows.length){return callback(tx)}var digestSeqs={};function addDigestSeq(digest,seq){var seqs=digestSeqs[digest]=digestSeqs[digest]||[];if(seqs.indexOf(seq)===-1){seqs.push(seq)}}for(var i=0;i<res.rows.length;i++){var row=res.rows.item(i);var doc=unstringifyDoc(row.data,row.id,row.rev);var atts=Object.keys(doc._attachments||{});for(var j=0;j<atts.length;j++){var att=doc._attachments[atts[j]];addDigestSeq(att.digest,row.seq)}}var digestSeqPairs=[];Object.keys(digestSeqs).forEach(function(digest){var seqs=digestSeqs[digest];seqs.forEach(function(seq){digestSeqPairs.push([digest,seq])})});if(!digestSeqPairs.length){return nextPage()}var numDone=0;digestSeqPairs.forEach(function(pair){var sql="INSERT INTO "+ATTACH_AND_SEQ_STORE+" (digest, seq) VALUES (?,?)";tx.executeSql(sql,pair,function(){if(++numDone===digestSeqPairs.length){nextPage()}})})})}nextPage()})}var attachAndRev="CREATE TABLE IF NOT EXISTS "+ATTACH_AND_SEQ_STORE+" (digest, seq INTEGER)";tx.executeSql(attachAndRev,[],function(tx){tx.executeSql(ATTACH_AND_SEQ_STORE_ATTACH_INDEX_SQL,[],function(tx){tx.executeSql(ATTACH_AND_SEQ_STORE_SEQ_INDEX_SQL,[],migrateAttsAndSeqs)})})}function runMigration6(tx,callback){var sql="ALTER TABLE "+ATTACH_STORE+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";tx.executeSql(sql,[],callback)}function runMigration7(tx,callback){var sql="ALTER TABLE "+DOC_STORE+" ADD COLUMN max_seq INTEGER";tx.executeSql(sql,[],function(tx){var sql="UPDATE "+DOC_STORE+" SET max_seq=(SELECT MAX(seq) FROM "+BY_SEQ_STORE+" WHERE doc_id=id)";tx.executeSql(sql,[],function(tx){var sql="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+DOC_STORE+" (max_seq)";tx.executeSql(sql,[],callback)})})}function checkEncoding(tx,cb){tx.executeSql('SELECT HEX("a") AS hex',[],function(tx,res){var hex=res.rows.item(0).hex;encoding=hex.length===2?"UTF-8":"UTF-16";cb()})}function onGetInstanceId(){while(idRequests.length>0){var idCallback=idRequests.pop();idCallback(null,instanceId)}}function onGetVersion(tx,dbVersion){if(dbVersion===0){var meta="CREATE TABLE IF NOT EXISTS "+META_STORE+" (dbid, db_version INTEGER)";var attach="CREATE TABLE IF NOT EXISTS "+ATTACH_STORE+" (digest UNIQUE, escaped TINYINT(1), body BLOB)";var attachAndRev="CREATE TABLE IF NOT EXISTS "+ATTACH_AND_SEQ_STORE+" (digest, seq INTEGER)";var doc="CREATE TABLE IF NOT EXISTS "+DOC_STORE+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)";var seq="CREATE TABLE IF NOT EXISTS "+BY_SEQ_STORE+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "+"json, deleted TINYINT(1), doc_id, rev)";var local="CREATE TABLE IF NOT EXISTS "+LOCAL_STORE+" (id UNIQUE, rev, json)";tx.executeSql(attach);tx.executeSql(local);tx.executeSql(attachAndRev,[],function(){tx.executeSql(ATTACH_AND_SEQ_STORE_SEQ_INDEX_SQL);tx.executeSql(ATTACH_AND_SEQ_STORE_ATTACH_INDEX_SQL)});tx.executeSql(doc,[],function(){tx.executeSql(DOC_STORE_WINNINGSEQ_INDEX_SQL);tx.executeSql(seq,[],function(){tx.executeSql(BY_SEQ_STORE_DELETED_INDEX_SQL);tx.executeSql(BY_SEQ_STORE_DOC_ID_REV_INDEX_SQL);tx.executeSql(meta,[],function(){var initSeq="INSERT INTO "+META_STORE+" (db_version, dbid) VALUES (?,?)";instanceId=utils.uuid();var initSeqArgs=[ADAPTER_VERSION,instanceId];tx.executeSql(initSeq,initSeqArgs,function(){onGetInstanceId()})})})})}else{var setupDone=function(){var migrated=dbVersion<ADAPTER_VERSION;if(migrated){tx.executeSql("UPDATE "+META_STORE+" SET db_version = "+ADAPTER_VERSION)}var sql="SELECT dbid FROM "+META_STORE;tx.executeSql(sql,[],function(tx,result){instanceId=result.rows.item(0).dbid;onGetInstanceId()})};var tasks=[runMigration2,runMigration3,runMigration4,runMigration5,runMigration6,runMigration7,setupDone];var i=dbVersion;var nextMigration=function(tx){tasks[i-1](tx,nextMigration);i++};nextMigration(tx)}}function setup(){db.transaction(function(tx){checkEncoding(tx,function(){fetchVersion(tx)})},unknownError(callback),dbCreated)}function fetchVersion(tx){var sql="SELECT sql FROM sqlite_master WHERE tbl_name = "+META_STORE;tx.executeSql(sql,[],function(tx,result){if(!result.rows.length){onGetVersion(tx,0)}else if(!/db_version/.test(result.rows.item(0).sql)){tx.executeSql("ALTER TABLE "+META_STORE+" ADD COLUMN db_version INTEGER",[],function(){onGetVersion(tx,1)})}else{tx.executeSql("SELECT db_version FROM "+META_STORE,[],function(tx,result){var dbVersion=result.rows.item(0).db_version;onGetVersion(tx,dbVersion)})}})}if(utils.isCordova()){window.addEventListener(api._name+"_pouch",function cordova_init(){window.removeEventListener(api._name+"_pouch",cordova_init,false);setup()},false)}else{setup()}api.type=function(){return"websql"};api._id=utils.toPromise(function(callback){callback(null,instanceId)});api._info=function(callback){db.readTransaction(function(tx){countDocs(tx,function(docCount){var sql="SELECT MAX(seq) AS seq FROM "+BY_SEQ_STORE;tx.executeSql(sql,[],function(tx,res){var updateSeq=res.rows.item(0).seq||0;callback(null,{doc_count:docCount,update_seq:updateSeq,sqlite_plugin:db._sqlitePlugin,websql_encoding:encoding})})})},unknownError(callback))};api._bulkDocs=function(req,opts,callback){websqlBulkDocs(req,opts,api,db,WebSqlPouch.Changes,callback)};api._get=function(id,opts,callback){opts=utils.clone(opts);var doc;var metadata;var err;if(!opts.ctx){db.readTransaction(function(txn){opts.ctx=txn;api._get(id,opts,callback)});return}var tx=opts.ctx;function finish(){callback(err,{doc:doc,metadata:metadata,ctx:tx})}var sql;var sqlArgs;if(opts.rev){sql=select(SELECT_DOCS,[DOC_STORE,BY_SEQ_STORE],DOC_STORE+".id="+BY_SEQ_STORE+".doc_id",[BY_SEQ_STORE+".doc_id=?",BY_SEQ_STORE+".rev=?"]);sqlArgs=[id,opts.rev]}else{sql=select(SELECT_DOCS,[DOC_STORE,BY_SEQ_STORE],DOC_STORE_AND_BY_SEQ_JOINER,DOC_STORE+".id=?");sqlArgs=[id]}tx.executeSql(sql,sqlArgs,function(a,results){if(!results.rows.length){err=errors.error(errors.MISSING_DOC,"missing");return finish()}var item=results.rows.item(0);metadata=utils.safeJsonParse(item.metadata);if(item.deleted&&!opts.rev){err=errors.error(errors.MISSING_DOC,"deleted");return finish()}doc=unstringifyDoc(item.data,metadata.id,item.rev);finish()})};function countDocs(tx,callback){if(api._docCount!==-1){return callback(api._docCount)}var sql=select("COUNT("+DOC_STORE+".id) AS 'num'",[DOC_STORE,BY_SEQ_STORE],DOC_STORE_AND_BY_SEQ_JOINER,BY_SEQ_STORE+".deleted=0");tx.executeSql(sql,[],function(tx,result){api._docCount=result.rows.item(0).num;callback(api._docCount)})}api._allDocs=function(opts,callback){var results=[];var totalRows;var start="startkey"in opts?opts.startkey:false;var end="endkey"in opts?opts.endkey:false;var key="key"in opts?opts.key:false;var descending="descending"in opts?opts.descending:false;var limit="limit"in opts?opts.limit:-1;var offset="skip"in opts?opts.skip:0;var inclusiveEnd=opts.inclusive_end!==false;var sqlArgs=[];var criteria=[];if(key!==false){criteria.push(DOC_STORE+".id = ?");sqlArgs.push(key)}else if(start!==false||end!==false){if(start!==false){criteria.push(DOC_STORE+".id "+(descending?"<=":">=")+" ?");sqlArgs.push(start)}if(end!==false){var comparator=descending?">":"<";if(inclusiveEnd){comparator+="="}criteria.push(DOC_STORE+".id "+comparator+" ?");sqlArgs.push(end)}if(key!==false){criteria.push(DOC_STORE+".id = ?");sqlArgs.push(key)}}if(opts.deleted!=="ok"){criteria.push(BY_SEQ_STORE+".deleted = 0")}db.readTransaction(function(tx){countDocs(tx,function(count){totalRows=count;if(limit===0){return}var sql=select(SELECT_DOCS,[DOC_STORE,BY_SEQ_STORE],DOC_STORE_AND_BY_SEQ_JOINER,criteria,DOC_STORE+".id "+(descending?"DESC":"ASC"));sql+=" LIMIT "+limit+" OFFSET "+offset;tx.executeSql(sql,sqlArgs,function(tx,result){for(var i=0,l=result.rows.length;i<l;i++){var item=result.rows.item(i);var metadata=utils.safeJsonParse(item.metadata);var id=metadata.id;var data=unstringifyDoc(item.data,id,item.rev);var winningRev=data._rev;var doc={id:id,key:id,value:{rev:winningRev}};if(opts.include_docs){doc.doc=data;doc.doc._rev=winningRev;if(opts.conflicts){doc.doc._conflicts=merge.collectConflicts(metadata)}fetchAttachmentsIfNecessary(doc.doc,opts,api,tx)}if(item.deleted){if(opts.deleted==="ok"){doc.value.deleted=true;doc.doc=null}else{continue}}results.push(doc)}})})},unknownError(callback),function(){callback(null,{total_rows:totalRows,offset:opts.skip,rows:results})})};api._changes=function(opts){opts=utils.clone(opts);if(opts.continuous){var id=api._name+":"+utils.uuid();WebSqlPouch.Changes.addListener(api._name,id,api,opts);WebSqlPouch.Changes.notify(api._name);return{cancel:function(){WebSqlPouch.Changes.removeListener(api._name,id)}}}var descending=opts.descending;opts.since=opts.since&&!descending?opts.since:0;var limit="limit"in opts?opts.limit:-1;if(limit===0){limit=1}var returnDocs;if("returnDocs"in opts){returnDocs=opts.returnDocs}else{returnDocs=true}var results=[];var numResults=0;function fetchChanges(){var selectStmt=DOC_STORE+".json AS metadata, "+DOC_STORE+".max_seq AS maxSeq, "+BY_SEQ_STORE+".json AS winningDoc, "+BY_SEQ_STORE+".rev AS winningRev ";var from=DOC_STORE+" JOIN "+BY_SEQ_STORE;var joiner=DOC_STORE+".id="+BY_SEQ_STORE+".doc_id"+" AND "+DOC_STORE+".winningseq="+BY_SEQ_STORE+".seq";var criteria=["maxSeq > ?"];var sqlArgs=[opts.since];if(opts.doc_ids){criteria.push(DOC_STORE+".id IN "+qMarks(opts.doc_ids.length));sqlArgs=sqlArgs.concat(opts.doc_ids)}var orderBy="maxSeq "+(descending?"DESC":"ASC");var sql=select(selectStmt,from,joiner,criteria,orderBy);var filter=utils.filterChange(opts);if(!opts.view&&!opts.filter){sql+=" LIMIT "+limit}var lastSeq=opts.since||0;db.readTransaction(function(tx){tx.executeSql(sql,sqlArgs,function(tx,result){function reportChange(change){return function(){opts.onChange(change)}}for(var i=0,l=result.rows.length;i<l;i++){var item=result.rows.item(i);var metadata=utils.safeJsonParse(item.metadata);lastSeq=item.maxSeq;var doc=unstringifyDoc(item.winningDoc,metadata.id,item.winningRev);var change=opts.processChange(doc,metadata,opts);change.seq=item.maxSeq;if(filter(change)){numResults++;if(returnDocs){results.push(change)}if(opts.attachments&&opts.include_docs){fetchAttachmentsIfNecessary(doc,opts,api,tx,reportChange(change))}else{reportChange(change)()}}if(numResults===limit){break}}})},unknownError(opts.complete),function(){if(!opts.continuous){opts.complete(null,{results:results,last_seq:lastSeq})}})}fetchChanges();

};api._close=function(callback){callback()};api._getAttachment=function(attachment,opts,callback){var res;var tx=opts.ctx;var digest=attachment.digest;var type=attachment.content_type;var sql="SELECT escaped, "+"CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+ATTACH_STORE+" WHERE digest=?";tx.executeSql(sql,[digest],function(tx,result){var item=result.rows.item(0);var data=item.escaped?websqlUtils.unescapeBlob(item.body):parseHexString(item.body,encoding);if(opts.encode){res=btoa(data)}else{data=utils.fixBinary(data);res=utils.createBlob([data],{type:type})}callback(null,res)})};api._getRevisionTree=function(docId,callback){db.readTransaction(function(tx){var sql="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";tx.executeSql(sql,[docId],function(tx,result){if(!result.rows.length){callback(errors.error(errors.MISSING_DOC))}else{var data=utils.safeJsonParse(result.rows.item(0).metadata);callback(null,data.rev_tree)}})})};api._doCompaction=function(docId,revs,callback){if(!revs.length){return callback()}db.transaction(function(tx){var sql="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";tx.executeSql(sql,[docId],function(tx,result){var metadata=utils.safeJsonParse(result.rows.item(0).metadata);merge.traverseRevTree(metadata.rev_tree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+"-"+revHash;if(revs.indexOf(rev)!==-1){opts.status="missing"}});var sql="UPDATE "+DOC_STORE+" SET json = ? WHERE id = ?";tx.executeSql(sql,[utils.safeJsonStringify(metadata),docId])});compactRevs(revs,docId,tx)},unknownError(callback),function(){callback()})};api._getLocal=function(id,callback){db.readTransaction(function(tx){var sql="SELECT json, rev FROM "+LOCAL_STORE+" WHERE id=?";tx.executeSql(sql,[id],function(tx,res){if(res.rows.length){var item=res.rows.item(0);var doc=unstringifyDoc(item.json,id,item.rev);callback(null,doc)}else{callback(errors.error(errors.MISSING_DOC))}})})};api._putLocal=function(doc,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}delete doc._revisions;var oldRev=doc._rev;var id=doc._id;var newRev;if(!oldRev){newRev=doc._rev="0-1"}else{newRev=doc._rev="0-"+(parseInt(oldRev.split("-")[1],10)+1)}var json=stringifyDoc(doc);var ret;function putLocal(tx){var sql;var values;if(oldRev){sql="UPDATE "+LOCAL_STORE+" SET rev=?, json=? "+"WHERE id=? AND rev=?";values=[newRev,json,id,oldRev]}else{sql="INSERT INTO "+LOCAL_STORE+" (id, rev, json) VALUES (?,?,?)";values=[id,newRev,json]}tx.executeSql(sql,values,function(tx,res){if(res.rowsAffected){ret={ok:true,id:id,rev:newRev};if(opts.ctx){callback(null,ret)}}else{callback(errors.error(errors.REV_CONFLICT))}},function(){callback(errors.error(errors.REV_CONFLICT));return false})}if(opts.ctx){putLocal(opts.ctx)}else{db.transaction(function(tx){putLocal(tx)},unknownError(callback),function(){if(ret){callback(null,ret)}})}};api._removeLocal=function(doc,callback){var ret;db.transaction(function(tx){var sql="DELETE FROM "+LOCAL_STORE+" WHERE id=? AND rev=?";var params=[doc._id,doc._rev];tx.executeSql(sql,params,function(tx,res){if(!res.rowsAffected){return callback(errors.error(errors.MISSING_DOC))}ret={ok:true,id:doc._id,rev:"0-0"}})},unknownError(callback),function(){if(ret){callback(null,ret)}})};api._destroy=function(callback){WebSqlPouch.Changes.removeAllListeners(api._name);db.transaction(function(tx){var stores=[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,META_STORE,LOCAL_STORE,ATTACH_AND_SEQ_STORE];stores.forEach(function(store){tx.executeSql("DROP TABLE IF EXISTS "+store,[])})},unknownError(callback),function(){if(utils.hasLocalStorage()){delete window.localStorage["_pouch__websqldb_"+api._name];delete window.localStorage[api._name]}callback(null,{ok:true})})}}WebSqlPouch.valid=websqlUtils.valid;WebSqlPouch.Changes=new utils.Changes;module.exports=WebSqlPouch},{"../../deps/errors":289,"../../deps/parse-hex":293,"../../merge":302,"../../utils":307,"./websql-bulk-docs":279,"./websql-constants":280,"./websql-utils":281}],283:[function(require,module,exports){"use strict";var utils=require("./utils");var merge=require("./merge");var errors=require("./deps/errors");var EE=require("events").EventEmitter;var evalFilter=require("./evalFilter");var evalView=require("./evalView");module.exports=Changes;utils.inherits(Changes,EE);function Changes(db,opts,callback){EE.call(this);var self=this;this.db=db;opts=opts?utils.clone(opts):{};var oldComplete=callback||opts.complete||function(){};var complete=opts.complete=utils.once(function(err,resp){if(err){self.emit("error",err)}else{self.emit("complete",resp)}self.removeAllListeners();db.removeListener("destroyed",onDestroy)});if(oldComplete){self.on("complete",function(resp){oldComplete(null,resp)});self.on("error",function(err){oldComplete(err)})}var oldOnChange=opts.onChange;if(oldOnChange){self.on("change",oldOnChange)}function onDestroy(){self.cancel()}db.once("destroyed",onDestroy);opts.onChange=function(change){if(opts.isCancelled){return}self.emit("change",change);if(self.startSeq&&self.startSeq<=change.seq){self.emit("uptodate");self.startSeq=false}if(change.deleted){self.emit("delete",change)}else if(change.changes.length===1&&change.changes[0].rev.slice(0,2)==="1-"){self.emit("create",change)}else{self.emit("update",change)}};var promise=new utils.Promise(function(fulfill,reject){opts.complete=function(err,res){if(err){reject(err)}else{fulfill(res)}}});self.once("cancel",function(){if(oldOnChange){self.removeListener("change",oldOnChange)}opts.complete(null,{status:"cancelled"})});this.then=promise.then.bind(promise);this["catch"]=promise["catch"].bind(promise);this.then(function(result){complete(null,result)},complete);if(!db.taskqueue.isReady){db.taskqueue.addTask(function(){if(self.isCancelled){self.emit("cancel")}else{self.doChanges(opts)}})}else{self.doChanges(opts)}}Changes.prototype.cancel=function(){this.isCancelled=true;if(this.db.taskqueue.isReady){this.emit("cancel")}};function processChange(doc,metadata,opts){var changeList=[{rev:doc._rev}];if(opts.style==="all_docs"){changeList=merge.collectLeaves(metadata.rev_tree).map(function(x){return{rev:x.rev}})}var change={id:metadata.id,changes:changeList,doc:doc};if(utils.isDeleted(metadata,doc._rev)){change.deleted=true}if(opts.conflicts){change.doc._conflicts=merge.collectConflicts(metadata);if(!change.doc._conflicts.length){delete change.doc._conflicts}}return change}Changes.prototype.doChanges=function(opts){var self=this;var callback=opts.complete;opts=utils.clone(opts);if("live"in opts&&!("continuous"in opts)){opts.continuous=opts.live}opts.processChange=processChange;if(opts.since==="latest"){opts.since="now"}if(!opts.since){opts.since=0}if(opts.since==="now"){this.db.info().then(function(info){if(self.isCancelled){callback(null,{status:"cancelled"});return}opts.since=info.update_seq;self.doChanges(opts)},callback);return}if(opts.continuous&&opts.since!=="now"){this.db.info().then(function(info){self.startSeq=info.update_seq},function(err){if(err.id==="idbNull"){return}throw err})}if(this.db.type()!=="http"&&opts.filter&&typeof opts.filter==="string"&&!opts.doc_ids){return this.filterChanges(opts)}if(!("descending"in opts)){opts.descending=false}opts.limit=opts.limit===0?1:opts.limit;opts.complete=callback;var newPromise=this.db._changes(opts);if(newPromise&&typeof newPromise.cancel==="function"){var cancel=self.cancel;self.cancel=utils.getArguments(function(args){newPromise.cancel();cancel.apply(this,args)})}};Changes.prototype.filterChanges=function(opts){var self=this;var callback=opts.complete;if(opts.filter==="_view"){if(!opts.view||typeof opts.view!=="string"){var err=errors.error(errors.BAD_REQUEST,"`view` filter parameter is not provided.");callback(err);return}var viewName=opts.view.split("/");this.db.get("_design/"+viewName[0],function(err,ddoc){if(self.isCancelled){callback(null,{status:"cancelled"});return}if(err){callback(errors.generateErrorFromResponse(err));return}if(ddoc&&ddoc.views&&ddoc.views[viewName[1]]){var filter=evalView(ddoc.views[viewName[1]].map);opts.filter=filter;self.doChanges(opts);return}var msg=ddoc.views?"missing json key: "+viewName[1]:"missing json key: views";if(!err){err=errors.error(errors.MISSING_DOC,msg)}callback(err);return})}else{var filterName=opts.filter.split("/");this.db.get("_design/"+filterName[0],function(err,ddoc){if(self.isCancelled){callback(null,{status:"cancelled"});return}if(err){callback(errors.generateErrorFromResponse(err));return}if(ddoc&&ddoc.filters&&ddoc.filters[filterName[1]]){var filter=evalFilter(ddoc.filters[filterName[1]]);opts.filter=filter;self.doChanges(opts);return}else{var msg=ddoc&&ddoc.filters?"missing json key: "+filterName[1]:"missing json key: filters";if(!err){err=errors.error(errors.MISSING_DOC,msg)}callback(err);return}})}}},{"./deps/errors":289,"./evalFilter":299,"./evalView":300,"./merge":302,"./utils":307,events:34}],284:[function(require,module,exports){"use strict";var Promise=require("./deps/promise");var explain404=require("./deps/explain404");var pouchCollate=require("pouchdb-collate");var collate=pouchCollate.collate;function updateCheckpoint(db,id,checkpoint,returnValue){return db.get(id).catch(function(err){if(err.status===404){if(db.type()==="http"){explain404("PouchDB is just checking if a remote checkpoint exists.")}return{_id:id}}throw err}).then(function(doc){if(returnValue.cancelled){return}doc.last_seq=checkpoint;return db.put(doc).catch(function(err){if(err.status===409){return updateCheckpoint(db,id,checkpoint,returnValue)}throw err})})}function Checkpointer(src,target,id,returnValue){this.src=src;this.target=target;this.id=id;this.returnValue=returnValue}Checkpointer.prototype.writeCheckpoint=function(checkpoint){var self=this;return this.updateTarget(checkpoint).then(function(){return self.updateSource(checkpoint)})};Checkpointer.prototype.updateTarget=function(checkpoint){return updateCheckpoint(this.target,this.id,checkpoint,this.returnValue)};Checkpointer.prototype.updateSource=function(checkpoint){var self=this;if(this.readOnlySource){return Promise.resolve(true)}return updateCheckpoint(this.src,this.id,checkpoint,this.returnValue).catch(function(err){var isForbidden=typeof err.status==="number"&&Math.floor(err.status/100)===4;if(isForbidden){self.readOnlySource=true;return true}throw err})};Checkpointer.prototype.getCheckpoint=function(){var self=this;return self.target.get(self.id).then(function(targetDoc){return self.src.get(self.id).then(function(sourceDoc){if(collate(targetDoc.last_seq,sourceDoc.last_seq)===0){return sourceDoc.last_seq}return 0},function(err){if(err.status===404&&targetDoc.last_seq){return self.src.put({_id:self.id,last_seq:0}).then(function(){return 0},function(err){if(err.status===401){self.readOnlySource=true;return targetDoc.last_seq}return 0})}throw err})}).catch(function(err){if(err.status!==404){throw err}return 0})};module.exports=Checkpointer},{"./deps/explain404":290,"./deps/promise":295,"pouchdb-collate":332}],285:[function(require,module,exports){(function(process,global){"use strict";var Adapter=require("./adapter");var utils=require("./utils");var TaskQueue=require("./taskqueue");var Promise=utils.Promise;function defaultCallback(err){if(err&&global.debug){console.error(err)}}utils.inherits(PouchDB,Adapter);function PouchDB(name,opts,callback){if(!(this instanceof PouchDB)){return new PouchDB(name,opts,callback)}var self=this;if(typeof opts==="function"||typeof opts==="undefined"){callback=opts;opts={}}if(name&&typeof name==="object"){opts=name;name=undefined}if(typeof callback==="undefined"){callback=defaultCallback}name=name||opts.name;opts=opts?utils.clone(opts):{};delete opts.name;this.__opts=opts;var oldCB=callback;self.auto_compaction=opts.auto_compaction;self.prefix=PouchDB.prefix;Adapter.call(self);self.taskqueue=new TaskQueue;var promise=new Promise(function(fulfill,reject){callback=function(err,resp){if(err){return reject(err)}delete resp.then;fulfill(resp)};opts=utils.clone(opts);var originalName=opts.name||name;var backend,error;(function(){try{if(typeof originalName!=="string"){error=new Error("Missing/invalid DB name");error.code=400;throw error}backend=PouchDB.parseAdapter(originalName,opts);opts.originalName=originalName;opts.name=backend.name;if(opts.prefix&&backend.adapter!=="http"&&backend.adapter!=="https"){opts.name=opts.prefix+opts.name}opts.adapter=opts.adapter||backend.adapter;self._adapter=opts.adapter;self._db_name=originalName;if(!PouchDB.adapters[opts.adapter]){error=new Error("Adapter is missing");error.code=404;throw error}if(!PouchDB.adapters[opts.adapter].valid()){error=new Error("Invalid Adapter");error.code=404;throw error}}catch(err){self.taskqueue.fail(err);self.changes=utils.toPromise(function(opts){if(opts.complete){opts.complete(err)}})}})();if(error){return reject(error)}self.adapter=opts.adapter;self.replicate={};self.replicate.from=function(url,opts,callback){return self.constructor.replicate(url,self,opts,callback)};self.replicate.to=function(url,opts,callback){return self.constructor.replicate(self,url,opts,callback)};self.sync=function(dbName,opts,callback){return self.constructor.sync(self,dbName,opts,callback)};self.replicate.sync=self.sync;PouchDB.adapters[opts.adapter].call(self,opts,function(err){if(err){if(callback){self.taskqueue.fail(err);callback(err)}return}function destructionListener(){PouchDB.emit("destroyed",opts.originalName);PouchDB.emit(opts.originalName,"destroyed");self.removeListener("destroyed",destructionListener)}self.on("destroyed",destructionListener);self.emit("created",self);PouchDB.emit("created",opts.originalName);self.taskqueue.ready(self);callback(null,self)});if(opts.skipSetup){self.taskqueue.ready(self);process.nextTick(function(){callback(null,self)})}if(utils.isCordova()){cordova.fireWindowEvent(opts.name+"_pouch",{})}});promise.then(function(resp){oldCB(null,resp)},oldCB);self.then=promise.then.bind(promise);self.catch=promise.catch.bind(promise)}PouchDB.debug=require("debug");module.exports=PouchDB}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./adapter":271,"./taskqueue":306,"./utils":307,_process:35,debug:310}],286:[function(require,module,exports){(function(process){"use strict";var request=require("request");var buffer=require("./buffer");var errors=require("./errors");var utils=require("../utils");function ajax(options,adapterCallback){var requestCompleted=false;var callback=utils.getArguments(function(args){if(requestCompleted){return}adapterCallback.apply(this,args);requestCompleted=true});if(typeof options==="function"){callback=options;options={}}options=utils.clone(options);var defaultOptions={method:"GET",headers:{},json:true,processData:true,timeout:1e4,cache:false};options=utils.extend(true,defaultOptions,options);function onSuccess(obj,resp,cb){if(!options.binary&&!options.json&&options.processData&&typeof obj!=="string"){obj=JSON.stringify(obj)}else if(!options.binary&&options.json&&typeof obj==="string"){try{obj=JSON.parse(obj)}catch(e){return cb(e)}}if(Array.isArray(obj)){obj=obj.map(function(v){if(v.error||v.missing){return errors.generateErrorFromResponse(v)}else{return v}})}cb(null,obj,resp)}function onError(err,cb){var errParsed,errObj;if(err.code&&err.status){var err2=new Error(err.message||err.code);err2.status=err.status;return cb(err2)}try{errParsed=JSON.parse(err.responseText);errObj=errors.generateErrorFromResponse(errParsed)}catch(e){errObj=errors.generateErrorFromResponse(err)}cb(errObj)}if(options.json){if(!options.binary){options.headers.Accept="application/json"}options.headers["Content-Type"]=options.headers["Content-Type"]||"application/json"}if(options.binary){options.encoding=null;options.json=false}if(!options.processData){options.json=false}function defaultBody(data){if(process.browser){return""}return new buffer("","binary")}return request(options,function(err,response,body){if(err){err.status=response?response.statusCode:400;return onError(err,callback)}var error;var content_type=response.headers&&response.headers["content-type"];var data=body||defaultBody();if(!options.binary&&(options.json||!options.processData)&&typeof data!=="object"&&(/json/.test(content_type)||/^[\s]*\{/.test(data)&&/\}[\s]*$/.test(data))){data=JSON.parse(data)}if(response.statusCode>=200&&response.statusCode<300){onSuccess(data,response,callback)}else{if(options.binary){data=JSON.parse(data.toString())}error=errors.generateErrorFromResponse(data);error.status=response.statusCode;callback(error)}})}module.exports=ajax}).call(this,require("_process"))},{"../utils":307,"./buffer":288,"./errors":289,_process:35,request:296}],287:[function(require,module,exports){(function(global){"use strict";function createBlob(parts,properties){parts=parts||[];properties=properties||{};try{return new Blob(parts,properties)}catch(e){if(e.name!=="TypeError"){throw e}var BlobBuilder=global.BlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder||global.WebKitBlobBuilder;var builder=new BlobBuilder;for(var i=0;i<parts.length;i+=1){builder.append(parts[i])}return builder.getBlob(properties.type)}}module.exports=createBlob}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],288:[function(require,module,exports){module.exports={}},{}],289:[function(require,module,exports){"use strict";var inherits=require("inherits");inherits(PouchError,Error);function PouchError(opts){Error.call(opts.reason);this.status=opts.status;this.name=opts.error;this.message=opts.reason;this.error=true}PouchError.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})};exports.UNAUTHORIZED=new PouchError({status:401,error:"unauthorized",reason:"Name or password is incorrect."});exports.MISSING_BULK_DOCS=new PouchError({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"});exports.MISSING_DOC=new PouchError({status:404,error:"not_found",reason:"missing"});exports.REV_CONFLICT=new PouchError({status:409,error:"conflict",reason:"Document update conflict"});exports.INVALID_ID=new PouchError({status:400,error:"invalid_id",reason:"_id field must contain a string"});exports.MISSING_ID=new PouchError({status:412,error:"missing_id",reason:"_id is required for puts"});exports.RESERVED_ID=new PouchError({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."});exports.NOT_OPEN=new PouchError({status:412,error:"precondition_failed",reason:"Database not open"});exports.UNKNOWN_ERROR=new PouchError({status:500,error:"unknown_error",reason:"Database encountered an unknown error"});exports.BAD_ARG=new PouchError({status:500,error:"badarg",reason:"Some query argument is invalid"});exports.INVALID_REQUEST=new PouchError({status:400,error:"invalid_request",reason:"Request was invalid"});exports.QUERY_PARSE_ERROR=new PouchError({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"});exports.DOC_VALIDATION=new PouchError({status:500,error:"doc_validation",reason:"Bad special document member"});exports.BAD_REQUEST=new PouchError({status:400,error:"bad_request",reason:"Something wrong with the request"});exports.NOT_AN_OBJECT=new PouchError({status:400,error:"bad_request",reason:"Document must be a JSON object"});exports.DB_MISSING=new PouchError({status:404,error:"not_found",reason:"Database not found"});exports.IDB_ERROR=new PouchError({status:500,error:"indexed_db_went_bad",reason:"unknown"});exports.WSQ_ERROR=new PouchError({status:500,error:"web_sql_went_bad",reason:"unknown"});exports.LDB_ERROR=new PouchError({status:500,error:"levelDB_went_went_bad",reason:"unknown"});exports.FORBIDDEN=new PouchError({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"});exports.INVALID_REV=new PouchError({status:400,error:"bad_request",reason:"Invalid rev format"});exports.FILE_EXISTS=new PouchError({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."});exports.MISSING_STUB=new PouchError({status:412,error:"missing_stub"});exports.error=function(error,reason,name){function CustomPouchError(reason){for(var p in error){if(typeof error[p]!=="function"){this[p]=error[p]}}if(name!==undefined){this.name=name}if(reason!==undefined){this.reason=reason}}CustomPouchError.prototype=PouchError.prototype;return new CustomPouchError(reason)};exports.getErrorTypeByProp=function(prop,value,reason){var errors=exports;var keys=Object.keys(errors).filter(function(key){var error=errors[key];return typeof error!=="function"&&error[prop]===value});var key=reason&&keys.filter(function(key){var error=errors[key];return error.message===reason})[0]||keys[0];return key?errors[key]:null};exports.generateErrorFromResponse=function(res){var error,errName,errType,errMsg,errReason;var errors=exports;errName=res.error===true&&typeof res.name==="string"?res.name:res.error;errReason=res.reason;errType=errors.getErrorTypeByProp("name",errName,errReason);if(res.missing||errReason==="missing"||errReason==="deleted"||errName==="not_found"){errType=errors.MISSING_DOC}else if(errName==="doc_validation"){errType=errors.DOC_VALIDATION;errMsg=errReason}else if(errName==="bad_request"&&errType.message!==errReason){if(errReason.indexOf("unknown stub attachment")===0){errType=errors.MISSING_STUB;errMsg=errReason}else{errType=errors.BAD_REQUEST}}if(!errType){errType=errors.getErrorTypeByProp("status",res.status,errReason)||errors.UNKNOWN_ERROR}error=errors.error(errType,errReason,errName);if(errMsg){error.message=errMsg}if(res.id){error.id=res.id}if(res.status){error.status=res.status}if(res.statusText){error.name=res.statusText}if(res.missing){error.missing=res.missing}return error}},{inherits:313}],290:[function(require,module,exports){(function(process,global){"use strict";function explain404(str){if(process.browser&&"console"in global&&"info"in console){console.info("The above 404 is totally normal. "+str)}}module.exports=explain404}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:35}],291:[function(require,module,exports){(function(process,global){"use strict";var crypto=require("crypto");var Md5=require("spark-md5");var setImmediateShim=global.setImmediate||global.setTimeout;var MD5_CHUNK_SIZE=32768;function intToString(int){var bytes=[int&255,int>>>8&255,int>>>16&255,int>>>24&255];return bytes.map(function(byte){return String.fromCharCode(byte)}).join("")}function rawToBase64(raw){var res="";for(var i=0;i<raw.length;i++){res+=intToString(raw[i])}return btoa(res)}function appendBuffer(buffer,data,start,end){if(start>0||end<data.byteLength){data=new Uint8Array(data,start,Math.min(end,data.byteLength)-start)}buffer.append(data)}function appendString(buffer,data,start,end){if(start>0||end<data.length){data=data.substring(start,end)}buffer.appendBinary(data)}module.exports=function(data,callback){if(!process.browser){var base64=crypto.createHash("md5").update(data).digest("base64");callback(null,base64);return}var inputIsString=typeof data==="string";var len=inputIsString?data.length:data.byteLength;var chunkSize=Math.min(MD5_CHUNK_SIZE,len);var chunks=Math.ceil(len/chunkSize);var currentChunk=0;var buffer=inputIsString?new Md5:new Md5.ArrayBuffer;var append=inputIsString?appendString:appendBuffer;function loadNextChunk(){var start=currentChunk*chunkSize;var end=start+chunkSize;currentChunk++;if(currentChunk<chunks){append(buffer,data,start,end);setImmediateShim(loadNextChunk)}else{append(buffer,data,start,end);var raw=buffer.end(true);var base64=rawToBase64(raw);callback(null,base64);buffer.destroy()}}loadNextChunk()}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:35,crypto:33,"spark-md5":343}],292:[function(require,module,exports){"use strict";var errors=require("./errors");var uuid=require("./uuid");function toObject(array){return array.reduce(function(obj,item){obj[item]=true;return obj},{})}var reservedWords=toObject(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]);var dataWords=toObject(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);exports.invalidIdError=function(id){var err;if(!id){err=errors.error(errors.MISSING_ID)}else if(typeof id!=="string"){err=errors.error(errors.INVALID_ID)}else if(/^_/.test(id)&&!/^_(design|local)/.test(id)){err=errors.error(errors.RESERVED_ID)}if(err){throw err}};function parseRevisionInfo(rev){if(!/^\d+\-./.test(rev)){return errors.error(errors.INVALID_REV)}var idx=rev.indexOf("-");var left=rev.substring(0,idx);var right=rev.substring(idx+1);return{prefix:parseInt(left,10),id:right}}function makeRevTreeFromRevisions(revisions,opts){var pos=revisions.start-revisions.ids.length+1;var revisionIds=revisions.ids;var ids=[revisionIds[0],opts,[]];for(var i=1,len=revisionIds.length;i<len;i++){ids=[revisionIds[i],{status:"missing"},[ids]]}return[{pos:pos,ids:ids}]}exports.parseDoc=function(doc,newEdits){var nRevNum;var newRevId;var revInfo;var opts={status:"available"};if(doc._deleted){opts.deleted=true}if(newEdits){if(!doc._id){doc._id=uuid()}newRevId=uuid(32,16).toLowerCase();if(doc._rev){revInfo=parseRevisionInfo(doc._rev);if(revInfo.error){return revInfo}doc._rev_tree=[{pos:revInfo.prefix,ids:[revInfo.id,{status:"missing"},[[newRevId,opts,[]]]]}];nRevNum=revInfo.prefix+1}else{doc._rev_tree=[{pos:1,ids:[newRevId,opts,[]]}];nRevNum=1}}else{if(doc._revisions){doc._rev_tree=makeRevTreeFromRevisions(doc._revisions,opts);nRevNum=doc._revisions.start;newRevId=doc._revisions.ids[0]}if(!doc._rev_tree){revInfo=parseRevisionInfo(doc._rev);if(revInfo.error){return revInfo}nRevNum=revInfo.prefix;newRevId=revInfo.id;doc._rev_tree=[{pos:nRevNum,ids:[newRevId,opts,[]]}]}}exports.invalidIdError(doc._id);doc._rev=nRevNum+"-"+newRevId;var result={metadata:{},data:{}};for(var key in doc){if(doc.hasOwnProperty(key)){var specialKey=key[0]==="_";if(specialKey&&!reservedWords[key]){var error=errors.error(errors.DOC_VALIDATION,key);error.message=errors.DOC_VALIDATION.message+": "+key;throw error}else if(specialKey&&!dataWords[key]){result.metadata[key.slice(1)]=doc[key]}else{result.data[key]=doc[key]}}}return result}},{"./errors":289,"./uuid":298}],293:[function(require,module,exports){"use strict";function decodeUtf8(str){return decodeURIComponent(window.escape(str))}function hexToInt(charCode){return charCode<65?charCode-48:charCode-55}function parseHexUtf8(str,start,end){var result="";while(start<end){result+=String.fromCharCode(hexToInt(str.charCodeAt(start++))<<4|hexToInt(str.charCodeAt(start++)))}return result}function parseHexUtf16(str,start,end){var result="";while(start<end){result+=String.fromCharCode(hexToInt(str.charCodeAt(start+2))<<12|hexToInt(str.charCodeAt(start+3))<<8|hexToInt(str.charCodeAt(start))<<4|hexToInt(str.charCodeAt(start+1)));start+=4}return result}function parseHexString(str,encoding){if(encoding==="UTF-8"){return decodeUtf8(parseHexUtf8(str,0,str.length))}else{return parseHexUtf16(str,0,str.length)}}module.exports=parseHexString},{}],294:[function(require,module,exports){"use strict";var options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function parseUri(str){var o=options;var m=o.parser[o.strictMode?"strict":"loose"].exec(str);var uri={};var i=14;while(i--){var key=o.key[i];var value=m[i]||"";var encoded=["user","password"].indexOf(key)!==-1;uri[key]=encoded?decodeURIComponent(value):value}uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1){uri[o.q.name][$1]=$2}});return uri}module.exports=parseUri},{}],295:[function(require,module,exports){"use strict";if(typeof Promise==="function"){module.exports=Promise}else{module.exports=require("bluebird")}},{bluebird:317}],296:[function(require,module,exports){"use strict";var createBlob=require("./blob.js");var utils=require("../utils");function wrappedFetch(){var wrappedPromise={};var promise=new utils.Promise(function(resolve,reject){wrappedPromise.resolve=resolve;wrappedPromise.reject=reject});var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}wrappedPromise.then=promise.then.bind(promise);wrappedPromise.catch=promise.catch.bind(promise);wrappedPromise.promise=promise;fetch.apply(null,args).then(function(response){wrappedPromise.resolve(response)},function(error){wrappedPromise.reject(error)}).catch(function(error){wrappedPromise.catch(error)});return wrappedPromise}function fetchRequest(options,callback){var wrappedPromise,timer,fetchResponse;var headers=new Headers;var fetchOptions={method:options.method,credentials:"include",headers:headers};if(options.json){headers.set("Accept","application/json");headers.set("Content-Type",options.headers["Content-Type"]||"application/json")}if(options.body&&options.body instanceof Blob){utils.readAsBinaryString(options.body,function(binary){fetchOptions.body=utils.fixBinary(binary)})}else if(options.body&&options.processData&&typeof options.body!=="string"){fetchOptions.body=JSON.stringify(options.body)}else if("body"in options){fetchOptions.body=options.body}else{fetchOptions.body=null}Object.keys(options.headers).forEach(function(key){if(options.headers.hasOwnProperty(key)){headers.set(key,options.headers[key])}});wrappedPromise=wrappedFetch(options.url,fetchOptions);if(options.timeout>0){timer=setTimeout(function(){wrappedPromise.reject(new Error("Load timeout for resource: "+options.url))},options.timeout)}wrappedPromise.promise.then(function(response){var result;fetchResponse=response;if(options.timeout>0){clearTimeout(timer)}if(response.status>=200&&response.status<300){return options.binary?response.blob():response.text()}return result.json()}).then(function(result){if(fetchResponse.status>=200&&fetchResponse.status<300){callback(null,fetchResponse,result)}else{callback(result,fetchResponse)}}).catch(function(error){callback(error,fetchResponse)});return{abort:wrappedPromise.reject}}function xhRequest(options,callback){var xhr,timer,hasUpload;var abortReq=function(){xhr.abort()};if(options.xhr){xhr=new options.xhr}else{xhr=new XMLHttpRequest}if(options.method==="GET"&&!options.cache){var hasArgs=options.url.indexOf("?")!==-1;options.url+=(hasArgs?"&":"?")+"_nonce="+Date.now()}xhr.open(options.method,options.url);xhr.withCredentials=true;if(options.method==="GET"){delete options.headers["Content-Type"]}else if(options.json){options.headers.Accept="application/json";options.headers["Content-Type"]=options.headers["Content-Type"]||"application/json";if(options.body&&options.processData&&typeof options.body!=="string"){options.body=JSON.stringify(options.body)}}if(options.binary){xhr.responseType="arraybuffer"}if(!("body"in options)){options.body=null}for(var key in options.headers){if(options.headers.hasOwnProperty(key)){xhr.setRequestHeader(key,options.headers[key])}}if(options.timeout>0){timer=setTimeout(abortReq,options.timeout);xhr.onprogress=function(){clearTimeout(timer);timer=setTimeout(abortReq,options.timeout)};if(typeof hasUpload==="undefined"){hasUpload=Object.keys(xhr).indexOf("upload")!==-1&&typeof xhr.upload!=="undefined";

}if(hasUpload){xhr.upload.onprogress=xhr.onprogress}}xhr.onreadystatechange=function(){if(xhr.readyState!==4){return}var response={statusCode:xhr.status};if(xhr.status>=200&&xhr.status<300){var data;if(options.binary){data=createBlob([xhr.response||""],{type:xhr.getResponseHeader("Content-Type")})}else{data=xhr.responseText}callback(null,response,data)}else{var err={};try{err=JSON.parse(xhr.response)}catch(e){}callback(err,response)}};if(options.body&&options.body instanceof Blob){utils.readAsBinaryString(options.body,function(binary){xhr.send(utils.fixBinary(binary))})}else{xhr.send(options.body)}return{abort:abortReq}}module.exports=function(options,callback){if(typeof XMLHttpRequest==="undefined"&&!options.xhr){return fetchRequest(options,callback)}else{return xhRequest(options,callback)}}},{"../utils":307,"./blob.js":287}],297:[function(require,module,exports){"use strict";var upsert=require("pouchdb-upsert").upsert;module.exports=function(db,doc,diffFun,cb){return upsert.call(db,doc,diffFun,cb)}},{"pouchdb-upsert":342}],298:[function(require,module,exports){"use strict";var chars=("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"abcdefghijklmnopqrstuvwxyz").split("");function getValue(radix){return 0|Math.random()*radix}function uuid(len,radix){radix=radix||chars.length;var out="";var i=-1;if(len){while(++i<len){out+=chars[getValue(radix)]}return out}while(++i<36){switch(i){case 8:case 13:case 18:case 23:out+="-";break;case 19:out+=chars[getValue(16)&3|8];break;default:out+=chars[getValue(16)]}}return out}module.exports=uuid},{}],299:[function(require,module,exports){"use strict";module.exports=evalFilter;function evalFilter(input){return eval(["(function () { return ",input," })()"].join(""))}},{}],300:[function(require,module,exports){"use strict";module.exports=evalView;function evalView(input){return eval(["(function () {","  return function (doc) {","    var emitted = false;","    var emit = function (a, b) {","      emitted = true;","    };","    var view = "+input+";","    view(doc);","    if (emitted) {","      return true;","    }","  }","})()"].join("\n"))}},{}],301:[function(require,module,exports){(function(process){"use strict";var PouchDB=require("./setup");module.exports=PouchDB;PouchDB.ajax=require("./deps/ajax");PouchDB.utils=require("./utils");PouchDB.Errors=require("./deps/errors");PouchDB.replicate=require("./replicate").replicate;PouchDB.sync=require("./sync");PouchDB.version=require("./version");var httpAdapter=require("./adapters/http/http");PouchDB.adapter("http",httpAdapter);PouchDB.adapter("https",httpAdapter);PouchDB.adapter("idb",require("./adapters/idb/idb"),true);PouchDB.adapter("websql",require("./adapters/websql/websql"),true);PouchDB.plugin(require("pouchdb-mapreduce"));if(!process.browser){var ldbAdapter=require("./adapters/leveldb/leveldb");PouchDB.adapter("leveldb",ldbAdapter,true)}}).call(this,require("_process"))},{"./adapters/http/http":272,"./adapters/idb/idb":278,"./adapters/leveldb/leveldb":33,"./adapters/websql/websql":282,"./deps/ajax":286,"./deps/errors":289,"./replicate":303,"./setup":304,"./sync":305,"./utils":307,"./version":308,_process:35,"pouchdb-mapreduce":338}],302:[function(require,module,exports){"use strict";var extend=require("pouchdb-extend");function binarySearch(arr,item,comparator){var low=0;var high=arr.length;var mid;while(low<high){mid=low+high>>>1;if(comparator(arr[mid],item)<0){low=mid+1}else{high=mid}}return low}function insertSorted(arr,item,comparator){var idx=binarySearch(arr,item,comparator);arr.splice(idx,0,item)}function pathToTree(path){var doc=path.shift();var root=[doc.id,doc.opts,[]];var leaf=root;var nleaf;while(path.length){doc=path.shift();nleaf=[doc.id,doc.opts,[]];leaf[2].push(nleaf);leaf=nleaf}return root}function compareTree(a,b){return a[0]<b[0]?-1:1}function mergeTree(in_tree1,in_tree2){var queue=[{tree1:in_tree1,tree2:in_tree2}];var conflicts=false;while(queue.length>0){var item=queue.pop();var tree1=item.tree1;var tree2=item.tree2;if(tree1[1].status||tree2[1].status){tree1[1].status=tree1[1].status==="available"||tree2[1].status==="available"?"available":"missing"}for(var i=0;i<tree2[2].length;i++){if(!tree1[2][0]){conflicts="new_leaf";tree1[2][0]=tree2[2][i];continue}var merged=false;for(var j=0;j<tree1[2].length;j++){if(tree1[2][j][0]===tree2[2][i][0]){queue.push({tree1:tree1[2][j],tree2:tree2[2][i]});merged=true}}if(!merged){conflicts="new_branch";insertSorted(tree1[2],tree2[2][i],compareTree)}}}return{conflicts:conflicts,tree:in_tree1}}function doMerge(tree,path,dontExpand){var restree=[];var conflicts=false;var merged=false;var res;if(!tree.length){return{tree:[path],conflicts:"new_leaf"}}tree.forEach(function(branch){if(branch.pos===path.pos&&branch.ids[0]===path.ids[0]){res=mergeTree(branch.ids,path.ids);restree.push({pos:branch.pos,ids:res.tree});conflicts=conflicts||res.conflicts;merged=true}else if(dontExpand!==true){var t1=branch.pos<path.pos?branch:path;var t2=branch.pos<path.pos?path:branch;var diff=t2.pos-t1.pos;var candidateParents=[];var trees=[];trees.push({ids:t1.ids,diff:diff,parent:null,parentIdx:null});while(trees.length>0){var item=trees.pop();if(item.diff===0){if(item.ids[0]===t2.ids[0]){candidateParents.push(item)}continue}if(!item.ids){continue}item.ids[2].forEach(function(el,idx){trees.push({ids:el,diff:item.diff-1,parent:item.ids,parentIdx:idx})})}var el=candidateParents[0];if(!el){restree.push(branch)}else{res=mergeTree(el.ids,t2.ids);el.parent[2][el.parentIdx]=res.tree;restree.push({pos:t1.pos,ids:t1.ids});conflicts=conflicts||res.conflicts;merged=true}}else{restree.push(branch)}});if(!merged){restree.push(path)}restree.sort(function(a,b){return a.pos-b.pos});return{tree:restree,conflicts:conflicts||"internal_node"}}function stem(tree,depth){var stemmedPaths=PouchMerge.rootToLeaf(tree).map(function(path){var stemmed=path.ids.slice(-depth);return{pos:path.pos+(path.ids.length-stemmed.length),ids:pathToTree(stemmed)}});return stemmedPaths.reduce(function(prev,current){return doMerge(prev,current,true).tree},[stemmedPaths.shift()])}var PouchMerge={};PouchMerge.merge=function(tree,path,depth){tree=extend(true,[],tree);path=extend(true,{},path);var newTree=doMerge(tree,path);return{tree:stem(newTree.tree,depth),conflicts:newTree.conflicts}};PouchMerge.winningRev=function(metadata){var leafs=[];PouchMerge.traverseRevTree(metadata.rev_tree,function(isLeaf,pos,id,something,opts){if(isLeaf){leafs.push({pos:pos,id:id,deleted:!!opts.deleted})}});leafs.sort(function(a,b){if(a.deleted!==b.deleted){return a.deleted>b.deleted?1:-1}if(a.pos!==b.pos){return b.pos-a.pos}return a.id<b.id?1:-1});return leafs[0].pos+"-"+leafs[0].id};PouchMerge.traverseRevTree=function(revs,callback){var toVisit=revs.slice();var node;while(node=toVisit.pop()){var pos=node.pos;var tree=node.ids;var branches=tree[2];var newCtx=callback(branches.length===0,pos,tree[0],node.ctx,tree[1]);for(var i=0,len=branches.length;i<len;i++){toVisit.push({pos:pos+1,ids:branches[i],ctx:newCtx})}}};PouchMerge.collectLeaves=function(revs){var leaves=[];PouchMerge.traverseRevTree(revs,function(isLeaf,pos,id,acc,opts){if(isLeaf){leaves.push({rev:pos+"-"+id,pos:pos,opts:opts})}});leaves.sort(function(a,b){return b.pos-a.pos});leaves.forEach(function(leaf){delete leaf.pos});return leaves};PouchMerge.collectConflicts=function(metadata){var win=PouchMerge.winningRev(metadata);var leaves=PouchMerge.collectLeaves(metadata.rev_tree);var conflicts=[];leaves.forEach(function(leaf){if(leaf.rev!==win&&!leaf.opts.deleted){conflicts.push(leaf.rev)}});return conflicts};PouchMerge.rootToLeaf=function(tree){var paths=[];PouchMerge.traverseRevTree(tree,function(isLeaf,pos,id,history,opts){history=history?history.slice(0):[];history.push({id:id,opts:opts});if(isLeaf){var rootPos=pos+1-history.length;paths.unshift({pos:rootPos,ids:history})}return history});return paths};module.exports=PouchMerge},{"pouchdb-extend":335}],303:[function(require,module,exports){"use strict";var utils=require("./utils");var EE=require("events").EventEmitter;var Checkpointer=require("./checkpointer");var MAX_SIMULTANEOUS_REVS=50;var RETRY_DEFAULT=false;function randomNumber(min,max){min=parseInt(min,10);max=parseInt(max,10);if(min!==min){min=0}if(max!==max||max<=min){max=(min||1)<<1}else{max=max+1}var ratio=Math.random();var range=max-min;return~~(range*ratio+min)}function defaultBackOff(min){var max=0;if(!min){max=2e3}return randomNumber(min,max)}function backOff(repId,src,target,opts,returnValue,result,error){if(opts.retry===false){returnValue.emit("error",error);returnValue.removeAllListeners();return}opts.default_back_off=opts.default_back_off||0;opts.retries=opts.retries||0;if(typeof opts.back_off_function!=="function"){opts.back_off_function=defaultBackOff}opts.retries++;if(opts.max_retries&&opts.retries>opts.max_retries){returnValue.emit("error",new Error("tried "+opts.retries+" times but replication failed"));returnValue.removeAllListeners();return}returnValue.emit("requestError",error);if(returnValue.state==="active"){returnValue.emit("paused",error);returnValue.state="stopped";returnValue.once("active",function(){opts.current_back_off=opts.default_back_off})}opts.current_back_off=opts.current_back_off||opts.default_back_off;opts.current_back_off=opts.back_off_function(opts.current_back_off);setTimeout(function(){replicate(repId,src,target,opts,returnValue)},opts.current_back_off)}utils.inherits(Replication,EE);function Replication(){EE.call(this);this.cancelled=false;this.state="pending";var self=this;var promise=new utils.Promise(function(fulfill,reject){self.once("complete",fulfill);self.once("error",reject)});self.then=function(resolve,reject){return promise.then(resolve,reject)};self.catch=function(reject){return promise.catch(reject)};self.catch(function(){})}Replication.prototype.cancel=function(){this.cancelled=true;this.state="cancelled";this.emit("cancel")};Replication.prototype.ready=function(src,target){var self=this;function onDestroy(){self.cancel()}src.once("destroyed",onDestroy);target.once("destroyed",onDestroy);function cleanup(){src.removeListener("destroyed",onDestroy);target.removeListener("destroyed",onDestroy)}this.then(cleanup,cleanup)};function genReplicationId(src,target,opts){var filterFun=opts.filter?opts.filter.toString():"";return src.id().then(function(src_id){return target.id().then(function(target_id){var queryData=src_id+target_id+filterFun+JSON.stringify(opts.query_params)+opts.doc_ids;return utils.MD5(queryData).then(function(md5){md5=md5.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+md5})})})}function replicate(repId,src,target,opts,returnValue,result){var batches=[];var currentBatch;var pendingBatch={seq:0,changes:[],docs:[]};var writingCheckpoint=false;var changesCompleted=false;var replicationCompleted=false;var last_seq=0;var continuous=opts.continuous||opts.live||false;var batch_size=opts.batch_size||100;var batches_limit=opts.batches_limit||10;var changesPending=false;var doc_ids=opts.doc_ids;var state={cancelled:false};var checkpointer=new Checkpointer(src,target,repId,state);var allErrors=[];var changedDocs=[];result=result||{ok:true,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var changesOpts={};returnValue.ready(src,target);function writeDocs(){if(currentBatch.docs.length===0){return}var docs=currentBatch.docs;return target.bulkDocs({docs:docs,new_edits:false}).then(function(res){if(state.cancelled){completeReplication();throw new Error("cancelled")}var errors=[];var errorsById={};res.forEach(function(res){if(res.error){result.doc_write_failures++;errors.push(res);errorsById[res.id]=res}});allErrors=allErrors.concat(errors);result.docs_written+=currentBatch.docs.length-errors.length;var non403s=errors.filter(function(error){return error.name!=="unauthorized"&&error.name!=="forbidden"});changedDocs=[];docs.forEach(function(doc){var error=errorsById[doc._id];if(error){returnValue.emit("denied",utils.clone(error))}else{changedDocs.push(doc)}});if(non403s.length>0){var error=new Error("bulkDocs error");error.other_errors=errors;abortReplication("target.bulkDocs failed to write docs",error);throw new Error("bulkWrite partial failure")}},function(err){result.doc_write_failures+=docs.length;throw err})}function processDiffDoc(id){var diffs=currentBatch.diffs;var allMissing=diffs[id].missing;var missingBatches=[];for(var i=0;i<allMissing.length;i+=MAX_SIMULTANEOUS_REVS){missingBatches.push(allMissing.slice(i,Math.min(allMissing.length,i+MAX_SIMULTANEOUS_REVS)))}return utils.Promise.all(missingBatches.map(function(missing){var opts={revs:true,open_revs:missing,attachments:true};return src.get(id,opts).then(function(docs){docs.forEach(function(doc){if(state.cancelled){return completeReplication()}if(doc.ok){result.docs_read++;currentBatch.pendingRevs++;currentBatch.docs.push(doc.ok)}});delete diffs[id]})}))}function getAllDocs(){var diffKeys=Object.keys(currentBatch.diffs);return utils.Promise.all(diffKeys.map(processDiffDoc))}function getRevisionOneDocs(){var ids=Object.keys(currentBatch.diffs).filter(function(id){var missing=currentBatch.diffs[id].missing;return missing.length===1&&missing[0].slice(0,2)==="1-"});if(!ids.length){return utils.Promise.resolve()}return src.allDocs({keys:ids,include_docs:true}).then(function(res){if(state.cancelled){completeReplication();throw new Error("cancelled")}res.rows.forEach(function(row){if(row.doc&&!row.deleted&&row.value.rev.slice(0,2)==="1-"&&(!row.doc._attachments||Object.keys(row.doc._attachments).length===0)){result.docs_read++;currentBatch.pendingRevs++;currentBatch.docs.push(row.doc);delete currentBatch.diffs[row.id]}})})}function getDocs(){return getRevisionOneDocs().then(getAllDocs)}function finishBatch(){writingCheckpoint=true;return checkpointer.writeCheckpoint(currentBatch.seq).then(function(){writingCheckpoint=false;if(state.cancelled){completeReplication();throw new Error("cancelled")}result.last_seq=last_seq=currentBatch.seq;var outResult=utils.clone(result);outResult.docs=changedDocs;returnValue.emit("change",outResult);currentBatch=undefined;getChanges()}).catch(function(err){writingCheckpoint=false;abortReplication("writeCheckpoint completed with error",err);throw err})}function getDiffs(){var diff={};currentBatch.changes.forEach(function(change){if(change.id==="_user/"){return}diff[change.id]=change.changes.map(function(x){return x.rev})});return target.revsDiff(diff).then(function(diffs){if(state.cancelled){completeReplication();throw new Error("cancelled")}currentBatch.diffs=diffs;currentBatch.pendingRevs=0})}function startNextBatch(){if(state.cancelled||currentBatch){return}if(batches.length===0){processPendingBatch(true);return}currentBatch=batches.shift();getDiffs().then(getDocs).then(writeDocs).then(finishBatch).then(startNextBatch).catch(function(err){abortReplication("batch processing terminated with error",err)})}function processPendingBatch(immediate){if(pendingBatch.changes.length===0){if(batches.length===0&&!currentBatch){if(continuous&&changesOpts.live||changesCompleted){returnValue.state="pending";returnValue.emit("paused");returnValue.emit("uptodate",result)}if(changesCompleted){completeReplication()}}return}if(immediate||changesCompleted||pendingBatch.changes.length>=batch_size){batches.push(pendingBatch);pendingBatch={seq:0,changes:[],docs:[]};if(returnValue.state==="pending"||returnValue.state==="stopped"){returnValue.state="active";returnValue.emit("active")}startNextBatch()}}function abortReplication(reason,err){if(replicationCompleted){return}if(!err.message){err.message=reason}result.ok=false;result.status="aborting";result.errors.push(err);allErrors=allErrors.concat(err);batches=[];pendingBatch={seq:0,changes:[],docs:[]};completeReplication()}function completeReplication(){if(replicationCompleted){return}if(state.cancelled){result.status="cancelled";if(writingCheckpoint){return}}result.status=result.status||"complete";result.end_time=new Date;result.last_seq=last_seq;replicationCompleted=state.cancelled=true;var non403s=allErrors.filter(function(error){return error.name!=="unauthorized"&&error.name!=="forbidden"});if(non403s.length>0){var error=allErrors.pop();if(allErrors.length>0){error.other_errors=allErrors}error.result=result;backOff(repId,src,target,opts,returnValue,result,error)}else{result.errors=allErrors;returnValue.emit("complete",result);returnValue.removeAllListeners()}}function onChange(change){if(state.cancelled){return completeReplication()}var filter=utils.filterChange(opts)(change);if(!filter){return}if(pendingBatch.changes.length===0&&batches.length===0&&!currentBatch){returnValue.emit("outofdate",result)}pendingBatch.seq=change.seq;pendingBatch.changes.push(change);processPendingBatch(batches.length===0)}function onChangesComplete(changes){changesPending=false;if(state.cancelled){return completeReplication()}if(changes.results.length>0){changesOpts.since=changes.last_seq;getChanges()}else{if(continuous){changesOpts.live=true;getChanges()}else{changesCompleted=true}}processPendingBatch(true)}function onChangesError(err){changesPending=false;if(state.cancelled){return completeReplication()}abortReplication("changes rejected",err)}function getChanges(){if(!(!changesPending&&!changesCompleted&&batches.length<batches_limit)){return}changesPending=true;function abortChanges(){changes.cancel()}function removeListener(){returnValue.removeListener("cancel",abortChanges)}returnValue.once("cancel",abortChanges);var changes=src.changes(changesOpts).on("change",onChange);changes.then(removeListener,removeListener);changes.then(onChangesComplete).catch(onChangesError)}function startChanges(){checkpointer.getCheckpoint().then(function(checkpoint){last_seq=checkpoint;changesOpts={since:last_seq,limit:batch_size,batch_size:batch_size,style:"all_docs",doc_ids:doc_ids,returnDocs:true};if(opts.filter){if(typeof opts.filter!=="string"){changesOpts.include_docs=true}else{changesOpts.filter=opts.filter}}if(opts.query_params){changesOpts.query_params=opts.query_params}if(opts.view){changesOpts.view=opts.view}getChanges()}).catch(function(err){abortReplication("getCheckpoint rejected with ",err)})}if(returnValue.cancelled){completeReplication();return}returnValue.once("cancel",completeReplication);if(typeof opts.onChange==="function"){returnValue.on("change",opts.onChange)}if(typeof opts.complete==="function"){returnValue.once("error",opts.complete);returnValue.once("complete",function(result){opts.complete(null,result)})}if(typeof opts.since==="undefined"){startChanges()}else{writingCheckpoint=true;checkpointer.writeCheckpoint(opts.since).then(function(){writingCheckpoint=false;if(state.cancelled){completeReplication();return}last_seq=opts.since;startChanges()}).catch(function(err){writingCheckpoint=false;abortReplication("writeCheckpoint completed with error",err);throw err})}}exports.toPouch=toPouch;function toPouch(db,opts){var PouchConstructor=opts.PouchConstructor;if(typeof db==="string"){return new PouchConstructor(db,opts)}else if(db.then){return db}else{return utils.Promise.resolve(db)}}exports.replicate=replicateWrapper;function replicateWrapper(src,target,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}if(typeof opts==="undefined"){opts={}}if(!opts.complete){opts.complete=callback||function(){}}opts=utils.clone(opts);opts.continuous=opts.continuous||opts.live;opts.retry="retry"in opts?opts.retry:RETRY_DEFAULT;opts.PouchConstructor=opts.PouchConstructor||this;var replicateRet=new Replication(opts);toPouch(src,opts).then(function(src){return toPouch(target,opts).then(function(target){return genReplicationId(src,target,opts).then(function(repId){replicate(repId,src,target,opts,replicateRet)})})}).catch(function(err){replicateRet.emit("error",err);opts.complete(err)});return replicateRet}},{"./checkpointer":284,"./utils":307,events:34}],304:[function(require,module,exports){"use strict";var PouchDB=require("./constructor");var utils=require("./utils");var EventEmitter=require("events").EventEmitter;PouchDB.adapters={};PouchDB.preferredAdapters=[];PouchDB.prefix="_pouch_";var eventEmitter=new EventEmitter;var eventEmitterMethods=["on","addListener","emit","listeners","once","removeAllListeners","removeListener","setMaxListeners"];eventEmitterMethods.forEach(function(method){PouchDB[method]=eventEmitter[method].bind(eventEmitter)});PouchDB.setMaxListeners(0);PouchDB.parseAdapter=function(name,opts){var match=name.match(/([a-z\-]*):\/\/(.*)/);var adapter,adapterName;if(match){name=/http(s?)/.test(match[1])?match[1]+"://"+match[2]:match[2];adapter=match[1];if(!PouchDB.adapters[adapter].valid()){throw"Invalid adapter"}return{name:name,adapter:match[1]}}var skipIdb="idb"in PouchDB.adapters&&"websql"in PouchDB.adapters&&utils.hasLocalStorage()&&localStorage["_pouch__websqldb_"+PouchDB.prefix+name];if(opts.adapter){adapterName=opts.adapter}else if(typeof opts!=="undefined"&&opts.db){adapterName="leveldb"}else{for(var i=0;i<PouchDB.preferredAdapters.length;++i){adapterName=PouchDB.preferredAdapters[i];if(adapterName in PouchDB.adapters){if(skipIdb&&adapterName==="idb"){console.log('PouchDB is downgrading "'+name+'" to WebSQL to'+" avoid data loss, because it was already opened with WebSQL.");continue}break}}}adapter=PouchDB.adapters[adapterName];var usePrefix=adapter&&"use_prefix"in adapter?adapter.use_prefix:true;return{name:usePrefix?PouchDB.prefix+name:name,adapter:adapterName}};PouchDB.destroy=utils.toPromise(function(name,opts,callback){console.log("PouchDB.destroy() is deprecated and will be removed. "+"Please use db.destroy() instead.");if(typeof opts==="function"||typeof opts==="undefined"){callback=opts;opts={}}if(name&&typeof name==="object"){opts=name;name=undefined}new PouchDB(name,opts,function(err,db){if(err){return callback(err)}db.destroy(callback)})});PouchDB.adapter=function(id,obj,addToPreferredAdapters){if(obj.valid()){PouchDB.adapters[id]=obj;if(addToPreferredAdapters){PouchDB.preferredAdapters.push(id)}}};PouchDB.plugin=function(obj){Object.keys(obj).forEach(function(id){PouchDB.prototype[id]=obj[id]})};PouchDB.defaults=function(defaultOpts){function PouchAlt(name,opts,callback){if(typeof opts==="function"||typeof opts==="undefined"){callback=opts;opts={}}if(name&&typeof name==="object"){opts=name;name=undefined}opts=utils.extend(true,{},defaultOpts,opts);PouchDB.call(this,name,opts,callback)}utils.inherits(PouchAlt,PouchDB);PouchAlt.destroy=utils.toPromise(function(name,opts,callback){if(typeof opts==="function"||typeof opts==="undefined"){callback=opts;opts={}}if(name&&typeof name==="object"){opts=name;name=undefined}opts=utils.extend(true,{},defaultOpts,opts);return PouchDB.destroy(name,opts,callback)});eventEmitterMethods.forEach(function(method){PouchAlt[method]=eventEmitter[method].bind(eventEmitter)});PouchAlt.setMaxListeners(0);PouchAlt.preferredAdapters=PouchDB.preferredAdapters.slice();Object.keys(PouchDB).forEach(function(key){if(!(key in PouchAlt)){PouchAlt[key]=PouchDB[key]}});return PouchAlt};module.exports=PouchDB},{"./constructor":285,"./utils":307,events:34}],305:[function(require,module,exports){"use strict";var utils=require("./utils");var replication=require("./replicate");var replicate=replication.replicate;var EE=require("events").EventEmitter;utils.inherits(Sync,EE);module.exports=sync;function sync(src,target,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}if(typeof opts==="undefined"){opts={}}opts=utils.clone(opts);opts.PouchConstructor=opts.PouchConstructor||this;src=replication.toPouch(src,opts);target=replication.toPouch(target,opts);return new Sync(src,target,opts,callback)}function Sync(src,target,opts,callback){var self=this;this.canceled=false;var onChange,complete;if("onChange"in opts){onChange=opts.onChange;delete opts.onChange}if(typeof callback==="function"&&!opts.complete){complete=callback}else if("complete"in opts){complete=opts.complete;delete opts.complete}this.push=replicate(src,target,opts);this.pull=replicate(target,src,opts);var emittedCancel=false;function onCancel(data){if(!emittedCancel){emittedCancel=true;self.emit("cancel",data)}}function pullChange(change){self.emit("change",{direction:"pull",change:change})}function pushChange(change){self.emit("change",{direction:"push",change:change})}function pushDenied(doc){self.emit("denied",{direction:"push",doc:doc})}function pullDenied(doc){self.emit("denied",{direction:"pull",doc:doc})}var listeners={};var removed={};function removeAll(type){return function(event,func){var isChange=event==="change"&&(func===pullChange||func===pushChange);var isCancel=event==="cancel"&&func===onCancel;var isOtherEvent=event in listeners&&func===listeners[event];if(isChange||isCancel||isOtherEvent){if(!(event in removed)){removed[event]={}}removed[event][type]=true;if(Object.keys(removed[event]).length===2){self.removeAllListeners(event)}}}}if(opts.live){this.push.on("complete",self.pull.cancel.bind(self.pull));this.pull.on("complete",self.push.cancel.bind(self.push))}this.on("newListener",function(event){if(event==="change"){self.pull.on("change",pullChange);self.push.on("change",pushChange)}else if(event==="denied"){self.pull.on("denied",pullDenied);self.push.on("denied",pushDenied)}else if(event==="cancel"){self.pull.on("cancel",onCancel);self.push.on("cancel",onCancel)}else if(event!=="error"&&event!=="removeListener"&&event!=="complete"&&!(event in listeners)){listeners[event]=function(e){self.emit(event,e)};self.pull.on(event,listeners[event]);self.push.on(event,listeners[event])}});this.on("removeListener",function(event){if(event==="change"){self.pull.removeListener("change",pullChange);self.push.removeListener("change",pushChange)}else if(event==="cancel"){self.pull.removeListener("cancel",onCancel);self.push.removeListener("cancel",onCancel)}else if(event in listeners){if(typeof listeners[event]==="function"){self.pull.removeListener(event,listeners[event]);self.push.removeListener(event,listeners[event]);delete listeners[event]}}});this.pull.on("removeListener",removeAll("pull"));this.push.on("removeListener",removeAll("push"));var promise=utils.Promise.all([this.push,this.pull]).then(function(resp){var out={push:resp[0],pull:resp[1]};self.emit("complete",out);if(complete){complete(null,out)}self.removeAllListeners();return out},function(err){self.cancel();self.emit("error",err);if(complete){complete(err)}self.removeAllListeners();throw err});this.then=function(success,err){return promise.then(success,err)};this.catch=function(err){return promise.catch(err)}}Sync.prototype.cancel=function(){if(!this.canceled){this.canceled=true;this.push.cancel();this.pull.cancel()}}},{"./replicate":303,"./utils":307,events:34}],306:[function(require,module,exports){"use strict";module.exports=TaskQueue;function TaskQueue(){this.isReady=false;this.failed=false;this.queue=[]}TaskQueue.prototype.execute=function(){var d,func;if(this.failed){while(d=this.queue.shift()){if(typeof d==="function"){d(this.failed);continue}func=d.parameters[d.parameters.length-1];if(typeof func==="function"){func(this.failed)}else if(d.name==="changes"&&typeof func.complete==="function"){func.complete(this.failed)}}}else if(this.isReady){while(d=this.queue.shift()){if(typeof d==="function"){d()}else{d.task=this.db[d.name].apply(this.db,d.parameters)}}}};TaskQueue.prototype.fail=function(err){this.failed=err;this.execute()};TaskQueue.prototype.ready=function(db){if(this.failed){return false}else if(arguments.length===0){return this.isReady}this.isReady=db?true:false;this.db=db;this.execute()};TaskQueue.prototype.addTask=function(name,parameters){if(typeof name==="function"){this.queue.push(name);if(this.failed){this.execute()}}else{var task={name:name,parameters:parameters};this.queue.push(task);if(this.failed){this.execute()}return task}}},{}],307:[function(require,module,exports){(function(process){var merge=require("./merge");exports.extend=require("pouchdb-extend");exports.ajax=require("./deps/ajax");exports.createBlob=require("./deps/blob");exports.uuid=require("./deps/uuid");exports.getArguments=require("argsarray");var buffer=require("./deps/buffer");var errors=require("./deps/errors");var EventEmitter=require("events").EventEmitter;var collections=require("pouchdb-collections");exports.Map=collections.Map;exports.Set=collections.Set;var parseDoc=require("./deps/parse-doc");var Promise=require("./deps/promise");exports.Promise=Promise;exports.lastIndexOf=function(str,char){for(var i=str.length-1;i>=0;i--){if(str.charAt(i)===char){return i}}return-1};exports.clone=function(obj){return exports.extend(true,{},obj)};exports.pick=function(obj,arr){var res={};for(var i=0,len=arr.length;i<len;i++){var prop=arr[i];res[prop]=obj[prop]}return res};exports.inherits=require("inherits");function isChromeApp(){return typeof chrome!=="undefined"&&typeof chrome.storage!=="undefined"&&typeof chrome.storage.local!=="undefined"}exports.call=exports.getArguments(function(args){if(!args.length){return}var fun=args.shift();if(typeof fun==="function"){fun.apply(this,args)}});exports.isLocalId=function(id){return/^_local/.test(id)};exports.isDeleted=function(metadata,rev){if(!rev){rev=merge.winningRev(metadata)}var dashIndex=rev.indexOf("-");if(dashIndex!==-1){rev=rev.substring(dashIndex+1)}var deleted=false;merge.traverseRevTree(metadata.rev_tree,function(isLeaf,pos,id,acc,opts){if(id===rev){deleted=!!opts.deleted}});return deleted};exports.revExists=function(metadata,rev){var found=false;merge.traverseRevTree(metadata.rev_tree,function(leaf,pos,id){if(pos+"-"+id===rev){found=true}});return found};exports.filterChange=function filterChange(opts){var req={};var hasFilter=opts.filter&&typeof opts.filter==="function";req.query=opts.query_params;return function filter(change){if(!change.doc){change.doc={}}if(opts.filter&&hasFilter&&!opts.filter.call(this,change.doc,req)){return false}if(!opts.include_docs){delete change.doc}else if(!opts.attachments){for(var att in change.doc._attachments){if(change.doc._attachments.hasOwnProperty(att)){change.doc._attachments[att].stub=true}}}return true}};exports.parseDoc=parseDoc.parseDoc;exports.invalidIdError=parseDoc.invalidIdError;exports.isCordova=function(){return typeof cordova!=="undefined"||typeof PhoneGap!=="undefined"||typeof phonegap!=="undefined"};exports.hasLocalStorage=function(){if(isChromeApp()){return false}try{return localStorage}catch(e){return false}};exports.Changes=Changes;exports.inherits(Changes,EventEmitter);function Changes(){if(!(this instanceof Changes)){return new Changes}var self=this;EventEmitter.call(this);this.isChrome=isChromeApp();this.listeners={};this.hasLocal=false;if(!this.isChrome){this.hasLocal=exports.hasLocalStorage()}if(this.isChrome){chrome.storage.onChanged.addListener(function(e){if(e.db_name!=null){self.emit(e.dbName.newValue)}})}else if(this.hasLocal){if(typeof addEventListener!=="undefined"){addEventListener("storage",function(e){self.emit(e.key)})}else{window.attachEvent("storage",function(e){self.emit(e.key)})}}}Changes.prototype.addListener=function(dbName,id,db,opts){if(this.listeners[id]){return}var self=this;var inprogress=false;function eventFunction(){if(!self.listeners[id]){return}if(inprogress){inprogress="waiting";return}inprogress=true;db.changes({style:opts.style,include_docs:opts.include_docs,attachments:opts.attachments,conflicts:opts.conflicts,continuous:false,descending:false,filter:opts.filter,doc_ids:opts.doc_ids,view:opts.view,since:opts.since,query_params:opts.query_params}).on("change",function(c){if(c.seq>opts.since&&!opts.cancelled){opts.since=c.seq;exports.call(opts.onChange,c)}}).on("complete",function(){if(inprogress==="waiting"){process.nextTick(function(){self.notify(dbName)})}inprogress=false}).on("error",function(){inprogress=false})}this.listeners[id]=eventFunction;this.on(dbName,eventFunction)};Changes.prototype.removeListener=function(dbName,id){if(!(id in this.listeners)){return}EventEmitter.prototype.removeListener.call(this,dbName,this.listeners[id])};Changes.prototype.notifyLocalWindows=function(dbName){
if(this.isChrome){chrome.storage.local.set({dbName:dbName})}else if(this.hasLocal){localStorage[dbName]=localStorage[dbName]==="a"?"b":"a"}};Changes.prototype.notify=function(dbName){this.emit(dbName);this.notifyLocalWindows(dbName)};if(typeof atob==="function"){exports.atob=function(str){return atob(str)}}else{exports.atob=function(str){var base64=new buffer(str,"base64");if(base64.toString("base64")!==str){throw"Cannot base64 encode full string"}return base64.toString("binary")}}if(typeof btoa==="function"){exports.btoa=function(str){return btoa(str)}}else{exports.btoa=function(str){return new buffer(str,"binary").toString("base64")}}exports.fixBinary=function(bin){if(!process.browser){return bin}var length=bin.length;var buf=new ArrayBuffer(length);var arr=new Uint8Array(buf);for(var i=0;i<length;i++){arr[i]=bin.charCodeAt(i)}return buf};exports.readAsBinaryString=function(blob,callback){var reader=new FileReader;var hasBinaryString=typeof reader.readAsBinaryString==="function";reader.onloadend=function(e){var result=e.target.result||"";if(hasBinaryString){return callback(result)}callback(exports.arrayBufferToBinaryString(result))};if(hasBinaryString){reader.readAsBinaryString(blob)}else{reader.readAsArrayBuffer(blob)}};exports.readAsArrayBuffer=function(blob,callback){var reader=new FileReader;reader.onloadend=function(e){var result=e.target.result||new ArrayBuffer(0);callback(result)};reader.readAsArrayBuffer(blob)};exports.once=function(fun){var called=false;return exports.getArguments(function(args){if(called){throw new Error("once called  more than once")}else{called=true;fun.apply(this,args)}})};exports.toPromise=function(func){return exports.getArguments(function(args){var self=this;var tempCB=typeof args[args.length-1]==="function"?args.pop():false;var usedCB;if(tempCB){usedCB=function(err,resp){process.nextTick(function(){tempCB(err,resp)})}}var promise=new Promise(function(fulfill,reject){var resp;try{var callback=exports.once(function(err,mesg){if(err){reject(err)}else{fulfill(mesg)}});args.push(callback);resp=func.apply(self,args);if(resp&&typeof resp.then==="function"){fulfill(resp)}}catch(e){reject(e)}});if(usedCB){promise.then(function(result){usedCB(null,result)},usedCB)}promise.cancel=function(){return this};return promise})};exports.adapterFun=function(name,callback){var log=require("debug")("pouchdb:api");function logApiCall(self,name,args){if(!log.enabled){return}var logArgs=[self._db_name,name];for(var i=0;i<args.length-1;i++){logArgs.push(args[i])}log.apply(null,logArgs);var origCallback=args[args.length-1];args[args.length-1]=function(err,res){var responseArgs=[self._db_name,name];responseArgs=responseArgs.concat(err?["error",err]:["success",res]);log.apply(null,responseArgs);origCallback(err,res)}}return exports.toPromise(exports.getArguments(function(args){if(this._closed){return Promise.reject(new Error("database is closed"))}var self=this;logApiCall(self,name,args);if(!this.taskqueue.isReady){return new Promise(function(fulfill,reject){self.taskqueue.addTask(function(failed){if(failed){reject(failed)}else{fulfill(self[name].apply(self,args))}})})}return callback.apply(this,args)}))};exports.arrayBufferToBinaryString=function(buffer){var binary="";var bytes=new Uint8Array(buffer);var length=bytes.byteLength;for(var i=0;i<length;i++){binary+=String.fromCharCode(bytes[i])}return binary};exports.cancellableFun=function(fun,self,opts){opts=opts?exports.clone(true,{},opts):{};var emitter=new EventEmitter;var oldComplete=opts.complete||function(){};var complete=opts.complete=exports.once(function(err,resp){if(err){oldComplete(err)}else{emitter.emit("end",resp);oldComplete(null,resp)}emitter.removeAllListeners()});var oldOnChange=opts.onChange||function(){};var lastChange=0;self.on("destroyed",function(){emitter.removeAllListeners()});opts.onChange=function(change){oldOnChange(change);if(change.seq<=lastChange){return}lastChange=change.seq;emitter.emit("change",change);if(change.deleted){emitter.emit("delete",change)}else if(change.changes.length===1&&change.changes[0].rev.slice(0,1)==="1-"){emitter.emit("create",change)}else{emitter.emit("update",change)}};var promise=new Promise(function(fulfill,reject){opts.complete=function(err,res){if(err){reject(err)}else{fulfill(res)}}});promise.then(function(result){complete(null,result)},complete);promise.cancel=function(){promise.isCancelled=true;if(self.taskqueue.isReady){opts.complete(null,{status:"cancelled"})}};if(!self.taskqueue.isReady){self.taskqueue.addTask(function(){if(promise.isCancelled){opts.complete(null,{status:"cancelled"})}else{fun(self,opts,promise)}})}else{fun(self,opts,promise)}promise.on=emitter.on.bind(emitter);promise.once=emitter.once.bind(emitter);promise.addListener=emitter.addListener.bind(emitter);promise.removeListener=emitter.removeListener.bind(emitter);promise.removeAllListeners=emitter.removeAllListeners.bind(emitter);promise.setMaxListeners=emitter.setMaxListeners.bind(emitter);promise.listeners=emitter.listeners.bind(emitter);promise.emit=emitter.emit.bind(emitter);return promise};exports.MD5=exports.toPromise(require("./deps/md5"));exports.explain404=require("./deps/explain404");exports.info=function(str){if(typeof console!=="undefined"&&"info"in console){console.info(str)}};exports.parseUri=require("./deps/parse-uri");exports.compare=function(left,right){return left<right?-1:left>right?1:0};exports.updateDoc=function updateDoc(prev,docInfo,results,i,cb,writeDoc,newEdits){if(exports.revExists(prev,docInfo.metadata.rev)){results[i]=docInfo;return cb()}var previousWinningRev=merge.winningRev(prev);var previouslyDeleted=exports.isDeleted(prev,previousWinningRev);var deleted=exports.isDeleted(docInfo.metadata);var isRoot=/^1-/.test(docInfo.metadata.rev);if(previouslyDeleted&&!deleted&&newEdits&&isRoot){var newDoc=docInfo.data;newDoc._rev=previousWinningRev;newDoc._id=docInfo.metadata.id;docInfo=exports.parseDoc(newDoc,newEdits)}var merged=merge.merge(prev.rev_tree,docInfo.metadata.rev_tree[0],1e3);var inConflict=newEdits&&(previouslyDeleted&&deleted||!previouslyDeleted&&merged.conflicts!=="new_leaf"||previouslyDeleted&&!deleted&&merged.conflicts==="new_branch");if(inConflict){var err=errors.error(errors.REV_CONFLICT);results[i]=err;return cb()}var newRev=docInfo.metadata.rev;docInfo.metadata.rev_tree=merged.tree;if(prev.rev_map){docInfo.metadata.rev_map=prev.rev_map}var winningRev=merge.winningRev(docInfo.metadata);var winningRevIsDeleted=exports.isDeleted(docInfo.metadata,winningRev);var delta=previouslyDeleted===winningRevIsDeleted?0:previouslyDeleted<winningRevIsDeleted?-1:1;var newRevIsDeleted=exports.isDeleted(docInfo.metadata,newRev);writeDoc(docInfo,winningRev,winningRevIsDeleted,newRevIsDeleted,true,delta,i,cb)};exports.processDocs=function processDocs(docInfos,api,fetchedDocs,tx,results,writeDoc,opts,overallCallback){if(!docInfos.length){return}function insertDoc(docInfo,resultsIdx,callback){var winningRev=merge.winningRev(docInfo.metadata);var deleted=exports.isDeleted(docInfo.metadata,winningRev);if("was_delete"in opts&&deleted){results[resultsIdx]=errors.error(errors.MISSING_DOC,"deleted");return callback()}var delta=deleted?0:1;writeDoc(docInfo,winningRev,deleted,deleted,false,delta,resultsIdx,callback)}var newEdits=opts.new_edits;var idsToDocs=new exports.Map;var docsDone=0;var docsToDo=docInfos.length;function checkAllDocsDone(){if(++docsDone===docsToDo&&overallCallback){overallCallback()}}docInfos.forEach(function(currentDoc,resultsIdx){if(currentDoc._id&&exports.isLocalId(currentDoc._id)){api[currentDoc._deleted?"_removeLocal":"_putLocal"](currentDoc,{ctx:tx},function(err){if(err){results[resultsIdx]=err}else{results[resultsIdx]={ok:true}}checkAllDocsDone()});return}var id=currentDoc.metadata.id;if(idsToDocs.has(id)){docsToDo--;idsToDocs.get(id).push([currentDoc,resultsIdx])}else{idsToDocs.set(id,[[currentDoc,resultsIdx]])}});idsToDocs.forEach(function(docs,id){var numDone=0;function docWritten(){if(++numDone<docs.length){nextDoc()}else{checkAllDocsDone()}}function nextDoc(){var value=docs[numDone];var currentDoc=value[0];var resultsIdx=value[1];if(fetchedDocs.has(id)){exports.updateDoc(fetchedDocs.get(id),currentDoc,results,resultsIdx,docWritten,writeDoc,newEdits)}else{insertDoc(currentDoc,resultsIdx,docWritten)}}nextDoc()})};exports.preprocessAttachments=function preprocessAttachments(docInfos,blobType,callback){if(!docInfos.length){return callback()}var docv=0;function parseBase64(data){try{return exports.atob(data)}catch(e){var err=errors.error(errors.BAD_ARG,"Attachments need to be base64 encoded");return{error:err}}}function preprocessAttachment(att,callback){if(att.stub){return callback()}if(typeof att.data==="string"){var asBinary=parseBase64(att.data);if(asBinary.error){return callback(asBinary.error)}att.length=asBinary.length;if(blobType==="blob"){att.data=exports.createBlob([exports.fixBinary(asBinary)],{type:att.content_type})}else if(blobType==="base64"){att.data=exports.btoa(asBinary)}else{att.data=asBinary}exports.MD5(asBinary).then(function(result){att.digest="md5-"+result;callback()})}else{exports.readAsArrayBuffer(att.data,function(buff){if(blobType==="binary"){att.data=exports.arrayBufferToBinaryString(buff)}else if(blobType==="base64"){att.data=exports.btoa(exports.arrayBufferToBinaryString(buff))}exports.MD5(buff).then(function(result){att.digest="md5-"+result;att.length=buff.byteLength;callback()})})}}var overallErr;docInfos.forEach(function(docInfo){var attachments=docInfo.data&&docInfo.data._attachments?Object.keys(docInfo.data._attachments):[];var recv=0;if(!attachments.length){return done()}function processedAttachment(err){overallErr=err;recv++;if(recv===attachments.length){done()}}for(var key in docInfo.data._attachments){if(docInfo.data._attachments.hasOwnProperty(key)){preprocessAttachment(docInfo.data._attachments[key],processedAttachment)}}});function done(){docv++;if(docInfos.length===docv){if(overallErr){callback(overallErr)}else{callback()}}}};exports.compactTree=function compactTree(metadata){var revs=[];merge.traverseRevTree(metadata.rev_tree,function(isLeaf,pos,revHash,ctx,opts){if(opts.status==="available"&&!isLeaf){revs.push(pos+"-"+revHash);opts.status="missing"}});return revs};var vuvuzela=require("vuvuzela");exports.safeJsonParse=function safeJsonParse(str){try{return JSON.parse(str)}catch(e){return vuvuzela.parse(str)}};exports.safeJsonStringify=function safeJsonStringify(json){try{return JSON.stringify(json)}catch(e){return vuvuzela.stringify(json)}}}).call(this,require("_process"))},{"./deps/ajax":286,"./deps/blob":287,"./deps/buffer":288,"./deps/errors":289,"./deps/explain404":290,"./deps/md5":291,"./deps/parse-doc":292,"./deps/parse-uri":294,"./deps/promise":295,"./deps/uuid":298,"./merge":302,_process:35,argsarray:309,debug:310,events:34,inherits:313,"pouchdb-collections":334,"pouchdb-extend":335,vuvuzela:344}],308:[function(require,module,exports){module.exports="3.5.0"},{}],309:[function(require,module,exports){"use strict";module.exports=argsArray;function argsArray(fun){return function(){var len=arguments.length;if(len){var args=[];var i=-1;while(++i<len){args[i]=arguments[i]}return fun.call(this,args)}else{return fun.call(this,[])}}}},{}],310:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":311}],311:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:312}],312:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],313:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],314:[function(require,module,exports){"use strict";module.exports=INTERNAL;function INTERNAL(){}},{}],315:[function(require,module,exports){"use strict";var Promise=require("./promise");var reject=require("./reject");var resolve=require("./resolve");var INTERNAL=require("./INTERNAL");var handlers=require("./handlers");module.exports=all;function all(iterable){if(Object.prototype.toString.call(iterable)!=="[object Array]"){return reject(new TypeError("must be an array"))}var len=iterable.length;var called=false;if(!len){return resolve([])}var values=new Array(len);var resolved=0;var i=-1;var promise=new Promise(INTERNAL);while(++i<len){allResolver(iterable[i],i)}return promise;function allResolver(value,i){resolve(value).then(resolveFromAll,function(error){if(!called){called=true;handlers.reject(promise,error)}});function resolveFromAll(outValue){values[i]=outValue;if(++resolved===len&!called){called=true;handlers.resolve(promise,values)}}}}},{"./INTERNAL":314,"./handlers":316,"./promise":318,"./reject":321,"./resolve":322}],316:[function(require,module,exports){"use strict";var tryCatch=require("./tryCatch");var resolveThenable=require("./resolveThenable");var states=require("./states");exports.resolve=function(self,value){var result=tryCatch(getThen,value);if(result.status==="error"){return exports.reject(self,result.value)}var thenable=result.value;if(thenable){resolveThenable.safely(self,thenable)}else{self.state=states.FULFILLED;self.outcome=value;var i=-1;var len=self.queue.length;while(++i<len){self.queue[i].callFulfilled(value)}}return self};exports.reject=function(self,error){self.state=states.REJECTED;self.outcome=error;var i=-1;var len=self.queue.length;while(++i<len){self.queue[i].callRejected(error)}return self};function getThen(obj){var then=obj&&obj.then;if(obj&&typeof obj==="object"&&typeof then==="function"){return function appyThen(){then.apply(obj,arguments)}}}},{"./resolveThenable":323,"./states":324,"./tryCatch":325}],317:[function(require,module,exports){module.exports=exports=require("./promise");exports.resolve=require("./resolve");exports.reject=require("./reject");exports.all=require("./all");exports.race=require("./race")},{"./all":315,"./promise":318,"./race":320,"./reject":321,"./resolve":322}],318:[function(require,module,exports){"use strict";var unwrap=require("./unwrap");var INTERNAL=require("./INTERNAL");var resolveThenable=require("./resolveThenable");var states=require("./states");var QueueItem=require("./queueItem");module.exports=Promise;function Promise(resolver){if(!(this instanceof Promise)){return new Promise(resolver)}if(typeof resolver!=="function"){throw new TypeError("resolver must be a function")}this.state=states.PENDING;this.queue=[];this.outcome=void 0;if(resolver!==INTERNAL){resolveThenable.safely(this,resolver)}}Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};Promise.prototype.then=function(onFulfilled,onRejected){if(typeof onFulfilled!=="function"&&this.state===states.FULFILLED||typeof onRejected!=="function"&&this.state===states.REJECTED){return this}var promise=new Promise(INTERNAL);if(this.state!==states.PENDING){var resolver=this.state===states.FULFILLED?onFulfilled:onRejected;unwrap(promise,resolver,this.outcome)}else{this.queue.push(new QueueItem(promise,onFulfilled,onRejected))}return promise}},{"./INTERNAL":314,"./queueItem":319,"./resolveThenable":323,"./states":324,"./unwrap":326}],319:[function(require,module,exports){"use strict";var handlers=require("./handlers");var unwrap=require("./unwrap");module.exports=QueueItem;function QueueItem(promise,onFulfilled,onRejected){this.promise=promise;if(typeof onFulfilled==="function"){this.onFulfilled=onFulfilled;this.callFulfilled=this.otherCallFulfilled}if(typeof onRejected==="function"){this.onRejected=onRejected;this.callRejected=this.otherCallRejected}}QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)};QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)};QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)};QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)}},{"./handlers":316,"./unwrap":326}],320:[function(require,module,exports){"use strict";var Promise=require("./promise");var reject=require("./reject");var resolve=require("./resolve");var INTERNAL=require("./INTERNAL");var handlers=require("./handlers");module.exports=race;function race(iterable){if(Object.prototype.toString.call(iterable)!=="[object Array]"){return reject(new TypeError("must be an array"))}var len=iterable.length;var called=false;if(!len){return resolve([])}var resolved=0;var i=-1;var promise=new Promise(INTERNAL);while(++i<len){resolver(iterable[i])}return promise;function resolver(value){resolve(value).then(function(response){if(!called){called=true;handlers.resolve(promise,response)}},function(error){if(!called){called=true;handlers.reject(promise,error)}})}}},{"./INTERNAL":314,"./handlers":316,"./promise":318,"./reject":321,"./resolve":322}],321:[function(require,module,exports){"use strict";var Promise=require("./promise");var INTERNAL=require("./INTERNAL");var handlers=require("./handlers");module.exports=reject;function reject(reason){var promise=new Promise(INTERNAL);return handlers.reject(promise,reason)}},{"./INTERNAL":314,"./handlers":316,"./promise":318}],322:[function(require,module,exports){"use strict";var Promise=require("./promise");var INTERNAL=require("./INTERNAL");var handlers=require("./handlers");module.exports=resolve;var FALSE=handlers.resolve(new Promise(INTERNAL),false);var NULL=handlers.resolve(new Promise(INTERNAL),null);var UNDEFINED=handlers.resolve(new Promise(INTERNAL),void 0);var ZERO=handlers.resolve(new Promise(INTERNAL),0);var EMPTYSTRING=handlers.resolve(new Promise(INTERNAL),"");function resolve(value){if(value){if(value instanceof Promise){return value}return handlers.resolve(new Promise(INTERNAL),value)}var valueType=typeof value;switch(valueType){case"boolean":return FALSE;case"undefined":return UNDEFINED;case"object":return NULL;case"number":return ZERO;case"string":return EMPTYSTRING}}},{"./INTERNAL":314,"./handlers":316,"./promise":318}],323:[function(require,module,exports){"use strict";var handlers=require("./handlers");var tryCatch=require("./tryCatch");function safelyResolveThenable(self,thenable){var called=false;function onError(value){if(called){return}called=true;handlers.reject(self,value)}function onSuccess(value){if(called){return}called=true;handlers.resolve(self,value)}function tryToUnwrap(){thenable(onSuccess,onError)}var result=tryCatch(tryToUnwrap);if(result.status==="error"){onError(result.value)}}exports.safely=safelyResolveThenable},{"./handlers":316,"./tryCatch":325}],324:[function(require,module,exports){exports.REJECTED=["REJECTED"];exports.FULFILLED=["FULFILLED"];exports.PENDING=["PENDING"]},{}],325:[function(require,module,exports){"use strict";module.exports=tryCatch;function tryCatch(func,value){var out={};try{out.value=func(value);out.status="success"}catch(e){out.status="error";out.value=e}return out}},{}],326:[function(require,module,exports){"use strict";var immediate=require("immediate");var handlers=require("./handlers");module.exports=unwrap;function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}if(returnValue===promise){handlers.reject(promise,new TypeError("Cannot resolve promise with itself"))}else{handlers.resolve(promise,returnValue)}})}},{"./handlers":316,immediate:327}],327:[function(require,module,exports){"use strict";var types=[require("./nextTick"),require("./mutation.js"),require("./messageChannel"),require("./stateChange"),require("./timeout")];var draining;var currentQueue;var queueIndex=-1;var queue=[];function cleanUpNextTick(){draining=false;if(currentQueue&&currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){nextTick()}}function nextTick(){draining=true;var len=queue.length;var timeout=setTimeout(cleanUpNextTick);while(len){currentQueue=queue;queue=[];while(++queueIndex<len){currentQueue[queueIndex]()}queueIndex=-1;len=queue.length}queueIndex=-1;draining=false;clearTimeout(timeout)}var scheduleDrain;var i=-1;var len=types.length;while(++i<len){if(types[i]&&types[i].test&&types[i].test()){scheduleDrain=types[i].install(nextTick);break}}module.exports=immediate;function immediate(task){if(queue.push(task)===1&&!draining){scheduleDrain()}}},{"./messageChannel":328,"./mutation.js":329,"./nextTick":33,"./stateChange":330,"./timeout":331}],328:[function(require,module,exports){(function(global){"use strict";exports.test=function(){if(global.setImmediate){return false}return typeof global.MessageChannel!=="undefined"};exports.install=function(func){var channel=new global.MessageChannel;channel.port1.onmessage=func;return function(){channel.port2.postMessage(0)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],329:[function(require,module,exports){(function(global){"use strict";var Mutation=global.MutationObserver||global.WebKitMutationObserver;exports.test=function(){return Mutation};exports.install=function(handle){var called=0;var observer=new Mutation(handle);var element=global.document.createTextNode("");observer.observe(element,{characterData:true});return function(){element.data=called=++called%2}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],330:[function(require,module,exports){(function(global){"use strict";exports.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")};exports.install=function(handle){return function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){handle();scriptEl.onreadystatechange=null;scriptEl.parentNode.removeChild(scriptEl);scriptEl=null};global.document.documentElement.appendChild(scriptEl);return handle}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],331:[function(require,module,exports){"use strict";exports.test=function(){return true};exports.install=function(t){return function(){setTimeout(t,0)}}},{}],332:[function(require,module,exports){"use strict";var MIN_MAGNITUDE=-324;var MAGNITUDE_DIGITS=3;var SEP="";var utils=require("./utils");exports.collate=function(a,b){if(a===b){return 0}a=exports.normalizeKey(a);b=exports.normalizeKey(b);var ai=collationIndex(a);var bi=collationIndex(b);if(ai-bi!==0){return ai-bi}if(a===null){return 0}switch(typeof a){case"number":return a-b;case"boolean":return a===b?0:a<b?-1:1;case"string":return stringCollate(a,b)}return Array.isArray(a)?arrayCollate(a,b):objectCollate(a,b)};exports.normalizeKey=function(key){switch(typeof key){case"undefined":return null;case"number":if(key===Infinity||key===-Infinity||isNaN(key)){return null}return key;case"object":var origKey=key;if(Array.isArray(key)){var len=key.length;key=new Array(len);for(var i=0;i<len;i++){key[i]=exports.normalizeKey(origKey[i])}}else if(key instanceof Date){return key.toJSON()}else if(key!==null){key={};for(var k in origKey){if(origKey.hasOwnProperty(k)){var val=origKey[k];if(typeof val!=="undefined"){key[k]=exports.normalizeKey(val)}}}}}return key};function indexify(key){if(key!==null){switch(typeof key){case"boolean":return key?1:0;case"number":return numToIndexableString(key);case"string":return key.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var isArray=Array.isArray(key);var arr=isArray?key:Object.keys(key);var i=-1;var len=arr.length;var result="";if(isArray){while(++i<len){result+=exports.toIndexableString(arr[i])}}else{while(++i<len){var objKey=arr[i];result+=exports.toIndexableString(objKey)+exports.toIndexableString(key[objKey])}}return result}}return""}exports.toIndexableString=function(key){var zero="\x00";key=exports.normalizeKey(key);return collationIndex(key)+SEP+indexify(key)+zero};function parseNumber(str,i){var originalIdx=i;var num;var zero=str[i]==="1";if(zero){num=0;i++}else{var neg=str[i]==="0";i++;var numAsString="";var magAsString=str.substring(i,i+MAGNITUDE_DIGITS);var magnitude=parseInt(magAsString,10)+MIN_MAGNITUDE;if(neg){magnitude=-magnitude}i+=MAGNITUDE_DIGITS;while(true){var ch=str[i];if(ch==="\x00"){break}else{numAsString+=ch}i++}numAsString=numAsString.split(".");if(numAsString.length===1){num=parseInt(numAsString,10)}else{num=parseFloat(numAsString[0]+"."+numAsString[1])}if(neg){num=num-10}if(magnitude!==0){num=parseFloat(num+"e"+magnitude)}}return{num:num,length:i-originalIdx}}function pop(stack,metaStack){var obj=stack.pop();if(metaStack.length){var lastMetaElement=metaStack[metaStack.length-1];if(obj===lastMetaElement.element){metaStack.pop();lastMetaElement=metaStack[metaStack.length-1]}var element=lastMetaElement.element;var lastElementIndex=lastMetaElement.index;if(Array.isArray(element)){element.push(obj)}else if(lastElementIndex===stack.length-2){var key=stack.pop();element[key]=obj}else{stack.push(obj)}}}exports.parseIndexableString=function(str){var stack=[];var metaStack=[];var i=0;while(true){var collationIndex=str[i++];if(collationIndex==="\x00"){if(stack.length===1){return stack.pop()}else{pop(stack,metaStack);continue}}switch(collationIndex){case"1":stack.push(null);break;case"2":stack.push(str[i]==="1");i++;break;case"3":var parsedNum=parseNumber(str,i);stack.push(parsedNum.num);i+=parsedNum.length;break;case"4":var parsedStr="";while(true){var ch=str[i];if(ch==="\x00"){break}parsedStr+=ch;i++}parsedStr=parsedStr.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"");stack.push(parsedStr);break;case"5":var arrayElement={element:[],index:stack.length};stack.push(arrayElement.element);metaStack.push(arrayElement);break;case"6":var objElement={element:{},index:stack.length};stack.push(objElement.element);metaStack.push(objElement);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+collationIndex)}}};function arrayCollate(a,b){var len=Math.min(a.length,b.length);for(var i=0;i<len;i++){var sort=exports.collate(a[i],b[i]);if(sort!==0){return sort}}return a.length===b.length?0:a.length>b.length?1:-1}function stringCollate(a,b){return a===b?0:a>b?1:-1}function objectCollate(a,b){var ak=Object.keys(a),bk=Object.keys(b);var len=Math.min(ak.length,bk.length);for(var i=0;i<len;i++){var sort=exports.collate(ak[i],bk[i]);if(sort!==0){return sort}sort=exports.collate(a[ak[i]],b[bk[i]]);if(sort!==0){return sort}}return ak.length===bk.length?0:ak.length>bk.length?1:-1}function collationIndex(x){var id=["boolean","number","string","object"];var idx=id.indexOf(typeof x);if(~idx){if(x===null){return 1}if(Array.isArray(x)){return 5}return idx<3?idx+2:idx+3}if(Array.isArray(x)){return 5}}function numToIndexableString(num){if(num===0){return"1"}var expFormat=num.toExponential().split(/e\+?/);var magnitude=parseInt(expFormat[1],10);var neg=num<0;var result=neg?"0":"2";var magForComparison=(neg?-magnitude:magnitude)-MIN_MAGNITUDE;

var magString=utils.padLeft(magForComparison.toString(),"0",MAGNITUDE_DIGITS);result+=SEP+magString;var factor=Math.abs(parseFloat(expFormat[0]));if(neg){factor=10-factor}var factorStr=factor.toFixed(20);factorStr=factorStr.replace(/\.?0+$/,"");result+=SEP+factorStr;return result}},{"./utils":333}],333:[function(require,module,exports){"use strict";function pad(str,padWith,upToLength){var padding="";var targetLength=upToLength-str.length;while(padding.length<targetLength){padding+=padWith}return padding}exports.padLeft=function(str,padWith,upToLength){var padding=pad(str,padWith,upToLength);return padding+str};exports.padRight=function(str,padWith,upToLength){var padding=pad(str,padWith,upToLength);return str+padding};exports.stringLexCompare=function(a,b){var aLen=a.length;var bLen=b.length;var i;for(i=0;i<aLen;i++){if(i===bLen){return 1}var aChar=a.charAt(i);var bChar=b.charAt(i);if(aChar!==bChar){return aChar<bChar?-1:1}}if(aLen<bLen){return-1}return 0};exports.intToDecimalForm=function(int){var isNeg=int<0;var result="";do{var remainder=isNeg?-Math.ceil(int%10):Math.floor(int%10);result=remainder+result;int=isNeg?Math.ceil(int/10):Math.floor(int/10)}while(int);if(isNeg&&result!=="0"){result="-"+result}return result}},{}],334:[function(require,module,exports){"use strict";exports.Map=LazyMap;exports.Set=LazySet;function LazyMap(){this.store={}}LazyMap.prototype.mangle=function(key){if(typeof key!=="string"){throw new TypeError("key must be a string but Got "+key)}return"$"+key};LazyMap.prototype.unmangle=function(key){return key.substring(1)};LazyMap.prototype.get=function(key){var mangled=this.mangle(key);if(mangled in this.store){return this.store[mangled]}else{return void 0}};LazyMap.prototype.set=function(key,value){var mangled=this.mangle(key);this.store[mangled]=value;return true};LazyMap.prototype.has=function(key){var mangled=this.mangle(key);return mangled in this.store};LazyMap.prototype.delete=function(key){var mangled=this.mangle(key);if(mangled in this.store){delete this.store[mangled];return true}return false};LazyMap.prototype.forEach=function(cb){var self=this;var keys=Object.keys(self.store);keys.forEach(function(key){var value=self.store[key];key=self.unmangle(key);cb(value,key)})};function LazySet(array){this.store=new LazyMap;if(array&&Array.isArray(array)){for(var i=0,len=array.length;i<len;i++){this.add(array[i])}}}LazySet.prototype.add=function(key){return this.store.set(key,true)};LazySet.prototype.has=function(key){return this.store.has(key)};LazySet.prototype.delete=function(key){return this.store.delete(key)}},{}],335:[function(require,module,exports){"use strict";var class2type={};var types=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(var i=0;i<types.length;i++){var typename=types[i];class2type["[object "+typename+"]"]=typename.toLowerCase()}var core_toString=class2type.toString;var core_hasOwn=class2type.hasOwnProperty;function type(obj){if(obj===null){return String(obj)}return typeof obj==="object"||typeof obj==="function"?class2type[core_toString.call(obj)]||"object":typeof obj}function isWindow(obj){return obj!==null&&obj===obj.window}function isPlainObject(obj){if(!obj||type(obj)!=="object"||obj.nodeType||isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||core_hasOwn.call(obj,key)}function isFunction(obj){return type(obj)==="function"}var isArray=Array.isArray||function(obj){return type(obj)==="array"};function extend(){var stack=[];var i=-1;var len=arguments.length;var args=new Array(len);while(++i<len){args[i]=arguments[i]}var container={};stack.push({args:args,result:{container:container,key:"key"}});var next;while(next=stack.pop()){extendInner(stack,next.args,next.result)}return container.key}function extendInner(stack,args,result){var options,name,src,copy,copyIsArray,clone,target=args[0]||{},i=1,length=args.length,deep=false,numericStringRegex=/\d+/,optionsIsArray;if(typeof target==="boolean"){deep=target;target=args[1]||{};i=2}if(typeof target!=="object"&&!isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=args[i])!=null){optionsIsArray=isArray(options);for(name in options){if(!(name in Object.prototype)){if(optionsIsArray&&!numericStringRegex.test(name)){continue}src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}stack.push({args:[deep,clone,copy],result:{container:target,key:name}})}else if(copy!==undefined){if(!(isArray(options)&&isFunction(copy))){target[name]=copy}}}}}}result.container[result.key]=target}module.exports=extend},{}],336:[function(require,module,exports){"use strict";var upsert=require("./upsert");var utils=require("./utils");var Promise=utils.Promise;module.exports=function(opts){var sourceDB=opts.db;var viewName=opts.viewName;var mapFun=opts.map;var reduceFun=opts.reduce;var temporary=opts.temporary;var viewSignature=mapFun.toString()+(reduceFun&&reduceFun.toString())+"undefined";if(!temporary&&sourceDB._cachedViews){var cachedView=sourceDB._cachedViews[viewSignature];if(cachedView){return Promise.resolve(cachedView)}}return sourceDB.info().then(function(info){var depDbName=info.db_name+"-mrview-"+(temporary?"temp":utils.MD5(viewSignature));function diffFunction(doc){doc.views=doc.views||{};var fullViewName=viewName;if(fullViewName.indexOf("/")===-1){fullViewName=viewName+"/"+viewName}var depDbs=doc.views[fullViewName]=doc.views[fullViewName]||{};if(depDbs[depDbName]){return}depDbs[depDbName]=true;return doc}return upsert(sourceDB,"_local/mrviews",diffFunction).then(function(){return sourceDB.registerDependentDatabase(depDbName).then(function(res){var db=res.db;db.auto_compaction=true;var view={name:depDbName,db:db,sourceDB:sourceDB,adapter:sourceDB.adapter,mapFun:mapFun,reduceFun:reduceFun};return view.db.get("_local/lastSeq")["catch"](function(err){if(err.status!==404){throw err}}).then(function(lastSeqDoc){view.seq=lastSeqDoc?lastSeqDoc.seq:0;if(!temporary){sourceDB._cachedViews=sourceDB._cachedViews||{};sourceDB._cachedViews[viewSignature]=view;view.db.on("destroyed",function(){delete sourceDB._cachedViews[viewSignature]})}return view})})})})}},{"./upsert":340,"./utils":341}],337:[function(require,module,exports){"use strict";module.exports=function(func,emit,sum,log,isArray,toJSON){return eval("'use strict'; ("+func.replace(/;\s*$/,"")+");")}},{}],338:[function(require,module,exports){(function(process){"use strict";var pouchCollate=require("pouchdb-collate");var TaskQueue=require("./taskqueue");var collate=pouchCollate.collate;var toIndexableString=pouchCollate.toIndexableString;var normalizeKey=pouchCollate.normalizeKey;var createView=require("./create-view");var evalFunc=require("./evalfunc");var log;if(typeof console!=="undefined"&&typeof console.log==="function"){log=Function.prototype.bind.call(console.log,console)}else{log=function(){}}var utils=require("./utils");var Promise=utils.Promise;var persistentQueues={};var tempViewQueue=new TaskQueue;var CHANGES_BATCH_SIZE=50;function parseViewName(name){return name.indexOf("/")===-1?[name,name]:name.split("/")}function isGenOne(changes){return changes.length===1&&/^1-/.test(changes[0].rev)}function emitError(db,e){try{db.emit("error",e)}catch(err){console.error("The user's map/reduce function threw an uncaught error.\n"+"You can debug this error by doing:\n"+"myDatabase.on('error', function (err) { debugger; });\n"+"Please double-check your map/reduce function.");console.error(e)}}function tryCode(db,fun,args){try{return{output:fun.apply(null,args)}}catch(e){emitError(db,e);return{error:e}}}function sortByKeyThenValue(x,y){var keyCompare=collate(x.key,y.key);return keyCompare!==0?keyCompare:collate(x.value,y.value)}function sliceResults(results,limit,skip){skip=skip||0;if(typeof limit==="number"){return results.slice(skip,limit+skip)}else if(skip>0){return results.slice(skip)}return results}function rowToDocId(row){var val=row.value;var docId=val&&typeof val==="object"&&val._id||row.id;return docId}function createBuiltInError(name){var message="builtin "+name+" function requires map values to be numbers"+" or number arrays";return new BuiltInError(message)}function sum(values){var result=0;for(var i=0,len=values.length;i<len;i++){var num=values[i];if(typeof num!=="number"){if(Array.isArray(num)){result=typeof result==="number"?[result]:result;for(var j=0,jLen=num.length;j<jLen;j++){var jNum=num[j];if(typeof jNum!=="number"){throw createBuiltInError("_sum")}else if(typeof result[j]==="undefined"){result.push(jNum)}else{result[j]+=jNum}}}else{throw createBuiltInError("_sum")}}else if(typeof result==="number"){result+=num}else{result[0]+=num}}return result}var builtInReduce={_sum:function(keys,values){return sum(values)},_count:function(keys,values){return values.length},_stats:function(keys,values){function sumsqr(values){var _sumsqr=0;for(var i=0,len=values.length;i<len;i++){var num=values[i];_sumsqr+=num*num}return _sumsqr}return{sum:sum(values),min:Math.min.apply(null,values),max:Math.max.apply(null,values),count:values.length,sumsqr:sumsqr(values)}}};function addHttpParam(paramName,opts,params,asJson){var val=opts[paramName];if(typeof val!=="undefined"){if(asJson){val=encodeURIComponent(JSON.stringify(val))}params.push(paramName+"="+val)}}function checkQueryParseError(options,fun){var startkeyName=options.descending?"endkey":"startkey";var endkeyName=options.descending?"startkey":"endkey";if(typeof options[startkeyName]!=="undefined"&&typeof options[endkeyName]!=="undefined"&&collate(options[startkeyName],options[endkeyName])>0){throw new QueryParseError("No rows can match your key range, reverse your "+"start_key and end_key or set {descending : true}")}else if(fun.reduce&&options.reduce!==false){if(options.include_docs){throw new QueryParseError("{include_docs:true} is invalid for reduce")}else if(options.keys&&options.keys.length>1&&!options.group&&!options.group_level){throw new QueryParseError("Multi-key fetches for reduce views must use {group: true}")}}if(options.group_level){if(typeof options.group_level!=="number"){throw new QueryParseError('Invalid value for integer: "'+options.group_level+'"')}if(options.group_level<0){throw new QueryParseError("Invalid value for positive integer: "+'"'+options.group_level+'"')}}}function httpQuery(db,fun,opts){var params=[];var body;var method="GET";addHttpParam("reduce",opts,params);addHttpParam("include_docs",opts,params);addHttpParam("attachments",opts,params);addHttpParam("limit",opts,params);addHttpParam("descending",opts,params);addHttpParam("group",opts,params);addHttpParam("group_level",opts,params);addHttpParam("skip",opts,params);addHttpParam("stale",opts,params);addHttpParam("conflicts",opts,params);addHttpParam("startkey",opts,params,true);addHttpParam("endkey",opts,params,true);addHttpParam("inclusive_end",opts,params);addHttpParam("key",opts,params,true);params=params.join("&");params=params===""?"":"?"+params;if(typeof opts.keys!=="undefined"){var MAX_URL_LENGTH=2e3;var keysAsString="keys="+encodeURIComponent(JSON.stringify(opts.keys));if(keysAsString.length+params.length+1<=MAX_URL_LENGTH){params+=(params[0]==="?"?"&":"?")+keysAsString}else{method="POST";if(typeof fun==="string"){body=JSON.stringify({keys:opts.keys})}else{fun.keys=opts.keys}}}if(typeof fun==="string"){var parts=parseViewName(fun);return db.request({method:method,url:"_design/"+parts[0]+"/_view/"+parts[1]+params,body:body})}body=body||{};Object.keys(fun).forEach(function(key){if(Array.isArray(fun[key])){body[key]=fun[key]}else{body[key]=fun[key].toString()}});return db.request({method:"POST",url:"_temp_view"+params,body:body})}function defaultsTo(value){return function(reason){if(reason.status===404){return value}else{throw reason}}}function getDocsToPersist(docId,view,docIdsToChangesAndEmits){var metaDocId="_local/doc_"+docId;var defaultMetaDoc={_id:metaDocId,keys:[]};var docData=docIdsToChangesAndEmits[docId];var indexableKeysToKeyValues=docData.indexableKeysToKeyValues;var changes=docData.changes;function getMetaDoc(){if(isGenOne(changes)){return Promise.resolve(defaultMetaDoc)}return view.db.get(metaDocId)["catch"](defaultsTo(defaultMetaDoc))}function getKeyValueDocs(metaDoc){if(!metaDoc.keys.length){return Promise.resolve({rows:[]})}return view.db.allDocs({keys:metaDoc.keys,include_docs:true})}function processKvDocs(metaDoc,kvDocsRes){var kvDocs=[];var oldKeysMap={};for(var i=0,len=kvDocsRes.rows.length;i<len;i++){var row=kvDocsRes.rows[i];var doc=row.doc;if(!doc){continue}kvDocs.push(doc);oldKeysMap[doc._id]=true;doc._deleted=!indexableKeysToKeyValues[doc._id];if(!doc._deleted){var keyValue=indexableKeysToKeyValues[doc._id];if("value"in keyValue){doc.value=keyValue.value}}}var newKeys=Object.keys(indexableKeysToKeyValues);newKeys.forEach(function(key){if(!oldKeysMap[key]){var kvDoc={_id:key};var keyValue=indexableKeysToKeyValues[key];if("value"in keyValue){kvDoc.value=keyValue.value}kvDocs.push(kvDoc)}});metaDoc.keys=utils.uniq(newKeys.concat(metaDoc.keys));kvDocs.push(metaDoc);return kvDocs}return getMetaDoc().then(function(metaDoc){return getKeyValueDocs(metaDoc).then(function(kvDocsRes){return processKvDocs(metaDoc,kvDocsRes)})})}function saveKeyValues(view,docIdsToChangesAndEmits,seq){var seqDocId="_local/lastSeq";return view.db.get(seqDocId)["catch"](defaultsTo({_id:seqDocId,seq:0})).then(function(lastSeqDoc){var docIds=Object.keys(docIdsToChangesAndEmits);return Promise.all(docIds.map(function(docId){return getDocsToPersist(docId,view,docIdsToChangesAndEmits)})).then(function(listOfDocsToPersist){var docsToPersist=utils.flatten(listOfDocsToPersist);lastSeqDoc.seq=seq;docsToPersist.push(lastSeqDoc);return view.db.bulkDocs({docs:docsToPersist})})})}function getQueue(view){var viewName=typeof view==="string"?view:view.name;var queue=persistentQueues[viewName];if(!queue){queue=persistentQueues[viewName]=new TaskQueue}return queue}function updateView(view){return utils.sequentialize(getQueue(view),function(){return updateViewInQueue(view)})()}function updateViewInQueue(view){var mapResults;var doc;function emit(key,value){var output={id:doc._id,key:normalizeKey(key)};if(typeof value!=="undefined"&&value!==null){output.value=normalizeKey(value)}mapResults.push(output)}var mapFun;if(typeof view.mapFun==="function"&&view.mapFun.length===2){var origMap=view.mapFun;mapFun=function(doc){return origMap(doc,emit)}}else{mapFun=evalFunc(view.mapFun.toString(),emit,sum,log,Array.isArray,JSON.parse)}var currentSeq=view.seq||0;function processChange(docIdsToChangesAndEmits,seq){return function(){return saveKeyValues(view,docIdsToChangesAndEmits,seq)}}var queue=new TaskQueue;return new Promise(function(resolve,reject){function complete(){queue.finish().then(function(){view.seq=currentSeq;resolve()})}function processNextBatch(){view.sourceDB.changes({conflicts:true,include_docs:true,style:"all_docs",since:currentSeq,limit:CHANGES_BATCH_SIZE}).on("complete",function(response){var results=response.results;if(!results.length){return complete()}var docIdsToChangesAndEmits={};for(var i=0,l=results.length;i<l;i++){var change=results[i];if(change.doc._id[0]!=="_"){mapResults=[];doc=change.doc;if(!doc._deleted){tryCode(view.sourceDB,mapFun,[doc])}mapResults.sort(sortByKeyThenValue);var indexableKeysToKeyValues={};var lastKey;for(var j=0,jl=mapResults.length;j<jl;j++){var obj=mapResults[j];var complexKey=[obj.key,obj.id];if(collate(obj.key,lastKey)===0){complexKey.push(j)}var indexableKey=toIndexableString(complexKey);indexableKeysToKeyValues[indexableKey]=obj;lastKey=obj.key}docIdsToChangesAndEmits[change.doc._id]={indexableKeysToKeyValues:indexableKeysToKeyValues,changes:change.changes}}currentSeq=change.seq}queue.add(processChange(docIdsToChangesAndEmits,currentSeq));if(results.length<CHANGES_BATCH_SIZE){return complete()}return processNextBatch()}).on("error",onError);function onError(err){reject(err)}}processNextBatch()})}function reduceView(view,results,options){if(options.group_level===0){delete options.group_level}var shouldGroup=options.group||options.group_level;var reduceFun;if(builtInReduce[view.reduceFun]){reduceFun=builtInReduce[view.reduceFun]}else{reduceFun=evalFunc(view.reduceFun.toString(),null,sum,log,Array.isArray,JSON.parse)}var groups=[];var lvl=options.group_level;results.forEach(function(e){var last=groups[groups.length-1];var key=shouldGroup?e.key:null;if(shouldGroup&&Array.isArray(key)&&typeof lvl==="number"){key=key.length>lvl?key.slice(0,lvl):key}if(last&&collate(last.key[0][0],key)===0){last.key.push([key,e.id]);last.value.push(e.value);return}groups.push({key:[[key,e.id]],value:[e.value]})});for(var i=0,len=groups.length;i<len;i++){var e=groups[i];var reduceTry=tryCode(view.sourceDB,reduceFun,[e.key,e.value,false]);if(reduceTry.error&&reduceTry.error instanceof BuiltInError){throw reduceTry.error}e.value=reduceTry.error?null:reduceTry.output;e.key=e.key[0][0]}return{rows:sliceResults(groups,options.limit,options.skip)}}function queryView(view,opts){return utils.sequentialize(getQueue(view),function(){return queryViewInQueue(view,opts)})()}function queryViewInQueue(view,opts){var totalRows;var shouldReduce=view.reduceFun&&opts.reduce!==false;var skip=opts.skip||0;if(typeof opts.keys!=="undefined"&&!opts.keys.length){opts.limit=0;delete opts.keys}function fetchFromView(viewOpts){viewOpts.include_docs=true;return view.db.allDocs(viewOpts).then(function(res){totalRows=res.total_rows;return res.rows.map(function(result){if("value"in result.doc&&typeof result.doc.value==="object"&&result.doc.value!==null){var keys=Object.keys(result.doc.value).sort();var expectedKeys=["id","key","value"];if(!(keys<expectedKeys||keys>expectedKeys)){return result.doc.value}}var parsedKeyAndDocId=pouchCollate.parseIndexableString(result.doc._id);return{key:parsedKeyAndDocId[0],id:parsedKeyAndDocId[1],value:"value"in result.doc?result.doc.value:null}})})}function onMapResultsReady(rows){var finalResults;if(shouldReduce){finalResults=reduceView(view,rows,opts)}else{finalResults={total_rows:totalRows,offset:skip,rows:rows}}if(opts.include_docs){var docIds=utils.uniq(rows.map(rowToDocId));return view.sourceDB.allDocs({keys:docIds,include_docs:true,conflicts:opts.conflicts,attachments:opts.attachments}).then(function(allDocsRes){var docIdsToDocs={};allDocsRes.rows.forEach(function(row){if(row.doc){docIdsToDocs["$"+row.id]=row.doc}});rows.forEach(function(row){var docId=rowToDocId(row);var doc=docIdsToDocs["$"+docId];if(doc){row.doc=doc}});return finalResults})}else{return finalResults}}var flatten=function(array){return array.reduce(function(prev,cur){return prev.concat(cur)})};if(typeof opts.keys!=="undefined"){var keys=opts.keys;var fetchPromises=keys.map(function(key){var viewOpts={startkey:toIndexableString([key]),endkey:toIndexableString([key,{}])};return fetchFromView(viewOpts)});return Promise.all(fetchPromises).then(flatten).then(onMapResultsReady)}else{var viewOpts={descending:opts.descending};if(typeof opts.startkey!=="undefined"){viewOpts.startkey=opts.descending?toIndexableString([opts.startkey,{}]):toIndexableString([opts.startkey])}if(typeof opts.endkey!=="undefined"){var inclusiveEnd=opts.inclusive_end!==false;if(opts.descending){inclusiveEnd=!inclusiveEnd}viewOpts.endkey=toIndexableString(inclusiveEnd?[opts.endkey,{}]:[opts.endkey])}if(typeof opts.key!=="undefined"){var keyStart=toIndexableString([opts.key]);var keyEnd=toIndexableString([opts.key,{}]);if(viewOpts.descending){viewOpts.endkey=keyStart;viewOpts.startkey=keyEnd}else{viewOpts.startkey=keyStart;viewOpts.endkey=keyEnd}}if(!shouldReduce){if(typeof opts.limit==="number"){viewOpts.limit=opts.limit}viewOpts.skip=skip}return fetchFromView(viewOpts).then(onMapResultsReady)}}function httpViewCleanup(db){return db.request({method:"POST",url:"_view_cleanup"})}function localViewCleanup(db){return db.get("_local/mrviews").then(function(metaDoc){var docsToViews={};Object.keys(metaDoc.views).forEach(function(fullViewName){var parts=parseViewName(fullViewName);var designDocName="_design/"+parts[0];var viewName=parts[1];docsToViews[designDocName]=docsToViews[designDocName]||{};docsToViews[designDocName][viewName]=true});var opts={keys:Object.keys(docsToViews),include_docs:true};return db.allDocs(opts).then(function(res){var viewsToStatus={};res.rows.forEach(function(row){var ddocName=row.key.substring(8);Object.keys(docsToViews[row.key]).forEach(function(viewName){var fullViewName=ddocName+"/"+viewName;if(!metaDoc.views[fullViewName]){fullViewName=viewName}var viewDBNames=Object.keys(metaDoc.views[fullViewName]);var statusIsGood=row.doc&&row.doc.views&&row.doc.views[viewName];viewDBNames.forEach(function(viewDBName){viewsToStatus[viewDBName]=viewsToStatus[viewDBName]||statusIsGood})})});var dbsToDelete=Object.keys(viewsToStatus).filter(function(viewDBName){return!viewsToStatus[viewDBName]});var destroyPromises=dbsToDelete.map(function(viewDBName){return utils.sequentialize(getQueue(viewDBName),function(){return new db.constructor(viewDBName,db.__opts).destroy()})()});return Promise.all(destroyPromises).then(function(){return{ok:true}})})},defaultsTo({ok:true}))}exports.viewCleanup=utils.callbackify(function(){var db=this;if(db.type()==="http"){return httpViewCleanup(db)}return localViewCleanup(db)});function queryPromised(db,fun,opts){if(db.type()==="http"){return httpQuery(db,fun,opts)}if(typeof fun!=="string"){checkQueryParseError(opts,fun);var createViewOpts={db:db,viewName:"temp_view/temp_view",map:fun.map,reduce:fun.reduce,temporary:true};tempViewQueue.add(function(){return createView(createViewOpts).then(function(view){function cleanup(){return view.db.destroy()}return utils.fin(updateView(view).then(function(){return queryView(view,opts)}),cleanup)})});return tempViewQueue.finish()}else{var fullViewName=fun;var parts=parseViewName(fullViewName);var designDocName=parts[0];var viewName=parts[1];return db.get("_design/"+designDocName).then(function(doc){var fun=doc.views&&doc.views[viewName];if(!fun||typeof fun.map!=="string"){throw new NotFoundError("ddoc "+designDocName+" has no view named "+viewName)}checkQueryParseError(opts,fun);var createViewOpts={db:db,viewName:fullViewName,map:fun.map,reduce:fun.reduce};return createView(createViewOpts).then(function(view){if(opts.stale==="ok"||opts.stale==="update_after"){if(opts.stale==="update_after"){process.nextTick(function(){updateView(view)})}return queryView(view,opts)}else{return updateView(view).then(function(){return queryView(view,opts)})}})})}}exports.query=function(fun,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}opts=utils.extend(true,{},opts);if(typeof fun==="function"){fun={map:fun}}var db=this;var promise=Promise.resolve().then(function(){return queryPromised(db,fun,opts)});utils.promisedCallback(promise,callback);return promise};function QueryParseError(message){this.status=400;this.name="query_parse_error";this.message=message;this.error=true;try{Error.captureStackTrace(this,QueryParseError)}catch(e){}}utils.inherits(QueryParseError,Error);function NotFoundError(message){this.status=404;this.name="not_found";this.message=message;this.error=true;try{Error.captureStackTrace(this,NotFoundError)}catch(e){}}utils.inherits(NotFoundError,Error);function BuiltInError(message){this.status=500;this.name="invalid_value";this.message=message;this.error=true;try{Error.captureStackTrace(this,BuiltInError)}catch(e){}}utils.inherits(BuiltInError,Error)}).call(this,require("_process"))},{"./create-view":336,"./evalfunc":337,"./taskqueue":339,"./utils":341,_process:35,"pouchdb-collate":332}],339:[function(require,module,exports){"use strict";var Promise=require("./utils").Promise;function TaskQueue(){this.promise=new Promise(function(fulfill){fulfill()})}TaskQueue.prototype.add=function(promiseFactory){this.promise=this.promise["catch"](function(){}).then(function(){return promiseFactory()});return this.promise};TaskQueue.prototype.finish=function(){return this.promise};module.exports=TaskQueue},{"./utils":341}],340:[function(require,module,exports){"use strict";var upsert=require("pouchdb-upsert").upsert;module.exports=function(db,doc,diffFun){return upsert.apply(db,[doc,diffFun])}},{"pouchdb-upsert":342}],341:[function(require,module,exports){(function(process,global){"use strict";if(typeof global.Promise==="function"){exports.Promise=global.Promise}else{exports.Promise=require("lie")}exports.inherits=require("inherits");exports.extend=require("pouchdb-extend");var argsarray=require("argsarray");exports.promisedCallback=function(promise,callback){if(callback){promise.then(function(res){process.nextTick(function(){callback(null,res)})},function(reason){process.nextTick(function(){callback(reason)})})}return promise};exports.callbackify=function(fun){return argsarray(function(args){var cb=args.pop();var promise=fun.apply(this,args);if(typeof cb==="function"){exports.promisedCallback(promise,cb)}return promise})};exports.fin=function(promise,cb){return promise.then(function(res){var promise2=cb();if(typeof promise2.then==="function"){return promise2.then(function(){return res})}return res},function(reason){var promise2=cb();if(typeof promise2.then==="function"){return promise2.then(function(){throw reason})}throw reason})};exports.sequentialize=function(queue,promiseFactory){return function(){var args=arguments;var that=this;return queue.add(function(){return promiseFactory.apply(that,args)})}};exports.flatten=function(arrs){var res=[];for(var i=0,len=arrs.length;i<len;i++){res=res.concat(arrs[i])}return res};exports.uniq=function(arr){var map={};for(var i=0,len=arr.length;i<len;i++){map["$"+arr[i]]=true}var keys=Object.keys(map);var output=new Array(keys.length);for(i=0,len=keys.length;i<len;i++){output[i]=keys[i].substring(1)}return output};var crypto=require("crypto");var Md5=require("spark-md5");exports.MD5=function(string){if(!process.browser){return crypto.createHash("md5").update(string).digest("hex")}else{return Md5.hash(string)}}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:35,argsarray:309,crypto:33,inherits:313,lie:317,"pouchdb-extend":335,"spark-md5":343}],342:[function(require,module,exports){(function(global){"use strict";var PouchPromise;if(typeof window!=="undefined"&&window.PouchDB){PouchPromise=window.PouchDB.utils.Promise}else{PouchPromise=typeof global.Promise==="function"?global.Promise:require("lie")}function upsertInner(db,docId,diffFun){return new PouchPromise(function(fulfill,reject){if(typeof docId!=="string"){return reject(new Error("doc id is required"))}db.get(docId,function(err,doc){if(err){if(err.status!==404){return reject(err)}doc={}}var docRev=doc._rev;var newDoc=diffFun(doc);if(!newDoc){return fulfill({updated:false,rev:docRev})}newDoc._id=docId;newDoc._rev=docRev;fulfill(tryAndPut(db,newDoc,diffFun))})})}function tryAndPut(db,doc,diffFun){return db.put(doc).then(function(res){return{updated:true,rev:res.rev}},function(err){if(err.status!==409){throw err}return upsertInner(db,doc._id,diffFun)})}exports.upsert=function upsert(docId,diffFun,cb){var db=this;var promise=upsertInner(db,docId,diffFun);if(typeof cb!=="function"){return promise}promise.then(function(resp){cb(null,resp)},cb)};exports.putIfNotExists=function putIfNotExists(docId,doc,cb){var db=this;if(typeof docId!=="string"){cb=doc;doc=docId;docId=doc._id}var diffFun=function(existingDoc){if(existingDoc._rev){return false}return doc};var promise=upsertInner(db,docId,diffFun);if(typeof cb!=="function"){return promise}promise.then(function(resp){cb(null,resp)},cb)};if(typeof window!=="undefined"&&window.PouchDB){window.PouchDB.plugin(exports)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{lie:317}],343:[function(require,module,exports){(function(factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{var glob;try{glob=window}catch(e){glob=self}glob.SparkMD5=factory()}})(function(undefined){"use strict";var add32=function(a,b){return a+b&4294967295},cmn=function(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)},ff=function(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)},gg=function(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)},hh=function(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)},ii=function(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)},md5cycle=function(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])},md5blk=function(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks},md5blk_array=function(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks},md51=function(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state},md51_array=function(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){
md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],rhex=function(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s},hex=function(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")},md5=function(s){return hex(md51(s))},SparkMD5=function(){this.reset()};if(md5("hello")!=="5d41402abc4b2a76b9719d911017c592"){add32=function(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}SparkMD5.prototype.append=function(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}this.appendBinary(str);return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._state,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substr(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=!!raw?this._state:hex(this._state);this.reset();return ret};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._state,tail)};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._state=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.destroy=function(){delete this._state;delete this._buff;delete this._length};SparkMD5.hash=function(str,raw){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}var hash=md51(str);return!!raw?hash:hex(hash)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content);return!!raw?hash:hex(hash)};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=this._concatArrayBuffer(this._buff,arr),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._state,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?buff.subarray(i-64):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=!!raw?this._state:hex(this._state);this.reset();return ret};SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._state=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._concatArrayBuffer=function(first,second){var firstLength=first.length,result=new Uint8Array(firstLength+second.byteLength);result.set(first);result.set(new Uint8Array(second),firstLength);return result};SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr));return!!raw?hash:hex(hash)};return SparkMD5})},{}],344:[function(require,module,exports){"use strict";exports.stringify=function stringify(input){var queue=[];queue.push({obj:input});var res="";var next,obj,prefix,val,i,arrayPrefix,keys,k,key,value,objPrefix;while(next=queue.pop()){obj=next.obj;prefix=next.prefix||"";val=next.val||"";res+=prefix;if(val){res+=val}else if(typeof obj!=="object"){res+=typeof obj==="undefined"?null:JSON.stringify(obj)}else if(obj===null){res+="null"}else if(Array.isArray(obj)){queue.push({val:"]"});for(i=obj.length-1;i>=0;i--){arrayPrefix=i===0?"":",";queue.push({obj:obj[i],prefix:arrayPrefix})}queue.push({val:"["})}else{keys=[];for(k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}queue.push({val:"}"});for(i=keys.length-1;i>=0;i--){key=keys[i];value=obj[key];objPrefix=i>0?",":"";objPrefix+=JSON.stringify(key)+":";queue.push({obj:value,prefix:objPrefix})}queue.push({val:"{"})}}return res};function pop(obj,stack,metaStack){var lastMetaElement=metaStack[metaStack.length-1];if(obj===lastMetaElement.element){metaStack.pop();lastMetaElement=metaStack[metaStack.length-1]}var element=lastMetaElement.element;var lastElementIndex=lastMetaElement.index;if(Array.isArray(element)){element.push(obj)}else if(lastElementIndex===stack.length-2){var key=stack.pop();element[key]=obj}else{stack.push(obj)}}exports.parse=function(str){var stack=[];var metaStack=[];var i=0;var collationIndex,parsedNum,numChar;var parsedString,lastCh,numConsecutiveSlashes,ch;var arrayElement,objElement;while(true){collationIndex=str[i++];if(collationIndex==="}"||collationIndex==="]"||typeof collationIndex==="undefined"){if(stack.length===1){return stack.pop()}else{pop(stack.pop(),stack,metaStack);continue}}switch(collationIndex){case" ":case"	":case"\n":case":":case",":break;case"n":i+=3;pop(null,stack,metaStack);break;case"t":i+=3;pop(true,stack,metaStack);break;case"f":i+=4;pop(false,stack,metaStack);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":parsedNum="";i--;while(true){numChar=str[i++];if(/[\d\.\-e\+]/.test(numChar)){parsedNum+=numChar}else{i--;break}}pop(parseFloat(parsedNum),stack,metaStack);break;case'"':parsedString="";lastCh=void 0;numConsecutiveSlashes=0;while(true){ch=str[i++];if(ch!=='"'||lastCh==="\\"&&numConsecutiveSlashes%2===1){parsedString+=ch;lastCh=ch;if(lastCh==="\\"){numConsecutiveSlashes++}else{numConsecutiveSlashes=0}}else{break}}pop(JSON.parse('"'+parsedString+'"'),stack,metaStack);break;case"[":arrayElement={element:[],index:stack.length};stack.push(arrayElement.element);metaStack.push(arrayElement);break;case"{":objElement={element:{},index:stack.length};stack.push(objElement.element);metaStack.push(objElement);break;default:throw new Error("unexpectedly reached end of input: "+collationIndex)}}}},{}],345:[function(require,module,exports){"use strict";var DragDropDispatcher=require("../dispatcher/DragDropDispatcher"),DragDropActionTypes=require("../constants/DragDropActionTypes");var DragDropActionCreators={startDragging:function startDragging(itemType,item,effectsAllowed,offsetFromClient,offsetFromContainer){DragDropDispatcher.handleAction({type:DragDropActionTypes.DRAG_START,itemType:itemType,item:item,effectsAllowed:effectsAllowed,offsetFromClient:offsetFromClient,offsetFromContainer:offsetFromContainer})},drag:function drag(offsetFromClient){DragDropDispatcher.handleAction({type:DragDropActionTypes.DRAG,offsetFromClient:offsetFromClient})},recordDrop:function recordDrop(dropEffect){DragDropDispatcher.handleAction({type:DragDropActionTypes.DROP,dropEffect:dropEffect})},endDragging:function endDragging(){DragDropDispatcher.handleAction({type:DragDropActionTypes.DRAG_END})}};module.exports=DragDropActionCreators},{"../constants/DragDropActionTypes":348,"../dispatcher/DragDropDispatcher":353}],346:[function(require,module,exports){"use strict";var DragDropActionCreators=require("../actions/DragDropActionCreators"),DragOperationStore=require("../stores/DragOperationStore"),NativeDragItemTypes=require("../constants/NativeDragItemTypes"),EnterLeaveMonitor=require("../utils/EnterLeaveMonitor"),isFileDragDropEvent=require("../utils/isFileDragDropEvent"),isUrlDragDropEvent=require("../utils/isUrlDragDropEvent"),isNativeDraggedItemType=require("../utils/isNativeDraggedItemType"),configureDataTransfer=require("../utils/configureDataTransfer"),shallowEqual=require("react/lib/shallowEqual"),isWebkit=require("../utils/isWebkit");var ELEMENT_NODE=1;var _monitor=new EnterLeaveMonitor,_currentDragTarget,_currentComponent,_initialDragTargetRect,_dragTargetRectDidChange,_currentDropEffect;function getElementRect(el){if(el.nodeType!==ELEMENT_NODE){el=el.parentElement}if(!el){return null}var rect=el.getBoundingClientRect();return{top:rect.top,left:rect.left,width:rect.width,height:rect.height}}function getClientOffset(e){return{x:e.clientX,y:e.clientY}}function checkIfCurrentDragTargetRectChanged(){if(!_dragTargetRectDidChange){var currentRect=getElementRect(_currentDragTarget);_dragTargetRectDidChange=!shallowEqual(_initialDragTargetRect,currentRect)}return _dragTargetRectDidChange}function triggerDragEndIfDragSourceWasRemovedFromDOM(){if(!_currentComponent||document.body.contains(_currentDragTarget)){return}var type=DragOperationStore.getDraggedItemType();_currentComponent.handleDragEnd(type,null)}function isDraggingNativeItem(){var itemType=DragOperationStore.getDraggedItemType();return isNativeDraggedItemType(itemType)}function handleTopDragStart(e){if(DragOperationStore.isDragging()){return}if(isUrlDragDropEvent(e)){DragDropActionCreators.startDragging(NativeDragItemTypes.URL,null)}else{e.preventDefault()}}function handleTopDragEnterCapture(e){e.preventDefault();var isFirstEnter=_monitor.enter(e.target);if(!isFirstEnter||DragOperationStore.isDragging()){return}if(isFileDragDropEvent(e)){DragDropActionCreators.startDragging(NativeDragItemTypes.FILE,null)}else if(isUrlDragDropEvent(e)){DragDropActionCreators.startDragging(NativeDragItemTypes.URL,null)}}function handleTopDragOver(e){if(isDraggingNativeItem()){e.preventDefault()}var offsetFromClient=getClientOffset(e);DragDropActionCreators.drag(offsetFromClient);if(_currentDropEffect){e.dataTransfer.dropEffect=_currentDropEffect;_currentDropEffect=null}if(_currentDragTarget&&isWebkit()&&checkIfCurrentDragTargetRectChanged()){e.preventDefault()}}function handleTopDragLeaveCapture(e){if(isDraggingNativeItem()){e.preventDefault()}var isLastLeave=_monitor.leave(e.target);if(!isLastLeave||!isDraggingNativeItem()){return}DragDropActionCreators.endDragging()}function handleTopDrop(e){if(isDraggingNativeItem()){e.preventDefault()}_monitor.reset();if(isDraggingNativeItem()){DragDropActionCreators.endDragging()}triggerDragEndIfDragSourceWasRemovedFromDOM()}var HTML5={setup:function setup(){if(typeof window==="undefined"){return}window.addEventListener("dragstart",handleTopDragStart);window.addEventListener("dragenter",handleTopDragEnterCapture,true);window.addEventListener("dragleave",handleTopDragLeaveCapture,true);window.addEventListener("dragover",handleTopDragOver);window.addEventListener("drop",handleTopDrop)},teardown:function teardown(){if(typeof window==="undefined"){return}window.removeEventListener("dragstart",handleTopDragStart);window.removeEventListener("dragenter",handleTopDragEnterCapture,true);window.removeEventListener("dragleave",handleTopDragLeaveCapture,true);window.removeEventListener("dragover",handleTopDragOver);window.removeEventListener("drop",handleTopDrop)},beginDrag:function beginDrag(component,e,containerNode,dragPreview,dragAnchors,offsetFromContainer,effectsAllowed){var _e$nativeEvent=e.nativeEvent;var dataTransfer=_e$nativeEvent.dataTransfer;var target=_e$nativeEvent.target;configureDataTransfer(dataTransfer,containerNode,dragPreview,dragAnchors,offsetFromContainer,effectsAllowed);_currentComponent=component;_currentDragTarget=target;_initialDragTargetRect=getElementRect(target);_dragTargetRectDidChange=false;window.addEventListener("mousemove",triggerDragEndIfDragSourceWasRemovedFromDOM,true)},endDrag:function endDrag(){_currentDragTarget=null;_currentComponent=null;_initialDragTargetRect=null;_dragTargetRectDidChange=false;window.removeEventListener("mousemove",triggerDragEndIfDragSourceWasRemovedFromDOM,true)},dragOver:function dragOver(component,e,dropEffect){if(!_currentDropEffect){_currentDropEffect=dropEffect}},getDragSourceProps:function getDragSourceProps(component,type){return{draggable:true,onDragStart:component.handleDragStart.bind(component,type),onDragEnd:component.handleDragEnd.bind(component,type)}},getDropTargetProps:function getDropTargetProps(component,types){return{onDragEnter:component.handleDragEnter.bind(component,types),onDragOver:component.handleDragOver.bind(component,types),onDragLeave:component.handleDragLeave.bind(component,types),onDrop:component.handleDrop.bind(component,types)}},getOffsetFromClient:function getOffsetFromClient(component,e){return getClientOffset(e)}};module.exports=HTML5},{"../actions/DragDropActionCreators":345,"../constants/NativeDragItemTypes":351,"../stores/DragOperationStore":358,"../utils/EnterLeaveMonitor":362,"../utils/configureDataTransfer":363,"../utils/isFileDragDropEvent":371,"../utils/isNativeDraggedItemType":373,"../utils/isUrlDragDropEvent":375,"../utils/isWebkit":376,"react/lib/shallowEqual":584}],347:[function(require,module,exports){"use strict";module.exports={HTML5:require("./HTML5")}},{"./HTML5":346}],348:[function(require,module,exports){"use strict";var keyMirror=require("react/lib/keyMirror");var DragDropActionTypes=keyMirror({DRAG_START:null,DRAG_END:null,DRAG:null,DROP:null});module.exports=DragDropActionTypes},{"react/lib/keyMirror":574}],349:[function(require,module,exports){"use strict";var DropEffects={COPY:"copy",MOVE:"move",LINK:"link"};module.exports=DropEffects},{}],350:[function(require,module,exports){"use strict";var keyMirror=require("react/lib/keyMirror");var HorizontalDragAnchors=keyMirror({LEFT:null,CENTER:null,RIGHT:null});module.exports=HorizontalDragAnchors},{"react/lib/keyMirror":574}],351:[function(require,module,exports){"use strict";var NativeDragItemTypes={FILE:"__NATIVE_FILE__",URL:"__NATIVE_URL__"};module.exports=NativeDragItemTypes},{}],352:[function(require,module,exports){"use strict";var keyMirror=require("react/lib/keyMirror");var VerticalDragAnchors=keyMirror({TOP:null,CENTER:null,BOTTOM:null});module.exports=VerticalDragAnchors},{"react/lib/keyMirror":574}],353:[function(require,module,exports){"use strict";var Dispatcher=require("flux").Dispatcher,assign=require("react/lib/Object.assign");var DragDropDispatcher=assign(new Dispatcher,{handleAction:function handleAction(action){this.dispatch({action:action})}});module.exports=DragDropDispatcher},{flux:135,"react/lib/Object.assign":446}],354:[function(require,module,exports){"use strict";var _require=require("./backends");var HTML5=_require.HTML5;var createDragDropMixin=require("./utils/createDragDropMixin");module.exports={DragDropMixin:createDragDropMixin(HTML5),ImagePreloaderMixin:require("./mixins/ImagePreloaderMixin"),DragLayerMixin:require("./mixins/DragLayerMixin"),HorizontalDragAnchors:require("./constants/HorizontalDragAnchors"),VerticalDragAnchors:require("./constants/VerticalDragAnchors"),NativeDragItemTypes:require("./constants/NativeDragItemTypes"),DropEffects:require("./constants/DropEffects")}},{"./backends":347,"./constants/DropEffects":349,"./constants/HorizontalDragAnchors":350,"./constants/NativeDragItemTypes":351,"./constants/VerticalDragAnchors":352,"./mixins/DragLayerMixin":355,"./mixins/ImagePreloaderMixin":356,"./utils/createDragDropMixin":364}],355:[function(require,module,exports){"use strict";var DragOperationStore=require("../stores/DragOperationStore"),DragOffsetStore=require("../stores/DragOffsetStore");var DragLayerMixin={getInitialState:function getInitialState(){return this.getStateForDragLayerMixin()},getDragLayerState:function getDragLayerState(){var _state=this.state;var isDragging=_state.isDragging;var draggedItemType=_state.draggedItemType;var draggedItem=_state.draggedItem;var initialOffset=_state.initialOffset;var currentOffset=_state.currentOffset;var currentOffsetFromClient=_state.currentOffsetFromClient;var initialOffsetFromClient=_state.initialOffsetFromClient;var initialOffsetFromContainer=_state.initialOffsetFromContainer;return{isDragging:isDragging,draggedItemType:draggedItemType,draggedItem:draggedItem,initialOffset:initialOffset,currentOffset:currentOffset,currentOffsetFromClient:currentOffsetFromClient,initialOffsetFromClient:initialOffsetFromClient,initialOffsetFromContainer:initialOffsetFromContainer}},getStateForDragLayerMixin:function getStateForDragLayerMixin(){var initialOffsetFromClient=DragOffsetStore.getInitialOffsetFromClient(),currentOffsetFromClient=DragOffsetStore.getCurrentOffsetFromClient(),initialOffsetFromContainer=DragOffsetStore.getInitialOffsetFromContainer(),isDragging=false,draggedItemType=null,draggedItem=null,initialOffset=null,currentOffset=null;if(initialOffsetFromClient&&currentOffsetFromClient){isDragging=true;draggedItemType=DragOperationStore.getDraggedItemType();draggedItem=DragOperationStore.getDraggedItem();initialOffset={x:initialOffsetFromClient.x-initialOffsetFromContainer.x,y:initialOffsetFromClient.y-initialOffsetFromContainer.y};currentOffset={x:currentOffsetFromClient.x-initialOffsetFromContainer.x,y:currentOffsetFromClient.y-initialOffsetFromContainer.y}}return{isDragging:isDragging,draggedItemType:draggedItemType,draggedItem:draggedItem,initialOffset:initialOffset,currentOffset:currentOffset,currentOffsetFromClient:currentOffsetFromClient,initialOffsetFromClient:initialOffsetFromClient,initialOffsetFromContainer:initialOffsetFromContainer}},handleStoreChangeInDragLayerMixin:function handleStoreChangeInDragLayerMixin(){if(this.isMounted()){this.setState(this.getStateForDragLayerMixin())}},componentDidMount:function componentDidMount(){DragOffsetStore.addChangeListener(this.handleStoreChangeInDragLayerMixin);DragOperationStore.addChangeListener(this.handleStoreChangeInDragLayerMixin)},componentWillUnmount:function componentWillUnmount(){DragOffsetStore.removeChangeListener(this.handleStoreChangeInDragLayerMixin);DragOperationStore.removeChangeListener(this.handleStoreChangeInDragLayerMixin)}};module.exports=DragLayerMixin},{"../stores/DragOffsetStore":357,"../stores/DragOperationStore":358}],356:[function(require,module,exports){"use strict";var getDragImageScale=require("../utils/getDragImageScale");var TRANSPARENT_PIXEL_SRC="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";var ImagePreloaderMixin={componentDidMount:function componentDidMount(){this._cachedImages={};this._readyImages={};this.preloadImages()},componentDidUpdate:function componentDidUpdate(){this.preloadImages()},componentWillUnmount:function componentWillUnmount(){for(var key in this._cachedImages){this._cachedImages[key].src=TRANSPARENT_PIXEL_SRC}this._cachedImages={}},hasPreloadedImage:function hasPreloadedImage(url){return!!this._readyImages[url]},getPreloadedImage:function getPreloadedImage(url){if(this.hasPreloadedImage(url)){return this._cachedImages[url]}},preloadImages:function preloadImages(){var urls=this.getImageUrlsToPreload();urls.forEach(this.preloadImage)},preloadImage:function preloadImage(url){var _this=this;if(!url||this._cachedImages[url]){return}var img=new Image;img.onload=function(){if(_this.isMounted()){_this._readyImages[url]=true}};img.onerror=function(){if(_this.isMounted()){delete _this._cachedImages[url]}};img.src=url;this._cachedImages[url]=img},getDragImageScale:getDragImageScale};module.exports=ImagePreloaderMixin},{"../utils/getDragImageScale":370}],357:[function(require,module,exports){"use strict";var DragDropDispatcher=require("../dispatcher/DragDropDispatcher"),DragDropActionTypes=require("../constants/DragDropActionTypes"),createStore=require("../utils/createStore");var _initialOffsetFromContainer=null,_initialOffsetFromClient=null,_currentOffsetFromClient=null;var DragOffsetStore=createStore({getInitialOffsetFromContainer:function getInitialOffsetFromContainer(){return _initialOffsetFromContainer},getInitialOffsetFromClient:function getInitialOffsetFromClient(){return _initialOffsetFromClient},getCurrentOffsetFromClient:function getCurrentOffsetFromClient(){return _currentOffsetFromClient}});DragOffsetStore.dispatchToken=DragDropDispatcher.register(function(payload){var action=payload.action;switch(action.type){case DragDropActionTypes.DRAG_START:_initialOffsetFromContainer=action.offsetFromContainer;_initialOffsetFromClient=action.offsetFromClient;_currentOffsetFromClient=action.offsetFromClient;DragOffsetStore.emitChange();break;case DragDropActionTypes.DRAG:_currentOffsetFromClient=action.offsetFromClient;DragOffsetStore.emitChange();break;case DragDropActionTypes.DRAG_END:_initialOffsetFromContainer=null;_initialOffsetFromClient=null;_currentOffsetFromClient=null;DragOffsetStore.emitChange()}});module.exports=DragOffsetStore},{"../constants/DragDropActionTypes":348,"../dispatcher/DragDropDispatcher":353,"../utils/createStore":365}],358:[function(require,module,exports){"use strict";var DragDropDispatcher=require("../dispatcher/DragDropDispatcher"),DragDropActionTypes=require("../constants/DragDropActionTypes"),DragOffsetStore=require("../stores/DragOffsetStore"),createStore=require("../utils/createStore");var _draggedItem=null,_draggedItemType=null,_effectsAllowed=null,_dropEffect=null;var DragOperationStore=createStore({isDragging:function isDragging(){return!!_draggedItem},getEffectsAllowed:function getEffectsAllowed(){return _effectsAllowed},getDropEffect:function getDropEffect(){return _dropEffect},getDraggedItem:function getDraggedItem(){return _draggedItem},getDraggedItemType:function getDraggedItemType(){return _draggedItemType}});DragOperationStore.dispatchToken=DragDropDispatcher.register(function(payload){DragDropDispatcher.waitFor([DragOffsetStore.dispatchToken]);var action=payload.action;switch(action.type){case DragDropActionTypes.DRAG_START:_dropEffect=null;_draggedItem=action.item;_draggedItemType=action.itemType;_effectsAllowed=action.effectsAllowed;DragOperationStore.emitChange();break;case DragDropActionTypes.DROP:_dropEffect=action.dropEffect;DragOperationStore.emitChange();break;case DragDropActionTypes.DRAG_END:_draggedItem=null;_draggedItemType=null;_effectsAllowed=null;_dropEffect=null;DragOperationStore.emitChange();break}});module.exports=DragOperationStore},{"../constants/DragDropActionTypes":348,"../dispatcher/DragDropDispatcher":353,"../stores/DragOffsetStore":357,"../utils/createStore":365}],359:[function(require,module,exports){"use strict";var invariant=require("react/lib/invariant"),noop=require("lodash/utility/noop");var DefaultDragSource={canDrag:function canDrag(){return true},beginDrag:function beginDrag(){invariant(false,"Drag source must contain a method called beginDrag. See https://github.com/gaearon/react-dnd#drag-source-api")},endDrag:noop};module.exports=DefaultDragSource},{"lodash/utility/noop":180,"react/lib/invariant":568}],360:[function(require,module,exports){"use strict";var noop=require("lodash/utility/noop");var DefaultDropTarget={canDrop:function canDrop(){return true},getDropEffect:function getDropEffect(component,allowedEffects){return allowedEffects[0]},enter:noop,over:noop,leave:noop,acceptDrop:noop};module.exports=DefaultDropTarget},{"lodash/utility/noop":180}],361:[function(require,module,exports){"use strict";var DragOffsetStore=require("../stores/DragOffsetStore");var DragDropContext={getCurrentOffsetDelta:function getCurrentOffsetDelta(){var initialOffset=DragOffsetStore.getInitialOffsetFromClient(),currentOffset=DragOffsetStore.getCurrentOffsetFromClient();return{x:currentOffset.x-initialOffset.x,y:currentOffset.y-initialOffset.y}},getInitialOffsetFromClient:function getInitialOffsetFromClient(){return DragOffsetStore.getInitialOffsetFromClient()},getCurrentOffsetFromClient:function getCurrentOffsetFromClient(){return DragOffsetStore.getCurrentOffsetFromClient()},getInitialOffsetFromContainer:function getInitialOffsetFromContainer(){return DragOffsetStore.getInitialOffsetFromContainer()}};module.exports=DragDropContext},{"../stores/DragOffsetStore":357}],362:[function(require,module,exports){"use strict";var _prototypeProperties=function(child,staticProps,instanceProps){if(staticProps)Object.defineProperties(child,staticProps);if(instanceProps)Object.defineProperties(child.prototype,instanceProps)};var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var union=require("lodash/array/union"),without=require("lodash/array/without");var EnterLeaveMonitor=function(){function EnterLeaveMonitor(){_classCallCheck(this,EnterLeaveMonitor);this._entered=[]}_prototypeProperties(EnterLeaveMonitor,null,{enter:{value:function enter(enteringNode){this._entered=union(this._entered.filter(function(node){return document.body.contains(node)&&(!node.contains||node.contains(enteringNode))}),[enteringNode]);return this._entered.length===1},writable:true,configurable:true},leave:{value:function leave(leavingNode){this._entered=without(this._entered.filter(function(node){return document.body.contains(node)}),leavingNode);return this._entered.length===0},writable:true,configurable:true},reset:{value:function reset(){this._entered=[]},writable:true,configurable:true}});return EnterLeaveMonitor}();module.exports=EnterLeaveMonitor},{"lodash/array/union":138,"lodash/array/without":139}],363:[function(require,module,exports){"use strict";var shouldUseDragPreview=require("./shouldUseDragPreview"),getDragImageOffset=require("./getDragImageOffset"),getBrowserEffectAllowed=require("./getBrowserEffectAllowed");function configureDataTransfer(dataTransfer,containerNode,dragPreview,dragAnchors,offsetFromContainer,effectsAllowed){try{dataTransfer.setData("application/json",{})}catch(err){}if(shouldUseDragPreview(dragPreview)&&dataTransfer.setDragImage){var dragOffset=getDragImageOffset(containerNode,dragPreview,dragAnchors,offsetFromContainer);dataTransfer.setDragImage(dragPreview,dragOffset.x,dragOffset.y)}dataTransfer.effectAllowed=getBrowserEffectAllowed(effectsAllowed)}module.exports=configureDataTransfer},{"./getBrowserEffectAllowed":368,"./getDragImageOffset":369,"./shouldUseDragPreview":377}],364:[function(require,module,exports){"use strict";var DragDropActionCreators=require("../actions/DragDropActionCreators"),DragOperationStore=require("../stores/DragOperationStore"),DragDropContext=require("../utils/DragDropContext"),EnterLeaveMonitor=require("./EnterLeaveMonitor"),DropEffects=require("../constants/DropEffects"),DefaultDragSource=require("./DefaultDragSource"),DefaultDropTarget=require("./DefaultDropTarget"),extractNativeItem=require("../utils/extractNativeItem"),isNativeDraggedItemType=require("../utils/isNativeDraggedItemType"),invariant=require("react/lib/invariant"),assign=require("react/lib/Object.assign"),defaults=require("lodash/object/defaults"),isArray=require("lodash/lang/isArray"),isObject=require("lodash/lang/isObject");function checkValidType(component,type){invariant(type&&(typeof type==="string"||typeof type==="symbol"),"Expected item type to be a non-empty string or a symbol. See %s",component.constructor.displayName)}function checkDragSourceDefined(component,type){var displayName=component.constructor.displayName;invariant(component._dragSources[type],'There is no drag source for "%s" registered in %s. '+"Have you forgotten to register it? "+"See configureDragDrop in %s",type,displayName,displayName)}function checkDropTargetDefined(component,type){var displayName=component.constructor.displayName;invariant(component._dropTargets[type],'There is no drop target for "%s" registered in %s. '+"Have you forgotten to register it? "+"See configureDragDrop in %s",type,displayName,displayName)}function createDragDropMixin(backend){var refs=0;function useBackend(component){if(refs===0){backend.setup(component)}refs++}function unuseBackend(component){refs--;if(refs===0){backend.teardown(component)}}return{getInitialState:function getInitialState(){var state={ownDraggedItemType:null,currentDropEffect:null};return assign(state,this.getStateForDragDropMixin())},getActiveDropTargetType:function getActiveDropTargetType(){var _state=this.state;var draggedItemType=_state.draggedItemType;var draggedItem=_state.draggedItem;var ownDraggedItemType=_state.ownDraggedItemType;var dropTarget=this._dropTargets[draggedItemType];if(!dropTarget){return null}if(draggedItemType===ownDraggedItemType){return null}var canDrop=dropTarget.canDrop;return canDrop(this,draggedItem)?draggedItemType:null},isAnyDropTargetActive:function isAnyDropTargetActive(types){return types.indexOf(this.getActiveDropTargetType())>-1},getStateForDragDropMixin:function getStateForDragDropMixin(){return{draggedItem:DragOperationStore.getDraggedItem(),draggedItemType:DragOperationStore.getDraggedItemType()}},getDragState:function getDragState(type){checkValidType(this,type);checkDragSourceDefined(this,type);return{isDragging:this.state.ownDraggedItemType===type}},getDropState:function getDropState(type){checkValidType(this,type);checkDropTargetDefined(this,type);var isDragging=this.getActiveDropTargetType()===type,isHovering=!!this.state.currentDropEffect;return{isDragging:isDragging,isHovering:isDragging&&isHovering}},componentWillMount:function componentWillMount(){this._monitor=new EnterLeaveMonitor;this._dragSources={};this._dropTargets={};invariant(this.constructor.configureDragDrop,"%s must implement static configureDragDrop(register, context) to use DragDropMixin",this.constructor.displayName);this.constructor.configureDragDrop(this.registerDragDropItemTypeHandlers,DragDropContext)},componentDidMount:function componentDidMount(){useBackend(this);DragOperationStore.addChangeListener(this.handleStoreChangeInDragDropMixin)},componentWillUnmount:function componentWillUnmount(){unuseBackend(this);DragOperationStore.removeChangeListener(this.handleStoreChangeInDragDropMixin)},registerDragDropItemTypeHandlers:function registerDragDropItemTypeHandlers(type,handlers){checkValidType(this,type);var dragSource=handlers.dragSource;var dropTarget=handlers.dropTarget;if(dragSource){invariant(!this._dragSources[type],"Drag source for %s specified twice. See configureDragDrop in %s",type,this.constructor.displayName);this._dragSources[type]=defaults(dragSource,DefaultDragSource)}if(dropTarget){invariant(!this._dropTargets[type],"Drop target for %s specified twice. See configureDragDrop in %s",type,this.constructor.displayName);this._dropTargets[type]=defaults(dropTarget,DefaultDropTarget)}},handleStoreChangeInDragDropMixin:function handleStoreChangeInDragDropMixin(){if(this.isMounted()){this.setState(this.getStateForDragDropMixin())}},dragSourceFor:function dragSourceFor(type){checkValidType(this,type);checkDragSourceDefined(this,type);return backend.getDragSourceProps(this,type)},handleDragStart:function handleDragStart(type,e){var _this=this;var _dragSources$type=this._dragSources[type];var canDrag=_dragSources$type.canDrag;var beginDrag=_dragSources$type.beginDrag;if(DragOperationStore.isDragging()||!canDrag(this)){return}var _beginDrag=beginDrag(this);var item=_beginDrag.item;var dragPreview=_beginDrag.dragPreview;var dragAnchors=_beginDrag.dragAnchors;var effectsAllowed=_beginDrag.effectsAllowed;var containerNode=this.getDOMNode();var containerRect=containerNode.getBoundingClientRect();var offsetFromClient=backend.getOffsetFromClient(this,e);var offsetFromContainer;offsetFromContainer={x:offsetFromClient.x-containerRect.left,y:offsetFromClient.y-containerRect.top};if(!dragPreview){dragPreview=containerNode}if(!effectsAllowed){effectsAllowed=[DropEffects.MOVE]}invariant(isArray(effectsAllowed)&&effectsAllowed.length>0,"Expected effectsAllowed to be non-empty array");invariant(isObject(item),'Expected return value of beginDrag to contain "item" object');backend.beginDrag(this,e,containerNode,dragPreview,dragAnchors,offsetFromContainer,effectsAllowed);DragDropActionCreators.startDragging(type,item,effectsAllowed,offsetFromClient,offsetFromContainer);setTimeout(function(){if(_this.isMounted()&&DragOperationStore.getDraggedItem()===item){
_this.setState({ownDraggedItemType:type})}})},handleDragEnd:function handleDragEnd(type){backend.endDrag(this);var endDrag=this._dragSources[type].endDrag;var effect=DragOperationStore.getDropEffect();DragDropActionCreators.endDragging();if(this.isMounted()){this.setState({ownDraggedItemType:null})}endDrag(this,effect)},dropTargetFor:function dropTargetFor(){var _this=this;for(var _len=arguments.length,types=Array(_len),_key=0;_key<_len;_key++){types[_key]=arguments[_key]}types.forEach(function(type){checkValidType(_this,type);checkDropTargetDefined(_this,type)});return backend.getDropTargetProps(this,types)},handleDragEnter:function handleDragEnter(types,e){if(!this.isAnyDropTargetActive(types)){return}if(!this._monitor.enter(e.target)){return}e.preventDefault();var _dropTargets$state$draggedItemType=this._dropTargets[this.state.draggedItemType];var enter=_dropTargets$state$draggedItemType.enter;var getDropEffect=_dropTargets$state$draggedItemType.getDropEffect;var effectsAllowed=DragOperationStore.getEffectsAllowed();var itemType=DragOperationStore.getDraggedItemType();if(isNativeDraggedItemType(itemType)){effectsAllowed=[DropEffects.COPY]}var dropEffect=getDropEffect(this,effectsAllowed);if(dropEffect){invariant(effectsAllowed.indexOf(dropEffect)>-1,"Effect %s supplied by drop target is not one of the effects allowed by drag source: %s",dropEffect,effectsAllowed.join(", "))}this.setState({currentDropEffect:dropEffect});enter(this,this.state.draggedItem)},handleDragOver:function handleDragOver(types,e){if(!this.isAnyDropTargetActive(types)){return}e.preventDefault();var over=this._dropTargets[this.state.draggedItemType].over;over(this,this.state.draggedItem);backend.dragOver(this,e,this.state.currentDropEffect||"move")},handleDragLeave:function handleDragLeave(types,e){if(!this.isAnyDropTargetActive(types)){return}if(!this._monitor.leave(e.target)){return}this.setState({currentDropEffect:null});var leave=this._dropTargets[this.state.draggedItemType].leave;leave(this,this.state.draggedItem)},handleDrop:function handleDrop(types,e){if(!this.isAnyDropTargetActive(types)){return}e.preventDefault();var item=this.state.draggedItem;var acceptDrop=this._dropTargets[this.state.draggedItemType].acceptDrop;var currentDropEffect=this.state.currentDropEffect;var isHandled=!!DragOperationStore.getDropEffect();if(!item){item=extractNativeItem(e)}this._monitor.reset();if(!isHandled){DragDropActionCreators.recordDrop(currentDropEffect)}this.setState({currentDropEffect:null});acceptDrop(this,item,isHandled,DragOperationStore.getDropEffect())}}}module.exports=createDragDropMixin},{"../actions/DragDropActionCreators":345,"../constants/DropEffects":349,"../stores/DragOperationStore":358,"../utils/DragDropContext":361,"../utils/extractNativeItem":367,"../utils/isNativeDraggedItemType":373,"./DefaultDragSource":359,"./DefaultDropTarget":360,"./EnterLeaveMonitor":362,"lodash/lang/isArray":169,"lodash/lang/isObject":171,"lodash/object/defaults":173,"react/lib/Object.assign":446,"react/lib/invariant":568}],365:[function(require,module,exports){"use strict";var EventEmitter=require("events").EventEmitter,assign=require("react/lib/Object.assign"),CHANGE_EVENT="change";function createStore(spec){var store=assign({emitChange:function emitChange(){this.emit(CHANGE_EVENT)},addChangeListener:function addChangeListener(callback){this.on(CHANGE_EVENT,callback)},removeChangeListener:function removeChangeListener(callback){this.removeListener(CHANGE_EVENT,callback)}},spec,EventEmitter.prototype);store.setMaxListeners(0);return store}module.exports=createStore},{events:34,"react/lib/Object.assign":446}],366:[function(require,module,exports){"use strict";function endsWith(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1}module.exports=endsWith},{}],367:[function(require,module,exports){"use strict";var isFileDragDropEvent=require("./isFileDragDropEvent"),isUrlDragDropEvent=require("./isUrlDragDropEvent");function extractNativeItem(e){if(isFileDragDropEvent(e)){return{files:Array.prototype.slice.call(e.dataTransfer.files)}}else if(isUrlDragDropEvent(e)){return{urls:(e.dataTransfer.getData("Url")||e.dataTransfer.getData("text/uri-list")||"").split("\n")}}}module.exports=extractNativeItem},{"./isFileDragDropEvent":371,"./isUrlDragDropEvent":375}],368:[function(require,module,exports){"use strict";var DropEffects=require("../constants/DropEffects");function getBrowserEffectAllowed(effectsAllowed){var allowCopy=effectsAllowed.indexOf(DropEffects.COPY)>-1,allowMove=effectsAllowed.indexOf(DropEffects.MOVE)>-1,allowLink=effectsAllowed.indexOf(DropEffects.LINK)>-1;if(allowCopy&&allowMove&&allowLink){return"all"}else if(allowCopy&&allowMove){return"copyMove"}else if(allowLink&&allowMove){return"linkMove"}else if(allowCopy&&allowLink){return"copyLink"}else if(allowCopy){return"copy"}else if(allowMove){return"move"}else if(allowLink){return"link"}else{return"none"}}module.exports=getBrowserEffectAllowed},{"../constants/DropEffects":349}],369:[function(require,module,exports){"use strict";var HorizontalDragAnchors=require("../constants/HorizontalDragAnchors"),VerticalDragAnchors=require("../constants/VerticalDragAnchors"),isSafari=require("./isSafari");function getDragImageOffset(containerNode,dragPreview,dragAnchors,offsetFromContainer){dragAnchors=dragAnchors||{};var containerWidth=containerNode.offsetWidth;var containerHeight=containerNode.offsetHeight;var isImage=dragPreview instanceof Image;var previewWidth=isImage?dragPreview.width:containerWidth;var previewHeight=isImage?dragPreview.height:containerHeight;var horizontalAnchor=dragAnchors.horizontal||HorizontalDragAnchors.CENTER;var verticalAnchor=dragAnchors.vertical||VerticalDragAnchors.CENTER;var x=offsetFromContainer.x;var y=offsetFromContainer.y;if(isSafari()){previewHeight/=window.devicePixelRatio;previewWidth/=window.devicePixelRatio}switch(horizontalAnchor){case HorizontalDragAnchors.LEFT:break;case HorizontalDragAnchors.CENTER:x*=previewWidth/containerWidth;break;case HorizontalDragAnchors.RIGHT:x=previewWidth-previewWidth*(1-x/containerWidth);break}switch(verticalAnchor){case VerticalDragAnchors.TOP:break;case VerticalDragAnchors.CENTER:y*=previewHeight/containerHeight;break;case VerticalDragAnchors.BOTTOM:y=previewHeight-previewHeight*(1-y/containerHeight);break}if(isSafari()){y+=(window.devicePixelRatio-1)*previewHeight}return{x:x,y:y}}module.exports=getDragImageOffset},{"../constants/HorizontalDragAnchors":350,"../constants/VerticalDragAnchors":352,"./isSafari":374}],370:[function(require,module,exports){"use strict";var isFirefox=require("./isFirefox"),isSafari=require("./isSafari");function getDragImageScale(){if(isFirefox()||isSafari()){return window.devicePixelRatio}else{return 1}}module.exports=getDragImageScale},{"./isFirefox":372,"./isSafari":374}],371:[function(require,module,exports){"use strict";function isFileDragDropEvent(e){if(!e.dataTransfer){return false}var types=Array.prototype.slice.call(e.dataTransfer.types);return types.indexOf("Files")!==-1}module.exports=isFileDragDropEvent},{}],372:[function(require,module,exports){"use strict";function isFirefox(){return/firefox/i.test(navigator.userAgent)}module.exports=isFirefox},{}],373:[function(require,module,exports){"use strict";var NativeDragItemTypes=require("../constants/NativeDragItemTypes");function isNativeDraggedItemType(itemType){switch(itemType){case NativeDragItemTypes.FILE:case NativeDragItemTypes.URL:return true;default:return false}}module.exports=isNativeDraggedItemType},{"../constants/NativeDragItemTypes":351}],374:[function(require,module,exports){"use strict";function isSafari(){return!!window.safari}module.exports=isSafari},{}],375:[function(require,module,exports){"use strict";function isUrlDragDropEvent(e){var types=Array.prototype.slice.call(e.dataTransfer.types);return types.indexOf("Url")!==-1||types.indexOf("text/uri-list")!==-1}module.exports=isUrlDragDropEvent},{}],376:[function(require,module,exports){"use strict";function isWebkit(){return"WebkitAppearance"in document.documentElement.style}module.exports=isWebkit},{}],377:[function(require,module,exports){"use strict";var isSafari=require("./isSafari"),endsWith=require("./endsWith");function shouldUseDragPreview(dragPreview){if(!dragPreview){return false}if(isSafari()&&dragPreview instanceof Image&&endsWith(dragPreview.src,".gif")){return false}return true}module.exports=shouldUseDragPreview},{"./endsWith":366,"./isSafari":374}],378:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=shallowEqual;function shallowEqual(objA,objB){if(objA===objB){return true}if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length){return false}var bHasOwnProperty=Object.prototype.hasOwnProperty.bind(objB);for(var i=0;i<keysA.length;i++){if(!bHasOwnProperty(keysA[i])||objA[keysA[i]]!==objB[keysA[i]]){return false}}return true}module.exports=exports["default"]},{}],379:[function(require,module,exports){"use strict";function Cancellation(){}module.exports=Cancellation},{}],380:[function(require,module,exports){"use strict";var invariant=require("react/lib/invariant");var canUseDOM=require("react/lib/ExecutionEnvironment").canUseDOM;var History={length:1,back:function back(){invariant(canUseDOM,"Cannot use History.back without a DOM");History.length-=1;window.history.back()}};module.exports=History},{"react/lib/ExecutionEnvironment":439,"react/lib/invariant":568}],381:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var PathUtils=require("./PathUtils");function deepSearch(route,pathname,query){var childRoutes=route.childRoutes;if(childRoutes){var match,childRoute;for(var i=0,len=childRoutes.length;i<len;++i){childRoute=childRoutes[i];if(childRoute.isDefault||childRoute.isNotFound)continue;if(match=deepSearch(childRoute,pathname,query)){match.routes.unshift(route);return match}}}var defaultRoute=route.defaultRoute;if(defaultRoute&&(params=PathUtils.extractParams(defaultRoute.path,pathname))){return new Match(pathname,params,query,[route,defaultRoute])}var notFoundRoute=route.notFoundRoute;if(notFoundRoute&&(params=PathUtils.extractParams(notFoundRoute.path,pathname))){return new Match(pathname,params,query,[route,notFoundRoute])}var params=PathUtils.extractParams(route.path,pathname);if(params){return new Match(pathname,params,query,[route])}return null}var Match=function(){function Match(pathname,params,query,routes){_classCallCheck(this,Match);this.pathname=pathname;this.params=params;this.query=query;this.routes=routes}_createClass(Match,null,[{key:"findMatch",value:function findMatch(routes,path){var pathname=PathUtils.withoutQuery(path);var query=PathUtils.extractQuery(path);var match=null;for(var i=0,len=routes.length;match==null&&i<len;++i)match=deepSearch(routes[i],pathname,query);return match}}]);return Match}();module.exports=Match},{"./PathUtils":383}],382:[function(require,module,exports){"use strict";var PropTypes=require("./PropTypes");var Navigation={contextTypes:{router:PropTypes.router.isRequired},makePath:function makePath(to,params,query){return this.context.router.makePath(to,params,query)},makeHref:function makeHref(to,params,query){return this.context.router.makeHref(to,params,query)},transitionTo:function transitionTo(to,params,query){this.context.router.transitionTo(to,params,query)},replaceWith:function replaceWith(to,params,query){this.context.router.replaceWith(to,params,query)},goBack:function goBack(){return this.context.router.goBack()}};module.exports=Navigation},{"./PropTypes":384}],383:[function(require,module,exports){"use strict";var invariant=require("react/lib/invariant");var assign=require("object-assign");var qs=require("qs");var paramCompileMatcher=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\[\]\\+|{}^$]/g;var paramInjectMatcher=/:([a-zA-Z_$][a-zA-Z0-9_$?]*[?]?)|[*]/g;var paramInjectTrailingSlashMatcher=/\/\/\?|\/\?\/|\/\?/g;var queryMatcher=/\?(.*)$/;var _compiledPatterns={};function compilePattern(pattern){if(!(pattern in _compiledPatterns)){var paramNames=[];var source=pattern.replace(paramCompileMatcher,function(match,paramName){if(paramName){paramNames.push(paramName);return"([^/?#]+)"}else if(match==="*"){paramNames.push("splat");return"(.*?)"}else{return"\\"+match}});_compiledPatterns[pattern]={matcher:new RegExp("^"+source+"$","i"),paramNames:paramNames}}return _compiledPatterns[pattern]}var PathUtils={isAbsolute:function isAbsolute(path){return path.charAt(0)==="/"},join:function join(a,b){return a.replace(/\/*$/,"/")+b},extractParamNames:function extractParamNames(pattern){return compilePattern(pattern).paramNames},extractParams:function extractParams(pattern,path){var _compilePattern=compilePattern(pattern);var matcher=_compilePattern.matcher;var paramNames=_compilePattern.paramNames;var match=path.match(matcher);if(!match){return null}var params={};paramNames.forEach(function(paramName,index){params[paramName]=match[index+1]});return params},injectParams:function injectParams(pattern,params){params=params||{};var splatIndex=0;return pattern.replace(paramInjectMatcher,function(match,paramName){paramName=paramName||"splat";if(paramName.slice(-1)==="?"){paramName=paramName.slice(0,-1);if(params[paramName]==null)return""}else{invariant(params[paramName]!=null,'Missing "%s" parameter for path "%s"',paramName,pattern)}var segment;if(paramName==="splat"&&Array.isArray(params[paramName])){segment=params[paramName][splatIndex++];invariant(segment!=null,'Missing splat # %s for path "%s"',splatIndex,pattern)}else{segment=params[paramName]}return segment}).replace(paramInjectTrailingSlashMatcher,"/")},extractQuery:function extractQuery(path){var match=path.match(queryMatcher);return match&&qs.parse(match[1])},withoutQuery:function withoutQuery(path){return path.replace(queryMatcher,"")},withQuery:function withQuery(path,query){var existingQuery=PathUtils.extractQuery(path);if(existingQuery)query=query?assign(existingQuery,query):existingQuery;var queryString=qs.stringify(query,{arrayFormat:"brackets"});if(queryString){return PathUtils.withoutQuery(path)+"?"+queryString}return PathUtils.withoutQuery(path)}};module.exports=PathUtils},{"object-assign":412,qs:413,"react/lib/invariant":568}],384:[function(require,module,exports){"use strict";var assign=require("react/lib/Object.assign");var ReactPropTypes=require("react").PropTypes;var Route=require("./Route");var PropTypes=assign({},ReactPropTypes,{falsy:function falsy(props,propName,componentName){if(props[propName]){return new Error("<"+componentName+'> should not have a "'+propName+'" prop')}},route:ReactPropTypes.instanceOf(Route),router:ReactPropTypes.func});module.exports=PropTypes},{"./Route":386,react:590,"react/lib/Object.assign":446}],385:[function(require,module,exports){"use strict";function Redirect(to,params,query){this.to=to;this.params=params;this.query=query}module.exports=Redirect},{}],386:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var assign=require("react/lib/Object.assign");var invariant=require("react/lib/invariant");var warning=require("react/lib/warning");var PathUtils=require("./PathUtils");var _currentRoute;var Route=function(){function Route(name,path,ignoreScrollBehavior,isDefault,isNotFound,onEnter,onLeave,handler){_classCallCheck(this,Route);this.name=name;this.path=path;this.paramNames=PathUtils.extractParamNames(this.path);this.ignoreScrollBehavior=!!ignoreScrollBehavior;this.isDefault=!!isDefault;this.isNotFound=!!isNotFound;this.onEnter=onEnter;this.onLeave=onLeave;this.handler=handler}_createClass(Route,[{key:"appendChild",value:function appendChild(route){invariant(route instanceof Route,"route.appendChild must use a valid Route");if(!this.childRoutes)this.childRoutes=[];this.childRoutes.push(route)}},{key:"toString",value:function toString(){var string="<Route";if(this.name)string+=' name="'+this.name+'"';string+=' path="'+this.path+'">';return string}}],[{key:"createRoute",value:function createRoute(options,callback){options=options||{};if(typeof options==="string")options={path:options};var parentRoute=_currentRoute;if(parentRoute){warning(options.parentRoute==null||options.parentRoute===parentRoute,"You should not use parentRoute with createRoute inside another route's child callback; it is ignored")}else{parentRoute=options.parentRoute}var name=options.name;var path=options.path||name;if(path&&!(options.isDefault||options.isNotFound)){if(PathUtils.isAbsolute(path)){if(parentRoute){invariant(path===parentRoute.path||parentRoute.paramNames.length===0,'You cannot nest path "%s" inside "%s"; the parent requires URL parameters',path,parentRoute.path)}}else if(parentRoute){path=PathUtils.join(parentRoute.path,path)}else{path="/"+path}}else{path=parentRoute?parentRoute.path:"/"}if(options.isNotFound&&!/\*$/.test(path))path+="*";var route=new Route(name,path,options.ignoreScrollBehavior,options.isDefault,options.isNotFound,options.onEnter,options.onLeave,options.handler);if(parentRoute){if(route.isDefault){invariant(parentRoute.defaultRoute==null,"%s may not have more than one default route",parentRoute);parentRoute.defaultRoute=route}else if(route.isNotFound){invariant(parentRoute.notFoundRoute==null,"%s may not have more than one not found route",parentRoute);parentRoute.notFoundRoute=route}parentRoute.appendChild(route)}if(typeof callback==="function"){var currentRoute=_currentRoute;_currentRoute=route;callback.call(route,route);_currentRoute=currentRoute}return route}},{key:"createDefaultRoute",value:function createDefaultRoute(options){return Route.createRoute(assign({},options,{isDefault:true}))}},{key:"createNotFoundRoute",value:function createNotFoundRoute(options){return Route.createRoute(assign({},options,{isNotFound:true}))}},{key:"createRedirect",value:function createRedirect(options){return Route.createRoute(assign({},options,{path:options.path||options.from||"*",onEnter:function onEnter(transition,params,query){transition.redirect(options.to,options.params||params,options.query||query)}}))}}]);return Route}();module.exports=Route},{"./PathUtils":383,"react/lib/Object.assign":446,"react/lib/invariant":568,"react/lib/warning":589}],387:[function(require,module,exports){"use strict";var invariant=require("react/lib/invariant");var canUseDOM=require("react/lib/ExecutionEnvironment").canUseDOM;var getWindowScrollPosition=require("./getWindowScrollPosition");function shouldUpdateScroll(state,prevState){if(!prevState){return true}if(state.pathname===prevState.pathname){return false}var routes=state.routes;var prevRoutes=prevState.routes;var sharedAncestorRoutes=routes.filter(function(route){return prevRoutes.indexOf(route)!==-1});return!sharedAncestorRoutes.some(function(route){return route.ignoreScrollBehavior})}var ScrollHistory={statics:{recordScrollPosition:function recordScrollPosition(path){if(!this.scrollHistory)this.scrollHistory={};this.scrollHistory[path]=getWindowScrollPosition()},getScrollPosition:function getScrollPosition(path){if(!this.scrollHistory)this.scrollHistory={};return this.scrollHistory[path]||null}},componentWillMount:function componentWillMount(){invariant(this.constructor.getScrollBehavior()==null||canUseDOM,"Cannot use scroll behavior without a DOM")},componentDidMount:function componentDidMount(){this._updateScroll()},componentDidUpdate:function componentDidUpdate(prevProps,prevState){this._updateScroll(prevState)},_updateScroll:function _updateScroll(prevState){if(!shouldUpdateScroll(this.state,prevState)){return}var scrollBehavior=this.constructor.getScrollBehavior();if(scrollBehavior)scrollBehavior.updateScrollPosition(this.constructor.getScrollPosition(this.state.path),this.state.action)}};module.exports=ScrollHistory},{"./getWindowScrollPosition":402,"react/lib/ExecutionEnvironment":439,"react/lib/invariant":568}],388:[function(require,module,exports){"use strict";var PropTypes=require("./PropTypes");var State={contextTypes:{router:PropTypes.router.isRequired},getPath:function getPath(){return this.context.router.getCurrentPath()},getPathname:function getPathname(){return this.context.router.getCurrentPathname()},getParams:function getParams(){return this.context.router.getCurrentParams()},getQuery:function getQuery(){return this.context.router.getCurrentQuery()},getRoutes:function getRoutes(){return this.context.router.getCurrentRoutes()},isActive:function isActive(to,params,query){return this.context.router.isActive(to,params,query)}};module.exports=State},{"./PropTypes":384}],389:[function(require,module,exports){"use strict";var Cancellation=require("./Cancellation");var Redirect=require("./Redirect");function Transition(path,retry){this.path=path;this.abortReason=null;this.retry=retry.bind(this)}Transition.prototype.abort=function(reason){if(this.abortReason==null)this.abortReason=reason||"ABORT"};Transition.prototype.redirect=function(to,params,query){this.abort(new Redirect(to,params,query))};Transition.prototype.cancel=function(){this.abort(new Cancellation)};Transition.from=function(transition,routes,components,callback){routes.reduce(function(callback,route,index){return function(error){if(error||transition.abortReason){callback(error)}else if(route.onLeave){try{route.onLeave(transition,components[index],callback);if(route.onLeave.length<3)callback()}catch(e){callback(e)}}else{callback()}}},callback)()};Transition.to=function(transition,routes,params,query,callback){routes.reduceRight(function(callback,route){return function(error){if(error||transition.abortReason){callback(error)}else if(route.onEnter){try{route.onEnter(transition,params,query,callback);if(route.onEnter.length<4)callback()}catch(e){callback(e)}}else{callback()}}},callback)()};module.exports=Transition},{"./Cancellation":379,"./Redirect":385}],390:[function(require,module,exports){"use strict";var LocationActions={PUSH:"push",REPLACE:"replace",POP:"pop"};module.exports=LocationActions},{}],391:[function(require,module,exports){"use strict";var LocationActions=require("../actions/LocationActions");var ImitateBrowserBehavior={updateScrollPosition:function updateScrollPosition(position,actionType){switch(actionType){case LocationActions.PUSH:case LocationActions.REPLACE:window.scrollTo(0,0);break;case LocationActions.POP:if(position){window.scrollTo(position.x,position.y)}else{window.scrollTo(0,0)}break}}};module.exports=ImitateBrowserBehavior},{"../actions/LocationActions":390}],392:[function(require,module,exports){"use strict";var ScrollToTopBehavior={updateScrollPosition:function updateScrollPosition(){window.scrollTo(0,0)}};module.exports=ScrollToTopBehavior},{}],393:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var React=require("react");var ContextWrapper=function(_React$Component){function ContextWrapper(){_classCallCheck(this,ContextWrapper);if(_React$Component!=null){_React$Component.apply(this,arguments)}}_inherits(ContextWrapper,_React$Component);_createClass(ContextWrapper,[{key:"render",value:function render(){return this.props.children}}]);return ContextWrapper}(React.Component);module.exports=ContextWrapper},{react:590}],394:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var PropTypes=require("../PropTypes");var RouteHandler=require("./RouteHandler");var Route=require("./Route");var DefaultRoute=function(_Route){function DefaultRoute(){_classCallCheck(this,DefaultRoute);if(_Route!=null){_Route.apply(this,arguments)}}_inherits(DefaultRoute,_Route);return DefaultRoute}(Route);DefaultRoute.propTypes={name:PropTypes.string,path:PropTypes.falsy,children:PropTypes.falsy,handler:PropTypes.func.isRequired};DefaultRoute.defaultProps={handler:RouteHandler};module.exports=DefaultRoute},{"../PropTypes":384,"./Route":398,"./RouteHandler":399}],395:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var React=require("react");var assign=require("react/lib/Object.assign");var PropTypes=require("../PropTypes");function isLeftClickEvent(event){return event.button===0}function isModifiedEvent(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)}var Link=function(_React$Component){function Link(){_classCallCheck(this,Link);if(_React$Component!=null){_React$Component.apply(this,arguments)}}_inherits(Link,_React$Component);_createClass(Link,[{key:"handleClick",value:function handleClick(event){var allowTransition=true;var clickResult;if(this.props.onClick)clickResult=this.props.onClick(event);if(isModifiedEvent(event)||!isLeftClickEvent(event)){return}if(clickResult===false||event.defaultPrevented===true)allowTransition=false;event.preventDefault();if(allowTransition)this.context.router.transitionTo(this.props.to,this.props.params,this.props.query)}},{key:"getHref",value:function getHref(){return this.context.router.makeHref(this.props.to,this.props.params,this.props.query)}},{key:"getClassName",value:function getClassName(){var className=this.props.className;if(this.getActiveState())className+=" "+this.props.activeClassName;return className}},{key:"getActiveState",value:function getActiveState(){return this.context.router.isActive(this.props.to,this.props.params,this.props.query)}},{key:"render",value:function render(){var props=assign({},this.props,{href:this.getHref(),className:this.getClassName(),onClick:this.handleClick.bind(this)});if(props.activeStyle&&this.getActiveState())props.style=props.activeStyle;return React.DOM.a(props,this.props.children)}}]);return Link}(React.Component);Link.contextTypes={router:PropTypes.router.isRequired};Link.propTypes={activeClassName:PropTypes.string.isRequired,to:PropTypes.oneOfType([PropTypes.string,PropTypes.route]).isRequired,params:PropTypes.object,query:PropTypes.object,activeStyle:PropTypes.object,onClick:PropTypes.func};Link.defaultProps={activeClassName:"active",className:""};module.exports=Link},{"../PropTypes":384,react:590,"react/lib/Object.assign":446}],396:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var PropTypes=require("../PropTypes");var RouteHandler=require("./RouteHandler");var Route=require("./Route");var NotFoundRoute=function(_Route){function NotFoundRoute(){_classCallCheck(this,NotFoundRoute);if(_Route!=null){_Route.apply(this,arguments)}}_inherits(NotFoundRoute,_Route);return NotFoundRoute}(Route);NotFoundRoute.propTypes={name:PropTypes.string,path:PropTypes.falsy,children:PropTypes.falsy,handler:PropTypes.func.isRequired};NotFoundRoute.defaultProps={handler:RouteHandler};module.exports=NotFoundRoute},{"../PropTypes":384,"./Route":398,"./RouteHandler":399}],397:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var PropTypes=require("../PropTypes");var Route=require("./Route");var Redirect=function(_Route){function Redirect(){_classCallCheck(this,Redirect);if(_Route!=null){_Route.apply(this,arguments)}}_inherits(Redirect,_Route);return Redirect}(Route);Redirect.propTypes={path:PropTypes.string,from:PropTypes.string,to:PropTypes.string,handler:PropTypes.falsy};Redirect.defaultProps={};module.exports=Redirect},{"../PropTypes":384,"./Route":398}],398:[function(require,module,exports){
"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var React=require("react");var invariant=require("react/lib/invariant");var PropTypes=require("../PropTypes");var RouteHandler=require("./RouteHandler");var Route=function(_React$Component){function Route(){_classCallCheck(this,Route);if(_React$Component!=null){_React$Component.apply(this,arguments)}}_inherits(Route,_React$Component);_createClass(Route,[{key:"render",value:function render(){invariant(false,"%s elements are for router configuration only and should not be rendered",this.constructor.name)}}]);return Route}(React.Component);Route.propTypes={name:PropTypes.string,path:PropTypes.string,handler:PropTypes.func,ignoreScrollBehavior:PropTypes.bool};Route.defaultProps={handler:RouteHandler};module.exports=Route},{"../PropTypes":384,"./RouteHandler":399,react:590,"react/lib/invariant":568}],399:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass};var React=require("react");var ContextWrapper=require("./ContextWrapper");var assign=require("react/lib/Object.assign");var PropTypes=require("../PropTypes");var REF_NAME="__routeHandler__";var RouteHandler=function(_React$Component){function RouteHandler(){_classCallCheck(this,RouteHandler);if(_React$Component!=null){_React$Component.apply(this,arguments)}}_inherits(RouteHandler,_React$Component);_createClass(RouteHandler,[{key:"getChildContext",value:function getChildContext(){return{routeDepth:this.context.routeDepth+1}}},{key:"componentDidMount",value:function componentDidMount(){this._updateRouteComponent(this.refs[REF_NAME])}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._updateRouteComponent(this.refs[REF_NAME])}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._updateRouteComponent(null)}},{key:"_updateRouteComponent",value:function _updateRouteComponent(component){this.context.router.setRouteComponentAtDepth(this.getRouteDepth(),component)}},{key:"getRouteDepth",value:function getRouteDepth(){return this.context.routeDepth}},{key:"createChildRouteHandler",value:function createChildRouteHandler(props){var route=this.context.router.getRouteAtDepth(this.getRouteDepth());if(route==null){return null}var childProps=assign({},props||this.props,{ref:REF_NAME,params:this.context.router.getCurrentParams(),query:this.context.router.getCurrentQuery()});return React.createElement(route.handler,childProps)}},{key:"render",value:function render(){var handler=this.createChildRouteHandler();return handler?React.createElement(ContextWrapper,null,handler):React.createElement("script",null)}}]);return RouteHandler}(React.Component);RouteHandler.contextTypes={routeDepth:PropTypes.number.isRequired,router:PropTypes.router.isRequired};RouteHandler.childContextTypes={routeDepth:PropTypes.number.isRequired};module.exports=RouteHandler},{"../PropTypes":384,"./ContextWrapper":393,react:590,"react/lib/Object.assign":446}],400:[function(require,module,exports){(function(process){"use strict";var React=require("react");var warning=require("react/lib/warning");var invariant=require("react/lib/invariant");var canUseDOM=require("react/lib/ExecutionEnvironment").canUseDOM;var LocationActions=require("./actions/LocationActions");var ImitateBrowserBehavior=require("./behaviors/ImitateBrowserBehavior");var HashLocation=require("./locations/HashLocation");var HistoryLocation=require("./locations/HistoryLocation");var RefreshLocation=require("./locations/RefreshLocation");var StaticLocation=require("./locations/StaticLocation");var ScrollHistory=require("./ScrollHistory");var createRoutesFromReactChildren=require("./createRoutesFromReactChildren");var isReactChildren=require("./isReactChildren");var Transition=require("./Transition");var PropTypes=require("./PropTypes");var Redirect=require("./Redirect");var History=require("./History");var Cancellation=require("./Cancellation");var Match=require("./Match");var Route=require("./Route");var supportsHistory=require("./supportsHistory");var PathUtils=require("./PathUtils");var DEFAULT_LOCATION=canUseDOM?HashLocation:"/";var DEFAULT_SCROLL_BEHAVIOR=canUseDOM?ImitateBrowserBehavior:null;function hasProperties(object,properties){for(var propertyName in properties)if(properties.hasOwnProperty(propertyName)&&object[propertyName]!==properties[propertyName]){return false}return true}function hasMatch(routes,route,prevParams,nextParams,prevQuery,nextQuery){return routes.some(function(r){if(r!==route)return false;var paramNames=route.paramNames;var paramName;for(var i=0,len=paramNames.length;i<len;++i){paramName=paramNames[i];if(nextParams[paramName]!==prevParams[paramName])return false}return hasProperties(prevQuery,nextQuery)&&hasProperties(nextQuery,prevQuery)})}function addRoutesToNamedRoutes(routes,namedRoutes){var route;for(var i=0,len=routes.length;i<len;++i){route=routes[i];if(route.name){invariant(namedRoutes[route.name]==null,'You may not have more than one route named "%s"',route.name);namedRoutes[route.name]=route}if(route.childRoutes)addRoutesToNamedRoutes(route.childRoutes,namedRoutes)}}function routeIsActive(activeRoutes,routeName){return activeRoutes.some(function(route){return route.name===routeName})}function paramsAreActive(activeParams,params){for(var property in params)if(String(activeParams[property])!==String(params[property])){return false}return true}function queryIsActive(activeQuery,query){for(var property in query)if(String(activeQuery[property])!==String(query[property])){return false}return true}function createRouter(options){options=options||{};if(isReactChildren(options))options={routes:options};var mountedComponents=[];var location=options.location||DEFAULT_LOCATION;var scrollBehavior=options.scrollBehavior||DEFAULT_SCROLL_BEHAVIOR;var state={};var nextState={};var pendingTransition=null;var dispatchHandler=null;if(typeof location==="string")location=new StaticLocation(location);if(location instanceof StaticLocation){warning(!canUseDOM||process.env.NODE_ENV==="test","You should not use a static location in a DOM environment because "+"the router will not be kept in sync with the current URL")}else{invariant(canUseDOM||location.needsDOM===false,"You cannot use %s without a DOM",location)}if(location===HistoryLocation&&!supportsHistory())location=RefreshLocation;var Router=React.createClass({displayName:"Router",statics:{isRunning:false,cancelPendingTransition:function cancelPendingTransition(){if(pendingTransition){pendingTransition.cancel();pendingTransition=null}},clearAllRoutes:function clearAllRoutes(){Router.cancelPendingTransition();Router.namedRoutes={};Router.routes=[]},addRoutes:function addRoutes(routes){if(isReactChildren(routes))routes=createRoutesFromReactChildren(routes);addRoutesToNamedRoutes(routes,Router.namedRoutes);Router.routes.push.apply(Router.routes,routes)},replaceRoutes:function replaceRoutes(routes){Router.clearAllRoutes();Router.addRoutes(routes);Router.refresh()},match:function match(path){return Match.findMatch(Router.routes,path)},makePath:function makePath(to,params,query){var path;if(PathUtils.isAbsolute(to)){path=to}else{var route=to instanceof Route?to:Router.namedRoutes[to];invariant(route instanceof Route,'Cannot find a route named "%s"',to);path=route.path}return PathUtils.withQuery(PathUtils.injectParams(path,params),query)},makeHref:function makeHref(to,params,query){var path=Router.makePath(to,params,query);return location===HashLocation?"#"+path:path},transitionTo:function transitionTo(to,params,query){var path=Router.makePath(to,params,query);if(pendingTransition){location.replace(path)}else{location.push(path)}},replaceWith:function replaceWith(to,params,query){location.replace(Router.makePath(to,params,query))},goBack:function goBack(){if(History.length>1||location===RefreshLocation){location.pop();return true}warning(false,"goBack() was ignored because there is no router history");return false},handleAbort:options.onAbort||function(abortReason){if(location instanceof StaticLocation)throw new Error("Unhandled aborted transition! Reason: "+abortReason);if(abortReason instanceof Cancellation){return}else if(abortReason instanceof Redirect){location.replace(Router.makePath(abortReason.to,abortReason.params,abortReason.query))}else{location.pop()}},handleError:options.onError||function(error){throw error},handleLocationChange:function handleLocationChange(change){Router.dispatch(change.path,change.type)},dispatch:function dispatch(path,action){Router.cancelPendingTransition();var prevPath=state.path;var isRefreshing=action==null;if(prevPath===path&&!isRefreshing){return}if(prevPath&&action===LocationActions.PUSH)Router.recordScrollPosition(prevPath);var match=Router.match(path);warning(match!=null,'No route matches path "%s". Make sure you have <Route path="%s"> somewhere in your routes',path,path);if(match==null)match={};var prevRoutes=state.routes||[];var prevParams=state.params||{};var prevQuery=state.query||{};var nextRoutes=match.routes||[];var nextParams=match.params||{};var nextQuery=match.query||{};var fromRoutes,toRoutes;if(prevRoutes.length){fromRoutes=prevRoutes.filter(function(route){return!hasMatch(nextRoutes,route,prevParams,nextParams,prevQuery,nextQuery)});toRoutes=nextRoutes.filter(function(route){return!hasMatch(prevRoutes,route,prevParams,nextParams,prevQuery,nextQuery)})}else{fromRoutes=[];toRoutes=nextRoutes}var transition=new Transition(path,Router.replaceWith.bind(Router,path));pendingTransition=transition;var fromComponents=mountedComponents.slice(prevRoutes.length-fromRoutes.length);Transition.from(transition,fromRoutes,fromComponents,function(error){if(error||transition.abortReason)return dispatchHandler.call(Router,error,transition);Transition.to(transition,toRoutes,nextParams,nextQuery,function(error){dispatchHandler.call(Router,error,transition,{path:path,action:action,pathname:match.pathname,routes:nextRoutes,params:nextParams,query:nextQuery})})})},run:function run(callback){invariant(!Router.isRunning,"Router is already running");dispatchHandler=function(error,transition,newState){if(error)Router.handleError(error);if(pendingTransition!==transition)return;pendingTransition=null;if(transition.abortReason){Router.handleAbort(transition.abortReason)}else{callback.call(Router,Router,nextState=newState)}};if(!(location instanceof StaticLocation)){if(location.addChangeListener)location.addChangeListener(Router.handleLocationChange);Router.isRunning=true}Router.refresh()},refresh:function refresh(){Router.dispatch(location.getCurrentPath(),null)},stop:function stop(){Router.cancelPendingTransition();if(location.removeChangeListener)location.removeChangeListener(Router.handleLocationChange);Router.isRunning=false},getLocation:function getLocation(){return location},getScrollBehavior:function getScrollBehavior(){return scrollBehavior},getRouteAtDepth:function getRouteAtDepth(routeDepth){var routes=state.routes;return routes&&routes[routeDepth]},setRouteComponentAtDepth:function setRouteComponentAtDepth(routeDepth,component){mountedComponents[routeDepth]=component},getCurrentPath:function getCurrentPath(){return state.path},getCurrentPathname:function getCurrentPathname(){return state.pathname},getCurrentParams:function getCurrentParams(){return state.params},getCurrentQuery:function getCurrentQuery(){return state.query},getCurrentRoutes:function getCurrentRoutes(){return state.routes},isActive:function isActive(to,params,query){if(PathUtils.isAbsolute(to)){return to===state.path}return routeIsActive(state.routes,to)&&paramsAreActive(state.params,params)&&(query==null||queryIsActive(state.query,query))}},mixins:[ScrollHistory],propTypes:{children:PropTypes.falsy},childContextTypes:{routeDepth:PropTypes.number.isRequired,router:PropTypes.router.isRequired},getChildContext:function getChildContext(){return{routeDepth:1,router:Router}},getInitialState:function getInitialState(){return state=nextState},componentWillReceiveProps:function componentWillReceiveProps(){this.setState(state=nextState)},componentWillUnmount:function componentWillUnmount(){Router.stop()},render:function render(){var route=Router.getRouteAtDepth(0);return route?React.createElement(route.handler,this.props):null}});Router.clearAllRoutes();if(options.routes)Router.addRoutes(options.routes);return Router}module.exports=createRouter}).call(this,require("_process"))},{"./Cancellation":379,"./History":380,"./Match":381,"./PathUtils":383,"./PropTypes":384,"./Redirect":385,"./Route":386,"./ScrollHistory":387,"./Transition":389,"./actions/LocationActions":390,"./behaviors/ImitateBrowserBehavior":391,"./createRoutesFromReactChildren":401,"./isReactChildren":404,"./locations/HashLocation":405,"./locations/HistoryLocation":406,"./locations/RefreshLocation":407,"./locations/StaticLocation":408,"./supportsHistory":411,_process:35,react:590,"react/lib/ExecutionEnvironment":439,"react/lib/invariant":568,"react/lib/warning":589}],401:[function(require,module,exports){"use strict";var React=require("react");var assign=require("react/lib/Object.assign");var warning=require("react/lib/warning");var DefaultRoute=require("./components/DefaultRoute");var NotFoundRoute=require("./components/NotFoundRoute");var Redirect=require("./components/Redirect");var Route=require("./Route");function checkPropTypes(componentName,propTypes,props){componentName=componentName||"UnknownComponent";for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error=propTypes[propName](props,propName,componentName);if(error instanceof Error)warning(false,error.message)}}}function createRouteOptions(props){var options=assign({},props);var handler=options.handler;if(handler){options.onEnter=handler.willTransitionTo;options.onLeave=handler.willTransitionFrom}return options}function createRouteFromReactElement(element){if(!React.isValidElement(element)){return}var type=element.type;var props=assign({},type.defaultProps,element.props);if(type.propTypes)checkPropTypes(type.displayName,type.propTypes,props);if(type===DefaultRoute){return Route.createDefaultRoute(createRouteOptions(props))}if(type===NotFoundRoute){return Route.createNotFoundRoute(createRouteOptions(props))}if(type===Redirect){return Route.createRedirect(createRouteOptions(props))}return Route.createRoute(createRouteOptions(props),function(){if(props.children)createRoutesFromReactChildren(props.children)})}function createRoutesFromReactChildren(children){var routes=[];React.Children.forEach(children,function(child){if(child=createRouteFromReactElement(child))routes.push(child)});return routes}module.exports=createRoutesFromReactChildren},{"./Route":386,"./components/DefaultRoute":394,"./components/NotFoundRoute":396,"./components/Redirect":397,react:590,"react/lib/Object.assign":446,"react/lib/warning":589}],402:[function(require,module,exports){"use strict";var invariant=require("react/lib/invariant");var canUseDOM=require("react/lib/ExecutionEnvironment").canUseDOM;function getWindowScrollPosition(){invariant(canUseDOM,"Cannot get current scroll position without a DOM");return{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}module.exports=getWindowScrollPosition},{"react/lib/ExecutionEnvironment":439,"react/lib/invariant":568}],403:[function(require,module,exports){"use strict";exports.DefaultRoute=require("./components/DefaultRoute");exports.Link=require("./components/Link");exports.NotFoundRoute=require("./components/NotFoundRoute");exports.Redirect=require("./components/Redirect");exports.Route=require("./components/Route");exports.ActiveHandler=require("./components/RouteHandler");exports.RouteHandler=exports.ActiveHandler;exports.HashLocation=require("./locations/HashLocation");exports.HistoryLocation=require("./locations/HistoryLocation");exports.RefreshLocation=require("./locations/RefreshLocation");exports.StaticLocation=require("./locations/StaticLocation");exports.TestLocation=require("./locations/TestLocation");exports.ImitateBrowserBehavior=require("./behaviors/ImitateBrowserBehavior");exports.ScrollToTopBehavior=require("./behaviors/ScrollToTopBehavior");exports.History=require("./History");exports.Navigation=require("./Navigation");exports.State=require("./State");exports.createRoute=require("./Route").createRoute;exports.createDefaultRoute=require("./Route").createDefaultRoute;exports.createNotFoundRoute=require("./Route").createNotFoundRoute;exports.createRedirect=require("./Route").createRedirect;exports.createRoutesFromReactChildren=require("./createRoutesFromReactChildren");exports.create=require("./createRouter");exports.run=require("./runRouter")},{"./History":380,"./Navigation":382,"./Route":386,"./State":388,"./behaviors/ImitateBrowserBehavior":391,"./behaviors/ScrollToTopBehavior":392,"./components/DefaultRoute":394,"./components/Link":395,"./components/NotFoundRoute":396,"./components/Redirect":397,"./components/Route":398,"./components/RouteHandler":399,"./createRouter":400,"./createRoutesFromReactChildren":401,"./locations/HashLocation":405,"./locations/HistoryLocation":406,"./locations/RefreshLocation":407,"./locations/StaticLocation":408,"./locations/TestLocation":409,"./runRouter":410}],404:[function(require,module,exports){"use strict";var React=require("react");function isValidChild(object){return object==null||React.isValidElement(object)}function isReactChildren(object){return isValidChild(object)||Array.isArray(object)&&object.every(isValidChild)}module.exports=isReactChildren},{react:590}],405:[function(require,module,exports){"use strict";var LocationActions=require("../actions/LocationActions");var History=require("../History");var _listeners=[];var _isListening=false;var _actionType;function notifyChange(type){if(type===LocationActions.PUSH)History.length+=1;var change={path:HashLocation.getCurrentPath(),type:type};_listeners.forEach(function(listener){listener.call(HashLocation,change)})}function ensureSlash(){var path=HashLocation.getCurrentPath();if(path.charAt(0)==="/"){return true}HashLocation.replace("/"+path);return false}function onHashChange(){if(ensureSlash()){var curActionType=_actionType;_actionType=null;notifyChange(curActionType||LocationActions.POP)}}var HashLocation={addChangeListener:function addChangeListener(listener){_listeners.push(listener);ensureSlash();if(!_isListening){if(window.addEventListener){window.addEventListener("hashchange",onHashChange,false)}else{window.attachEvent("onhashchange",onHashChange)}_isListening=true}},removeChangeListener:function removeChangeListener(listener){_listeners=_listeners.filter(function(l){return l!==listener});if(_listeners.length===0){if(window.removeEventListener){window.removeEventListener("hashchange",onHashChange,false)}else{window.removeEvent("onhashchange",onHashChange)}_isListening=false}},push:function push(path){_actionType=LocationActions.PUSH;window.location.hash=path},replace:function replace(path){_actionType=LocationActions.REPLACE;window.location.replace(window.location.pathname+window.location.search+"#"+path)},pop:function pop(){_actionType=LocationActions.POP;History.back()},getCurrentPath:function getCurrentPath(){return decodeURI(window.location.href.split("#")[1]||"")},toString:function toString(){return"<HashLocation>"}};module.exports=HashLocation},{"../History":380,"../actions/LocationActions":390}],406:[function(require,module,exports){"use strict";var LocationActions=require("../actions/LocationActions");var History=require("../History");var _listeners=[];var _isListening=false;function notifyChange(type){var change={path:HistoryLocation.getCurrentPath(),type:type};_listeners.forEach(function(listener){listener.call(HistoryLocation,change)})}function onPopState(event){if(event.state===undefined){return}notifyChange(LocationActions.POP)}var HistoryLocation={addChangeListener:function addChangeListener(listener){_listeners.push(listener);if(!_isListening){if(window.addEventListener){window.addEventListener("popstate",onPopState,false)}else{window.attachEvent("onpopstate",onPopState)}_isListening=true}},removeChangeListener:function removeChangeListener(listener){_listeners=_listeners.filter(function(l){return l!==listener});if(_listeners.length===0){if(window.addEventListener){window.removeEventListener("popstate",onPopState,false)}else{window.removeEvent("onpopstate",onPopState)}_isListening=false}},push:function push(path){window.history.pushState({path:path},"",path);History.length+=1;notifyChange(LocationActions.PUSH)},replace:function replace(path){window.history.replaceState({path:path},"",path);notifyChange(LocationActions.REPLACE)},pop:History.back,getCurrentPath:function getCurrentPath(){return decodeURI(window.location.pathname+window.location.search)},toString:function toString(){return"<HistoryLocation>"}};module.exports=HistoryLocation},{"../History":380,"../actions/LocationActions":390}],407:[function(require,module,exports){"use strict";var HistoryLocation=require("./HistoryLocation");var History=require("../History");var RefreshLocation={push:function push(path){window.location=path},replace:function replace(path){window.location.replace(path)},pop:History.back,getCurrentPath:HistoryLocation.getCurrentPath,toString:function toString(){return"<RefreshLocation>"}};module.exports=RefreshLocation},{"../History":380,"./HistoryLocation":406}],408:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var invariant=require("react/lib/invariant");function throwCannotModify(){invariant(false,"You cannot modify a static location")}var StaticLocation=function(){function StaticLocation(path){_classCallCheck(this,StaticLocation);this.path=path}_createClass(StaticLocation,[{key:"getCurrentPath",value:function getCurrentPath(){return this.path}},{key:"toString",value:function toString(){return'<StaticLocation path="'+this.path+'">'}}]);return StaticLocation}();StaticLocation.prototype.push=throwCannotModify;StaticLocation.prototype.replace=throwCannotModify;StaticLocation.prototype.pop=throwCannotModify;module.exports=StaticLocation},{"react/lib/invariant":568}],409:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var invariant=require("react/lib/invariant");var LocationActions=require("../actions/LocationActions");var History=require("../History");var TestLocation=function(){function TestLocation(history){_classCallCheck(this,TestLocation);this.history=history||[];this.listeners=[];this._updateHistoryLength()}_createClass(TestLocation,[{key:"needsDOM",get:function(){return false}},{key:"_updateHistoryLength",value:function _updateHistoryLength(){History.length=this.history.length}},{key:"_notifyChange",value:function _notifyChange(type){var change={path:this.getCurrentPath(),type:type};for(var i=0,len=this.listeners.length;i<len;++i)this.listeners[i].call(this,change)}},{key:"addChangeListener",value:function addChangeListener(listener){this.listeners.push(listener)}},{key:"removeChangeListener",value:function removeChangeListener(listener){this.listeners=this.listeners.filter(function(l){return l!==listener})}},{key:"push",value:function push(path){this.history.push(path);this._updateHistoryLength();this._notifyChange(LocationActions.PUSH)}},{key:"replace",value:function replace(path){invariant(this.history.length,"You cannot replace the current path with no history");this.history[this.history.length-1]=path;this._notifyChange(LocationActions.REPLACE)}},{key:"pop",value:function pop(){this.history.pop();this._updateHistoryLength();this._notifyChange(LocationActions.POP)}},{key:"getCurrentPath",value:function getCurrentPath(){return this.history[this.history.length-1]}},{key:"toString",value:function toString(){return"<TestLocation>"}}]);return TestLocation}();module.exports=TestLocation},{"../History":380,"../actions/LocationActions":390,"react/lib/invariant":568}],410:[function(require,module,exports){"use strict";var createRouter=require("./createRouter");function runRouter(routes,location,callback){if(typeof location==="function"){callback=location;location=null}var router=createRouter({routes:routes,location:location});router.run(callback);return router}module.exports=runRouter},{"./createRouter":400}],411:[function(require,module,exports){"use strict";function supportsHistory(){var ua=navigator.userAgent;if((ua.indexOf("Android 2.")!==-1||ua.indexOf("Android 4.0")!==-1)&&ua.indexOf("Mobile Safari")!==-1&&ua.indexOf("Chrome")===-1&&ua.indexOf("Windows Phone")===-1){return false}return window.history&&"pushState"in window.history}module.exports=supportsHistory},{}],412:[function(require,module,exports){"use strict";function ToObject(val){if(val==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}module.exports=Object.assign||function(target,source){var from;var keys;var to=ToObject(target);for(var s=1;s<arguments.length;s++){from=arguments[s];keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++){to[keys[i]]=from[keys[i]]}}return to}},{}],413:[function(require,module,exports){module.exports=require("./lib/")},{"./lib/":414}],414:[function(require,module,exports){var Stringify=require("./stringify");var Parse=require("./parse");var internals={};module.exports={stringify:Stringify,parse:Parse}},{"./parse":415,"./stringify":416}],415:[function(require,module,exports){var Utils=require("./utils");var internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};internals.parseValues=function(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0,il=parts.length;i<il;++i){var part=parts[i];var pos=part.indexOf("]=")===-1?part.indexOf("="):part.indexOf("]=")+1;if(pos===-1){obj[Utils.decode(part)]=""}else{var key=Utils.decode(part.slice(0,pos));var val=Utils.decode(part.slice(pos+1));if(Object.prototype.hasOwnProperty(key)){continue}if(!obj.hasOwnProperty(key)){obj[key]=val}else{obj[key]=[].concat(obj[key]).concat(val)}}}return obj};internals.parseObject=function(chain,val,options){if(!chain.length){return val}var root=chain.shift();var obj={};if(root==="[]"){obj=[];obj=obj.concat(internals.parseObject(chain,val,options))}else{var cleanRoot=root[0]==="["&&root[root.length-1]==="]"?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);var indexString=""+index;if(!isNaN(index)&&root!==cleanRoot&&indexString===cleanRoot&&index>=0&&index<=options.arrayLimit){obj=[];obj[index]=internals.parseObject(chain,val,options)}else{obj[cleanRoot]=internals.parseObject(chain,val,options)}}return obj};internals.parseKeys=function(key,val,options){if(!key){return}var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);if(Object.prototype.hasOwnProperty(segment[1])){return}var keys=[];if(segment[1]){keys.push(segment[1])}var i=0;while((segment=child.exec(key))!==null&&i<options.depth){++i;if(!Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))){keys.push(segment[1])}}if(segment){keys.push("["+key.slice(segment.index)+"]")}return internals.parseObject(keys,val,options)};module.exports=function(str,options){if(str===""||str===null||typeof str==="undefined"){return{}}options=options||{};options.delimiter=typeof options.delimiter==="string"||Utils.isRegExp(options.delimiter)?options.delimiter:internals.delimiter;options.depth=typeof options.depth==="number"?options.depth:internals.depth;options.arrayLimit=typeof options.arrayLimit==="number"?options.arrayLimit:internals.arrayLimit;options.parameterLimit=typeof options.parameterLimit==="number"?options.parameterLimit:internals.parameterLimit;var tempObj=typeof str==="string"?internals.parseValues(str,options):str;var obj={};var keys=Object.keys(tempObj);for(var i=0,il=keys.length;i<il;++i){var key=keys[i];var newObj=internals.parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj)}return Utils.compact(obj)}},{"./utils":417}],416:[function(require,module,exports){var Utils=require("./utils");var internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(prefix,key){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix,key){return prefix}}};internals.stringify=function(obj,prefix,generateArrayPrefix){if(Utils.isBuffer(obj)){obj=obj.toString()}else if(obj instanceof Date){obj=obj.toISOString()}else if(obj===null){obj=""}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"){return[encodeURIComponent(prefix)+"="+encodeURIComponent(obj)]}var values=[];if(typeof obj==="undefined"){return values}var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];if(Array.isArray(obj)){values=values.concat(internals.stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix));

}else{values=values.concat(internals.stringify(obj[key],prefix+"["+key+"]",generateArrayPrefix))}}return values};module.exports=function(obj,options){options=options||{};var delimiter=typeof options.delimiter==="undefined"?internals.delimiter:options.delimiter;var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(options.arrayFormat in internals.arrayPrefixGenerators){arrayFormat=options.arrayFormat}else if("indices"in options){arrayFormat=options.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=internals.arrayPrefixGenerators[arrayFormat];var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];keys=keys.concat(internals.stringify(obj[key],key,generateArrayPrefix))}return keys.join(delimiter)}},{"./utils":417}],417:[function(require,module,exports){var internals={};exports.arrayToObject=function(source){var obj={};for(var i=0,il=source.length;i<il;++i){if(typeof source[i]!=="undefined"){obj[i]=source[i]}}return obj};exports.merge=function(target,source){if(!source){return target}if(typeof source!=="object"){if(Array.isArray(target)){target.push(source)}else{target[source]=true}return target}if(typeof target!=="object"){target=[target].concat(source);return target}if(Array.isArray(target)&&!Array.isArray(source)){target=exports.arrayToObject(target)}var keys=Object.keys(source);for(var k=0,kl=keys.length;k<kl;++k){var key=keys[k];var value=source[key];if(!target[key]){target[key]=value}else{target[key]=exports.merge(target[key],value)}}return target};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.compact=function(obj,refs){if(typeof obj!=="object"||obj===null){return obj}refs=refs||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0,il=obj.length;i<il;++i){if(typeof obj[i]!=="undefined"){compacted.push(obj[i])}}return compacted}var keys=Object.keys(obj);for(i=0,il=keys.length;i<il;++i){var key=keys[i];obj[key]=exports.compact(obj[key],refs)}return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.isBuffer=function(obj){if(obj===null||typeof obj==="undefined"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],418:[function(require,module,exports){module.exports=require("./lib/ReactWithAddons")},{"./lib/ReactWithAddons":518}],419:[function(require,module,exports){"use strict";var focusNode=require("./focusNode");var AutoFocusMixin={componentDidMount:function(){if(this.props.autoFocus){focusNode(this.getDOMNode())}}};module.exports=AutoFocusMixin},{"./focusNode":552}],420:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("./ExecutionEnvironment");var FallbackCompositionState=require("./FallbackCompositionState");var SyntheticCompositionEvent=require("./SyntheticCompositionEvent");var SyntheticInputEvent=require("./SyntheticInputEvent");var keyOf=require("./keyOf");var END_KEYCODES=[9,13,27,32];var START_KEYCODE=229;var canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window;var documentMode=null;if(ExecutionEnvironment.canUseDOM&&"documentMode"in document){documentMode=document.documentMode}var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto();var useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11);function isPresto(){var opera=window.opera;return typeof opera==="object"&&typeof opera.version==="function"&&parseInt(opera.version(),10)<=12}var SPACEBAR_CODE=32;var SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE);var topLevelTypes=EventConstants.topLevelTypes;var eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}};var hasSpaceKeypress=false;function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType===topLevelTypes.topKeyDown&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case topLevelTypes.topKeyDown:return nativeEvent.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return true;default:return false}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;if(typeof detail==="object"&&"data"in detail){return detail.data}return null}var currentComposition=null;function extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var eventType;var fallbackData;if(canUseCompositionEvent){eventType=getCompositionEventType(topLevelType)}else if(!currentComposition){if(isFallbackCompositionStart(topLevelType,nativeEvent)){eventType=eventTypes.compositionStart}}else if(isFallbackCompositionEnd(topLevelType,nativeEvent)){eventType=eventTypes.compositionEnd}if(!eventType){return null}if(useFallbackCompositionData){if(!currentComposition&&eventType===eventTypes.compositionStart){currentComposition=FallbackCompositionState.getPooled(topLevelTarget)}else if(eventType===eventTypes.compositionEnd){if(currentComposition){fallbackData=currentComposition.getData()}}}var event=SyntheticCompositionEvent.getPooled(eventType,topLevelTargetID,nativeEvent);if(fallbackData){event.data=fallbackData}else{var customData=getDataFromCustomEvent(nativeEvent);if(customData!==null){event.data=customData}}EventPropagators.accumulateTwoPhaseDispatches(event);return event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(nativeEvent);case topLevelTypes.topKeyPress:var which=nativeEvent.which;if(which!==SPACEBAR_CODE){return null}hasSpaceKeypress=true;return SPACEBAR_CHAR;case topLevelTypes.topTextInput:var chars=nativeEvent.data;if(chars===SPACEBAR_CHAR&&hasSpaceKeypress){return null}return chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();FallbackCompositionState.release(currentComposition);currentComposition=null;return chars}return null}switch(topLevelType){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:if(nativeEvent.which&&!isKeypressCommand(nativeEvent)){return String.fromCharCode(nativeEvent.which)}return null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var chars;if(canUseTextInputEvent){chars=getNativeBeforeInputChars(topLevelType,nativeEvent)}else{chars=getFallbackBeforeInputChars(topLevelType,nativeEvent)}if(!chars){return null}var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,topLevelTargetID,nativeEvent);event.data=chars;EventPropagators.accumulateTwoPhaseDispatches(event);return event}var BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){return[extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent),extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent)]}};module.exports=BeforeInputEventPlugin},{"./EventConstants":433,"./EventPropagators":438,"./ExecutionEnvironment":439,"./FallbackCompositionState":440,"./SyntheticCompositionEvent":524,"./SyntheticInputEvent":528,"./keyOf":575}],421:[function(require,module,exports){(function(process){var invariant=require("./invariant");var CSSCore={addClass:function(element,className){"production"!==process.env.NODE_ENV?invariant(!/\s/.test(className),'CSSCore.addClass takes only a single class name. "%s" contains '+"multiple classes.",className):invariant(!/\s/.test(className));if(className){if(element.classList){element.classList.add(className)}else if(!CSSCore.hasClass(element,className)){element.className=element.className+" "+className}}return element},removeClass:function(element,className){"production"!==process.env.NODE_ENV?invariant(!/\s/.test(className),'CSSCore.removeClass takes only a single class name. "%s" contains '+"multiple classes.",className):invariant(!/\s/.test(className));if(className){if(element.classList){element.classList.remove(className)}else if(CSSCore.hasClass(element,className)){element.className=element.className.replace(new RegExp("(^|\\s)"+className+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}}return element},conditionClass:function(element,className,bool){return(bool?CSSCore.addClass:CSSCore.removeClass)(element,className)},hasClass:function(element,className){"production"!==process.env.NODE_ENV?invariant(!/\s/.test(className),"CSS.hasClass takes only a single class name."):invariant(!/\s/.test(className));if(element.classList){return!!className&&element.classList.contains(className)}return(" "+element.className+" ").indexOf(" "+className+" ")>-1}};module.exports=CSSCore}).call(this,require("_process"))},{"./invariant":568,_process:35}],422:[function(require,module,exports){"use strict";var isUnitlessNumber={boxFlex:true,boxFlexGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,fontWeight:true,lineClamp:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,strokeDashoffset:true,strokeOpacity:true,strokeWidth:true};function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundImage:true,backgroundPosition:true,backgroundRepeat:true,backgroundColor:true},border:{borderWidth:true,borderStyle:true,borderColor:true},borderBottom:{borderBottomWidth:true,borderBottomStyle:true,borderBottomColor:true},borderLeft:{borderLeftWidth:true,borderLeftStyle:true,borderLeftColor:true},borderRight:{borderRightWidth:true,borderRightStyle:true,borderRightColor:true},borderTop:{borderTopWidth:true,borderTopStyle:true,borderTopColor:true},font:{fontStyle:true,fontVariant:true,fontWeight:true,fontSize:true,lineHeight:true,fontFamily:true}};var CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},{}],423:[function(require,module,exports){(function(process){"use strict";var CSSProperty=require("./CSSProperty");var ExecutionEnvironment=require("./ExecutionEnvironment");var camelizeStyleName=require("./camelizeStyleName");var dangerousStyleValue=require("./dangerousStyleValue");var hyphenateStyleName=require("./hyphenateStyleName");var memoizeStringOnly=require("./memoizeStringOnly");var warning=require("./warning");var processStyleName=memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)});var styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){if(document.documentElement.style.cssFloat===undefined){styleFloatAccessor="styleFloat"}}if("production"!==process.env.NODE_ENV){var badVendoredStyleNamePattern=/^(?:webkit|moz|o)[A-Z]/;var badStyleValueWithSemicolonPattern=/;\s*$/;var warnedStyleNames={};var warnedStyleValues={};var warnHyphenatedStyleName=function(name){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;"production"!==process.env.NODE_ENV?warning(false,"Unsupported style property %s. Did you mean %s?",name,camelizeStyleName(name)):null};var warnBadVendoredStyleName=function(name){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;"production"!==process.env.NODE_ENV?warning(false,"Unsupported vendor-prefixed style property %s. Did you mean %s?",name,name.charAt(0).toUpperCase()+name.slice(1)):null};var warnStyleValueWithSemicolon=function(name,value){if(warnedStyleValues.hasOwnProperty(value)&&warnedStyleValues[value]){return}warnedStyleValues[value]=true;"production"!==process.env.NODE_ENV?warning(false,"Style property values shouldn't contain a semicolon. "+'Try "%s: %s" instead.',name,value.replace(badStyleValueWithSemicolonPattern,"")):null};var warnValidStyle=function(name,value){if(name.indexOf("-")>-1){warnHyphenatedStyleName(name)}else if(badVendoredStyleNamePattern.test(name)){warnBadVendoredStyleName(name)}else if(badStyleValueWithSemicolonPattern.test(value)){warnStyleValueWithSemicolon(name,value)}}}var CSSPropertyOperations={createMarkupForStyles:function(styles){var serialized="";for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var styleValue=styles[styleName];if("production"!==process.env.NODE_ENV){warnValidStyle(styleName,styleValue)}if(styleValue!=null){serialized+=processStyleName(styleName)+":";serialized+=dangerousStyleValue(styleName,styleValue)+";"}}return serialized||null},setValueForStyles:function(node,styles){var style=node.style;for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}if("production"!==process.env.NODE_ENV){warnValidStyle(styleName,styles[styleName])}var styleValue=dangerousStyleValue(styleName,styles[styleName]);if(styleName==="float"){styleName=styleFloatAccessor}if(styleValue){style[styleName]=styleValue}else{var expansion=CSSProperty.shorthandPropertyExpansions[styleName];if(expansion){for(var individualStyleName in expansion){style[individualStyleName]=""}}else{style[styleName]=""}}}}};module.exports=CSSPropertyOperations}).call(this,require("_process"))},{"./CSSProperty":422,"./ExecutionEnvironment":439,"./camelizeStyleName":539,"./dangerousStyleValue":546,"./hyphenateStyleName":566,"./memoizeStringOnly":577,"./warning":589,_process:35}],424:[function(require,module,exports){(function(process){"use strict";var PooledClass=require("./PooledClass");var assign=require("./Object.assign");var invariant=require("./invariant");function CallbackQueue(){this._callbacks=null;this._contexts=null}assign(CallbackQueue.prototype,{enqueue:function(callback,context){this._callbacks=this._callbacks||[];this._contexts=this._contexts||[];this._callbacks.push(callback);this._contexts.push(context)},notifyAll:function(){var callbacks=this._callbacks;var contexts=this._contexts;if(callbacks){"production"!==process.env.NODE_ENV?invariant(callbacks.length===contexts.length,"Mismatched list of contexts in callback queue"):invariant(callbacks.length===contexts.length);this._callbacks=null;this._contexts=null;for(var i=0,l=callbacks.length;i<l;i++){callbacks[i].call(contexts[i])}callbacks.length=0;contexts.length=0}},reset:function(){this._callbacks=null;this._contexts=null},destructor:function(){this.reset()}});PooledClass.addPoolingTo(CallbackQueue);module.exports=CallbackQueue}).call(this,require("_process"))},{"./Object.assign":446,"./PooledClass":447,"./invariant":568,_process:35}],425:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPluginHub=require("./EventPluginHub");var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("./ExecutionEnvironment");var ReactUpdates=require("./ReactUpdates");var SyntheticEvent=require("./SyntheticEvent");var isEventSupported=require("./isEventSupported");var isTextInputElement=require("./isTextInputElement");var keyOf=require("./keyOf");var topLevelTypes=EventConstants.topLevelTypes;var eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}};var activeElement=null;var activeElementID=null;var activeElementValue=null;var activeElementValueProp=null;function shouldUseChangeEvent(elem){return elem.nodeName==="SELECT"||elem.nodeName==="INPUT"&&elem.type==="file"}var doesChangeEventBubble=false;if(ExecutionEnvironment.canUseDOM){doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8)}function manualDispatchChangeEvent(nativeEvent){var event=SyntheticEvent.getPooled(eventTypes.change,activeElementID,nativeEvent);EventPropagators.accumulateTwoPhaseDispatches(event);ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event);EventPluginHub.processEventQueue()}function startWatchingForChangeEventIE8(target,targetID){activeElement=target;activeElementID=targetID;activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){if(!activeElement){return}activeElement.detachEvent("onchange",manualDispatchChangeEvent);activeElement=null;activeElementID=null}function getTargetIDForChangeEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topChange){return topLevelTargetID}}function handleEventsForChangeEventIE8(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topFocus){stopWatchingForChangeEventIE8();startWatchingForChangeEventIE8(topLevelTarget,topLevelTargetID)}else if(topLevelType===topLevelTypes.topBlur){stopWatchingForChangeEventIE8()}}var isInputEventSupported=false;if(ExecutionEnvironment.canUseDOM){isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9)}var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=""+val;activeElementValueProp.set.call(this,val)}};function startWatchingForValueChange(target,targetID){activeElement=target;activeElementID=targetID;activeElementValue=target.value;activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value");Object.defineProperty(activeElement,"value",newValueProp);activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){if(!activeElement){return}delete activeElement.value;activeElement.detachEvent("onpropertychange",handlePropertyChange);activeElement=null;activeElementID=null;activeElementValue=null;activeElementValueProp=null}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName!=="value"){return}var value=nativeEvent.srcElement.value;if(value===activeElementValue){return}activeElementValue=value;manualDispatchChangeEvent(nativeEvent)}function getTargetIDForInputEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topInput){return topLevelTargetID}}function handleEventsForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topFocus){stopWatchingForValueChange();startWatchingForValueChange(topLevelTarget,topLevelTargetID)}else if(topLevelType===topLevelTypes.topBlur){stopWatchingForValueChange()}}function getTargetIDForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topSelectionChange||topLevelType===topLevelTypes.topKeyUp||topLevelType===topLevelTypes.topKeyDown){if(activeElement&&activeElement.value!==activeElementValue){activeElementValue=activeElement.value;return activeElementID}}}function shouldUseClickEvent(elem){return elem.nodeName==="INPUT"&&(elem.type==="checkbox"||elem.type==="radio")}function getTargetIDForClickEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topClick){return topLevelTargetID}}var ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var getTargetIDFunc,handleEventFunc;if(shouldUseChangeEvent(topLevelTarget)){if(doesChangeEventBubble){getTargetIDFunc=getTargetIDForChangeEvent}else{handleEventFunc=handleEventsForChangeEventIE8}}else if(isTextInputElement(topLevelTarget)){if(isInputEventSupported){getTargetIDFunc=getTargetIDForInputEvent}else{getTargetIDFunc=getTargetIDForInputEventIE;handleEventFunc=handleEventsForInputEventIE}}else if(shouldUseClickEvent(topLevelTarget)){getTargetIDFunc=getTargetIDForClickEvent}if(getTargetIDFunc){var targetID=getTargetIDFunc(topLevelType,topLevelTarget,topLevelTargetID);if(targetID){var event=SyntheticEvent.getPooled(eventTypes.change,targetID,nativeEvent);EventPropagators.accumulateTwoPhaseDispatches(event);return event}}if(handleEventFunc){handleEventFunc(topLevelType,topLevelTarget,topLevelTargetID)}}};module.exports=ChangeEventPlugin},{"./EventConstants":433,"./EventPluginHub":435,"./EventPropagators":438,"./ExecutionEnvironment":439,"./ReactUpdates":517,"./SyntheticEvent":526,"./isEventSupported":569,"./isTextInputElement":571,"./keyOf":575}],426:[function(require,module,exports){"use strict";var nextReactRootIndex=0;var ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex},{}],427:[function(require,module,exports){(function(process){"use strict";var Danger=require("./Danger");var ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes");var setTextContent=require("./setTextContent");var invariant=require("./invariant");function insertChildAt(parentNode,childNode,index){parentNode.insertBefore(childNode,parentNode.childNodes[index]||null)}var DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(updates,markupList){var update;var initialChildren=null;var updatedChildren=null;for(var i=0;i<updates.length;i++){update=updates[i];if(update.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||update.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var updatedIndex=update.fromIndex;var updatedChild=update.parentNode.childNodes[updatedIndex];var parentID=update.parentID;"production"!==process.env.NODE_ENV?invariant(updatedChild,"processUpdates(): Unable to find child %s of element. This "+"probably means the DOM was unexpectedly mutated (e.g., by the "+"browser), usually due to forgetting a <tbody> when using tables, "+"nesting tags like <form>, <p>, or <a>, or using non-SVG elements "+"in an <svg> parent. Try inspecting the child nodes of the element "+"with React ID `%s`.",updatedIndex,parentID):invariant(updatedChild);initialChildren=initialChildren||{};initialChildren[parentID]=initialChildren[parentID]||[];initialChildren[parentID][updatedIndex]=updatedChild;updatedChildren=updatedChildren||[];updatedChildren.push(updatedChild)}}var renderedMarkup=Danger.dangerouslyRenderMarkup(markupList);if(updatedChildren){for(var j=0;j<updatedChildren.length;j++){updatedChildren[j].parentNode.removeChild(updatedChildren[j])}}for(var k=0;k<updates.length;k++){update=updates[k];switch(update.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(update.parentNode,renderedMarkup[update.markupIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(update.parentNode,initialChildren[update.parentID][update.fromIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(update.parentNode,update.textContent);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:break}}}};module.exports=DOMChildrenOperations}).call(this,require("_process"))},{"./Danger":430,"./ReactMultiChildUpdateTypes":496,"./invariant":568,"./setTextContent":583,_process:35}],428:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");function checkMask(value,bitmask){return(value&bitmask)===bitmask}var DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:32|16,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(domPropertyConfig){var Properties=domPropertyConfig.Properties||{};var DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{};var DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{};var DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};if(domPropertyConfig.isCustomAttribute){DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute)}for(var propName in Properties){"production"!==process.env.NODE_ENV?invariant(!DOMProperty.isStandardName.hasOwnProperty(propName),"injectDOMPropertyConfig(...): You're trying to inject DOM property "+"'%s' which has already been injected. You may be accidentally "+"injecting the same DOM property config twice, or you may be "+"injecting two configs that have conflicting property names.",propName):invariant(!DOMProperty.isStandardName.hasOwnProperty(propName));DOMProperty.isStandardName[propName]=true;var lowerCased=propName.toLowerCase();DOMProperty.getPossibleStandardName[lowerCased]=propName;if(DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];DOMProperty.getPossibleStandardName[attributeName]=propName;DOMProperty.getAttributeName[propName]=attributeName}else{DOMProperty.getAttributeName[propName]=lowerCased}DOMProperty.getPropertyName[propName]=DOMPropertyNames.hasOwnProperty(propName)?DOMPropertyNames[propName]:propName;if(DOMMutationMethods.hasOwnProperty(propName)){DOMProperty.getMutationMethod[propName]=DOMMutationMethods[propName]}else{DOMProperty.getMutationMethod[propName]=null}var propConfig=Properties[propName];DOMProperty.mustUseAttribute[propName]=checkMask(propConfig,DOMPropertyInjection.MUST_USE_ATTRIBUTE);DOMProperty.mustUseProperty[propName]=checkMask(propConfig,DOMPropertyInjection.MUST_USE_PROPERTY);DOMProperty.hasSideEffects[propName]=checkMask(propConfig,DOMPropertyInjection.HAS_SIDE_EFFECTS);DOMProperty.hasBooleanValue[propName]=checkMask(propConfig,DOMPropertyInjection.HAS_BOOLEAN_VALUE);DOMProperty.hasNumericValue[propName]=checkMask(propConfig,DOMPropertyInjection.HAS_NUMERIC_VALUE);DOMProperty.hasPositiveNumericValue[propName]=checkMask(propConfig,DOMPropertyInjection.HAS_POSITIVE_NUMERIC_VALUE);DOMProperty.hasOverloadedBooleanValue[propName]=checkMask(propConfig,DOMPropertyInjection.HAS_OVERLOADED_BOOLEAN_VALUE);"production"!==process.env.NODE_ENV?invariant(!DOMProperty.mustUseAttribute[propName]||!DOMProperty.mustUseProperty[propName],"DOMProperty: Cannot require using both attribute and property: %s",propName):invariant(!DOMProperty.mustUseAttribute[propName]||!DOMProperty.mustUseProperty[propName]);"production"!==process.env.NODE_ENV?invariant(DOMProperty.mustUseProperty[propName]||!DOMProperty.hasSideEffects[propName],"DOMProperty: Properties that have side effects must use property: %s",propName):invariant(DOMProperty.mustUseProperty[propName]||!DOMProperty.hasSideEffects[propName]);"production"!==process.env.NODE_ENV?invariant(!!DOMProperty.hasBooleanValue[propName]+!!DOMProperty.hasNumericValue[propName]+!!DOMProperty.hasOverloadedBooleanValue[propName]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or "+"numeric value, but not a combination: %s",propName):invariant(!!DOMProperty.hasBooleanValue[propName]+!!DOMProperty.hasNumericValue[propName]+!!DOMProperty.hasOverloadedBooleanValue[propName]<=1)}}};var defaultValueCache={};var DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName)){return true}}return false},getDefaultValueForProperty:function(nodeName,prop){var nodeDefaults=defaultValueCache[nodeName];var testElement;if(!nodeDefaults){defaultValueCache[nodeName]=nodeDefaults={}}if(!(prop in nodeDefaults)){testElement=document.createElement(nodeName);nodeDefaults[prop]=testElement[prop]}return nodeDefaults[prop]},injection:DOMPropertyInjection};module.exports=DOMProperty}).call(this,require("_process"))},{"./invariant":568,_process:35}],429:[function(require,module,exports){(function(process){"use strict";var DOMProperty=require("./DOMProperty");var quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser");var warning=require("./warning");function shouldIgnoreValue(name,value){return value==null||DOMProperty.hasBooleanValue[name]&&!value||DOMProperty.hasNumericValue[name]&&isNaN(value)||DOMProperty.hasPositiveNumericValue[name]&&value<1||DOMProperty.hasOverloadedBooleanValue[name]&&value===false}if("production"!==process.env.NODE_ENV){var reactProps={children:true,dangerouslySetInnerHTML:true,key:true,ref:true};var warnedProperties={};var warnUnknownProperty=function(name){if(reactProps.hasOwnProperty(name)&&reactProps[name]||warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return}warnedProperties[name]=true;var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.isCustomAttribute(lowerCasedName)?lowerCasedName:DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;"production"!==process.env.NODE_ENV?warning(standardName==null,"Unknown DOM property %s. Did you mean %s?",name,standardName):null}}var DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},createMarkupForProperty:function(name,value){if(DOMProperty.isStandardName.hasOwnProperty(name)&&DOMProperty.isStandardName[name]){if(shouldIgnoreValue(name,value)){return""}var attributeName=DOMProperty.getAttributeName[name];if(DOMProperty.hasBooleanValue[name]||DOMProperty.hasOverloadedBooleanValue[name]&&value===true){return attributeName}return attributeName+"="+quoteAttributeValueForBrowser(value)}else if(DOMProperty.isCustomAttribute(name)){if(value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)}else if("production"!==process.env.NODE_ENV){warnUnknownProperty(name)}return null;

},setValueForProperty:function(node,name,value){if(DOMProperty.isStandardName.hasOwnProperty(name)&&DOMProperty.isStandardName[name]){var mutationMethod=DOMProperty.getMutationMethod[name];if(mutationMethod){mutationMethod(node,value)}else if(shouldIgnoreValue(name,value)){this.deleteValueForProperty(node,name)}else if(DOMProperty.mustUseAttribute[name]){node.setAttribute(DOMProperty.getAttributeName[name],""+value)}else{var propName=DOMProperty.getPropertyName[name];if(!DOMProperty.hasSideEffects[name]||""+node[propName]!==""+value){node[propName]=value}}}else if(DOMProperty.isCustomAttribute(name)){if(value==null){node.removeAttribute(name)}else{node.setAttribute(name,""+value)}}else if("production"!==process.env.NODE_ENV){warnUnknownProperty(name)}},deleteValueForProperty:function(node,name){if(DOMProperty.isStandardName.hasOwnProperty(name)&&DOMProperty.isStandardName[name]){var mutationMethod=DOMProperty.getMutationMethod[name];if(mutationMethod){mutationMethod(node,undefined)}else if(DOMProperty.mustUseAttribute[name]){node.removeAttribute(DOMProperty.getAttributeName[name])}else{var propName=DOMProperty.getPropertyName[name];var defaultValue=DOMProperty.getDefaultValueForProperty(node.nodeName,propName);if(!DOMProperty.hasSideEffects[name]||""+node[propName]!==defaultValue){node[propName]=defaultValue}}}else if(DOMProperty.isCustomAttribute(name)){node.removeAttribute(name)}else if("production"!==process.env.NODE_ENV){warnUnknownProperty(name)}}};module.exports=DOMPropertyOperations}).call(this,require("_process"))},{"./DOMProperty":428,"./quoteAttributeValueForBrowser":581,"./warning":589,_process:35}],430:[function(require,module,exports){(function(process){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var createNodesFromMarkup=require("./createNodesFromMarkup");var emptyFunction=require("./emptyFunction");var getMarkupWrap=require("./getMarkupWrap");var invariant=require("./invariant");var OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/;var RESULT_INDEX_ATTR="data-danger-index";function getNodeName(markup){return markup.substring(1,markup.indexOf(" "))}var Danger={dangerouslyRenderMarkup:function(markupList){"production"!==process.env.NODE_ENV?invariant(ExecutionEnvironment.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker "+"thread. Make sure `window` and `document` are available globally "+"before requiring React when unit testing or use "+"React.renderToString for server rendering."):invariant(ExecutionEnvironment.canUseDOM);var nodeName;var markupByNodeName={};for(var i=0;i<markupList.length;i++){"production"!==process.env.NODE_ENV?invariant(markupList[i],"dangerouslyRenderMarkup(...): Missing markup."):invariant(markupList[i]);nodeName=getNodeName(markupList[i]);nodeName=getMarkupWrap(nodeName)?nodeName:"*";markupByNodeName[nodeName]=markupByNodeName[nodeName]||[];markupByNodeName[nodeName][i]=markupList[i]}var resultList=[];var resultListAssignmentCount=0;for(nodeName in markupByNodeName){if(!markupByNodeName.hasOwnProperty(nodeName)){continue}var markupListByNodeName=markupByNodeName[nodeName];var resultIndex;for(resultIndex in markupListByNodeName){if(markupListByNodeName.hasOwnProperty(resultIndex)){var markup=markupListByNodeName[resultIndex];markupListByNodeName[resultIndex]=markup.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+resultIndex+'" ')}}var renderNodes=createNodesFromMarkup(markupListByNodeName.join(""),emptyFunction);for(var j=0;j<renderNodes.length;++j){var renderNode=renderNodes[j];if(renderNode.hasAttribute&&renderNode.hasAttribute(RESULT_INDEX_ATTR)){resultIndex=+renderNode.getAttribute(RESULT_INDEX_ATTR);renderNode.removeAttribute(RESULT_INDEX_ATTR);"production"!==process.env.NODE_ENV?invariant(!resultList.hasOwnProperty(resultIndex),"Danger: Assigning to an already-occupied result index."):invariant(!resultList.hasOwnProperty(resultIndex));resultList[resultIndex]=renderNode;resultListAssignmentCount+=1}else if("production"!==process.env.NODE_ENV){console.error("Danger: Discarding unexpected node:",renderNode)}}}"production"!==process.env.NODE_ENV?invariant(resultListAssignmentCount===resultList.length,"Danger: Did not assign to every index of resultList."):invariant(resultListAssignmentCount===resultList.length);"production"!==process.env.NODE_ENV?invariant(resultList.length===markupList.length,"Danger: Expected markup to render %s nodes, but rendered %s.",markupList.length,resultList.length):invariant(resultList.length===markupList.length);return resultList},dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){"production"!==process.env.NODE_ENV?invariant(ExecutionEnvironment.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a "+"worker thread. Make sure `window` and `document` are available "+"globally before requiring React when unit testing or use "+"React.renderToString for server rendering."):invariant(ExecutionEnvironment.canUseDOM);"production"!==process.env.NODE_ENV?invariant(markup,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):invariant(markup);"production"!==process.env.NODE_ENV?invariant(oldChild.tagName.toLowerCase()!=="html","dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the "+"<html> node. This is because browser quirks make this unreliable "+"and/or slow. If you want to render to the root you must use "+"server rendering. See React.renderToString()."):invariant(oldChild.tagName.toLowerCase()!=="html");var newChild=createNodesFromMarkup(markup,emptyFunction)[0];oldChild.parentNode.replaceChild(newChild,oldChild)}};module.exports=Danger}).call(this,require("_process"))},{"./ExecutionEnvironment":439,"./createNodesFromMarkup":544,"./emptyFunction":547,"./getMarkupWrap":560,"./invariant":568,_process:35}],431:[function(require,module,exports){"use strict";var keyOf=require("./keyOf");var DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null}),keyOf({AnalyticsEventPlugin:null}),keyOf({MobileSafariClickEventPlugin:null})];module.exports=DefaultEventPluginOrder},{"./keyOf":575}],432:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPropagators=require("./EventPropagators");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var ReactMount=require("./ReactMount");var keyOf=require("./keyOf");var topLevelTypes=EventConstants.topLevelTypes;var getFirstReactDOM=ReactMount.getFirstReactDOM;var eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}};var extractedEvents=[null,null];var EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){if(topLevelType===topLevelTypes.topMouseOver&&(nativeEvent.relatedTarget||nativeEvent.fromElement)){return null}if(topLevelType!==topLevelTypes.topMouseOut&&topLevelType!==topLevelTypes.topMouseOver){return null}var win;if(topLevelTarget.window===topLevelTarget){win=topLevelTarget}else{var doc=topLevelTarget.ownerDocument;if(doc){win=doc.defaultView||doc.parentWindow}else{win=window}}var from,to;if(topLevelType===topLevelTypes.topMouseOut){from=topLevelTarget;to=getFirstReactDOM(nativeEvent.relatedTarget||nativeEvent.toElement)||win}else{from=win;to=topLevelTarget}if(from===to){return null}var fromID=from?ReactMount.getID(from):"";var toID=to?ReactMount.getID(to):"";var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,fromID,nativeEvent);leave.type="mouseleave";leave.target=from;leave.relatedTarget=to;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,toID,nativeEvent);enter.type="mouseenter";enter.target=to;enter.relatedTarget=from;EventPropagators.accumulateEnterLeaveDispatches(leave,enter,fromID,toID);extractedEvents[0]=leave;extractedEvents[1]=enter;return extractedEvents}};module.exports=EnterLeaveEventPlugin},{"./EventConstants":433,"./EventPropagators":438,"./ReactMount":494,"./SyntheticMouseEvent":530,"./keyOf":575}],433:[function(require,module,exports){"use strict";var keyMirror=require("./keyMirror");var PropagationPhases=keyMirror({bubbled:null,captured:null});var topLevelTypes=keyMirror({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null});var EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants},{"./keyMirror":574}],434:[function(require,module,exports){(function(process){var emptyFunction=require("./emptyFunction");var EventListener={listen:function(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,false);return{remove:function(){target.removeEventListener(eventType,callback,false)}}}else if(target.attachEvent){target.attachEvent("on"+eventType,callback);return{remove:function(){target.detachEvent("on"+eventType,callback)}}}},capture:function(target,eventType,callback){if(!target.addEventListener){if("production"!==process.env.NODE_ENV){console.error("Attempted to listen to events during the capture phase on a "+"browser that does not support the capture phase. Your application "+"will not receive some events.")}return{remove:emptyFunction}}else{target.addEventListener(eventType,callback,true);return{remove:function(){target.removeEventListener(eventType,callback,true)}}}},registerDefault:function(){}};module.exports=EventListener}).call(this,require("_process"))},{"./emptyFunction":547,_process:35}],435:[function(require,module,exports){(function(process){"use strict";var EventPluginRegistry=require("./EventPluginRegistry");var EventPluginUtils=require("./EventPluginUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var invariant=require("./invariant");var listenerBank={};var eventQueue=null;var executeDispatchesAndRelease=function(event){if(event){var executeDispatch=EventPluginUtils.executeDispatch;var PluginModule=EventPluginRegistry.getPluginModuleForEvent(event);if(PluginModule&&PluginModule.executeDispatch){executeDispatch=PluginModule.executeDispatch}EventPluginUtils.executeDispatchesInOrder(event,executeDispatch);if(!event.isPersistent()){event.constructor.release(event)}}};var InstanceHandle=null;function validateInstanceHandle(){var valid=InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave;"production"!==process.env.NODE_ENV?invariant(valid,"InstanceHandle not injected before use!"):invariant(valid)}var EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(InjectedInstanceHandle){InstanceHandle=InjectedInstanceHandle;if("production"!==process.env.NODE_ENV){validateInstanceHandle()}},getInstanceHandle:function(){if("production"!==process.env.NODE_ENV){validateInstanceHandle()}return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(id,registrationName,listener){"production"!==process.env.NODE_ENV?invariant(!listener||typeof listener==="function","Expected %s listener to be a function, instead got type %s",registrationName,typeof listener):invariant(!listener||typeof listener==="function");var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[id]=listener},getListener:function(id,registrationName){var bankForRegistrationName=listenerBank[registrationName];return bankForRegistrationName&&bankForRegistrationName[id]},deleteListener:function(id,registrationName){var bankForRegistrationName=listenerBank[registrationName];if(bankForRegistrationName){delete bankForRegistrationName[id]}},deleteAllListeners:function(id){for(var registrationName in listenerBank){delete listenerBank[registrationName][id]}},extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var events;var plugins=EventPluginRegistry.plugins;for(var i=0,l=plugins.length;i<l;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent);if(extractedEvents){events=accumulateInto(events,extractedEvents)}}}return events},enqueueEvents:function(events){if(events){eventQueue=accumulateInto(eventQueue,events)}},processEventQueue:function(){var processingEventQueue=eventQueue;eventQueue=null;forEachAccumulated(processingEventQueue,executeDispatchesAndRelease);"production"!==process.env.NODE_ENV?invariant(!eventQueue,"processEventQueue(): Additional events were enqueued while processing "+"an event queue. Support for this has not yet been implemented."):invariant(!eventQueue)},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub}).call(this,require("_process"))},{"./EventPluginRegistry":436,"./EventPluginUtils":437,"./accumulateInto":536,"./forEachAccumulated":553,"./invariant":568,_process:35}],436:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var EventPluginOrder=null;var namesToPlugins={};function recomputePluginOrdering(){if(!EventPluginOrder){return}for(var pluginName in namesToPlugins){var PluginModule=namesToPlugins[pluginName];var pluginIndex=EventPluginOrder.indexOf(pluginName);"production"!==process.env.NODE_ENV?invariant(pluginIndex>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in "+"the plugin ordering, `%s`.",pluginName):invariant(pluginIndex>-1);if(EventPluginRegistry.plugins[pluginIndex]){continue}"production"!==process.env.NODE_ENV?invariant(PluginModule.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` "+"method, but `%s` does not.",pluginName):invariant(PluginModule.extractEvents);EventPluginRegistry.plugins[pluginIndex]=PluginModule;var publishedEvents=PluginModule.eventTypes;for(var eventName in publishedEvents){"production"!==process.env.NODE_ENV?invariant(publishEventForPlugin(publishedEvents[eventName],PluginModule,eventName),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",eventName,pluginName):invariant(publishEventForPlugin(publishedEvents[eventName],PluginModule,eventName))}}}function publishEventForPlugin(dispatchConfig,PluginModule,eventName){"production"!==process.env.NODE_ENV?invariant(!EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName),"EventPluginHub: More than one plugin attempted to publish the same "+"event name, `%s`.",eventName):invariant(!EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName));EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames){if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,PluginModule,eventName)}}return true}else if(dispatchConfig.registrationName){publishRegistrationName(dispatchConfig.registrationName,PluginModule,eventName);return true}return false}function publishRegistrationName(registrationName,PluginModule,eventName){"production"!==process.env.NODE_ENV?invariant(!EventPluginRegistry.registrationNameModules[registrationName],"EventPluginHub: More than one plugin attempted to publish the same "+"registration name, `%s`.",registrationName):invariant(!EventPluginRegistry.registrationNameModules[registrationName]);EventPluginRegistry.registrationNameModules[registrationName]=PluginModule;EventPluginRegistry.registrationNameDependencies[registrationName]=PluginModule.eventTypes[eventName].dependencies}var EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(InjectedEventPluginOrder){"production"!==process.env.NODE_ENV?invariant(!EventPluginOrder,"EventPluginRegistry: Cannot inject event plugin ordering more than "+"once. You are likely trying to load more than one copy of React."):invariant(!EventPluginOrder);EventPluginOrder=Array.prototype.slice.call(InjectedEventPluginOrder);recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=false;for(var pluginName in injectedNamesToPlugins){if(!injectedNamesToPlugins.hasOwnProperty(pluginName)){continue}var PluginModule=injectedNamesToPlugins[pluginName];if(!namesToPlugins.hasOwnProperty(pluginName)||namesToPlugins[pluginName]!==PluginModule){"production"!==process.env.NODE_ENV?invariant(!namesToPlugins[pluginName],"EventPluginRegistry: Cannot inject two different event plugins "+"using the same name, `%s`.",pluginName):invariant(!namesToPlugins[pluginName]);namesToPlugins[pluginName]=PluginModule;isOrderingDirty=true}}if(isOrderingDirty){recomputePluginOrdering()}},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName){return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null}for(var phase in dispatchConfig.phasedRegistrationNames){if(!dispatchConfig.phasedRegistrationNames.hasOwnProperty(phase)){continue}var PluginModule=EventPluginRegistry.registrationNameModules[dispatchConfig.phasedRegistrationNames[phase]];if(PluginModule){return PluginModule}}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var pluginName in namesToPlugins){if(namesToPlugins.hasOwnProperty(pluginName)){delete namesToPlugins[pluginName]}}EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs){if(eventNameDispatchConfigs.hasOwnProperty(eventName)){delete eventNameDispatchConfigs[eventName]}}var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules){if(registrationNameModules.hasOwnProperty(registrationName)){delete registrationNameModules[registrationName]}}}};module.exports=EventPluginRegistry}).call(this,require("_process"))},{"./invariant":568,_process:35}],437:[function(require,module,exports){(function(process){"use strict";var EventConstants=require("./EventConstants");var invariant=require("./invariant");var injection={Mount:null,injectMount:function(InjectedMount){injection.Mount=InjectedMount;if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?invariant(InjectedMount&&InjectedMount.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module "+"is missing getNode."):invariant(InjectedMount&&InjectedMount.getNode)}}};var topLevelTypes=EventConstants.topLevelTypes;function isEndish(topLevelType){return topLevelType===topLevelTypes.topMouseUp||topLevelType===topLevelTypes.topTouchEnd||topLevelType===topLevelTypes.topTouchCancel}function isMoveish(topLevelType){return topLevelType===topLevelTypes.topMouseMove||topLevelType===topLevelTypes.topTouchMove}function isStartish(topLevelType){return topLevelType===topLevelTypes.topMouseDown||topLevelType===topLevelTypes.topTouchStart}var validateEventDispatches;if("production"!==process.env.NODE_ENV){validateEventDispatches=function(event){var dispatchListeners=event._dispatchListeners;var dispatchIDs=event._dispatchIDs;var listenersIsArr=Array.isArray(dispatchListeners);var idsIsArr=Array.isArray(dispatchIDs);var IDsLen=idsIsArr?dispatchIDs.length:dispatchIDs?1:0;var listenersLen=listenersIsArr?dispatchListeners.length:dispatchListeners?1:0;"production"!==process.env.NODE_ENV?invariant(idsIsArr===listenersIsArr&&IDsLen===listenersLen,"EventPluginUtils: Invalid `event`."):invariant(idsIsArr===listenersIsArr&&IDsLen===listenersLen)}}function forEachEventDispatch(event,cb){var dispatchListeners=event._dispatchListeners;var dispatchIDs=event._dispatchIDs;if("production"!==process.env.NODE_ENV){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}cb(event,dispatchListeners[i],dispatchIDs[i])}}else if(dispatchListeners){cb(event,dispatchListeners,dispatchIDs)}}function executeDispatch(event,listener,domID){event.currentTarget=injection.Mount.getNode(domID);var returnValue=listener(event,domID);event.currentTarget=null;return returnValue}function executeDispatchesInOrder(event,cb){forEachEventDispatch(event,cb);event._dispatchListeners=null;event._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners;var dispatchIDs=event._dispatchIDs;if("production"!==process.env.NODE_ENV){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}if(dispatchListeners[i](event,dispatchIDs[i])){return dispatchIDs[i]}}}else if(dispatchListeners){if(dispatchListeners(event,dispatchIDs)){return dispatchIDs}}return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);event._dispatchIDs=null;event._dispatchListeners=null;return ret}function executeDirectDispatch(event){if("production"!==process.env.NODE_ENV){validateEventDispatches(event)}var dispatchListener=event._dispatchListeners;var dispatchID=event._dispatchIDs;"production"!==process.env.NODE_ENV?invariant(!Array.isArray(dispatchListener),"executeDirectDispatch(...): Invalid `event`."):invariant(!Array.isArray(dispatchListener));var res=dispatchListener?dispatchListener(event,dispatchID):null;event._dispatchListeners=null;event._dispatchIDs=null;return res}function hasDispatches(event){return!!event._dispatchListeners}var EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatch:executeDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,injection:injection,useTouchEvents:false};module.exports=EventPluginUtils}).call(this,require("_process"))},{"./EventConstants":433,"./invariant":568,_process:35}],438:[function(require,module,exports){(function(process){"use strict";var EventConstants=require("./EventConstants");var EventPluginHub=require("./EventPluginHub");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var PropagationPhases=EventConstants.PropagationPhases;var getListener=EventPluginHub.getListener;function listenerAtPhase(id,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(id,registrationName)}function accumulateDirectionalDispatches(domID,upwards,event){if("production"!==process.env.NODE_ENV){if(!domID){throw new Error("Dispatching id must not be null")}}var phase=upwards?PropagationPhases.bubbled:PropagationPhases.captured;var listener=listenerAtPhase(domID,event,phase);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchIDs=accumulateInto(event._dispatchIDs,domID)}}function accumulateTwoPhaseDispatchesSingle(event){if(event&&event.dispatchConfig.phasedRegistrationNames){EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(event.dispatchMarker,accumulateDirectionalDispatches,event)}}function accumulateDispatches(id,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName;var listener=getListener(id,registrationName);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchIDs=accumulateInto(event._dispatchIDs,id)}}}function accumulateDirectDispatchesSingle(event){if(event&&event.dispatchConfig.registrationName){accumulateDispatches(event.dispatchMarker,null,event)}}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateEnterLeaveDispatches(leave,enter,fromID,toID){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(fromID,toID,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators}).call(this,require("_process"))},{"./EventConstants":433,"./EventPluginHub":435,"./accumulateInto":536,"./forEachAccumulated":553,_process:35}],439:[function(require,module,exports){"use strict";var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},{}],440:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var assign=require("./Object.assign");var getTextContentAccessor=require("./getTextContentAccessor");function FallbackCompositionState(root){this._root=root;this._startText=this.getText();this._fallbackText=null}assign(FallbackCompositionState.prototype,{getText:function(){if("value"in this._root){return this._root.value}return this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText){return this._fallbackText}var start;var startValue=this._startText;var startLength=startValue.length;var end;var endValue=this.getText();var endLength=endValue.length;for(start=0;start<startLength;start++){if(startValue[start]!==endValue[start]){break}}var minEnd=startLength-start;for(end=1;end<=minEnd;end++){if(startValue[startLength-end]!==endValue[endLength-end]){break}}var sliceTail=end>1?1-end:undefined;this._fallbackText=endValue.slice(start,sliceTail);return this._fallbackText}});PooledClass.addPoolingTo(FallbackCompositionState);module.exports=FallbackCompositionState},{"./Object.assign":446,"./PooledClass":447,"./getTextContentAccessor":563}],441:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var ExecutionEnvironment=require("./ExecutionEnvironment");var MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE;var MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY;var HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE;var HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS;var HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE;var HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE;var HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;var hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,autoCapitalize:null,autoCorrect:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,property:null,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig},{"./DOMProperty":428,"./ExecutionEnvironment":439}],442:[function(require,module,exports){"use strict";var ReactLink=require("./ReactLink");var ReactStateSetters=require("./ReactStateSetters");var LinkedStateMixin={linkState:function(key){return new ReactLink(this.state[key],ReactStateSetters.createStateKeySetter(this,key))}};module.exports=LinkedStateMixin},{"./ReactLink":492,"./ReactStateSetters":511}],443:[function(require,module,exports){(function(process){"use strict";var ReactPropTypes=require("./ReactPropTypes");var invariant=require("./invariant");var hasReadOnlyValue={button:true,checkbox:true,image:true,hidden:true,radio:true,reset:true,submit:true};function _assertSingleLink(input){
"production"!==process.env.NODE_ENV?invariant(input.props.checkedLink==null||input.props.valueLink==null,"Cannot provide a checkedLink and a valueLink. If you want to use "+"checkedLink, you probably don't want to use valueLink and vice versa."):invariant(input.props.checkedLink==null||input.props.valueLink==null)}function _assertValueLink(input){_assertSingleLink(input);"production"!==process.env.NODE_ENV?invariant(input.props.value==null&&input.props.onChange==null,"Cannot provide a valueLink and a value or onChange event. If you want "+"to use value or onChange, you probably don't want to use valueLink."):invariant(input.props.value==null&&input.props.onChange==null)}function _assertCheckedLink(input){_assertSingleLink(input);"production"!==process.env.NODE_ENV?invariant(input.props.checked==null&&input.props.onChange==null,"Cannot provide a checkedLink and a checked property or onChange event. "+"If you want to use checked or onChange, you probably don't want to "+"use checkedLink"):invariant(input.props.checked==null&&input.props.onChange==null)}function _handleLinkedValueChange(e){this.props.valueLink.requestChange(e.target.value)}function _handleLinkedCheckChange(e){this.props.checkedLink.requestChange(e.target.checked)}var LinkedValueUtils={Mixin:{propTypes:{value:function(props,propName,componentName){if(!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `value` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultValue`. Otherwise, "+"set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){if(!props[propName]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `checked` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultChecked`. Otherwise, "+"set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func}},getValue:function(input){if(input.props.valueLink){_assertValueLink(input);return input.props.valueLink.value}return input.props.value},getChecked:function(input){if(input.props.checkedLink){_assertCheckedLink(input);return input.props.checkedLink.value}return input.props.checked},getOnChange:function(input){if(input.props.valueLink){_assertValueLink(input);return _handleLinkedValueChange}else if(input.props.checkedLink){_assertCheckedLink(input);return _handleLinkedCheckChange}return input.props.onChange}};module.exports=LinkedValueUtils}).call(this,require("_process"))},{"./ReactPropTypes":503,"./invariant":568,_process:35}],444:[function(require,module,exports){(function(process){"use strict";var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var invariant=require("./invariant");function remove(event){event.remove()}var LocalEventTrapMixin={trapBubbledEvent:function(topLevelType,handlerBaseName){"production"!==process.env.NODE_ENV?invariant(this.isMounted(),"Must be mounted to trap events"):invariant(this.isMounted());var node=this.getDOMNode();"production"!==process.env.NODE_ENV?invariant(node,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered."):invariant(node);var listener=ReactBrowserEventEmitter.trapBubbledEvent(topLevelType,handlerBaseName,node);this._localEventListeners=accumulateInto(this._localEventListeners,listener)},componentWillUnmount:function(){if(this._localEventListeners){forEachAccumulated(this._localEventListeners,remove)}}};module.exports=LocalEventTrapMixin}).call(this,require("_process"))},{"./ReactBrowserEventEmitter":450,"./accumulateInto":536,"./forEachAccumulated":553,"./invariant":568,_process:35}],445:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var emptyFunction=require("./emptyFunction");var topLevelTypes=EventConstants.topLevelTypes;var MobileSafariClickEventPlugin={eventTypes:null,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){if(topLevelType===topLevelTypes.topTouchStart){var target=nativeEvent.target;if(target&&!target.onclick){target.onclick=emptyFunction}}}};module.exports=MobileSafariClickEventPlugin},{"./EventConstants":433,"./emptyFunction":547}],446:[function(require,module,exports){"use strict";function assign(target,sources){if(target==null){throw new TypeError("Object.assign target cannot be null or undefined")}var to=Object(target);var hasOwnProperty=Object.prototype.hasOwnProperty;for(var nextIndex=1;nextIndex<arguments.length;nextIndex++){var nextSource=arguments[nextIndex];if(nextSource==null){continue}var from=Object(nextSource);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}}return to}module.exports=assign},{}],447:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,copyFieldsFrom);return instance}else{return new Klass(copyFieldsFrom)}};var twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2);return instance}else{return new Klass(a1,a2)}};var threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3);return instance}else{return new Klass(a1,a2,a3)}};var fiveArgumentPooler=function(a1,a2,a3,a4,a5){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3,a4,a5);return instance}else{return new Klass(a1,a2,a3,a4,a5)}};var standardReleaser=function(instance){var Klass=this;"production"!==process.env.NODE_ENV?invariant(instance instanceof Klass,"Trying to release an instance into a pool of a different type."):invariant(instance instanceof Klass);if(instance.destructor){instance.destructor()}if(Klass.instancePool.length<Klass.poolSize){Klass.instancePool.push(instance)}};var DEFAULT_POOL_SIZE=10;var DEFAULT_POOLER=oneArgumentPooler;var addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;NewKlass.instancePool=[];NewKlass.getPooled=pooler||DEFAULT_POOLER;if(!NewKlass.poolSize){NewKlass.poolSize=DEFAULT_POOL_SIZE}NewKlass.release=standardReleaser;return NewKlass};var PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass}).call(this,require("_process"))},{"./invariant":568,_process:35}],448:[function(require,module,exports){(function(process){"use strict";var EventPluginUtils=require("./EventPluginUtils");var ReactChildren=require("./ReactChildren");var ReactComponent=require("./ReactComponent");var ReactClass=require("./ReactClass");var ReactContext=require("./ReactContext");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactElement=require("./ReactElement");var ReactElementValidator=require("./ReactElementValidator");var ReactDOM=require("./ReactDOM");var ReactDOMTextComponent=require("./ReactDOMTextComponent");var ReactDefaultInjection=require("./ReactDefaultInjection");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactMount=require("./ReactMount");var ReactPerf=require("./ReactPerf");var ReactPropTypes=require("./ReactPropTypes");var ReactReconciler=require("./ReactReconciler");var ReactServerRendering=require("./ReactServerRendering");var assign=require("./Object.assign");var findDOMNode=require("./findDOMNode");var onlyChild=require("./onlyChild");ReactDefaultInjection.inject();var createElement=ReactElement.createElement;var createFactory=ReactElement.createFactory;var cloneElement=ReactElement.cloneElement;if("production"!==process.env.NODE_ENV){createElement=ReactElementValidator.createElement;createFactory=ReactElementValidator.createFactory;cloneElement=ReactElementValidator.cloneElement}var render=ReactPerf.measure("React","render",ReactMount.render);var React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,only:onlyChild},Component:ReactComponent,DOM:ReactDOM,PropTypes:ReactPropTypes,initializeTouchEvents:function(shouldUseTouch){EventPluginUtils.useTouchEvents=shouldUseTouch},createClass:ReactClass.createClass,createElement:createElement,cloneElement:cloneElement,createFactory:createFactory,createMixin:function(mixin){return mixin},constructAndRenderComponent:ReactMount.constructAndRenderComponent,constructAndRenderComponentByID:ReactMount.constructAndRenderComponentByID,findDOMNode:findDOMNode,render:render,renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,unmountComponentAtNode:ReactMount.unmountComponentAtNode,isValidElement:ReactElement.isValidElement,withContext:ReactContext.withContext,__spread:assign};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject==="function"){__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent})}if("production"!==process.env.NODE_ENV){var ExecutionEnvironment=require("./ExecutionEnvironment");if(ExecutionEnvironment.canUseDOM&&window.top===window.self){if(navigator.userAgent.indexOf("Chrome")>-1){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==="undefined"){console.debug("Download the React DevTools for a better development experience: "+"https://fb.me/react-devtools")}}var expectedFeatures=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze];for(var i=0;i<expectedFeatures.length;i++){if(!expectedFeatures[i]){console.error("One or more ES5 shim/shams expected by React are not available: "+"https://fb.me/react-warning-polyfills");break}}}}React.version="0.13.3";module.exports=React}).call(this,require("_process"))},{"./EventPluginUtils":437,"./ExecutionEnvironment":439,"./Object.assign":446,"./ReactChildren":454,"./ReactClass":455,"./ReactComponent":456,"./ReactContext":461,"./ReactCurrentOwner":462,"./ReactDOM":463,"./ReactDOMTextComponent":474,"./ReactDefaultInjection":477,"./ReactElement":480,"./ReactElementValidator":481,"./ReactInstanceHandles":489,"./ReactMount":494,"./ReactPerf":499,"./ReactPropTypes":503,"./ReactReconciler":506,"./ReactServerRendering":509,"./findDOMNode":550,"./onlyChild":578,_process:35}],449:[function(require,module,exports){"use strict";var findDOMNode=require("./findDOMNode");var ReactBrowserComponentMixin={getDOMNode:function(){return findDOMNode(this)}};module.exports=ReactBrowserComponentMixin},{"./findDOMNode":550}],450:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPluginHub=require("./EventPluginHub");var EventPluginRegistry=require("./EventPluginRegistry");var ReactEventEmitterMixin=require("./ReactEventEmitterMixin");var ViewportMetrics=require("./ViewportMetrics");var assign=require("./Object.assign");var isEventSupported=require("./isEventSupported");var alreadyListeningTo={};var isMonitoringScrollValue=false;var reactTopListenersCounter=0;var topEventMapping={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"};var topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2);function getListeningForDocument(mountAt){if(!Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)){mountAt[topListenersIDKey]=reactTopListenersCounter++;alreadyListeningTo[mountAt[topListenersIDKey]]={}}return alreadyListeningTo[mountAt[topListenersIDKey]]}var ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel);ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){if(ReactBrowserEventEmitter.ReactEventListener){ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)}},isEnabled:function(){return!!(ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){var mountAt=contentDocumentHandle;var isListening=getListeningForDocument(mountAt);var dependencies=EventPluginRegistry.registrationNameDependencies[registrationName];var topLevelTypes=EventConstants.topLevelTypes;for(var i=0,l=dependencies.length;i<l;i++){var dependency=dependencies[i];if(!(isListening.hasOwnProperty(dependency)&&isListening[dependency])){if(dependency===topLevelTypes.topWheel){if(isEventSupported("wheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"wheel",mountAt)}else if(isEventSupported("mousewheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"mousewheel",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"DOMMouseScroll",mountAt)}}else if(dependency===topLevelTypes.topScroll){if(isEventSupported("scroll",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topScroll,"scroll",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE)}}else if(dependency===topLevelTypes.topFocus||dependency===topLevelTypes.topBlur){if(isEventSupported("focus",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topFocus,"focus",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topBlur,"blur",mountAt)}else if(isEventSupported("focusin")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topFocus,"focusin",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topBlur,"focusout",mountAt)}isListening[topLevelTypes.topBlur]=true;isListening[topLevelTypes.topFocus]=true}else if(topEventMapping.hasOwnProperty(dependency)){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt)}isListening[dependency]=true}}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh);isMonitoringScrollValue=true}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});module.exports=ReactBrowserEventEmitter},{"./EventConstants":433,"./EventPluginHub":435,"./EventPluginRegistry":436,"./Object.assign":446,"./ReactEventEmitterMixin":484,"./ViewportMetrics":535,"./isEventSupported":569}],451:[function(require,module,exports){"use strict";var React=require("./React");var assign=require("./Object.assign");var ReactTransitionGroup=React.createFactory(require("./ReactTransitionGroup"));var ReactCSSTransitionGroupChild=React.createFactory(require("./ReactCSSTransitionGroupChild"));var ReactCSSTransitionGroup=React.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:React.PropTypes.string.isRequired,transitionAppear:React.PropTypes.bool,transitionEnter:React.PropTypes.bool,transitionLeave:React.PropTypes.bool},getDefaultProps:function(){return{transitionAppear:false,transitionEnter:true,transitionLeave:true}},_wrapChild:function(child){return ReactCSSTransitionGroupChild({name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave},child)},render:function(){return ReactTransitionGroup(assign({},this.props,{childFactory:this._wrapChild}))}});module.exports=ReactCSSTransitionGroup},{"./Object.assign":446,"./React":448,"./ReactCSSTransitionGroupChild":452,"./ReactTransitionGroup":515}],452:[function(require,module,exports){(function(process){"use strict";var React=require("./React");var CSSCore=require("./CSSCore");var ReactTransitionEvents=require("./ReactTransitionEvents");var onlyChild=require("./onlyChild");var warning=require("./warning");var TICK=17;var NO_EVENT_TIMEOUT=5e3;var noEventListener=null;if("production"!==process.env.NODE_ENV){noEventListener=function(){"production"!==process.env.NODE_ENV?warning(false,"transition(): tried to perform an animation without "+"an animationend or transitionend event after timeout ("+"%sms). You should either disable this "+"transition in JS or add a CSS animation/transition.",NO_EVENT_TIMEOUT):null}}var ReactCSSTransitionGroupChild=React.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(animationType,finishCallback){var node=this.getDOMNode();var className=this.props.name+"-"+animationType;var activeClassName=className+"-active";var noEventTimeout=null;var endListener=function(e){if(e&&e.target!==node){return}if("production"!==process.env.NODE_ENV){clearTimeout(noEventTimeout)}CSSCore.removeClass(node,className);CSSCore.removeClass(node,activeClassName);ReactTransitionEvents.removeEndEventListener(node,endListener);if(finishCallback){finishCallback()}};ReactTransitionEvents.addEndEventListener(node,endListener);CSSCore.addClass(node,className);this.queueClass(activeClassName);if("production"!==process.env.NODE_ENV){noEventTimeout=setTimeout(noEventListener,NO_EVENT_TIMEOUT)}},queueClass:function(className){this.classNameQueue.push(className);if(!this.timeout){this.timeout=setTimeout(this.flushClassNameQueue,TICK)}},flushClassNameQueue:function(){if(this.isMounted()){this.classNameQueue.forEach(CSSCore.addClass.bind(CSSCore,this.getDOMNode()))}this.classNameQueue.length=0;this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){if(this.timeout){clearTimeout(this.timeout)}},componentWillAppear:function(done){if(this.props.appear){this.transition("appear",done)}else{done()}},componentWillEnter:function(done){if(this.props.enter){this.transition("enter",done)}else{done()}},componentWillLeave:function(done){if(this.props.leave){this.transition("leave",done)}else{done()}},render:function(){return onlyChild(this.props.children)}});module.exports=ReactCSSTransitionGroupChild}).call(this,require("_process"))},{"./CSSCore":421,"./React":448,"./ReactTransitionEvents":514,"./onlyChild":578,"./warning":589,_process:35}],453:[function(require,module,exports){"use strict";var ReactReconciler=require("./ReactReconciler");var flattenChildren=require("./flattenChildren");var instantiateReactComponent=require("./instantiateReactComponent");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var ReactChildReconciler={instantiateChildren:function(nestedChildNodes,transaction,context){var children=flattenChildren(nestedChildNodes);for(var name in children){if(children.hasOwnProperty(name)){var child=children[name];var childInstance=instantiateReactComponent(child,null);children[name]=childInstance}}return children},updateChildren:function(prevChildren,nextNestedChildNodes,transaction,context){var nextChildren=flattenChildren(nextNestedChildNodes);if(!nextChildren&&!prevChildren){return null}var name;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}var prevChild=prevChildren&&prevChildren[name];var prevElement=prevChild&&prevChild._currentElement;var nextElement=nextChildren[name];if(shouldUpdateReactComponent(prevElement,nextElement)){ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context);nextChildren[name]=prevChild}else{if(prevChild){ReactReconciler.unmountComponent(prevChild,name)}var nextChildInstance=instantiateReactComponent(nextElement,null);nextChildren[name]=nextChildInstance}}for(name in prevChildren){if(prevChildren.hasOwnProperty(name)&&!(nextChildren&&nextChildren.hasOwnProperty(name))){ReactReconciler.unmountComponent(prevChildren[name])}}return nextChildren},unmountChildren:function(renderedChildren){for(var name in renderedChildren){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild)}}};module.exports=ReactChildReconciler},{"./ReactReconciler":506,"./flattenChildren":551,"./instantiateReactComponent":567,"./shouldUpdateReactComponent":585}],454:[function(require,module,exports){(function(process){"use strict";var PooledClass=require("./PooledClass");var ReactFragment=require("./ReactFragment");var traverseAllChildren=require("./traverseAllChildren");var warning=require("./warning");var twoArgumentPooler=PooledClass.twoArgumentPooler;var threeArgumentPooler=PooledClass.threeArgumentPooler;function ForEachBookKeeping(forEachFunction,forEachContext){this.forEachFunction=forEachFunction;this.forEachContext=forEachContext}PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler);function forEachSingleChild(traverseContext,child,name,i){var forEachBookKeeping=traverseContext;forEachBookKeeping.forEachFunction.call(forEachBookKeeping.forEachContext,child,i)}function forEachChildren(children,forEachFunc,forEachContext){if(children==null){return children}var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext);ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,mapFunction,mapContext){this.mapResult=mapResult;this.mapFunction=mapFunction;this.mapContext=mapContext}PooledClass.addPoolingTo(MapBookKeeping,threeArgumentPooler);function mapSingleChildIntoContext(traverseContext,child,name,i){var mapBookKeeping=traverseContext;var mapResult=mapBookKeeping.mapResult;var keyUnique=!mapResult.hasOwnProperty(name);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(keyUnique,"ReactChildren.map(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.",name):null}if(keyUnique){var mappedChild=mapBookKeeping.mapFunction.call(mapBookKeeping.mapContext,child,i);mapResult[name]=mappedChild}}function mapChildren(children,func,context){if(children==null){return children}var mapResult={};var traverseContext=MapBookKeeping.getPooled(mapResult,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext);MapBookKeeping.release(traverseContext);return ReactFragment.create(mapResult)}function forEachSingleChildDummy(traverseContext,child,name,i){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}var ReactChildren={forEach:forEachChildren,map:mapChildren,count:countChildren};module.exports=ReactChildren}).call(this,require("_process"))},{"./PooledClass":447,"./ReactFragment":486,"./traverseAllChildren":587,"./warning":589,_process:35}],455:[function(require,module,exports){(function(process){"use strict";var ReactComponent=require("./ReactComponent");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactElement=require("./ReactElement");var ReactErrorUtils=require("./ReactErrorUtils");var ReactInstanceMap=require("./ReactInstanceMap");var ReactLifeCycle=require("./ReactLifeCycle");var ReactPropTypeLocations=require("./ReactPropTypeLocations");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactUpdateQueue=require("./ReactUpdateQueue");var assign=require("./Object.assign");var invariant=require("./invariant");var keyMirror=require("./keyMirror");var keyOf=require("./keyOf");var warning=require("./warning");var MIXINS_KEY=keyOf({mixins:null});var SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null});var injectedMixins=[];var ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE};var RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins){for(var i=0;i<mixins.length;i++){mixSpecIntoComponent(Constructor,mixins[i])}}},childContextTypes:function(Constructor,childContextTypes){if("production"!==process.env.NODE_ENV){validateTypeDef(Constructor,childContextTypes,ReactPropTypeLocations.childContext)}Constructor.childContextTypes=assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){if("production"!==process.env.NODE_ENV){validateTypeDef(Constructor,contextTypes,ReactPropTypeLocations.context)}Constructor.contextTypes=assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){if(Constructor.getDefaultProps){Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps)}else{Constructor.getDefaultProps=getDefaultProps}},propTypes:function(Constructor,propTypes){if("production"!==process.env.NODE_ENV){validateTypeDef(Constructor,propTypes,ReactPropTypeLocations.prop)}Constructor.propTypes=assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)}};function validateTypeDef(Constructor,typeDef,location){for(var propName in typeDef){if(typeDef.hasOwnProperty(propName)){"production"!==process.env.NODE_ENV?warning(typeof typeDef[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",Constructor.displayName||"ReactClass",ReactPropTypeLocationNames[location],propName):null}}}function validateMethodOverride(proto,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;if(ReactClassMixin.hasOwnProperty(name)){"production"!==process.env.NODE_ENV?invariant(specPolicy===SpecPolicy.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override "+"`%s` from your class specification. Ensure that your method names "+"do not overlap with React methods.",name):invariant(specPolicy===SpecPolicy.OVERRIDE_BASE)}if(proto.hasOwnProperty(name)){"production"!==process.env.NODE_ENV?invariant(specPolicy===SpecPolicy.DEFINE_MANY||specPolicy===SpecPolicy.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define "+"`%s` on your component more than once. This conflict may be due "+"to a mixin.",name):invariant(specPolicy===SpecPolicy.DEFINE_MANY||specPolicy===SpecPolicy.DEFINE_MANY_MERGED)}}function mixSpecIntoComponent(Constructor,spec){if(!spec){return}"production"!==process.env.NODE_ENV?invariant(typeof spec!=="function","ReactClass: You're attempting to "+"use a component class as a mixin. Instead, just use a regular object."):invariant(typeof spec!=="function");"production"!==process.env.NODE_ENV?invariant(!ReactElement.isValidElement(spec),"ReactClass: You're attempting to "+"use a component as a mixin. Instead, just use a regular object."):invariant(!ReactElement.isValidElement(spec));var proto=Constructor.prototype;if(spec.hasOwnProperty(MIXINS_KEY)){RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins)}for(var name in spec){if(!spec.hasOwnProperty(name)){continue}if(name===MIXINS_KEY){continue}var property=spec[name];validateMethodOverride(proto,name);if(RESERVED_SPEC_KEYS.hasOwnProperty(name)){RESERVED_SPEC_KEYS[name](Constructor,property)}else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name);var isAlreadyDefined=proto.hasOwnProperty(name);var markedDontBind=property&&property.__reactDontBind;var isFunction=typeof property==="function";var shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&!markedDontBind;if(shouldAutoBind){if(!proto.__reactAutoBindMap){proto.__reactAutoBindMap={}}proto.__reactAutoBindMap[name]=property;proto[name]=property}else{if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];"production"!==process.env.NODE_ENV?invariant(isReactClassMethod&&(specPolicy===SpecPolicy.DEFINE_MANY_MERGED||specPolicy===SpecPolicy.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s "+"when mixing in component specs.",specPolicy,name):invariant(isReactClassMethod&&(specPolicy===SpecPolicy.DEFINE_MANY_MERGED||specPolicy===SpecPolicy.DEFINE_MANY));if(specPolicy===SpecPolicy.DEFINE_MANY_MERGED){proto[name]=createMergedResultFunction(proto[name],property)}else if(specPolicy===SpecPolicy.DEFINE_MANY){proto[name]=createChainedFunction(proto[name],property)}}else{proto[name]=property;if("production"!==process.env.NODE_ENV){if(typeof property==="function"&&spec.displayName){proto[name].displayName=spec.displayName+"_"+name}}}}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(!statics){return}for(var name in statics){var property=statics[name];if(!statics.hasOwnProperty(name)){continue}var isReserved=name in RESERVED_SPEC_KEYS;"production"!==process.env.NODE_ENV?invariant(!isReserved,"ReactClass: You are attempting to define a reserved "+'property, `%s`, that shouldn\'t be on the "statics" key. Define it '+"as an instance property instead; it will still be accessible on the "+"constructor.",name):invariant(!isReserved);var isInherited=name in Constructor;"production"!==process.env.NODE_ENV?invariant(!isInherited,"ReactClass: You are attempting to define "+"`%s` on your component more than once. This conflict may be "+"due to a mixin.",name):invariant(!isInherited);Constructor[name]=property}}function mergeIntoWithNoDuplicateKeys(one,two){"production"!==process.env.NODE_ENV?invariant(one&&two&&typeof one==="object"&&typeof two==="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):invariant(one&&two&&typeof one==="object"&&typeof two==="object");for(var key in two){if(two.hasOwnProperty(key)){"production"!==process.env.NODE_ENV?invariant(one[key]===undefined,"mergeIntoWithNoDuplicateKeys(): "+"Tried to merge two objects with the same key: `%s`. This conflict "+"may be due to a mixin; in particular, this may be caused by two "+"getInitialState() or getDefaultProps() methods returning objects "+"with clashing keys.",key):invariant(one[key]===undefined);

one[key]=two[key]}}return one}function createMergedResultFunction(one,two){return function mergedResult(){var a=one.apply(this,arguments);var b=two.apply(this,arguments);if(a==null){return b}else if(b==null){return a}var c={};mergeIntoWithNoDuplicateKeys(c,a);mergeIntoWithNoDuplicateKeys(c,b);return c}}function createChainedFunction(one,two){return function chainedFunction(){one.apply(this,arguments);two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);if("production"!==process.env.NODE_ENV){boundMethod.__reactBoundContext=component;boundMethod.__reactBoundMethod=method;boundMethod.__reactBoundArguments=null;var componentName=component.constructor.displayName;var _bind=boundMethod.bind;boundMethod.bind=function(newThis){for(var args=[],$__0=1,$__1=arguments.length;$__0<$__1;$__0++)args.push(arguments[$__0]);if(newThis!==component&&newThis!==null){"production"!==process.env.NODE_ENV?warning(false,"bind(): React component methods may only be bound to the "+"component instance. See %s",componentName):null}else if(!args.length){"production"!==process.env.NODE_ENV?warning(false,"bind(): You are binding a component method to the component. "+"React does this for you automatically in a high-performance "+"way, so you can safely remove this call. See %s",componentName):null;return boundMethod}var reboundMethod=_bind.apply(boundMethod,arguments);reboundMethod.__reactBoundContext=component;reboundMethod.__reactBoundMethod=method;reboundMethod.__reactBoundArguments=args;return reboundMethod}}return boundMethod}function bindAutoBindMethods(component){for(var autoBindKey in component.__reactAutoBindMap){if(component.__reactAutoBindMap.hasOwnProperty(autoBindKey)){var method=component.__reactAutoBindMap[autoBindKey];component[autoBindKey]=bindAutoBindMethod(component,ReactErrorUtils.guard(method,component.constructor.displayName+"."+autoBindKey))}}}var typeDeprecationDescriptor={enumerable:false,get:function(){var displayName=this.displayName||this.name||"Component";"production"!==process.env.NODE_ENV?warning(false,"%s.type is deprecated. Use %s directly to access the class.",displayName,displayName):null;Object.defineProperty(this,"type",{value:this});return this}};var ReactClassMixin={replaceState:function(newState,callback){ReactUpdateQueue.enqueueReplaceState(this,newState);if(callback){ReactUpdateQueue.enqueueCallback(this,callback)}},isMounted:function(){if("production"!==process.env.NODE_ENV){var owner=ReactCurrentOwner.current;if(owner!==null){"production"!==process.env.NODE_ENV?warning(owner._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):null;owner._warnedAboutRefsInRender=true}}var internalInstance=ReactInstanceMap.get(this);return internalInstance&&internalInstance!==ReactLifeCycle.currentlyMountingInstance},setProps:function(partialProps,callback){ReactUpdateQueue.enqueueSetProps(this,partialProps);if(callback){ReactUpdateQueue.enqueueCallback(this,callback)}},replaceProps:function(newProps,callback){ReactUpdateQueue.enqueueReplaceProps(this,newProps);if(callback){ReactUpdateQueue.enqueueCallback(this,callback)}}};var ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=function(props,context){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(this instanceof Constructor,"Something is calling a React component directly. Use a factory or "+"JSX instead. See: https://fb.me/react-legacyfactory"):null}if(this.__reactAutoBindMap){bindAutoBindMethods(this)}this.props=props;this.context=context;this.state=null;var initialState=this.getInitialState?this.getInitialState():null;if("production"!==process.env.NODE_ENV){if(typeof initialState==="undefined"&&this.getInitialState._isMockFunction){initialState=null}}"production"!==process.env.NODE_ENV?invariant(typeof initialState==="object"&&!Array.isArray(initialState),"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent"):invariant(typeof initialState==="object"&&!Array.isArray(initialState));this.state=initialState};Constructor.prototype=new ReactClassComponent;Constructor.prototype.constructor=Constructor;injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor));mixSpecIntoComponent(Constructor,spec);if(Constructor.getDefaultProps){Constructor.defaultProps=Constructor.getDefaultProps()}if("production"!==process.env.NODE_ENV){if(Constructor.getDefaultProps){Constructor.getDefaultProps.isReactClassApproved={}}if(Constructor.prototype.getInitialState){Constructor.prototype.getInitialState.isReactClassApproved={}}}"production"!==process.env.NODE_ENV?invariant(Constructor.prototype.render,"createClass(...): Class specification must implement a `render` method."):invariant(Constructor.prototype.render);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(!Constructor.prototype.componentShouldUpdate,"%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",spec.displayName||"A component"):null}for(var methodName in ReactClassInterface){if(!Constructor.prototype[methodName]){Constructor.prototype[methodName]=null}}Constructor.type=Constructor;if("production"!==process.env.NODE_ENV){try{Object.defineProperty(Constructor,"type",typeDeprecationDescriptor)}catch(x){}}return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass}).call(this,require("_process"))},{"./Object.assign":446,"./ReactComponent":456,"./ReactCurrentOwner":462,"./ReactElement":480,"./ReactErrorUtils":483,"./ReactInstanceMap":490,"./ReactLifeCycle":491,"./ReactPropTypeLocationNames":501,"./ReactPropTypeLocations":502,"./ReactUpdateQueue":516,"./invariant":568,"./keyMirror":574,"./keyOf":575,"./warning":589,_process:35}],456:[function(require,module,exports){(function(process){"use strict";var ReactUpdateQueue=require("./ReactUpdateQueue");var invariant=require("./invariant");var warning=require("./warning");function ReactComponent(props,context){this.props=props;this.context=context}ReactComponent.prototype.setState=function(partialState,callback){"production"!==process.env.NODE_ENV?invariant(typeof partialState==="object"||typeof partialState==="function"||partialState==null,"setState(...): takes an object of state variables to update or a "+"function which returns an object of state variables."):invariant(typeof partialState==="object"||typeof partialState==="function"||partialState==null);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(partialState!=null,"setState(...): You passed an undefined or null state object; "+"instead, use forceUpdate()."):null}ReactUpdateQueue.enqueueSetState(this,partialState);if(callback){ReactUpdateQueue.enqueueCallback(this,callback)}};ReactComponent.prototype.forceUpdate=function(callback){ReactUpdateQueue.enqueueForceUpdate(this);if(callback){ReactUpdateQueue.enqueueCallback(this,callback)}};if("production"!==process.env.NODE_ENV){var deprecatedAPIs={getDOMNode:["getDOMNode","Use React.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in "+"componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead, call React.render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see "+"https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead, call React.render again at the top level."]};var defineDeprecationWarning=function(methodName,info){try{Object.defineProperty(ReactComponent.prototype,methodName,{get:function(){"production"!==process.env.NODE_ENV?warning(false,"%s(...) is deprecated in plain JavaScript React classes. %s",info[0],info[1]):null;return undefined}})}catch(x){}};for(var fnName in deprecatedAPIs){if(deprecatedAPIs.hasOwnProperty(fnName)){defineDeprecationWarning(fnName,deprecatedAPIs[fnName])}}}module.exports=ReactComponent}).call(this,require("_process"))},{"./ReactUpdateQueue":516,"./invariant":568,"./warning":589,_process:35}],457:[function(require,module,exports){"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations");var ReactMount=require("./ReactMount");var ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(rootNodeID){ReactMount.purgeID(rootNodeID)}};module.exports=ReactComponentBrowserEnvironment},{"./ReactDOMIDOperations":467,"./ReactMount":494}],458:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var injected=false;var ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){"production"!==process.env.NODE_ENV?invariant(!injected,"ReactCompositeComponent: injectEnvironment() can only be called once."):invariant(!injected);ReactComponentEnvironment.unmountIDFromEnvironment=environment.unmountIDFromEnvironment;ReactComponentEnvironment.replaceNodeWithMarkupByID=environment.replaceNodeWithMarkupByID;ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates;injected=true}}};module.exports=ReactComponentEnvironment}).call(this,require("_process"))},{"./invariant":568,_process:35}],459:[function(require,module,exports){"use strict";var shallowEqual=require("./shallowEqual");var ReactComponentWithPureRenderMixin={shouldComponentUpdate:function(nextProps,nextState){return!shallowEqual(this.props,nextProps)||!shallowEqual(this.state,nextState)}};module.exports=ReactComponentWithPureRenderMixin},{"./shallowEqual":584}],460:[function(require,module,exports){(function(process){"use strict";var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactContext=require("./ReactContext");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactElement=require("./ReactElement");var ReactElementValidator=require("./ReactElementValidator");var ReactInstanceMap=require("./ReactInstanceMap");var ReactLifeCycle=require("./ReactLifeCycle");var ReactNativeComponent=require("./ReactNativeComponent");var ReactPerf=require("./ReactPerf");var ReactPropTypeLocations=require("./ReactPropTypeLocations");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactReconciler=require("./ReactReconciler");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var emptyObject=require("./emptyObject");var invariant=require("./invariant");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("./warning");function getDeclarationErrorAddendum(component){var owner=component._currentElement._owner||null;if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var nextMountID=1;var ReactCompositeComponentMixin={construct:function(element){this._currentElement=element;this._rootNodeID=null;this._instance=null;this._pendingElement=null;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._renderedComponent=null;this._context=null;this._mountOrder=0;this._isTopLevel=false;this._pendingCallbacks=null},mountComponent:function(rootID,transaction,context){this._context=context;this._mountOrder=nextMountID++;this._rootNodeID=rootID;var publicProps=this._processProps(this._currentElement.props);var publicContext=this._processContext(this._currentElement._context);var Component=ReactNativeComponent.getComponentClassForElement(this._currentElement);var inst=new Component(publicProps,publicContext);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(inst.render!=null,"%s(...): No `render` method found on the returned component "+"instance: you may have forgotten to define `render` in your "+"component or you may have accidentally tried to render an element "+"whose type is a function that isn't a React component.",Component.displayName||Component.name||"Component"):null}inst.props=publicProps;inst.context=publicContext;inst.refs=emptyObject;this._instance=inst;ReactInstanceMap.set(inst,this);if("production"!==process.env.NODE_ENV){this._warnIfContextsDiffer(this._currentElement._context,context)}if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(!inst.getInitialState||inst.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Did you mean to define a state property instead?",this.getName()||"a component"):null;"production"!==process.env.NODE_ENV?warning(!inst.getDefaultProps||inst.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Use a static property to define defaultProps instead.",this.getName()||"a component"):null;"production"!==process.env.NODE_ENV?warning(!inst.propTypes,"propTypes was defined as an instance property on %s. Use a static "+"property to define propTypes instead.",this.getName()||"a component"):null;"production"!==process.env.NODE_ENV?warning(!inst.contextTypes,"contextTypes was defined as an instance property on %s. Use a "+"static property to define contextTypes instead.",this.getName()||"a component"):null;"production"!==process.env.NODE_ENV?warning(typeof inst.componentShouldUpdate!=="function","%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",this.getName()||"A component"):null}var initialState=inst.state;if(initialState===undefined){inst.state=initialState=null}"production"!==process.env.NODE_ENV?invariant(typeof initialState==="object"&&!Array.isArray(initialState),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):invariant(typeof initialState==="object"&&!Array.isArray(initialState));this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;var childContext;var renderedElement;var previouslyMounting=ReactLifeCycle.currentlyMountingInstance;ReactLifeCycle.currentlyMountingInstance=this;try{if(inst.componentWillMount){inst.componentWillMount();if(this._pendingStateQueue){inst.state=this._processPendingState(inst.props,inst.context)}}childContext=this._getValidatedChildContext(context);renderedElement=this._renderValidatedComponent(childContext)}finally{ReactLifeCycle.currentlyMountingInstance=previouslyMounting}this._renderedComponent=this._instantiateReactComponent(renderedElement,this._currentElement.type);var markup=ReactReconciler.mountComponent(this._renderedComponent,rootID,transaction,this._mergeChildContext(context,childContext));if(inst.componentDidMount){transaction.getReactMountReady().enqueue(inst.componentDidMount,inst)}return markup},unmountComponent:function(){var inst=this._instance;if(inst.componentWillUnmount){var previouslyUnmounting=ReactLifeCycle.currentlyUnmountingInstance;ReactLifeCycle.currentlyUnmountingInstance=this;try{inst.componentWillUnmount()}finally{ReactLifeCycle.currentlyUnmountingInstance=previouslyUnmounting}}ReactReconciler.unmountComponent(this._renderedComponent);this._renderedComponent=null;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._pendingCallbacks=null;this._pendingElement=null;this._context=null;this._rootNodeID=null;ReactInstanceMap.remove(inst)},_setPropsInternal:function(partialProps,callback){var element=this._pendingElement||this._currentElement;this._pendingElement=ReactElement.cloneAndReplaceProps(element,assign({},element.props,partialProps));ReactUpdates.enqueueUpdate(this,callback)},_maskContext:function(context){var maskedContext=null;if(typeof this._currentElement.type==="string"){return emptyObject}var contextTypes=this._currentElement.type.contextTypes;if(!contextTypes){return emptyObject}maskedContext={};for(var contextName in contextTypes){maskedContext[contextName]=context[contextName]}return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);if("production"!==process.env.NODE_ENV){var Component=ReactNativeComponent.getComponentClassForElement(this._currentElement);if(Component.contextTypes){this._checkPropTypes(Component.contextTypes,maskedContext,ReactPropTypeLocations.context)}}return maskedContext},_getValidatedChildContext:function(currentContext){var inst=this._instance;var childContext=inst.getChildContext&&inst.getChildContext();if(childContext){"production"!==process.env.NODE_ENV?invariant(typeof inst.constructor.childContextTypes==="object","%s.getChildContext(): childContextTypes must be defined in order to "+"use getChildContext().",this.getName()||"ReactCompositeComponent"):invariant(typeof inst.constructor.childContextTypes==="object");if("production"!==process.env.NODE_ENV){this._checkPropTypes(inst.constructor.childContextTypes,childContext,ReactPropTypeLocations.childContext)}for(var name in childContext){"production"!==process.env.NODE_ENV?invariant(name in inst.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",name):invariant(name in inst.constructor.childContextTypes)}return childContext}return null},_mergeChildContext:function(currentContext,childContext){if(childContext){return assign({},currentContext,childContext)}return currentContext},_processProps:function(newProps){if("production"!==process.env.NODE_ENV){var Component=ReactNativeComponent.getComponentClassForElement(this._currentElement);if(Component.propTypes){this._checkPropTypes(Component.propTypes,newProps,ReactPropTypeLocations.prop)}}return newProps},_checkPropTypes:function(propTypes,props,location){var componentName=this.getName();for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error;try{"production"!==process.env.NODE_ENV?invariant(typeof propTypes[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually "+"from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],propName):invariant(typeof propTypes[propName]==="function");error=propTypes[propName](props,propName,componentName,location)}catch(ex){error=ex}if(error instanceof Error){var addendum=getDeclarationErrorAddendum(this);if(location===ReactPropTypeLocations.prop){"production"!==process.env.NODE_ENV?warning(false,"Failed Composite propType: %s%s",error.message,addendum):null}else{"production"!==process.env.NODE_ENV?warning(false,"Failed Context Types: %s%s",error.message,addendum):null}}}}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement;var prevContext=this._context;this._pendingElement=null;this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){if(this._pendingElement!=null){ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,transaction,this._context)}if(this._pendingStateQueue!==null||this._pendingForceUpdate){if("production"!==process.env.NODE_ENV){ReactElementValidator.checkAndWarnForMutatedProps(this._currentElement)}this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)}},_warnIfContextsDiffer:function(ownerBasedContext,parentBasedContext){ownerBasedContext=this._maskContext(ownerBasedContext);parentBasedContext=this._maskContext(parentBasedContext);var parentKeys=Object.keys(parentBasedContext).sort();var displayName=this.getName()||"ReactCompositeComponent";for(var i=0;i<parentKeys.length;i++){var key=parentKeys[i];"production"!==process.env.NODE_ENV?warning(ownerBasedContext[key]===parentBasedContext[key],"owner-based and parent-based contexts differ "+"(values: `%s` vs `%s`) for key (%s) while mounting %s "+"(see: http://fb.me/react-context-by-parent)",ownerBasedContext[key],parentBasedContext[key],key,displayName):null}},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var inst=this._instance;var nextContext=inst.context;var nextProps=inst.props;if(prevParentElement!==nextParentElement){nextContext=this._processContext(nextParentElement._context);nextProps=this._processProps(nextParentElement.props);if("production"!==process.env.NODE_ENV){if(nextUnmaskedContext!=null){this._warnIfContextsDiffer(nextParentElement._context,nextUnmaskedContext)}}if(inst.componentWillReceiveProps){inst.componentWillReceiveProps(nextProps,nextContext)}}var nextState=this._processPendingState(nextProps,nextContext);var shouldUpdate=this._pendingForceUpdate||!inst.shouldComponentUpdate||inst.shouldComponentUpdate(nextProps,nextState,nextContext);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(typeof shouldUpdate!=="undefined","%s.shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):null}if(shouldUpdate){this._pendingForceUpdate=false;this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)}else{this._currentElement=nextParentElement;this._context=nextUnmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext}},_processPendingState:function(props,context){var inst=this._instance;var queue=this._pendingStateQueue;var replace=this._pendingReplaceState;this._pendingReplaceState=false;this._pendingStateQueue=null;if(!queue){return inst.state}if(replace&&queue.length===1){return queue[0]}var nextState=assign({},replace?queue[0]:inst.state);for(var i=replace?1:0;i<queue.length;i++){var partial=queue[i];assign(nextState,typeof partial==="function"?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var inst=this._instance;var prevProps=inst.props;var prevState=inst.state;var prevContext=inst.context;if(inst.componentWillUpdate){inst.componentWillUpdate(nextProps,nextState,nextContext)}this._currentElement=nextElement;this._context=unmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext;this._updateRenderedComponent(transaction,unmaskedContext);if(inst.componentDidUpdate){transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)}},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent;var prevRenderedElement=prevComponentInstance._currentElement;var childContext=this._getValidatedChildContext();var nextRenderedElement=this._renderValidatedComponent(childContext);if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement)){ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._mergeChildContext(context,childContext))}else{var thisID=this._rootNodeID;var prevComponentID=prevComponentInstance._rootNodeID;ReactReconciler.unmountComponent(prevComponentInstance);this._renderedComponent=this._instantiateReactComponent(nextRenderedElement,this._currentElement.type);var nextMarkup=ReactReconciler.mountComponent(this._renderedComponent,thisID,transaction,this._mergeChildContext(context,childContext));this._replaceNodeWithMarkupByID(prevComponentID,nextMarkup)}},_replaceNodeWithMarkupByID:function(prevComponentID,nextMarkup){ReactComponentEnvironment.replaceNodeWithMarkupByID(prevComponentID,nextMarkup)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance;var renderedComponent=inst.render();if("production"!==process.env.NODE_ENV){if(typeof renderedComponent==="undefined"&&inst.render._isMockFunction){renderedComponent=null}}return renderedComponent},_renderValidatedComponent:function(childContext){var renderedComponent;var previousContext=ReactContext.current;ReactContext.current=this._mergeChildContext(this._currentElement._context,childContext);ReactCurrentOwner.current=this;try{renderedComponent=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactContext.current=previousContext;ReactCurrentOwner.current=null}"production"!==process.env.NODE_ENV?invariant(renderedComponent===null||renderedComponent===false||ReactElement.isValidElement(renderedComponent),"%s.render(): A valid ReactComponent must be returned. You may have "+"returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):invariant(renderedComponent===null||renderedComponent===false||ReactElement.isValidElement(renderedComponent));return renderedComponent},attachRef:function(ref,component){var inst=this.getPublicInstance();var refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=component.getPublicInstance()},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type;var constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent}).call(this,require("_process"))},{"./Object.assign":446,"./ReactComponentEnvironment":458,"./ReactContext":461,"./ReactCurrentOwner":462,"./ReactElement":480,"./ReactElementValidator":481,"./ReactInstanceMap":490,"./ReactLifeCycle":491,"./ReactNativeComponent":497,"./ReactPerf":499,"./ReactPropTypeLocationNames":501,"./ReactPropTypeLocations":502,"./ReactReconciler":506,"./ReactUpdates":517,"./emptyObject":548,"./invariant":568,"./shouldUpdateReactComponent":585,"./warning":589,_process:35}],461:[function(require,module,exports){(function(process){"use strict";var assign=require("./Object.assign");var emptyObject=require("./emptyObject");var warning=require("./warning");var didWarn=false;var ReactContext={current:emptyObject,withContext:function(newContext,scopedCallback){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(didWarn,"withContext is deprecated and will be removed in a future version. "+"Use a wrapper component with getChildContext instead."):null;didWarn=true}var result;var previousContext=ReactContext.current;ReactContext.current=assign({},previousContext,newContext);try{result=scopedCallback()}finally{ReactContext.current=previousContext}return result}};module.exports=ReactContext}).call(this,require("_process"))},{"./Object.assign":446,"./emptyObject":548,"./warning":589,_process:35}],462:[function(require,module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],463:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactElementValidator=require("./ReactElementValidator");var mapObject=require("./mapObject");function createDOMFactory(tag){if("production"!==process.env.NODE_ENV){return ReactElementValidator.createFactory(tag)}return ReactElement.createFactory(tag)}var ReactDOM=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOM}).call(this,require("_process"))},{"./ReactElement":480,"./ReactElementValidator":481,"./mapObject":576,_process:35}],464:[function(require,module,exports){"use strict";var AutoFocusMixin=require("./AutoFocusMixin");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var keyMirror=require("./keyMirror");var button=ReactElement.createFactory("button");var mouseListenerNames=keyMirror({onClick:true,onDoubleClick:true,onMouseDown:true,onMouseMove:true,onMouseUp:true,onClickCapture:true,onDoubleClickCapture:true,onMouseDownCapture:true,onMouseMoveCapture:true,onMouseUpCapture:true});var ReactDOMButton=ReactClass.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[AutoFocusMixin,ReactBrowserComponentMixin],render:function(){var props={};for(var key in this.props){if(this.props.hasOwnProperty(key)&&(!this.props.disabled||!mouseListenerNames[key])){props[key]=this.props[key]}}return button(props,this.props.children)}});module.exports=ReactDOMButton},{"./AutoFocusMixin":419,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480,"./keyMirror":574}],465:[function(require,module,exports){(function(process){"use strict";var CSSPropertyOperations=require("./CSSPropertyOperations");var DOMProperty=require("./DOMProperty");var DOMPropertyOperations=require("./DOMPropertyOperations");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactMount=require("./ReactMount");var ReactMultiChild=require("./ReactMultiChild");var ReactPerf=require("./ReactPerf");var assign=require("./Object.assign");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("./invariant");var isEventSupported=require("./isEventSupported");var keyOf=require("./keyOf");var warning=require("./warning");var deleteListener=ReactBrowserEventEmitter.deleteListener;var listenTo=ReactBrowserEventEmitter.listenTo;

var registrationNameModules=ReactBrowserEventEmitter.registrationNameModules;var CONTENT_TYPES={string:true,number:true};var STYLE=keyOf({style:null});var ELEMENT_NODE_TYPE=1;var BackendIDOperations=null;function assertValidProps(props){if(!props){return}if(props.dangerouslySetInnerHTML!=null){"production"!==process.env.NODE_ENV?invariant(props.children==null,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):invariant(props.children==null);"production"!==process.env.NODE_ENV?invariant(typeof props.dangerouslySetInnerHTML==="object"&&"__html"in props.dangerouslySetInnerHTML,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. "+"Please visit https://fb.me/react-invariant-dangerously-set-inner-html "+"for more information."):invariant(typeof props.dangerouslySetInnerHTML==="object"&&"__html"in props.dangerouslySetInnerHTML)}if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(props.innerHTML==null,"Directly setting property `innerHTML` is not permitted. "+"For more information, lookup documentation on `dangerouslySetInnerHTML`."):null;"production"!==process.env.NODE_ENV?warning(!props.contentEditable||props.children==null,"A component is `contentEditable` and contains `children` managed by "+"React. It is now your responsibility to guarantee that none of "+"those nodes are unexpectedly modified or duplicated. This is "+"probably not intentional."):null}"production"!==process.env.NODE_ENV?invariant(props.style==null||typeof props.style==="object","The `style` prop expects a mapping from style properties to values, "+"not a string. For example, style={{marginRight: spacing + 'em'}} when "+"using JSX."):invariant(props.style==null||typeof props.style==="object")}function putListener(id,registrationName,listener,transaction){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(registrationName!=="onScroll"||isEventSupported("scroll",true),"This browser doesn't support the `onScroll` event"):null}var container=ReactMount.findReactContainerForID(id);if(container){var doc=container.nodeType===ELEMENT_NODE_TYPE?container.ownerDocument:container;listenTo(registrationName,doc)}transaction.getPutListenerQueue().enqueuePutListener(id,registrationName,listener)}var omittedCloseTags={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/;var validatedTagCache={};var hasOwnProperty={}.hasOwnProperty;function validateDangerousTag(tag){if(!hasOwnProperty.call(validatedTagCache,tag)){"production"!==process.env.NODE_ENV?invariant(VALID_TAG_REGEX.test(tag),"Invalid tag: %s",tag):invariant(VALID_TAG_REGEX.test(tag));validatedTagCache[tag]=true}}function ReactDOMComponent(tag){validateDangerousTag(tag);this._tag=tag;this._renderedChildren=null;this._previousStyleCopy=null;this._rootNodeID=null}ReactDOMComponent.displayName="ReactDOMComponent";ReactDOMComponent.Mixin={construct:function(element){this._currentElement=element},mountComponent:function(rootID,transaction,context){this._rootNodeID=rootID;assertValidProps(this._currentElement.props);var closeTag=omittedCloseTags[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(transaction)+this._createContentMarkup(transaction,context)+closeTag},_createOpenTagMarkupAndPutListeners:function(transaction){var props=this._currentElement.props;var ret="<"+this._tag;for(var propKey in props){if(!props.hasOwnProperty(propKey)){continue}var propValue=props[propKey];if(propValue==null){continue}if(registrationNameModules.hasOwnProperty(propKey)){putListener(this._rootNodeID,propKey,propValue,transaction)}else{if(propKey===STYLE){if(propValue){propValue=this._previousStyleCopy=assign({},props.style)}propValue=CSSPropertyOperations.createMarkupForStyles(propValue)}var markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue);if(markup){ret+=" "+markup}}}if(transaction.renderToStaticMarkup){return ret+">"}var markupForID=DOMPropertyOperations.createMarkupForID(this._rootNodeID);return ret+" "+markupForID+">"},_createContentMarkup:function(transaction,context){var prefix="";if(this._tag==="listing"||this._tag==="pre"||this._tag==="textarea"){prefix="\n"}var props=this._currentElement.props;var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){return prefix+innerHTML.__html}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){return prefix+escapeTextContentForBrowser(contentToUse)}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);return prefix+mountImages.join("")}}return prefix},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement;this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){assertValidProps(this._currentElement.props);this._updateDOMProperties(prevElement.props,transaction);this._updateDOMChildren(prevElement.props,transaction,context)},_updateDOMProperties:function(lastProps,transaction){var nextProps=this._currentElement.props;var propKey;var styleName;var styleUpdates;for(propKey in lastProps){if(nextProps.hasOwnProperty(propKey)||!lastProps.hasOwnProperty(propKey)){continue}if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle){if(lastStyle.hasOwnProperty(styleName)){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}this._previousStyleCopy=null}else if(registrationNameModules.hasOwnProperty(propKey)){deleteListener(this._rootNodeID,propKey)}else if(DOMProperty.isStandardName[propKey]||DOMProperty.isCustomAttribute(propKey)){BackendIDOperations.deletePropertyByID(this._rootNodeID,propKey)}}for(propKey in nextProps){var nextProp=nextProps[propKey];var lastProp=propKey===STYLE?this._previousStyleCopy:lastProps[propKey];if(!nextProps.hasOwnProperty(propKey)||nextProp===lastProp){continue}if(propKey===STYLE){if(nextProp){nextProp=this._previousStyleCopy=assign({},nextProp)}else{this._previousStyleCopy=null}if(lastProp){for(styleName in lastProp){if(lastProp.hasOwnProperty(styleName)&&(!nextProp||!nextProp.hasOwnProperty(styleName))){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}for(styleName in nextProp){if(nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]){styleUpdates=styleUpdates||{};styleUpdates[styleName]=nextProp[styleName]}}}else{styleUpdates=nextProp}}else if(registrationNameModules.hasOwnProperty(propKey)){putListener(this._rootNodeID,propKey,nextProp,transaction)}else if(DOMProperty.isStandardName[propKey]||DOMProperty.isCustomAttribute(propKey)){BackendIDOperations.updatePropertyByID(this._rootNodeID,propKey,nextProp)}}if(styleUpdates){BackendIDOperations.updateStylesByID(this._rootNodeID,styleUpdates)}},_updateDOMChildren:function(lastProps,transaction,context){var nextProps=this._currentElement.props;var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null;var nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null;var lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html;var nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html;var lastChildren=lastContent!=null?null:lastProps.children;var nextChildren=nextContent!=null?null:nextProps.children;var lastHasContentOrHtml=lastContent!=null||lastHtml!=null;var nextHasContentOrHtml=nextContent!=null||nextHtml!=null;if(lastChildren!=null&&nextChildren==null){this.updateChildren(null,transaction,context)}else if(lastHasContentOrHtml&&!nextHasContentOrHtml){this.updateTextContent("")}if(nextContent!=null){if(lastContent!==nextContent){this.updateTextContent(""+nextContent)}}else if(nextHtml!=null){if(lastHtml!==nextHtml){BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,nextHtml)}}else if(nextChildren!=null){this.updateChildren(nextChildren,transaction,context)}},unmountComponent:function(){this.unmountChildren();ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID);ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID);this._rootNodeID=null}};ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"});assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin);ReactDOMComponent.injection={injectIDOperations:function(IDOperations){ReactDOMComponent.BackendIDOperations=BackendIDOperations=IDOperations}};module.exports=ReactDOMComponent}).call(this,require("_process"))},{"./CSSPropertyOperations":423,"./DOMProperty":428,"./DOMPropertyOperations":429,"./Object.assign":446,"./ReactBrowserEventEmitter":450,"./ReactComponentBrowserEnvironment":457,"./ReactMount":494,"./ReactMultiChild":495,"./ReactPerf":499,"./escapeTextContentForBrowser":549,"./invariant":568,"./isEventSupported":569,"./keyOf":575,"./warning":589,_process:35}],466:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var LocalEventTrapMixin=require("./LocalEventTrapMixin");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var form=ReactElement.createFactory("form");var ReactDOMForm=ReactClass.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[ReactBrowserComponentMixin,LocalEventTrapMixin],render:function(){return form(this.props)},componentDidMount:function(){this.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset");this.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit")}});module.exports=ReactDOMForm},{"./EventConstants":433,"./LocalEventTrapMixin":444,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480}],467:[function(require,module,exports){(function(process){"use strict";var CSSPropertyOperations=require("./CSSPropertyOperations");var DOMChildrenOperations=require("./DOMChildrenOperations");var DOMPropertyOperations=require("./DOMPropertyOperations");var ReactMount=require("./ReactMount");var ReactPerf=require("./ReactPerf");var invariant=require("./invariant");var setInnerHTML=require("./setInnerHTML");var INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."};var ReactDOMIDOperations={updatePropertyByID:function(id,name,value){var node=ReactMount.getNode(id);"production"!==process.env.NODE_ENV?invariant(!INVALID_PROPERTY_ERRORS.hasOwnProperty(name),"updatePropertyByID(...): %s",INVALID_PROPERTY_ERRORS[name]):invariant(!INVALID_PROPERTY_ERRORS.hasOwnProperty(name));if(value!=null){DOMPropertyOperations.setValueForProperty(node,name,value)}else{DOMPropertyOperations.deleteValueForProperty(node,name)}},deletePropertyByID:function(id,name,value){var node=ReactMount.getNode(id);"production"!==process.env.NODE_ENV?invariant(!INVALID_PROPERTY_ERRORS.hasOwnProperty(name),"updatePropertyByID(...): %s",INVALID_PROPERTY_ERRORS[name]):invariant(!INVALID_PROPERTY_ERRORS.hasOwnProperty(name));DOMPropertyOperations.deleteValueForProperty(node,name,value)},updateStylesByID:function(id,styles){var node=ReactMount.getNode(id);CSSPropertyOperations.setValueForStyles(node,styles)},updateInnerHTMLByID:function(id,html){var node=ReactMount.getNode(id);setInnerHTML(node,html)},updateTextContentByID:function(id,content){var node=ReactMount.getNode(id);DOMChildrenOperations.updateTextContent(node,content)},dangerouslyReplaceNodeWithMarkupByID:function(id,markup){var node=ReactMount.getNode(id);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(node,markup)},dangerouslyProcessChildrenUpdates:function(updates,markup){for(var i=0;i<updates.length;i++){updates[i].parentNode=ReactMount.getNode(updates[i].parentID)}DOMChildrenOperations.processUpdates(updates,markup)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"});module.exports=ReactDOMIDOperations}).call(this,require("_process"))},{"./CSSPropertyOperations":423,"./DOMChildrenOperations":427,"./DOMPropertyOperations":429,"./ReactMount":494,"./ReactPerf":499,"./invariant":568,"./setInnerHTML":582,_process:35}],468:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var LocalEventTrapMixin=require("./LocalEventTrapMixin");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var iframe=ReactElement.createFactory("iframe");var ReactDOMIframe=ReactClass.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[ReactBrowserComponentMixin,LocalEventTrapMixin],render:function(){return iframe(this.props)},componentDidMount:function(){this.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load")}});module.exports=ReactDOMIframe},{"./EventConstants":433,"./LocalEventTrapMixin":444,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480}],469:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var LocalEventTrapMixin=require("./LocalEventTrapMixin");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var img=ReactElement.createFactory("img");var ReactDOMImg=ReactClass.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[ReactBrowserComponentMixin,LocalEventTrapMixin],render:function(){return img(this.props)},componentDidMount:function(){this.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load");this.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error")}});module.exports=ReactDOMImg},{"./EventConstants":433,"./LocalEventTrapMixin":444,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480}],470:[function(require,module,exports){(function(process){"use strict";var AutoFocusMixin=require("./AutoFocusMixin");var DOMPropertyOperations=require("./DOMPropertyOperations");var LinkedValueUtils=require("./LinkedValueUtils");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var ReactMount=require("./ReactMount");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var invariant=require("./invariant");var input=ReactElement.createFactory("input");var instancesByReactID={};function forceUpdateIfMounted(){if(this.isMounted()){this.forceUpdate()}}var ReactDOMInput=ReactClass.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[AutoFocusMixin,LinkedValueUtils.Mixin,ReactBrowserComponentMixin],getInitialState:function(){var defaultValue=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||false,initialValue:defaultValue!=null?defaultValue:null}},render:function(){var props=assign({},this.props);props.defaultChecked=null;props.defaultValue=null;var value=LinkedValueUtils.getValue(this);props.value=value!=null?value:this.state.initialValue;var checked=LinkedValueUtils.getChecked(this);props.checked=checked!=null?checked:this.state.initialChecked;props.onChange=this._handleChange;return input(props,this.props.children)},componentDidMount:function(){var id=ReactMount.getID(this.getDOMNode());instancesByReactID[id]=this},componentWillUnmount:function(){var rootNode=this.getDOMNode();var id=ReactMount.getID(rootNode);delete instancesByReactID[id]},componentDidUpdate:function(prevProps,prevState,prevContext){var rootNode=this.getDOMNode();if(this.props.checked!=null){DOMPropertyOperations.setValueForProperty(rootNode,"checked",this.props.checked||false)}var value=LinkedValueUtils.getValue(this);if(value!=null){DOMPropertyOperations.setValueForProperty(rootNode,"value",""+value)}},_handleChange:function(event){var returnValue;var onChange=LinkedValueUtils.getOnChange(this);if(onChange){returnValue=onChange.call(this,event)}ReactUpdates.asap(forceUpdateIfMounted,this);var name=this.props.name;if(this.props.type==="radio"&&name!=null){var rootNode=this.getDOMNode();var queryRoot=rootNode;while(queryRoot.parentNode){queryRoot=queryRoot.parentNode}var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]');for(var i=0,groupLen=group.length;i<groupLen;i++){var otherNode=group[i];if(otherNode===rootNode||otherNode.form!==rootNode.form){continue}var otherID=ReactMount.getID(otherNode);"production"!==process.env.NODE_ENV?invariant(otherID,"ReactDOMInput: Mixing React and non-React radio inputs with the "+"same `name` is not supported."):invariant(otherID);var otherInstance=instancesByReactID[otherID];"production"!==process.env.NODE_ENV?invariant(otherInstance,"ReactDOMInput: Unknown radio button ID %s.",otherID):invariant(otherInstance);ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}return returnValue}});module.exports=ReactDOMInput}).call(this,require("_process"))},{"./AutoFocusMixin":419,"./DOMPropertyOperations":429,"./LinkedValueUtils":443,"./Object.assign":446,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480,"./ReactMount":494,"./ReactUpdates":517,"./invariant":568,_process:35}],471:[function(require,module,exports){(function(process){"use strict";var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var warning=require("./warning");var option=ReactElement.createFactory("option");var ReactDOMOption=ReactClass.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[ReactBrowserComponentMixin],componentWillMount:function(){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(this.props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of "+"setting `selected` on <option>."):null}},render:function(){return option(this.props,this.props.children)}});module.exports=ReactDOMOption}).call(this,require("_process"))},{"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480,"./warning":589,_process:35}],472:[function(require,module,exports){"use strict";var AutoFocusMixin=require("./AutoFocusMixin");var LinkedValueUtils=require("./LinkedValueUtils");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var select=ReactElement.createFactory("select");function updateOptionsIfPendingUpdateAndMounted(){if(this._pendingUpdate){this._pendingUpdate=false;var value=LinkedValueUtils.getValue(this);if(value!=null&&this.isMounted()){updateOptions(this,value)}}}function selectValueType(props,propName,componentName){if(props[propName]==null){return null}if(props.multiple){if(!Array.isArray(props[propName])){return new Error("The `"+propName+"` prop supplied to <select> must be an array if "+"`multiple` is true.")}}else{if(Array.isArray(props[propName])){return new Error("The `"+propName+"` prop supplied to <select> must be a scalar "+"value if `multiple` is false.")}}}function updateOptions(component,propValue){var selectedValue,i,l;var options=component.getDOMNode().options;if(component.props.multiple){selectedValue={};for(i=0,l=propValue.length;i<l;i++){selectedValue[""+propValue[i]]=true}for(i=0,l=options.length;i<l;i++){var selected=selectedValue.hasOwnProperty(options[i].value);if(options[i].selected!==selected){options[i].selected=selected}}}else{selectedValue=""+propValue;for(i=0,l=options.length;i<l;i++){if(options[i].value===selectedValue){options[i].selected=true;return}}if(options.length){options[0].selected=true}}}var ReactDOMSelect=ReactClass.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[AutoFocusMixin,LinkedValueUtils.Mixin,ReactBrowserComponentMixin],propTypes:{defaultValue:selectValueType,value:selectValueType},render:function(){var props=assign({},this.props);props.onChange=this._handleChange;props.value=null;return select(props,this.props.children)},componentWillMount:function(){this._pendingUpdate=false},componentDidMount:function(){var value=LinkedValueUtils.getValue(this);if(value!=null){updateOptions(this,value)}else if(this.props.defaultValue!=null){updateOptions(this,this.props.defaultValue)}},componentDidUpdate:function(prevProps){var value=LinkedValueUtils.getValue(this);if(value!=null){this._pendingUpdate=false;updateOptions(this,value)}else if(!prevProps.multiple!==!this.props.multiple){if(this.props.defaultValue!=null){updateOptions(this,this.props.defaultValue)}else{updateOptions(this,this.props.multiple?[]:"")}}},_handleChange:function(event){var returnValue;var onChange=LinkedValueUtils.getOnChange(this);if(onChange){returnValue=onChange.call(this,event)}this._pendingUpdate=true;ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this);return returnValue}});module.exports=ReactDOMSelect},{"./AutoFocusMixin":419,"./LinkedValueUtils":443,"./Object.assign":446,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480,"./ReactUpdates":517}],473:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var getNodeForCharacterOffset=require("./getNodeForCharacterOffset");var getTextContentAccessor=require("./getTextContentAccessor");function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection;var selectedRange=selection.createRange();var selectedLength=selectedRange.text.length;var fromStart=selectedRange.duplicate();fromStart.moveToElementText(node);fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length;var endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||selection.rangeCount===0){return null}var anchorNode=selection.anchorNode;var anchorOffset=selection.anchorOffset;var focusNode=selection.focusNode;var focusOffset=selection.focusOffset;var currentRange=selection.getRangeAt(0);var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset);var rangeLength=isSelectionCollapsed?0:currentRange.toString().length;var tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node);tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset);var start=isTempRangeCollapsed?0:tempRange.toString().length;var end=start+rangeLength;var detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset);detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var range=document.selection.createRange().duplicate();var start,end;if(typeof offsets.end==="undefined"){start=offsets.start;end=start}else if(offsets.start>offsets.end){start=offsets.end;end=offsets.start}else{start=offsets.start;end=offsets.end}range.moveToElementText(node);range.moveStart("character",start);range.setEndPoint("EndToStart",range);range.moveEnd("character",end-start);range.select()}function setModernOffsets(node,offsets){if(!window.getSelection){return}var selection=window.getSelection();var length=node[getTextContentAccessor()].length;var start=Math.min(offsets.start,length);var end=typeof offsets.end==="undefined"?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start;start=temp}var startMarker=getNodeForCharacterOffset(node,start);var endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset);selection.removeAllRanges();if(start>end){selection.addRange(range);selection.extend(endMarker.node,endMarker.offset)}else{range.setEnd(endMarker.node,endMarker.offset);selection.addRange(range)}}}var useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window);var ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},{"./ExecutionEnvironment":439,"./getNodeForCharacterOffset":561,"./getTextContentAccessor":563}],474:[function(require,module,exports){"use strict";var DOMPropertyOperations=require("./DOMPropertyOperations");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactDOMComponent=require("./ReactDOMComponent");var assign=require("./Object.assign");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var ReactDOMTextComponent=function(props){};assign(ReactDOMTextComponent.prototype,{construct:function(text){this._currentElement=text;this._stringText=""+text;this._rootNodeID=null;this._mountIndex=0},mountComponent:function(rootID,transaction,context){this._rootNodeID=rootID;var escapedText=escapeTextContentForBrowser(this._stringText);if(transaction.renderToStaticMarkup){return escapedText}return"<span "+DOMPropertyOperations.createMarkupForID(rootID)+">"+escapedText+"</span>"},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;ReactDOMComponent.BackendIDOperations.updateTextContentByID(this._rootNodeID,nextStringText)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}});module.exports=ReactDOMTextComponent},{"./DOMPropertyOperations":429,"./Object.assign":446,"./ReactComponentBrowserEnvironment":457,"./ReactDOMComponent":465,"./escapeTextContentForBrowser":549}],475:[function(require,module,exports){(function(process){"use strict";var AutoFocusMixin=require("./AutoFocusMixin");var DOMPropertyOperations=require("./DOMPropertyOperations");var LinkedValueUtils=require("./LinkedValueUtils");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var invariant=require("./invariant");var warning=require("./warning");var textarea=ReactElement.createFactory("textarea");function forceUpdateIfMounted(){if(this.isMounted()){this.forceUpdate()}}var ReactDOMTextarea=ReactClass.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[AutoFocusMixin,LinkedValueUtils.Mixin,ReactBrowserComponentMixin],getInitialState:function(){var defaultValue=this.props.defaultValue;var children=this.props.children;if(children!=null){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(false,"Use the `defaultValue` or `value` props instead of setting "+"children on <textarea>."):null}"production"!==process.env.NODE_ENV?invariant(defaultValue==null,"If you supply `defaultValue` on a <textarea>, do not pass children."):invariant(defaultValue==null);if(Array.isArray(children)){"production"!==process.env.NODE_ENV?invariant(children.length<=1,"<textarea> can only have at most one child."):invariant(children.length<=1);children=children[0]}defaultValue=""+children}if(defaultValue==null){defaultValue=""}var value=LinkedValueUtils.getValue(this);return{initialValue:""+(value!=null?value:defaultValue)}},render:function(){var props=assign({},this.props);"production"!==process.env.NODE_ENV?invariant(props.dangerouslySetInnerHTML==null,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):invariant(props.dangerouslySetInnerHTML==null);props.defaultValue=null;props.value=null;props.onChange=this._handleChange;return textarea(props,this.state.initialValue)},componentDidUpdate:function(prevProps,prevState,prevContext){var value=LinkedValueUtils.getValue(this);if(value!=null){var rootNode=this.getDOMNode();DOMPropertyOperations.setValueForProperty(rootNode,"value",""+value)}},_handleChange:function(event){var returnValue;var onChange=LinkedValueUtils.getOnChange(this);if(onChange){returnValue=onChange.call(this,event)}ReactUpdates.asap(forceUpdateIfMounted,this);return returnValue}});module.exports=ReactDOMTextarea}).call(this,require("_process"))},{"./AutoFocusMixin":419,"./DOMPropertyOperations":429,"./LinkedValueUtils":443,"./Object.assign":446,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactElement":480,"./ReactUpdates":517,"./invariant":568,"./warning":589,_process:35}],476:[function(require,module,exports){"use strict";var ReactUpdates=require("./ReactUpdates");var Transaction=require("./Transaction");var assign=require("./Object.assign");var emptyFunction=require("./emptyFunction");var RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=false}};var FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)};var TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction;var ReactDefaultBatchingStrategy={isBatchingUpdates:false,batchedUpdates:function(callback,a,b,c,d){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=true;if(alreadyBatchingUpdates){callback(a,b,c,d)}else{transaction.perform(callback,null,a,b,c,d)}}};module.exports=ReactDefaultBatchingStrategy},{"./Object.assign":446,"./ReactUpdates":517,"./Transaction":534,"./emptyFunction":547}],477:[function(require,module,exports){(function(process){"use strict";var BeforeInputEventPlugin=require("./BeforeInputEventPlugin");var ChangeEventPlugin=require("./ChangeEventPlugin");var ClientReactRootIndex=require("./ClientReactRootIndex");var DefaultEventPluginOrder=require("./DefaultEventPluginOrder");var EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin");var ExecutionEnvironment=require("./ExecutionEnvironment");var HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig");var MobileSafariClickEventPlugin=require("./MobileSafariClickEventPlugin");var ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin");var ReactClass=require("./ReactClass");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy");var ReactDOMComponent=require("./ReactDOMComponent");var ReactDOMButton=require("./ReactDOMButton");var ReactDOMForm=require("./ReactDOMForm");var ReactDOMImg=require("./ReactDOMImg");var ReactDOMIDOperations=require("./ReactDOMIDOperations");var ReactDOMIframe=require("./ReactDOMIframe");var ReactDOMInput=require("./ReactDOMInput");var ReactDOMOption=require("./ReactDOMOption");var ReactDOMSelect=require("./ReactDOMSelect");var ReactDOMTextarea=require("./ReactDOMTextarea");

var ReactDOMTextComponent=require("./ReactDOMTextComponent");var ReactElement=require("./ReactElement");var ReactEventListener=require("./ReactEventListener");var ReactInjection=require("./ReactInjection");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactMount=require("./ReactMount");var ReactReconcileTransaction=require("./ReactReconcileTransaction");var SelectEventPlugin=require("./SelectEventPlugin");var ServerReactRootIndex=require("./ServerReactRootIndex");var SimpleEventPlugin=require("./SimpleEventPlugin");var SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig");var createFullPageComponent=require("./createFullPageComponent");function autoGenerateWrapperClass(type){return ReactClass.createClass({tagName:type.toUpperCase(),render:function(){return new ReactElement(type,null,null,null,null,this.props)}})}function inject(){ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener);ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder);ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles);ReactInjection.EventPluginHub.injectMount(ReactMount);ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,MobileSafariClickEventPlugin:MobileSafariClickEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin});ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent);ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent);ReactInjection.NativeComponent.injectAutoWrapper(autoGenerateWrapperClass);ReactInjection.Class.injectMixin(ReactBrowserComponentMixin);ReactInjection.NativeComponent.injectComponentClasses({button:ReactDOMButton,form:ReactDOMForm,iframe:ReactDOMIframe,img:ReactDOMImg,input:ReactDOMInput,option:ReactDOMOption,select:ReactDOMSelect,textarea:ReactDOMTextarea,html:createFullPageComponent("html"),head:createFullPageComponent("head"),body:createFullPageComponent("body")});ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig);ReactInjection.EmptyComponent.injectEmptyComponent("noscript");ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction);ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy);ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex);ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment);ReactInjection.DOMComponent.injectIDOperations(ReactDOMIDOperations);if("production"!==process.env.NODE_ENV){var url=ExecutionEnvironment.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(url)){var ReactDefaultPerf=require("./ReactDefaultPerf");ReactDefaultPerf.start()}}}module.exports={inject:inject}}).call(this,require("_process"))},{"./BeforeInputEventPlugin":420,"./ChangeEventPlugin":425,"./ClientReactRootIndex":426,"./DefaultEventPluginOrder":431,"./EnterLeaveEventPlugin":432,"./ExecutionEnvironment":439,"./HTMLDOMPropertyConfig":441,"./MobileSafariClickEventPlugin":445,"./ReactBrowserComponentMixin":449,"./ReactClass":455,"./ReactComponentBrowserEnvironment":457,"./ReactDOMButton":464,"./ReactDOMComponent":465,"./ReactDOMForm":466,"./ReactDOMIDOperations":467,"./ReactDOMIframe":468,"./ReactDOMImg":469,"./ReactDOMInput":470,"./ReactDOMOption":471,"./ReactDOMSelect":472,"./ReactDOMTextComponent":474,"./ReactDOMTextarea":475,"./ReactDefaultBatchingStrategy":476,"./ReactDefaultPerf":478,"./ReactElement":480,"./ReactEventListener":485,"./ReactInjection":487,"./ReactInstanceHandles":489,"./ReactMount":494,"./ReactReconcileTransaction":505,"./SVGDOMPropertyConfig":519,"./SelectEventPlugin":520,"./ServerReactRootIndex":521,"./SimpleEventPlugin":522,"./createFullPageComponent":543,_process:35}],478:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var ReactDefaultPerfAnalysis=require("./ReactDefaultPerfAnalysis");var ReactMount=require("./ReactMount");var ReactPerf=require("./ReactPerf");var performanceNow=require("./performanceNow");function roundFloat(val){return Math.floor(val*100)/100}function addValue(obj,key,val){obj[key]=(obj[key]||0)+val}var ReactDefaultPerf={_allMeasurements:[],_mountStack:[0],_injected:false,start:function(){if(!ReactDefaultPerf._injected){ReactPerf.injection.injectMeasure(ReactDefaultPerf.measure)}ReactDefaultPerf._allMeasurements.length=0;ReactPerf.enableMeasure=true},stop:function(){ReactPerf.enableMeasure=false},getLastMeasurements:function(){return ReactDefaultPerf._allMeasurements},printExclusive:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getExclusiveSummary(measurements);console.table(summary.map(function(item){return{"Component class name":item.componentName,"Total inclusive time (ms)":roundFloat(item.inclusive),"Exclusive mount time (ms)":roundFloat(item.exclusive),"Exclusive render time (ms)":roundFloat(item.render),"Mount time per instance (ms)":roundFloat(item.exclusive/item.count),"Render time per instance (ms)":roundFloat(item.render/item.count),Instances:item.count}}))},printInclusive:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getInclusiveSummary(measurements);console.table(summary.map(function(item){return{"Owner > component":item.componentName,"Inclusive time (ms)":roundFloat(item.time),Instances:item.count}}));console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(measurements){var summary=ReactDefaultPerfAnalysis.getInclusiveSummary(measurements,true);return summary.map(function(item){return{"Owner > component":item.componentName,"Wasted time (ms)":item.time,Instances:item.count}})},printWasted:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;console.table(ReactDefaultPerf.getMeasurementsSummaryMap(measurements));console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms")},printDOM:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getDOMSummary(measurements);console.table(summary.map(function(item){var result={};result[DOMProperty.ID_ATTRIBUTE_NAME]=item.id;result["type"]=item.type;result["args"]=JSON.stringify(item.args);return result}));console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms")},_recordWrite:function(id,fnName,totalTime,args){var writes=ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1].writes;writes[id]=writes[id]||[];writes[id].push({type:fnName,time:totalTime,args:args})},measure:function(moduleName,fnName,func){return function(){for(var args=[],$__0=0,$__1=arguments.length;$__0<$__1;$__0++)args.push(arguments[$__0]);var totalTime;var rv;var start;if(fnName==="_renderNewRootComponent"||fnName==="flushBatchedUpdates"){ReactDefaultPerf._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0});start=performanceNow();rv=func.apply(this,args);ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1].totalTime=performanceNow()-start;return rv}else if(fnName==="_mountImageIntoNode"||moduleName==="ReactDOMIDOperations"){start=performanceNow();rv=func.apply(this,args);totalTime=performanceNow()-start;if(fnName==="_mountImageIntoNode"){var mountID=ReactMount.getID(args[1]);ReactDefaultPerf._recordWrite(mountID,fnName,totalTime,args[0])}else if(fnName==="dangerouslyProcessChildrenUpdates"){args[0].forEach(function(update){var writeArgs={};if(update.fromIndex!==null){writeArgs.fromIndex=update.fromIndex}if(update.toIndex!==null){writeArgs.toIndex=update.toIndex}if(update.textContent!==null){writeArgs.textContent=update.textContent}if(update.markupIndex!==null){writeArgs.markup=args[1][update.markupIndex]}ReactDefaultPerf._recordWrite(update.parentID,update.type,totalTime,writeArgs)})}else{ReactDefaultPerf._recordWrite(args[0],fnName,totalTime,Array.prototype.slice.call(args,1))}return rv}else if(moduleName==="ReactCompositeComponent"&&(fnName==="mountComponent"||fnName==="updateComponent"||fnName==="_renderValidatedComponent")){if(typeof this._currentElement.type==="string"){return func.apply(this,args)}var rootNodeID=fnName==="mountComponent"?args[0]:this._rootNodeID;var isRender=fnName==="_renderValidatedComponent";var isMount=fnName==="mountComponent";var mountStack=ReactDefaultPerf._mountStack;var entry=ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1];if(isRender){addValue(entry.counts,rootNodeID,1)}else if(isMount){mountStack.push(0)}start=performanceNow();rv=func.apply(this,args);totalTime=performanceNow()-start;if(isRender){addValue(entry.render,rootNodeID,totalTime)}else if(isMount){var subMountTime=mountStack.pop();mountStack[mountStack.length-1]+=totalTime;addValue(entry.exclusive,rootNodeID,totalTime-subMountTime);addValue(entry.inclusive,rootNodeID,totalTime)}else{addValue(entry.inclusive,rootNodeID,totalTime)}entry.displayNames[rootNodeID]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"};return rv}else{return func.apply(this,args)}}}};module.exports=ReactDefaultPerf},{"./DOMProperty":428,"./ReactDefaultPerfAnalysis":479,"./ReactMount":494,"./ReactPerf":499,"./performanceNow":580}],479:[function(require,module,exports){var assign=require("./Object.assign");var DONT_CARE_THRESHOLD=1.2;var DOM_OPERATION_TYPES={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"};function getTotalTime(measurements){var totalTime=0;for(var i=0;i<measurements.length;i++){var measurement=measurements[i];totalTime+=measurement.totalTime}return totalTime}function getDOMSummary(measurements){var items=[];for(var i=0;i<measurements.length;i++){var measurement=measurements[i];var id;for(id in measurement.writes){measurement.writes[id].forEach(function(write){items.push({id:id,type:DOM_OPERATION_TYPES[write.type]||write.type,args:write.args})})}}return items}function getExclusiveSummary(measurements){var candidates={};var displayName;for(var i=0;i<measurements.length;i++){var measurement=measurements[i];var allIDs=assign({},measurement.exclusive,measurement.inclusive);for(var id in allIDs){displayName=measurement.displayNames[id].current;candidates[displayName]=candidates[displayName]||{componentName:displayName,inclusive:0,exclusive:0,render:0,count:0};if(measurement.render[id]){candidates[displayName].render+=measurement.render[id]}if(measurement.exclusive[id]){candidates[displayName].exclusive+=measurement.exclusive[id]}if(measurement.inclusive[id]){candidates[displayName].inclusive+=measurement.inclusive[id]}if(measurement.counts[id]){candidates[displayName].count+=measurement.counts[id]}}}var arr=[];for(displayName in candidates){if(candidates[displayName].exclusive>=DONT_CARE_THRESHOLD){arr.push(candidates[displayName])}}arr.sort(function(a,b){return b.exclusive-a.exclusive});return arr}function getInclusiveSummary(measurements,onlyClean){var candidates={};var inclusiveKey;for(var i=0;i<measurements.length;i++){var measurement=measurements[i];var allIDs=assign({},measurement.exclusive,measurement.inclusive);var cleanComponents;if(onlyClean){cleanComponents=getUnchangedComponents(measurement)}for(var id in allIDs){if(onlyClean&&!cleanComponents[id]){continue}var displayName=measurement.displayNames[id];inclusiveKey=displayName.owner+" > "+displayName.current;candidates[inclusiveKey]=candidates[inclusiveKey]||{componentName:inclusiveKey,time:0,count:0};if(measurement.inclusive[id]){candidates[inclusiveKey].time+=measurement.inclusive[id]}if(measurement.counts[id]){candidates[inclusiveKey].count+=measurement.counts[id]}}}var arr=[];for(inclusiveKey in candidates){if(candidates[inclusiveKey].time>=DONT_CARE_THRESHOLD){arr.push(candidates[inclusiveKey])}}arr.sort(function(a,b){return b.time-a.time});return arr}function getUnchangedComponents(measurement){var cleanComponents={};var dirtyLeafIDs=Object.keys(measurement.writes);var allIDs=assign({},measurement.exclusive,measurement.inclusive);for(var id in allIDs){var isDirty=false;for(var i=0;i<dirtyLeafIDs.length;i++){if(dirtyLeafIDs[i].indexOf(id)===0){isDirty=true;break}}if(!isDirty&&measurement.counts[id]>0){cleanComponents[id]=true}}return cleanComponents}var ReactDefaultPerfAnalysis={getExclusiveSummary:getExclusiveSummary,getInclusiveSummary:getInclusiveSummary,getDOMSummary:getDOMSummary,getTotalTime:getTotalTime};module.exports=ReactDefaultPerfAnalysis},{"./Object.assign":446}],480:[function(require,module,exports){(function(process){"use strict";var ReactContext=require("./ReactContext");var ReactCurrentOwner=require("./ReactCurrentOwner");var assign=require("./Object.assign");var warning=require("./warning");var RESERVED_PROPS={key:true,ref:true};function defineWarningProperty(object,key){Object.defineProperty(object,key,{configurable:false,enumerable:true,get:function(){if(!this._store){return null}return this._store[key]},set:function(value){"production"!==process.env.NODE_ENV?warning(false,"Don't set the %s property of the React element. Instead, "+"specify the correct value when initially creating the element.",key):null;this._store[key]=value}})}var useMutationMembrane=false;function defineMutationMembrane(prototype){try{var pseudoFrozenProperties={props:true};for(var key in pseudoFrozenProperties){defineWarningProperty(prototype,key)}useMutationMembrane=true}catch(x){}}var ReactElement=function(type,key,ref,owner,context,props){this.type=type;this.key=key;this.ref=ref;this._owner=owner;this._context=context;if("production"!==process.env.NODE_ENV){this._store={props:props,originalProps:assign({},props)};try{Object.defineProperty(this._store,"validated",{configurable:false,enumerable:false,writable:true})}catch(x){}this._store.validated=false;if(useMutationMembrane){Object.freeze(this);return}}this.props=props};ReactElement.prototype={_isReactElement:true};if("production"!==process.env.NODE_ENV){defineMutationMembrane(ReactElement.prototype)}ReactElement.createElement=function(type,config,children){var propName;var props={};var key=null;var ref=null;if(config!=null){ref=config.ref===undefined?null:config.ref;key=config.key===undefined?null:""+config.key;for(propName in config){if(config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){props[propName]=config[propName]}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps){if(typeof props[propName]==="undefined"){props[propName]=defaultProps[propName]}}}return new ReactElement(type,key,ref,ReactCurrentOwner.current,ReactContext.current,props)};ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);factory.type=type;return factory};ReactElement.cloneAndReplaceProps=function(oldElement,newProps){var newElement=new ReactElement(oldElement.type,oldElement.key,oldElement.ref,oldElement._owner,oldElement._context,newProps);if("production"!==process.env.NODE_ENV){newElement._store.validated=oldElement._store.validated}return newElement};ReactElement.cloneElement=function(element,config,children){var propName;var props=assign({},element.props);var key=element.key;var ref=element.ref;var owner=element._owner;if(config!=null){if(config.ref!==undefined){ref=config.ref;owner=ReactCurrentOwner.current}if(config.key!==undefined){key=""+config.key}for(propName in config){if(config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){props[propName]=config[propName]}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}props.children=childArray}return new ReactElement(element.type,key,ref,owner,element._context,props)};ReactElement.isValidElement=function(object){var isElement=!!(object&&object._isReactElement);return isElement};module.exports=ReactElement}).call(this,require("_process"))},{"./Object.assign":446,"./ReactContext":461,"./ReactCurrentOwner":462,"./warning":589,_process:35}],481:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactFragment=require("./ReactFragment");var ReactPropTypeLocations=require("./ReactPropTypeLocations");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactNativeComponent=require("./ReactNativeComponent");var getIteratorFn=require("./getIteratorFn");var invariant=require("./invariant");var warning=require("./warning");function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var ownerHasKeyUseWarning={};var loggedTypeFailures={};var NUMERIC_PROPERTY_REGEX=/^\d+$/;function getName(instance){var publicInstance=instance&&instance.getPublicInstance();if(!publicInstance){return undefined}var constructor=publicInstance.constructor;if(!constructor){return undefined}return constructor.displayName||constructor.name||undefined}function getCurrentOwnerDisplayName(){var current=ReactCurrentOwner.current;return current&&getName(current)||undefined}function validateExplicitKey(element,parentType){if(element._store.validated||element.key!=null){return}element._store.validated=true;warnAndMonitorForKeyUse('Each child in an array or iterator should have a unique "key" prop.',element,parentType)}function validatePropertyKey(name,element,parentType){if(!NUMERIC_PROPERTY_REGEX.test(name)){return}warnAndMonitorForKeyUse("Child objects should have non-numeric keys so ordering is preserved.",element,parentType)}function warnAndMonitorForKeyUse(message,element,parentType){var ownerName=getCurrentOwnerDisplayName();var parentName=typeof parentType==="string"?parentType:parentType.displayName||parentType.name;var useName=ownerName||parentName;var memoizer=ownerHasKeyUseWarning[message]||(ownerHasKeyUseWarning[message]={});if(memoizer.hasOwnProperty(useName)){return}memoizer[useName]=true;var parentOrOwnerAddendum=ownerName?" Check the render method of "+ownerName+".":parentName?" Check the React.render call using <"+parentName+">.":"";var childOwnerAddendum="";if(element&&element._owner&&element._owner!==ReactCurrentOwner.current){var childOwnerName=getName(element._owner);childOwnerAddendum=" It was passed a child from "+childOwnerName+"."}"production"!==process.env.NODE_ENV?warning(false,message+"%s%s See https://fb.me/react-warning-keys for more information.",parentOrOwnerAddendum,childOwnerAddendum):null}function validateChildKeys(node,parentType){if(Array.isArray(node)){for(var i=0;i<node.length;i++){var child=node[i];if(ReactElement.isValidElement(child)){validateExplicitKey(child,parentType)}}}else if(ReactElement.isValidElement(node)){node._store.validated=true}else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn){if(iteratorFn!==node.entries){var iterator=iteratorFn.call(node);var step;while(!(step=iterator.next()).done){if(ReactElement.isValidElement(step.value)){validateExplicitKey(step.value,parentType)}}}}else if(typeof node==="object"){var fragment=ReactFragment.extractIfFragment(node);for(var key in fragment){if(fragment.hasOwnProperty(key)){validatePropertyKey(key,fragment[key],parentType)}}}}}function checkPropTypes(componentName,propTypes,props,location){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error;try{"production"!==process.env.NODE_ENV?invariant(typeof propTypes[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],propName):invariant(typeof propTypes[propName]==="function");error=propTypes[propName](props,propName,componentName,location)}catch(ex){error=ex}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var addendum=getDeclarationErrorAddendum(this);"production"!==process.env.NODE_ENV?warning(false,"Failed propType: %s%s",error.message,addendum):null}}}}var warnedPropsMutations={};function warnForPropsMutation(propName,element){var type=element.type;var elementName=typeof type==="string"?type:type.displayName;var ownerName=element._owner?element._owner.getPublicInstance().constructor.displayName:null;var warningKey=propName+"|"+elementName+"|"+ownerName;if(warnedPropsMutations.hasOwnProperty(warningKey)){return}warnedPropsMutations[warningKey]=true;var elementInfo="";if(elementName){elementInfo=" <"+elementName+" />"}var ownerInfo="";if(ownerName){ownerInfo=" The element was created by "+ownerName+"."}"production"!==process.env.NODE_ENV?warning(false,"Don't set .props.%s of the React component%s. Instead, specify the "+"correct value when initially creating the element or use "+"React.cloneElement to make a new element with updated props.%s",propName,elementInfo,ownerInfo):null}function is(a,b){if(a!==a){return b!==b}if(a===0&&b===0){return 1/a===1/b}return a===b}function checkAndWarnForMutatedProps(element){if(!element._store){return}var originalProps=element._store.originalProps;var props=element.props;for(var propName in props){if(props.hasOwnProperty(propName)){if(!originalProps.hasOwnProperty(propName)||!is(originalProps[propName],props[propName])){warnForPropsMutation(propName,element);originalProps[propName]=props[propName]}}}}function validatePropTypes(element){if(element.type==null){return}var componentClass=ReactNativeComponent.getComponentClassForElement(element);var name=componentClass.displayName||componentClass.name;if(componentClass.propTypes){checkPropTypes(name,componentClass.propTypes,element.props,ReactPropTypeLocations.prop)}if(typeof componentClass.getDefaultProps==="function"){"production"!==process.env.NODE_ENV?warning(componentClass.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass "+"definitions. Use a static property named `defaultProps` instead."):null}}var ReactElementValidator={checkAndWarnForMutatedProps:checkAndWarnForMutatedProps,createElement:function(type,props,children){"production"!==process.env.NODE_ENV?warning(type!=null,"React.createElement: type should not be null or undefined. It should "+"be a string (for DOM elements) or a ReactClass (for composite "+"components)."):null;var element=ReactElement.createElement.apply(this,arguments);if(element==null){return element}for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],type)}validatePropTypes(element);return element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);validatedFactory.type=type;if("production"!==process.env.NODE_ENV){try{Object.defineProperty(validatedFactory,"type",{enumerable:false,get:function(){"production"!==process.env.NODE_ENV?warning(false,"Factory.type is deprecated. Access the class directly "+"before passing it to createFactory."):null;Object.defineProperty(this,"type",{value:type});return type}})}catch(x){}}return validatedFactory},cloneElement:function(element,props,children){var newElement=ReactElement.cloneElement.apply(this,arguments);for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],newElement.type)}validatePropTypes(newElement);return newElement}};module.exports=ReactElementValidator}).call(this,require("_process"))},{"./ReactCurrentOwner":462,"./ReactElement":480,"./ReactFragment":486,"./ReactNativeComponent":497,"./ReactPropTypeLocationNames":501,"./ReactPropTypeLocations":502,"./getIteratorFn":559,"./invariant":568,"./warning":589,_process:35}],482:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactInstanceMap=require("./ReactInstanceMap");var invariant=require("./invariant");var component;var nullComponentIDsRegistry={};var ReactEmptyComponentInjection={injectEmptyComponent:function(emptyComponent){component=ReactElement.createFactory(emptyComponent)}};var ReactEmptyComponentType=function(){};ReactEmptyComponentType.prototype.componentDidMount=function(){var internalInstance=ReactInstanceMap.get(this);if(!internalInstance){return}registerNullComponentID(internalInstance._rootNodeID)};ReactEmptyComponentType.prototype.componentWillUnmount=function(){var internalInstance=ReactInstanceMap.get(this);if(!internalInstance){return}deregisterNullComponentID(internalInstance._rootNodeID)};ReactEmptyComponentType.prototype.render=function(){"production"!==process.env.NODE_ENV?invariant(component,"Trying to return null from a render, but no null placeholder component "+"was injected."):invariant(component);return component()};var emptyElement=ReactElement.createElement(ReactEmptyComponentType);function registerNullComponentID(id){nullComponentIDsRegistry[id]=true}function deregisterNullComponentID(id){delete nullComponentIDsRegistry[id]}function isNullComponentID(id){return!!nullComponentIDsRegistry[id]}var ReactEmptyComponent={emptyElement:emptyElement,injection:ReactEmptyComponentInjection,isNullComponentID:isNullComponentID};module.exports=ReactEmptyComponent}).call(this,require("_process"))},{"./ReactElement":480,"./ReactInstanceMap":490,"./invariant":568,_process:35}],483:[function(require,module,exports){"use strict";var ReactErrorUtils={guard:function(func,name){return func}};module.exports=ReactErrorUtils},{}],484:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events);EventPluginHub.processEventQueue()}var ReactEventEmitterMixin={handleTopLevel:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var events=EventPluginHub.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},{"./EventPluginHub":435}],485:[function(require,module,exports){"use strict";var EventListener=require("./EventListener");var ExecutionEnvironment=require("./ExecutionEnvironment");var PooledClass=require("./PooledClass");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactMount=require("./ReactMount");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var getEventTarget=require("./getEventTarget");var getUnboundedScrollPosition=require("./getUnboundedScrollPosition");function findParent(node){var nodeID=ReactMount.getID(node);var rootID=ReactInstanceHandles.getReactRootIDFromNodeID(nodeID);var container=ReactMount.findReactContainerForID(rootID);var parent=ReactMount.getFirstReactDOM(container);return parent}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType;this.nativeEvent=nativeEvent;this.ancestors=[]}assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null;this.nativeEvent=null;this.ancestors.length=0}});PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);function handleTopLevelImpl(bookKeeping){var topLevelTarget=ReactMount.getFirstReactDOM(getEventTarget(bookKeeping.nativeEvent))||window;var ancestor=topLevelTarget;while(ancestor){bookKeeping.ancestors.push(ancestor);ancestor=findParent(ancestor)}for(var i=0,l=bookKeeping.ancestors.length;i<l;i++){topLevelTarget=bookKeeping.ancestors[i];var topLevelTargetID=ReactMount.getID(topLevelTarget)||"";ReactEventListener._handleTopLevel(bookKeeping.topLevelType,topLevelTarget,topLevelTargetID,bookKeeping.nativeEvent)}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var ReactEventListener={_enabled:true,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){var element=handle;if(!element){return null}return EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){var element=handle;if(!element){return null}return EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(!ReactEventListener._enabled){return}var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}};module.exports=ReactEventListener},{"./EventListener":434,"./ExecutionEnvironment":439,"./Object.assign":446,"./PooledClass":447,"./ReactInstanceHandles":489,"./ReactMount":494,"./ReactUpdates":517,"./getEventTarget":558,"./getUnboundedScrollPosition":564}],486:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var warning=require("./warning");if("production"!==process.env.NODE_ENV){var fragmentKey="_reactFragment";var didWarnKey="_reactDidWarn";var canWarnForReactFragment=false;try{var dummy=function(){return 1};Object.defineProperty({},fragmentKey,{enumerable:false,value:true});Object.defineProperty({},"key",{enumerable:true,get:dummy});canWarnForReactFragment=true}catch(x){}var proxyPropertyAccessWithWarning=function(obj,key){Object.defineProperty(obj,key,{enumerable:true,get:function(){"production"!==process.env.NODE_ENV?warning(this[didWarnKey],"A ReactFragment is an opaque type. Accessing any of its "+"properties is deprecated. Pass it to one of the React.Children "+"helpers."):null;this[didWarnKey]=true;return this[fragmentKey][key]},set:function(value){"production"!==process.env.NODE_ENV?warning(this[didWarnKey],"A ReactFragment is an immutable opaque type. Mutating its "+"properties is deprecated."):null;this[didWarnKey]=true;this[fragmentKey][key]=value}})};var issuedWarnings={};var didWarnForFragment=function(fragment){var fragmentCacheKey="";for(var key in fragment){fragmentCacheKey+=key+":"+typeof fragment[key]+","}var alreadyWarnedOnce=!!issuedWarnings[fragmentCacheKey];issuedWarnings[fragmentCacheKey]=true;return alreadyWarnedOnce}}var ReactFragment={create:function(object){if("production"!==process.env.NODE_ENV){if(typeof object!=="object"||!object||Array.isArray(object)){"production"!==process.env.NODE_ENV?warning(false,"React.addons.createFragment only accepts a single object.",object):null;return object}if(ReactElement.isValidElement(object)){"production"!==process.env.NODE_ENV?warning(false,"React.addons.createFragment does not accept a ReactElement "+"without a wrapper object."):null;return object}if(canWarnForReactFragment){var proxy={};Object.defineProperty(proxy,fragmentKey,{enumerable:false,value:object});Object.defineProperty(proxy,didWarnKey,{
writable:true,enumerable:false,value:false});for(var key in object){proxyPropertyAccessWithWarning(proxy,key)}Object.preventExtensions(proxy);return proxy}}return object},extract:function(fragment){if("production"!==process.env.NODE_ENV){if(canWarnForReactFragment){if(!fragment[fragmentKey]){"production"!==process.env.NODE_ENV?warning(didWarnForFragment(fragment),"Any use of a keyed object should be wrapped in "+"React.addons.createFragment(object) before being passed as a "+"child."):null;return fragment}return fragment[fragmentKey]}}return fragment},extractIfFragment:function(fragment){if("production"!==process.env.NODE_ENV){if(canWarnForReactFragment){if(fragment[fragmentKey]){return fragment[fragmentKey]}for(var key in fragment){if(fragment.hasOwnProperty(key)&&ReactElement.isValidElement(fragment[key])){return ReactFragment.extract(fragment)}}}}return fragment}};module.exports=ReactFragment}).call(this,require("_process"))},{"./ReactElement":480,"./warning":589,_process:35}],487:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginHub=require("./EventPluginHub");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactClass=require("./ReactClass");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactNativeComponent=require("./ReactNativeComponent");var ReactDOMComponent=require("./ReactDOMComponent");var ReactPerf=require("./ReactPerf");var ReactRootIndex=require("./ReactRootIndex");var ReactUpdates=require("./ReactUpdates");var ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMComponent:ReactDOMComponent.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},{"./DOMProperty":428,"./EventPluginHub":435,"./ReactBrowserEventEmitter":450,"./ReactClass":455,"./ReactComponentEnvironment":458,"./ReactDOMComponent":465,"./ReactEmptyComponent":482,"./ReactNativeComponent":497,"./ReactPerf":499,"./ReactRootIndex":508,"./ReactUpdates":517}],488:[function(require,module,exports){"use strict";var ReactDOMSelection=require("./ReactDOMSelection");var containsNode=require("./containsNode");var focusNode=require("./focusNode");var getActiveElement=require("./getActiveElement");function isInDocument(node){return containsNode(document.documentElement,node)}var ReactInputSelection={hasSelectionCapabilities:function(elem){return elem&&(elem.nodeName==="INPUT"&&elem.type==="text"||elem.nodeName==="TEXTAREA"||elem.contentEditable==="true")},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement();var priorFocusedElem=priorSelectionInformation.focusedElem;var priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)){if(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)){ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange)}focusNode(priorFocusedElem)}},getSelection:function(input){var selection;if("selectionStart"in input){selection={start:input.selectionStart,end:input.selectionEnd}}else if(document.selection&&input.nodeName==="INPUT"){var range=document.selection.createRange();if(range.parentElement()===input){selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)}}}else{selection=ReactDOMSelection.getOffsets(input)}return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start;var end=offsets.end;if(typeof end==="undefined"){end=start}if("selectionStart"in input){input.selectionStart=start;input.selectionEnd=Math.min(end,input.value.length)}else if(document.selection&&input.nodeName==="INPUT"){var range=input.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}else{ReactDOMSelection.setOffsets(input,offsets)}}};module.exports=ReactInputSelection},{"./ReactDOMSelection":473,"./containsNode":541,"./focusNode":552,"./getActiveElement":554}],489:[function(require,module,exports){(function(process){"use strict";var ReactRootIndex=require("./ReactRootIndex");var invariant=require("./invariant");var SEPARATOR=".";var SEPARATOR_LENGTH=SEPARATOR.length;var MAX_TREE_DEPTH=100;function getReactRootIDString(index){return SEPARATOR+index.toString(36)}function isBoundary(id,index){return id.charAt(index)===SEPARATOR||index===id.length}function isValidID(id){return id===""||id.charAt(0)===SEPARATOR&&id.charAt(id.length-1)!==SEPARATOR}function isAncestorIDOf(ancestorID,descendantID){return descendantID.indexOf(ancestorID)===0&&isBoundary(descendantID,ancestorID.length)}function getParentID(id){return id?id.substr(0,id.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(ancestorID,destinationID){"production"!==process.env.NODE_ENV?invariant(isValidID(ancestorID)&&isValidID(destinationID),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",ancestorID,destinationID):invariant(isValidID(ancestorID)&&isValidID(destinationID));"production"!==process.env.NODE_ENV?invariant(isAncestorIDOf(ancestorID,destinationID),"getNextDescendantID(...): React has made an invalid assumption about "+"the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",ancestorID,destinationID):invariant(isAncestorIDOf(ancestorID,destinationID));if(ancestorID===destinationID){return ancestorID}var start=ancestorID.length+SEPARATOR_LENGTH;var i;for(i=start;i<destinationID.length;i++){if(isBoundary(destinationID,i)){break}}return destinationID.substr(0,i)}function getFirstCommonAncestorID(oneID,twoID){var minLength=Math.min(oneID.length,twoID.length);if(minLength===0){return""}var lastCommonMarkerIndex=0;for(var i=0;i<=minLength;i++){if(isBoundary(oneID,i)&&isBoundary(twoID,i)){lastCommonMarkerIndex=i}else if(oneID.charAt(i)!==twoID.charAt(i)){break}}var longestCommonID=oneID.substr(0,lastCommonMarkerIndex);"production"!==process.env.NODE_ENV?invariant(isValidID(longestCommonID),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",oneID,twoID,longestCommonID):invariant(isValidID(longestCommonID));return longestCommonID}function traverseParentPath(start,stop,cb,arg,skipFirst,skipLast){start=start||"";stop=stop||"";"production"!==process.env.NODE_ENV?invariant(start!==stop,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",start):invariant(start!==stop);var traverseUp=isAncestorIDOf(stop,start);"production"!==process.env.NODE_ENV?invariant(traverseUp||isAncestorIDOf(start,stop),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do "+"not have a parent path.",start,stop):invariant(traverseUp||isAncestorIDOf(start,stop));var depth=0;var traverse=traverseUp?getParentID:getNextDescendantID;for(var id=start;;id=traverse(id,stop)){var ret;if((!skipFirst||id!==start)&&(!skipLast||id!==stop)){ret=cb(id,traverseUp,arg)}if(ret===false||id===stop){break}"production"!==process.env.NODE_ENV?invariant(depth++<MAX_TREE_DEPTH,"traverseParentPath(%s, %s, ...): Detected an infinite loop while "+"traversing the React DOM ID tree. This may be due to malformed IDs: %s",start,stop):invariant(depth++<MAX_TREE_DEPTH)}}var ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(rootID,name){return rootID+name},getReactRootIDFromNodeID:function(id){if(id&&id.charAt(0)===SEPARATOR&&id.length>1){var index=id.indexOf(SEPARATOR,1);return index>-1?id.substr(0,index):id}return null},traverseEnterLeave:function(leaveID,enterID,cb,upArg,downArg){var ancestorID=getFirstCommonAncestorID(leaveID,enterID);if(ancestorID!==leaveID){traverseParentPath(leaveID,ancestorID,cb,upArg,false,true)}if(ancestorID!==enterID){traverseParentPath(ancestorID,enterID,cb,downArg,true,false)}},traverseTwoPhase:function(targetID,cb,arg){if(targetID){traverseParentPath("",targetID,cb,arg,true,false);traverseParentPath(targetID,"",cb,arg,false,true)}},traverseAncestors:function(targetID,cb,arg){traverseParentPath("",targetID,cb,arg,true,false)},_getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles}).call(this,require("_process"))},{"./ReactRootIndex":508,"./invariant":568,_process:35}],490:[function(require,module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=undefined},get:function(key){return key._reactInternalInstance},has:function(key){return key._reactInternalInstance!==undefined},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},{}],491:[function(require,module,exports){"use strict";var ReactLifeCycle={currentlyMountingInstance:null,currentlyUnmountingInstance:null};module.exports=ReactLifeCycle},{}],492:[function(require,module,exports){"use strict";var React=require("./React");function ReactLink(value,requestChange){this.value=value;this.requestChange=requestChange}function createLinkTypeChecker(linkType){var shapes={value:typeof linkType==="undefined"?React.PropTypes.any.isRequired:linkType.isRequired,requestChange:React.PropTypes.func.isRequired};return React.PropTypes.shape(shapes)}ReactLink.PropTypes={link:createLinkTypeChecker};module.exports=ReactLink},{"./React":448}],493:[function(require,module,exports){"use strict";var adler32=require("./adler32");var ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);return markup.replace(">"," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'">')},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},{"./adler32":537}],494:[function(require,module,exports){(function(process){"use strict";var DOMProperty=require("./DOMProperty");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactElement=require("./ReactElement");var ReactElementValidator=require("./ReactElementValidator");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactInstanceMap=require("./ReactInstanceMap");var ReactMarkupChecksum=require("./ReactMarkupChecksum");var ReactPerf=require("./ReactPerf");var ReactReconciler=require("./ReactReconciler");var ReactUpdateQueue=require("./ReactUpdateQueue");var ReactUpdates=require("./ReactUpdates");var emptyObject=require("./emptyObject");var containsNode=require("./containsNode");var getReactRootElementInContainer=require("./getReactRootElementInContainer");var instantiateReactComponent=require("./instantiateReactComponent");var invariant=require("./invariant");var setInnerHTML=require("./setInnerHTML");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("./warning");var SEPARATOR=ReactInstanceHandles.SEPARATOR;var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var nodeCache={};var ELEMENT_NODE_TYPE=1;var DOC_NODE_TYPE=9;var instancesByReactRootID={};var containersByReactRootID={};if("production"!==process.env.NODE_ENV){var rootElementsByReactRootID={}}var findComponentRootReusableArray=[];function firstDifferenceIndex(string1,string2){var minLen=Math.min(string1.length,string2.length);for(var i=0;i<minLen;i++){if(string1.charAt(i)!==string2.charAt(i)){return i}}return string1.length===string2.length?-1:minLen}function getReactRootID(container){var rootElement=getReactRootElementInContainer(container);return rootElement&&ReactMount.getID(rootElement)}function getID(node){var id=internalGetID(node);if(id){if(nodeCache.hasOwnProperty(id)){var cached=nodeCache[id];if(cached!==node){"production"!==process.env.NODE_ENV?invariant(!isValid(cached,id),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",ATTR_NAME,id):invariant(!isValid(cached,id));nodeCache[id]=node}}else{nodeCache[id]=node}}return id}function internalGetID(node){return node&&node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function setID(node,id){var oldID=internalGetID(node);if(oldID!==id){delete nodeCache[oldID]}node.setAttribute(ATTR_NAME,id);nodeCache[id]=node}function getNode(id){if(!nodeCache.hasOwnProperty(id)||!isValid(nodeCache[id],id)){nodeCache[id]=ReactMount.findReactNodeByID(id)}return nodeCache[id]}function getNodeFromInstance(instance){var id=ReactInstanceMap.get(instance)._rootNodeID;if(ReactEmptyComponent.isNullComponentID(id)){return null}if(!nodeCache.hasOwnProperty(id)||!isValid(nodeCache[id],id)){nodeCache[id]=ReactMount.findReactNodeByID(id)}return nodeCache[id]}function isValid(node,id){if(node){"production"!==process.env.NODE_ENV?invariant(internalGetID(node)===id,"ReactMount: Unexpected modification of `%s`",ATTR_NAME):invariant(internalGetID(node)===id);var container=ReactMount.findReactContainerForID(id);if(container&&containsNode(container,node)){return true}}return false}function purgeID(id){delete nodeCache[id]}var deepestNodeSoFar=null;function findDeepestCachedAncestorImpl(ancestorID){var ancestor=nodeCache[ancestorID];if(ancestor&&isValid(ancestor,ancestorID)){deepestNodeSoFar=ancestor}else{return false}}function findDeepestCachedAncestor(targetID){deepestNodeSoFar=null;ReactInstanceHandles.traverseAncestors(targetID,findDeepestCachedAncestorImpl);var foundNode=deepestNodeSoFar;deepestNodeSoFar=null;return foundNode}function mountComponentIntoNode(componentInstance,rootID,container,transaction,shouldReuseMarkup){var markup=ReactReconciler.mountComponent(componentInstance,rootID,transaction,emptyObject);componentInstance._isTopLevel=true;ReactMount._mountImageIntoNode(markup,container,shouldReuseMarkup)}function batchedMountComponentIntoNode(componentInstance,rootID,container,shouldReuseMarkup){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled();transaction.perform(mountComponentIntoNode,null,componentInstance,rootID,container,transaction,shouldReuseMarkup);ReactUpdates.ReactReconcileTransaction.release(transaction)}var ReactMount={_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,container,callback){if("production"!==process.env.NODE_ENV){ReactElementValidator.checkAndWarnForMutatedProps(nextElement)}ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement);if(callback){ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}});if("production"!==process.env.NODE_ENV){rootElementsByReactRootID[getReactRootID(container)]=getReactRootElementInContainer(container)}return prevComponent},_registerComponent:function(nextComponent,container){"production"!==process.env.NODE_ENV?invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE),"_registerComponent(...): Target container is not a DOM element."):invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE));ReactBrowserEventEmitter.ensureScrollValueMonitoring();var reactRootID=ReactMount.registerContainer(container);instancesByReactRootID[reactRootID]=nextComponent;return reactRootID},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup){"production"!==process.env.NODE_ENV?warning(ReactCurrentOwner.current==null,"_renderNewRootComponent(): Render methods should be a pure function "+"of props and state; triggering nested component updates from "+"render is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate."):null;var componentInstance=instantiateReactComponent(nextElement,null);var reactRootID=ReactMount._registerComponent(componentInstance,container);ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,reactRootID,container,shouldReuseMarkup);if("production"!==process.env.NODE_ENV){rootElementsByReactRootID[reactRootID]=getReactRootElementInContainer(container)}return componentInstance},render:function(nextElement,container,callback){"production"!==process.env.NODE_ENV?invariant(ReactElement.isValidElement(nextElement),"React.render(): Invalid component element.%s",typeof nextElement==="string"?" Instead of passing an element string, make sure to instantiate "+"it by passing it to React.createElement.":typeof nextElement==="function"?" Instead of passing a component class, make sure to instantiate "+"it by passing it to React.createElement.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):invariant(ReactElement.isValidElement(nextElement));var prevComponent=instancesByReactRootID[getReactRootID(container)];if(prevComponent){var prevElement=prevComponent._currentElement;if(shouldUpdateReactComponent(prevElement,nextElement)){return ReactMount._updateRootComponent(prevComponent,nextElement,container,callback).getPublicInstance()}else{ReactMount.unmountComponentAtNode(container)}}var reactRootElement=getReactRootElementInContainer(container);var containerHasReactMarkup=reactRootElement&&ReactMount.isRenderedByReact(reactRootElement);if("production"!==process.env.NODE_ENV){if(!containerHasReactMarkup||reactRootElement.nextSibling){var rootElementSibling=reactRootElement;while(rootElementSibling){if(ReactMount.isRenderedByReact(rootElementSibling)){"production"!==process.env.NODE_ENV?warning(false,"render(): Target node has markup rendered by React, but there "+"are unrelated nodes as well. This is most commonly caused by "+"white-space inserted around server-rendered markup."):null;break}rootElementSibling=rootElementSibling.nextSibling}}}var shouldReuseMarkup=containerHasReactMarkup&&!prevComponent;var component=ReactMount._renderNewRootComponent(nextElement,container,shouldReuseMarkup).getPublicInstance();if(callback){callback.call(component)}return component},constructAndRenderComponent:function(constructor,props,container){var element=ReactElement.createElement(constructor,props);return ReactMount.render(element,container)},constructAndRenderComponentByID:function(constructor,props,id){var domNode=document.getElementById(id);"production"!==process.env.NODE_ENV?invariant(domNode,'Tried to get element with id of "%s" but it is not present on the page.',id):invariant(domNode);return ReactMount.constructAndRenderComponent(constructor,props,domNode)},registerContainer:function(container){var reactRootID=getReactRootID(container);if(reactRootID){reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(reactRootID)}if(!reactRootID){reactRootID=ReactInstanceHandles.createReactRootID()}containersByReactRootID[reactRootID]=container;return reactRootID},unmountComponentAtNode:function(container){"production"!==process.env.NODE_ENV?warning(ReactCurrentOwner.current==null,"unmountComponentAtNode(): Render methods should be a pure function of "+"props and state; triggering nested component updates from render is "+"not allowed. If necessary, trigger nested updates in "+"componentDidUpdate."):null;"production"!==process.env.NODE_ENV?invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE),"unmountComponentAtNode(...): Target container is not a DOM element."):invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE));var reactRootID=getReactRootID(container);var component=instancesByReactRootID[reactRootID];if(!component){return false}ReactMount.unmountComponentFromNode(component,container);delete instancesByReactRootID[reactRootID];delete containersByReactRootID[reactRootID];if("production"!==process.env.NODE_ENV){delete rootElementsByReactRootID[reactRootID]}return true},unmountComponentFromNode:function(instance,container){ReactReconciler.unmountComponent(instance);if(container.nodeType===DOC_NODE_TYPE){container=container.documentElement}while(container.lastChild){container.removeChild(container.lastChild)}},findReactContainerForID:function(id){var reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(id);var container=containersByReactRootID[reactRootID];if("production"!==process.env.NODE_ENV){var rootElement=rootElementsByReactRootID[reactRootID];if(rootElement&&rootElement.parentNode!==container){"production"!==process.env.NODE_ENV?invariant(internalGetID(rootElement)===reactRootID,"ReactMount: Root element ID differed from reactRootID."):invariant(internalGetID(rootElement)===reactRootID);var containerChild=container.firstChild;if(containerChild&&reactRootID===internalGetID(containerChild)){rootElementsByReactRootID[reactRootID]=containerChild}else{"production"!==process.env.NODE_ENV?warning(false,"ReactMount: Root element has been removed from its original "+"container. New container:",rootElement.parentNode):null}}}return container},findReactNodeByID:function(id){var reactRoot=ReactMount.findReactContainerForID(id);return ReactMount.findComponentRoot(reactRoot,id)},isRenderedByReact:function(node){if(node.nodeType!==1){return false}var id=ReactMount.getID(node);return id?id.charAt(0)===SEPARATOR:false},getFirstReactDOM:function(node){var current=node;while(current&&current.parentNode!==current){if(ReactMount.isRenderedByReact(current)){return current}current=current.parentNode}return null},findComponentRoot:function(ancestorNode,targetID){var firstChildren=findComponentRootReusableArray;var childIndex=0;var deepestAncestor=findDeepestCachedAncestor(targetID)||ancestorNode;firstChildren[0]=deepestAncestor.firstChild;firstChildren.length=1;while(childIndex<firstChildren.length){var child=firstChildren[childIndex++];var targetChild;while(child){var childID=ReactMount.getID(child);if(childID){if(targetID===childID){targetChild=child}else if(ReactInstanceHandles.isAncestorIDOf(childID,targetID)){firstChildren.length=childIndex=0;firstChildren.push(child.firstChild)}}else{firstChildren.push(child.firstChild)}child=child.nextSibling}if(targetChild){firstChildren.length=0;return targetChild}}firstChildren.length=0;"production"!==process.env.NODE_ENV?invariant(false,"findComponentRoot(..., %s): Unable to find element. This probably "+"means the DOM was unexpectedly mutated (e.g., by the browser), "+"usually due to forgetting a <tbody> when using tables, nesting tags "+"like <form>, <p>, or <a>, or using non-SVG elements in an <svg> "+"parent. "+"Try inspecting the child nodes of the element with React ID `%s`.",targetID,ReactMount.getID(ancestorNode)):invariant(false)},_mountImageIntoNode:function(markup,container,shouldReuseMarkup){"production"!==process.env.NODE_ENV?invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE),"mountComponentIntoNode(...): Target container is not valid."):invariant(container&&(container.nodeType===ELEMENT_NODE_TYPE||container.nodeType===DOC_NODE_TYPE));if(shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement)){return}else{var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var diffIndex=firstDifferenceIndex(markup,rootMarkup);var difference=" (client) "+markup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);"production"!==process.env.NODE_ENV?invariant(container.nodeType!==DOC_NODE_TYPE,"You're trying to render a component to the document using "+"server rendering but the checksum was invalid. This usually "+"means you rendered a different component type or props on "+"the client from the one on the server, or your render() "+"methods are impure. React cannot handle this case due to "+"cross-browser quirks by rendering at the document root. You "+"should look for environment dependent code in your components "+"and ensure the props are the same client and server side:\n%s",difference):invariant(container.nodeType!==DOC_NODE_TYPE);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(false,"React attempted to reuse markup in a container but the "+"checksum was invalid. This generally means that you are "+"using server rendering and the markup generated on the "+"server was not what the client was expecting. React injected "+"new markup to compensate which works but you have lost many "+"of the benefits of server rendering. Instead, figure out "+"why the markup being generated is different on the client "+"or server:\n%s",difference):null}}}"production"!==process.env.NODE_ENV?invariant(container.nodeType!==DOC_NODE_TYPE,"You're trying to render a component to the document but "+"you didn't use server rendering. We can't do this "+"without using server rendering due to cross-browser quirks. "+"See React.renderToString() for server rendering."):invariant(container.nodeType!==DOC_NODE_TYPE);setInnerHTML(container,markup)},getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"});module.exports=ReactMount}).call(this,require("_process"))},{"./DOMProperty":428,"./ReactBrowserEventEmitter":450,"./ReactCurrentOwner":462,"./ReactElement":480,"./ReactElementValidator":481,"./ReactEmptyComponent":482,"./ReactInstanceHandles":489,"./ReactInstanceMap":490,"./ReactMarkupChecksum":493,"./ReactPerf":499,"./ReactReconciler":506,"./ReactUpdateQueue":516,"./ReactUpdates":517,"./containsNode":541,"./emptyObject":548,"./getReactRootElementInContainer":562,"./instantiateReactComponent":567,"./invariant":568,"./setInnerHTML":582,"./shouldUpdateReactComponent":585,"./warning":589,_process:35}],495:[function(require,module,exports){"use strict";var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes");var ReactReconciler=require("./ReactReconciler");var ReactChildReconciler=require("./ReactChildReconciler");var updateDepth=0;var updateQueue=[];var markupQueue=[];function enqueueMarkup(parentID,markup,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(markup)-1,textContent:null,fromIndex:null,toIndex:toIndex})}function enqueueMove(parentID,fromIndex,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:fromIndex,toIndex:toIndex})}function enqueueRemove(parentID,fromIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:fromIndex,toIndex:null})}function enqueueTextContent(parentID,textContent){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,textContent:textContent,fromIndex:null,toIndex:null})}function processQueue(){if(updateQueue.length){ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue);clearQueue()}}function clearQueue(){updateQueue.length=0;markupQueue.length=0}var ReactMultiChild={Mixin:{mountChildren:function(nestedChildren,transaction,context){var children=ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[];var index=0;for(var name in children){if(children.hasOwnProperty(name)){var child=children[name];var rootID=this._rootNodeID+name;var mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index;mountImages.push(mountImage);index++}}return mountImages},updateTextContent:function(nextContent){updateDepth++;var errorThrown=true;try{var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){this._unmountChildByName(prevChildren[name],name)}}this.setTextContent(nextContent);errorThrown=false}finally{updateDepth--;if(!updateDepth){if(errorThrown){clearQueue()}else{processQueue()}}}},updateChildren:function(nextNestedChildren,transaction,context){updateDepth++;var errorThrown=true;try{this._updateChildren(nextNestedChildren,transaction,context);errorThrown=false}finally{updateDepth--;if(!updateDepth){if(errorThrown){clearQueue()}else{processQueue()}}}},_updateChildren:function(nextNestedChildren,transaction,context){var prevChildren=this._renderedChildren;var nextChildren=ReactChildReconciler.updateChildren(prevChildren,nextNestedChildren,transaction,context);this._renderedChildren=nextChildren;if(!nextChildren&&!prevChildren){return}var name;var lastIndex=0;var nextIndex=0;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}var prevChild=prevChildren&&prevChildren[name];var nextChild=nextChildren[name];if(prevChild===nextChild){this.moveChild(prevChild,nextIndex,lastIndex);lastIndex=Math.max(prevChild._mountIndex,lastIndex);prevChild._mountIndex=nextIndex}else{if(prevChild){lastIndex=Math.max(prevChild._mountIndex,lastIndex);this._unmountChildByName(prevChild,name)}this._mountChildByNameAtIndex(nextChild,name,nextIndex,transaction,context)}nextIndex++}for(name in prevChildren){if(prevChildren.hasOwnProperty(name)&&!(nextChildren&&nextChildren.hasOwnProperty(name))){this._unmountChildByName(prevChildren[name],name)}}},unmountChildren:function(){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren);this._renderedChildren=null},moveChild:function(child,toIndex,lastIndex){if(child._mountIndex<lastIndex){enqueueMove(this._rootNodeID,child._mountIndex,toIndex)}},createChild:function(child,mountImage){enqueueMarkup(this._rootNodeID,mountImage,child._mountIndex)},removeChild:function(child){enqueueRemove(this._rootNodeID,child._mountIndex)},setTextContent:function(textContent){enqueueTextContent(this._rootNodeID,textContent)},_mountChildByNameAtIndex:function(child,name,index,transaction,context){var rootID=this._rootNodeID+name;var mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index;this.createChild(child,mountImage)},_unmountChildByName:function(child,name){this.removeChild(child);child._mountIndex=null}}};module.exports=ReactMultiChild},{"./ReactChildReconciler":453,"./ReactComponentEnvironment":458,"./ReactMultiChildUpdateTypes":496,"./ReactReconciler":506}],496:[function(require,module,exports){"use strict";var keyMirror=require("./keyMirror");var ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes},{"./keyMirror":574}],497:[function(require,module,exports){(function(process){"use strict";var assign=require("./Object.assign");var invariant=require("./invariant");var autoGenerateWrapperClass=null;var genericComponentClass=null;var tagToComponentClass={};var textComponentClass=null;var ReactNativeComponentInjection={injectGenericComponentClass:function(componentClass){
genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass},injectComponentClasses:function(componentClasses){assign(tagToComponentClass,componentClasses)},injectAutoWrapper:function(wrapperFactory){autoGenerateWrapperClass=wrapperFactory}};function getComponentClassForElement(element){if(typeof element.type==="function"){return element.type}var tag=element.type;var componentClass=tagToComponentClass[tag];if(componentClass==null){tagToComponentClass[tag]=componentClass=autoGenerateWrapperClass(tag)}return componentClass}function createInternalComponent(element){"production"!==process.env.NODE_ENV?invariant(genericComponentClass,"There is no registered component for the tag %s",element.type):invariant(genericComponentClass);return new genericComponentClass(element.type,element.props)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent}).call(this,require("_process"))},{"./Object.assign":446,"./invariant":568,_process:35}],498:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var ReactOwner={isValidOwner:function(object){return!!(object&&typeof object.attachRef==="function"&&typeof object.detachRef==="function")},addComponentAsRefTo:function(component,ref,owner){"production"!==process.env.NODE_ENV?invariant(ReactOwner.isValidOwner(owner),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This "+"usually means that you're trying to add a ref to a component that "+"doesn't have an owner (that is, was not created inside of another "+"component's `render` method). Try rendering this component inside of "+"a new top-level component which will hold the ref."):invariant(ReactOwner.isValidOwner(owner));owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){"production"!==process.env.NODE_ENV?invariant(ReactOwner.isValidOwner(owner),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This "+"usually means that you're trying to remove a ref to a component that "+"doesn't have an owner (that is, was not created inside of another "+"component's `render` method). Try rendering this component inside of "+"a new top-level component which will hold the ref."):invariant(ReactOwner.isValidOwner(owner));if(owner.getPublicInstance().refs[ref]===component.getPublicInstance()){owner.detachRef(ref)}}};module.exports=ReactOwner}).call(this,require("_process"))},{"./invariant":568,_process:35}],499:[function(require,module,exports){(function(process){"use strict";var ReactPerf={enableMeasure:false,storedMeasure:_noMeasure,measureMethods:function(object,objectName,methodNames){if("production"!==process.env.NODE_ENV){for(var key in methodNames){if(!methodNames.hasOwnProperty(key)){continue}object[key]=ReactPerf.measure(objectName,methodNames[key],object[key])}}},measure:function(objName,fnName,func){if("production"!==process.env.NODE_ENV){var measuredFunc=null;var wrapper=function(){if(ReactPerf.enableMeasure){if(!measuredFunc){measuredFunc=ReactPerf.storedMeasure(objName,fnName,func)}return measuredFunc.apply(this,arguments)}return func.apply(this,arguments)};wrapper.displayName=objName+"_"+fnName;return wrapper}return func},injection:{injectMeasure:function(measure){ReactPerf.storedMeasure=measure}}};function _noMeasure(objName,fnName,func){return func}module.exports=ReactPerf}).call(this,require("_process"))},{_process:35}],500:[function(require,module,exports){"use strict";var assign=require("./Object.assign");var emptyFunction=require("./emptyFunction");var joinClasses=require("./joinClasses");function createTransferStrategy(mergeStrategy){return function(props,key,value){if(!props.hasOwnProperty(key)){props[key]=value}else{props[key]=mergeStrategy(props[key],value)}}}var transferStrategyMerge=createTransferStrategy(function(a,b){return assign({},b,a)});var TransferStrategies={children:emptyFunction,className:createTransferStrategy(joinClasses),style:transferStrategyMerge};function transferInto(props,newProps){for(var thisKey in newProps){if(!newProps.hasOwnProperty(thisKey)){continue}var transferStrategy=TransferStrategies[thisKey];if(transferStrategy&&TransferStrategies.hasOwnProperty(thisKey)){transferStrategy(props,thisKey,newProps[thisKey])}else if(!props.hasOwnProperty(thisKey)){props[thisKey]=newProps[thisKey]}}return props}var ReactPropTransferer={mergeProps:function(oldProps,newProps){return transferInto(assign({},oldProps),newProps)}};module.exports=ReactPropTransferer},{"./Object.assign":446,"./emptyFunction":547,"./joinClasses":573}],501:[function(require,module,exports){(function(process){"use strict";var ReactPropTypeLocationNames={};if("production"!==process.env.NODE_ENV){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}module.exports=ReactPropTypeLocationNames}).call(this,require("_process"))},{_process:35}],502:[function(require,module,exports){"use strict";var keyMirror=require("./keyMirror");var ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},{"./keyMirror":574}],503:[function(require,module,exports){"use strict";var ReactElement=require("./ReactElement");var ReactFragment=require("./ReactFragment");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var emptyFunction=require("./emptyFunction");var ANONYMOUS="<<anonymous>>";var elementTypeChecker=createElementTypeChecker();var nodeTypeChecker=createNodeChecker();var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:elementTypeChecker,instanceOf:createInstanceTypeChecker,node:nodeTypeChecker,objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location){componentName=componentName||ANONYMOUS;if(props[propName]==null){var locationName=ReactPropTypeLocationNames[location];if(isRequired){return new Error("Required "+locationName+" `"+propName+"` was not specified in "+("`"+componentName+"`."))}return null}else{return validate(props,propName,componentName,location)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location];var preciseType=getPreciseType(propValue);return new Error("Invalid "+locationName+" `"+propName+"` of type `"+preciseType+"` "+("supplied to `"+componentName+"`, expected `"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location){var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location];var propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location){if(!ReactElement.isValidElement(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected a ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location];var expectedClassName=expectedClass.name||ANONYMOUS;return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(propValue===expectedValues[i]){return null}}var locationName=ReactPropTypeLocationNames[location];var valuesString=JSON.stringify(expectedValues);return new Error("Invalid "+locationName+" `"+propName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location)==null){return null}}var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||ReactElement.isValidElement(propValue)){return true}propValue=ReactFragment.extractIfFragment(propValue);for(var k in propValue){if(!isNode(propValue[k])){return false}}return true;default:return false}}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}return propType}function getPreciseType(propValue){var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}module.exports=ReactPropTypes},{"./ReactElement":480,"./ReactFragment":486,"./ReactPropTypeLocationNames":501,"./emptyFunction":547}],504:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var assign=require("./Object.assign");function ReactPutListenerQueue(){this.listenersToPut=[]}assign(ReactPutListenerQueue.prototype,{enqueuePutListener:function(rootNodeID,propKey,propValue){this.listenersToPut.push({rootNodeID:rootNodeID,propKey:propKey,propValue:propValue})},putListeners:function(){for(var i=0;i<this.listenersToPut.length;i++){var listenerToPut=this.listenersToPut[i];ReactBrowserEventEmitter.putListener(listenerToPut.rootNodeID,listenerToPut.propKey,listenerToPut.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}});PooledClass.addPoolingTo(ReactPutListenerQueue);module.exports=ReactPutListenerQueue},{"./Object.assign":446,"./PooledClass":447,"./ReactBrowserEventEmitter":450}],505:[function(require,module,exports){"use strict";var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactInputSelection=require("./ReactInputSelection");var ReactPutListenerQueue=require("./ReactPutListenerQueue");var Transaction=require("./Transaction");var assign=require("./Object.assign");var SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection};var EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();ReactBrowserEventEmitter.setEnabled(false);return currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}};var ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}};var PUT_LISTENER_QUEUEING={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}};var TRANSACTION_WRAPPERS=[PUT_LISTENER_QUEUEING,SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING];function ReactReconcileTransaction(){this.reinitializeTransaction();this.renderToStaticMarkup=false;this.reactMountReady=CallbackQueue.getPooled(null);this.putListenerQueue=ReactPutListenerQueue.getPooled()}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){CallbackQueue.release(this.reactMountReady);this.reactMountReady=null;ReactPutListenerQueue.release(this.putListenerQueue);this.putListenerQueue=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin);PooledClass.addPoolingTo(ReactReconcileTransaction);module.exports=ReactReconcileTransaction},{"./CallbackQueue":424,"./Object.assign":446,"./PooledClass":447,"./ReactBrowserEventEmitter":450,"./ReactInputSelection":488,"./ReactPutListenerQueue":504,"./Transaction":534}],506:[function(require,module,exports){(function(process){"use strict";var ReactRef=require("./ReactRef");var ReactElementValidator=require("./ReactElementValidator");function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactReconciler={mountComponent:function(internalInstance,rootID,transaction,context){var markup=internalInstance.mountComponent(rootID,transaction,context);if("production"!==process.env.NODE_ENV){ReactElementValidator.checkAndWarnForMutatedProps(internalInstance._currentElement)}transaction.getReactMountReady().enqueue(attachRefs,internalInstance);return markup},unmountComponent:function(internalInstance){ReactRef.detachRefs(internalInstance,internalInstance._currentElement);internalInstance.unmountComponent()},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement===prevElement&&nextElement._owner!=null){return}if("production"!==process.env.NODE_ENV){ReactElementValidator.checkAndWarnForMutatedProps(nextElement)}var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);if(refsChanged){ReactRef.detachRefs(internalInstance,prevElement)}internalInstance.receiveComponent(nextElement,transaction,context);if(refsChanged){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}},performUpdateIfNecessary:function(internalInstance,transaction){internalInstance.performUpdateIfNecessary(transaction)}};module.exports=ReactReconciler}).call(this,require("_process"))},{"./ReactElementValidator":481,"./ReactRef":507,_process:35}],507:[function(require,module,exports){"use strict";var ReactOwner=require("./ReactOwner");var ReactRef={};function attachRef(ref,component,owner){if(typeof ref==="function"){ref(component.getPublicInstance())}else{ReactOwner.addComponentAsRefTo(component,ref,owner)}}function detachRef(ref,component,owner){if(typeof ref==="function"){ref(null)}else{ReactOwner.removeComponentAsRefFrom(component,ref,owner)}}ReactRef.attachRefs=function(instance,element){var ref=element.ref;if(ref!=null){attachRef(ref,instance,element._owner)}};ReactRef.shouldUpdateRefs=function(prevElement,nextElement){return nextElement._owner!==prevElement._owner||nextElement.ref!==prevElement.ref};ReactRef.detachRefs=function(instance,element){var ref=element.ref;if(ref!=null){detachRef(ref,instance,element._owner)}};module.exports=ReactRef},{"./ReactOwner":498}],508:[function(require,module,exports){"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(_createReactRootIndex){ReactRootIndex.createReactRootIndex=_createReactRootIndex}};var ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex},{}],509:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactMarkupChecksum=require("./ReactMarkupChecksum");var ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction");var emptyObject=require("./emptyObject");var instantiateReactComponent=require("./instantiateReactComponent");var invariant=require("./invariant");function renderToString(element){"production"!==process.env.NODE_ENV?invariant(ReactElement.isValidElement(element),"renderToString(): You must pass a valid ReactElement."):invariant(ReactElement.isValidElement(element));var transaction;try{var id=ReactInstanceHandles.createReactRootID();transaction=ReactServerRenderingTransaction.getPooled(false);return transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null);var markup=componentInstance.mountComponent(id,transaction,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(markup)},null)}finally{ReactServerRenderingTransaction.release(transaction)}}function renderToStaticMarkup(element){"production"!==process.env.NODE_ENV?invariant(ReactElement.isValidElement(element),"renderToStaticMarkup(): You must pass a valid ReactElement."):invariant(ReactElement.isValidElement(element));var transaction;try{var id=ReactInstanceHandles.createReactRootID();transaction=ReactServerRenderingTransaction.getPooled(true);return transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null);return componentInstance.mountComponent(id,transaction,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(transaction)}}module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup}}).call(this,require("_process"))},{"./ReactElement":480,"./ReactInstanceHandles":489,"./ReactMarkupChecksum":493,"./ReactServerRenderingTransaction":510,"./emptyObject":548,"./instantiateReactComponent":567,"./invariant":568,_process:35}],510:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var CallbackQueue=require("./CallbackQueue");var ReactPutListenerQueue=require("./ReactPutListenerQueue");var Transaction=require("./Transaction");var assign=require("./Object.assign");var emptyFunction=require("./emptyFunction");var ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction};var PUT_LISTENER_QUEUEING={initialize:function(){this.putListenerQueue.reset()},close:emptyFunction};var TRANSACTION_WRAPPERS=[PUT_LISTENER_QUEUEING,ON_DOM_READY_QUEUEING];function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction();this.renderToStaticMarkup=renderToStaticMarkup;this.reactMountReady=CallbackQueue.getPooled(null);this.putListenerQueue=ReactPutListenerQueue.getPooled()}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){CallbackQueue.release(this.reactMountReady);this.reactMountReady=null;ReactPutListenerQueue.release(this.putListenerQueue);this.putListenerQueue=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin);PooledClass.addPoolingTo(ReactServerRenderingTransaction);module.exports=ReactServerRenderingTransaction},{"./CallbackQueue":424,"./Object.assign":446,"./PooledClass":447,"./ReactPutListenerQueue":504,"./Transaction":534,"./emptyFunction":547}],511:[function(require,module,exports){"use strict";var ReactStateSetters={createStateSetter:function(component,funcReturningState){return function(a,b,c,d,e,f){var partialState=funcReturningState.call(component,a,b,c,d,e,f);if(partialState){component.setState(partialState)}}},createStateKeySetter:function(component,key){var cache=component.__keySetters||(component.__keySetters={});return cache[key]||(cache[key]=createStateKeySetter(component,key))}};function createStateKeySetter(component,key){var partialState={};return function stateKeySetter(value){partialState[key]=value;component.setState(partialState)}}ReactStateSetters.Mixin={createStateSetter:function(funcReturningState){return ReactStateSetters.createStateSetter(this,funcReturningState)},createStateKeySetter:function(key){return ReactStateSetters.createStateKeySetter(this,key)}};module.exports=ReactStateSetters},{}],512:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPluginHub=require("./EventPluginHub");var EventPropagators=require("./EventPropagators");var React=require("./React");var ReactElement=require("./ReactElement");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactCompositeComponent=require("./ReactCompositeComponent");var ReactInstanceHandles=require("./ReactInstanceHandles");var ReactInstanceMap=require("./ReactInstanceMap");var ReactMount=require("./ReactMount");var ReactUpdates=require("./ReactUpdates");var SyntheticEvent=require("./SyntheticEvent");var assign=require("./Object.assign");var emptyObject=require("./emptyObject");var topLevelTypes=EventConstants.topLevelTypes;function Event(suffix){}var ReactTestUtils={renderIntoDocument:function(instance){var div=document.createElement("div");return React.render(instance,div)},isElement:function(element){return ReactElement.isValidElement(element)},isElementOfType:function(inst,convenienceConstructor){return ReactElement.isValidElement(inst)&&inst.type===convenienceConstructor},isDOMComponent:function(inst){return!!(inst&&inst.tagName&&inst.getDOMNode)},isDOMComponentElement:function(inst){return!!(inst&&ReactElement.isValidElement(inst)&&!!inst.tagName)},isCompositeComponent:function(inst){return typeof inst.render==="function"&&typeof inst.setState==="function"},isCompositeComponentWithType:function(inst,type){return!!(ReactTestUtils.isCompositeComponent(inst)&&inst.constructor===type)},isCompositeComponentElement:function(inst){if(!ReactElement.isValidElement(inst)){return false}var prototype=inst.type.prototype;return typeof prototype.render==="function"&&typeof prototype.setState==="function"},isCompositeComponentElementWithType:function(inst,type){return!!(ReactTestUtils.isCompositeComponentElement(inst)&&inst.constructor===type)},getRenderedChildOfCompositeComponent:function(inst){if(!ReactTestUtils.isCompositeComponent(inst)){return null}var internalInstance=ReactInstanceMap.get(inst);return internalInstance._renderedComponent.getPublicInstance()},findAllInRenderedTree:function(inst,test){if(!inst){return[]}var ret=test(inst)?[inst]:[];if(ReactTestUtils.isDOMComponent(inst)){var internalInstance=ReactInstanceMap.get(inst);var renderedChildren=internalInstance._renderedComponent._renderedChildren;var key;for(key in renderedChildren){if(!renderedChildren.hasOwnProperty(key)){continue}if(!renderedChildren[key].getPublicInstance){continue}ret=ret.concat(ReactTestUtils.findAllInRenderedTree(renderedChildren[key].getPublicInstance(),test))}}else if(ReactTestUtils.isCompositeComponent(inst)){ret=ret.concat(ReactTestUtils.findAllInRenderedTree(ReactTestUtils.getRenderedChildOfCompositeComponent(inst),test))}return ret},scryRenderedDOMComponentsWithClass:function(root,className){return ReactTestUtils.findAllInRenderedTree(root,function(inst){var instClassName=inst.props.className;return ReactTestUtils.isDOMComponent(inst)&&(instClassName&&(" "+instClassName+" ").indexOf(" "+className+" ")!==-1)})},findRenderedDOMComponentWithClass:function(root,className){var all=ReactTestUtils.scryRenderedDOMComponentsWithClass(root,className);if(all.length!==1){throw new Error("Did not find exactly one match "+"(found: "+all.length+") for class:"+className)}return all[0]},scryRenderedDOMComponentsWithTag:function(root,tagName){return ReactTestUtils.findAllInRenderedTree(root,function(inst){return ReactTestUtils.isDOMComponent(inst)&&inst.tagName===tagName.toUpperCase()})},findRenderedDOMComponentWithTag:function(root,tagName){var all=ReactTestUtils.scryRenderedDOMComponentsWithTag(root,tagName);if(all.length!==1){throw new Error("Did not find exactly one match for tag:"+tagName)}return all[0]},scryRenderedComponentsWithType:function(root,componentType){return ReactTestUtils.findAllInRenderedTree(root,function(inst){return ReactTestUtils.isCompositeComponentWithType(inst,componentType)})},findRenderedComponentWithType:function(root,componentType){var all=ReactTestUtils.scryRenderedComponentsWithType(root,componentType);if(all.length!==1){throw new Error("Did not find exactly one match for componentType:"+componentType)}return all[0]},mockComponent:function(module,mockTagName){mockTagName=mockTagName||module.mockTagName||"div";module.prototype.render.mockImplementation(function(){return React.createElement(mockTagName,null,this.props.children)});return this},simulateNativeEventOnNode:function(topLevelType,node,fakeNativeEvent){fakeNativeEvent.target=node;ReactBrowserEventEmitter.ReactEventListener.dispatchEvent(topLevelType,fakeNativeEvent)},simulateNativeEventOnDOMComponent:function(topLevelType,comp,fakeNativeEvent){ReactTestUtils.simulateNativeEventOnNode(topLevelType,comp.getDOMNode(),fakeNativeEvent)},nativeTouchData:function(x,y){return{touches:[{pageX:x,pageY:y}]}},createRenderer:function(){return new ReactShallowRenderer},Simulate:null,SimulateNative:{}};var ReactShallowRenderer=function(){this._instance=null};ReactShallowRenderer.prototype.getRenderOutput=function(){return this._instance&&this._instance._renderedComponent&&this._instance._renderedComponent._renderedOutput||null};var NoopInternalComponent=function(element){this._renderedOutput=element;this._currentElement=element===null||element===false?ReactEmptyComponent.emptyElement:element};NoopInternalComponent.prototype={mountComponent:function(){},receiveComponent:function(element){this._renderedOutput=element;this._currentElement=element===null||element===false?ReactEmptyComponent.emptyElement:element},unmountComponent:function(){}};var ShallowComponentWrapper=function(){};assign(ShallowComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:function(element){return new NoopInternalComponent(element)},_replaceNodeWithMarkupByID:function(){},_renderValidatedComponent:ReactCompositeComponent.Mixin._renderValidatedComponentWithoutOwnerOrContext});ReactShallowRenderer.prototype.render=function(element,context){if(!context){context=emptyObject}var transaction=ReactUpdates.ReactReconcileTransaction.getPooled();this._render(element,transaction,context);ReactUpdates.ReactReconcileTransaction.release(transaction)};ReactShallowRenderer.prototype.unmount=function(){if(this._instance){this._instance.unmountComponent()}};ReactShallowRenderer.prototype._render=function(element,transaction,context){if(!this._instance){var rootID=ReactInstanceHandles.createReactRootID();var instance=new ShallowComponentWrapper(element.type);instance.construct(element);instance.mountComponent(rootID,transaction,context);this._instance=instance}else{this._instance.receiveComponent(element,transaction,context)}};function makeSimulator(eventType){return function(domComponentOrNode,eventData){var node;if(ReactTestUtils.isDOMComponent(domComponentOrNode)){node=domComponentOrNode.getDOMNode()}else if(domComponentOrNode.tagName){node=domComponentOrNode}var fakeNativeEvent=new Event;fakeNativeEvent.target=node;var event=new SyntheticEvent(ReactBrowserEventEmitter.eventNameDispatchConfigs[eventType],ReactMount.getID(node),fakeNativeEvent);assign(event,eventData);EventPropagators.accumulateTwoPhaseDispatches(event);ReactUpdates.batchedUpdates(function(){EventPluginHub.enqueueEvents(event);EventPluginHub.processEventQueue()})}}function buildSimulators(){ReactTestUtils.Simulate={};var eventType;for(eventType in ReactBrowserEventEmitter.eventNameDispatchConfigs){ReactTestUtils.Simulate[eventType]=makeSimulator(eventType)}}var oldInjectEventPluginOrder=EventPluginHub.injection.injectEventPluginOrder;EventPluginHub.injection.injectEventPluginOrder=function(){oldInjectEventPluginOrder.apply(this,arguments);buildSimulators()};var oldInjectEventPlugins=EventPluginHub.injection.injectEventPluginsByName;EventPluginHub.injection.injectEventPluginsByName=function(){oldInjectEventPlugins.apply(this,arguments);buildSimulators()};buildSimulators();function makeNativeSimulator(eventType){return function(domComponentOrNode,nativeEventData){var fakeNativeEvent=new Event(eventType);assign(fakeNativeEvent,nativeEventData);if(ReactTestUtils.isDOMComponent(domComponentOrNode)){ReactTestUtils.simulateNativeEventOnDOMComponent(eventType,domComponentOrNode,fakeNativeEvent)}else if(!!domComponentOrNode.tagName){ReactTestUtils.simulateNativeEventOnNode(eventType,domComponentOrNode,fakeNativeEvent)}}}var eventType;for(eventType in topLevelTypes){var convenienceName=eventType.indexOf("top")===0?eventType.charAt(3).toLowerCase()+eventType.substr(4):eventType;ReactTestUtils.SimulateNative[convenienceName]=makeNativeSimulator(eventType)}module.exports=ReactTestUtils},{"./EventConstants":433,"./EventPluginHub":435,"./EventPropagators":438,"./Object.assign":446,"./React":448,"./ReactBrowserEventEmitter":450,"./ReactCompositeComponent":460,"./ReactElement":480,"./ReactEmptyComponent":482,"./ReactInstanceHandles":489,"./ReactInstanceMap":490,"./ReactMount":494,"./ReactUpdates":517,"./SyntheticEvent":526,"./emptyObject":548}],513:[function(require,module,exports){"use strict";var ReactChildren=require("./ReactChildren");var ReactFragment=require("./ReactFragment");var ReactTransitionChildMapping={getChildMapping:function(children){if(!children){return children}return ReactFragment.extract(ReactChildren.map(children,function(child){
return child}))},mergeChildMappings:function(prev,next){prev=prev||{};next=next||{};function getValueForKey(key){if(next.hasOwnProperty(key)){return next[key]}else{return prev[key]}}var nextKeysPending={};var pendingKeys=[];for(var prevKey in prev){if(next.hasOwnProperty(prevKey)){if(pendingKeys.length){nextKeysPending[prevKey]=pendingKeys;pendingKeys=[]}}else{pendingKeys.push(prevKey)}}var i;var childMapping={};for(var nextKey in next){if(nextKeysPending.hasOwnProperty(nextKey)){for(i=0;i<nextKeysPending[nextKey].length;i++){var pendingNextKey=nextKeysPending[nextKey][i];childMapping[nextKeysPending[nextKey][i]]=getValueForKey(pendingNextKey)}}childMapping[nextKey]=getValueForKey(nextKey)}for(i=0;i<pendingKeys.length;i++){childMapping[pendingKeys[i]]=getValueForKey(pendingKeys[i])}return childMapping}};module.exports=ReactTransitionChildMapping},{"./ReactChildren":454,"./ReactFragment":486}],514:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var EVENT_NAME_MAP={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}};var endEvents=[];function detectEvents(){var testEl=document.createElement("div");var style=testEl.style;if(!("AnimationEvent"in window)){delete EVENT_NAME_MAP.animationend.animation}if(!("TransitionEvent"in window)){delete EVENT_NAME_MAP.transitionend.transition}for(var baseEventName in EVENT_NAME_MAP){var baseEvents=EVENT_NAME_MAP[baseEventName];for(var styleName in baseEvents){if(styleName in style){endEvents.push(baseEvents[styleName]);break}}}}if(ExecutionEnvironment.canUseDOM){detectEvents()}function addEventListener(node,eventName,eventListener){node.addEventListener(eventName,eventListener,false)}function removeEventListener(node,eventName,eventListener){node.removeEventListener(eventName,eventListener,false)}var ReactTransitionEvents={addEndEventListener:function(node,eventListener){if(endEvents.length===0){window.setTimeout(eventListener,0);return}endEvents.forEach(function(endEvent){addEventListener(node,endEvent,eventListener)})},removeEndEventListener:function(node,eventListener){if(endEvents.length===0){return}endEvents.forEach(function(endEvent){removeEventListener(node,endEvent,eventListener)})}};module.exports=ReactTransitionEvents},{"./ExecutionEnvironment":439}],515:[function(require,module,exports){"use strict";var React=require("./React");var ReactTransitionChildMapping=require("./ReactTransitionChildMapping");var assign=require("./Object.assign");var cloneWithProps=require("./cloneWithProps");var emptyFunction=require("./emptyFunction");var ReactTransitionGroup=React.createClass({displayName:"ReactTransitionGroup",propTypes:{component:React.PropTypes.any,childFactory:React.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:emptyFunction.thatReturnsArgument}},getInitialState:function(){return{children:ReactTransitionChildMapping.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[]},componentDidMount:function(){var initialChildMapping=this.state.children;for(var key in initialChildMapping){if(initialChildMapping[key]){this.performAppear(key)}}},componentWillReceiveProps:function(nextProps){var nextChildMapping=ReactTransitionChildMapping.getChildMapping(nextProps.children);var prevChildMapping=this.state.children;this.setState({children:ReactTransitionChildMapping.mergeChildMappings(prevChildMapping,nextChildMapping)});var key;for(key in nextChildMapping){var hasPrev=prevChildMapping&&prevChildMapping.hasOwnProperty(key);if(nextChildMapping[key]&&!hasPrev&&!this.currentlyTransitioningKeys[key]){this.keysToEnter.push(key)}}for(key in prevChildMapping){var hasNext=nextChildMapping&&nextChildMapping.hasOwnProperty(key);if(prevChildMapping[key]&&!hasNext&&!this.currentlyTransitioningKeys[key]){this.keysToLeave.push(key)}}},componentDidUpdate:function(){var keysToEnter=this.keysToEnter;this.keysToEnter=[];keysToEnter.forEach(this.performEnter);var keysToLeave=this.keysToLeave;this.keysToLeave=[];keysToLeave.forEach(this.performLeave)},performAppear:function(key){this.currentlyTransitioningKeys[key]=true;var component=this.refs[key];if(component.componentWillAppear){component.componentWillAppear(this._handleDoneAppearing.bind(this,key))}else{this._handleDoneAppearing(key)}},_handleDoneAppearing:function(key){var component=this.refs[key];if(component.componentDidAppear){component.componentDidAppear()}delete this.currentlyTransitioningKeys[key];var currentChildMapping=ReactTransitionChildMapping.getChildMapping(this.props.children);if(!currentChildMapping||!currentChildMapping.hasOwnProperty(key)){this.performLeave(key)}},performEnter:function(key){this.currentlyTransitioningKeys[key]=true;var component=this.refs[key];if(component.componentWillEnter){component.componentWillEnter(this._handleDoneEntering.bind(this,key))}else{this._handleDoneEntering(key)}},_handleDoneEntering:function(key){var component=this.refs[key];if(component.componentDidEnter){component.componentDidEnter()}delete this.currentlyTransitioningKeys[key];var currentChildMapping=ReactTransitionChildMapping.getChildMapping(this.props.children);if(!currentChildMapping||!currentChildMapping.hasOwnProperty(key)){this.performLeave(key)}},performLeave:function(key){this.currentlyTransitioningKeys[key]=true;var component=this.refs[key];if(component.componentWillLeave){component.componentWillLeave(this._handleDoneLeaving.bind(this,key))}else{this._handleDoneLeaving(key)}},_handleDoneLeaving:function(key){var component=this.refs[key];if(component.componentDidLeave){component.componentDidLeave()}delete this.currentlyTransitioningKeys[key];var currentChildMapping=ReactTransitionChildMapping.getChildMapping(this.props.children);if(currentChildMapping&&currentChildMapping.hasOwnProperty(key)){this.performEnter(key)}else{var newChildren=assign({},this.state.children);delete newChildren[key];this.setState({children:newChildren})}},render:function(){var childrenToRender=[];for(var key in this.state.children){var child=this.state.children[key];if(child){childrenToRender.push(cloneWithProps(this.props.childFactory(child),{ref:key,key:key}))}}return React.createElement(this.props.component,this.props,childrenToRender)}});module.exports=ReactTransitionGroup},{"./Object.assign":446,"./React":448,"./ReactTransitionChildMapping":513,"./cloneWithProps":540,"./emptyFunction":547}],516:[function(require,module,exports){(function(process){"use strict";var ReactLifeCycle=require("./ReactLifeCycle");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactElement=require("./ReactElement");var ReactInstanceMap=require("./ReactInstanceMap");var ReactUpdates=require("./ReactUpdates");var assign=require("./Object.assign");var invariant=require("./invariant");var warning=require("./warning");function enqueueUpdate(internalInstance){if(internalInstance!==ReactLifeCycle.currentlyMountingInstance){ReactUpdates.enqueueUpdate(internalInstance)}}function getInternalInstanceReadyForUpdate(publicInstance,callerName){"production"!==process.env.NODE_ENV?invariant(ReactCurrentOwner.current==null,"%s(...): Cannot update during an existing state transition "+"(such as within `render`). Render methods should be a pure function "+"of props and state.",callerName):invariant(ReactCurrentOwner.current==null);var internalInstance=ReactInstanceMap.get(publicInstance);if(!internalInstance){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(!callerName,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted "+"component. This is a no-op.",callerName,callerName):null}return null}if(internalInstance===ReactLifeCycle.currentlyUnmountingInstance){return null}return internalInstance}var ReactUpdateQueue={enqueueCallback:function(publicInstance,callback){"production"!==process.env.NODE_ENV?invariant(typeof callback==="function","enqueueCallback(...): You called `setProps`, `replaceProps`, "+"`setState`, `replaceState`, or `forceUpdate` with a callback that "+"isn't callable."):invariant(typeof callback==="function");var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);if(!internalInstance||internalInstance===ReactLifeCycle.currentlyMountingInstance){return null}if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueCallbackInternal:function(internalInstance,callback){"production"!==process.env.NODE_ENV?invariant(typeof callback==="function","enqueueCallback(...): You called `setProps`, `replaceProps`, "+"`setState`, `replaceState`, or `forceUpdate` with a callback that "+"isn't callable."):invariant(typeof callback==="function");if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");if(!internalInstance){return}internalInstance._pendingForceUpdate=true;enqueueUpdate(internalInstance)},enqueueReplaceState:function(publicInstance,completeState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");if(!internalInstance){return}internalInstance._pendingStateQueue=[completeState];internalInstance._pendingReplaceState=true;enqueueUpdate(internalInstance)},enqueueSetState:function(publicInstance,partialState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(!internalInstance){return}var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState);enqueueUpdate(internalInstance)},enqueueSetProps:function(publicInstance,partialProps){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setProps");if(!internalInstance){return}"production"!==process.env.NODE_ENV?invariant(internalInstance._isTopLevel,"setProps(...): You called `setProps` on a "+"component with a parent. This is an anti-pattern since props will "+"get reactively updated when rendered. Instead, change the owner's "+"`render` method to pass the correct value as props to the component "+"where it is created."):invariant(internalInstance._isTopLevel);var element=internalInstance._pendingElement||internalInstance._currentElement;var props=assign({},element.props,partialProps);internalInstance._pendingElement=ReactElement.cloneAndReplaceProps(element,props);enqueueUpdate(internalInstance)},enqueueReplaceProps:function(publicInstance,props){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceProps");if(!internalInstance){return}"production"!==process.env.NODE_ENV?invariant(internalInstance._isTopLevel,"replaceProps(...): You called `replaceProps` on a "+"component with a parent. This is an anti-pattern since props will "+"get reactively updated when rendered. Instead, change the owner's "+"`render` method to pass the correct value as props to the component "+"where it is created."):invariant(internalInstance._isTopLevel);var element=internalInstance._pendingElement||internalInstance._currentElement;internalInstance._pendingElement=ReactElement.cloneAndReplaceProps(element,props);enqueueUpdate(internalInstance)},enqueueElementInternal:function(internalInstance,newElement){internalInstance._pendingElement=newElement;enqueueUpdate(internalInstance)}};module.exports=ReactUpdateQueue}).call(this,require("_process"))},{"./Object.assign":446,"./ReactCurrentOwner":462,"./ReactElement":480,"./ReactInstanceMap":490,"./ReactLifeCycle":491,"./ReactUpdates":517,"./invariant":568,"./warning":589,_process:35}],517:[function(require,module,exports){(function(process){"use strict";var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactPerf=require("./ReactPerf");var ReactReconciler=require("./ReactReconciler");var Transaction=require("./Transaction");var assign=require("./Object.assign");var invariant=require("./invariant");var warning=require("./warning");var dirtyComponents=[];var asapCallbackQueue=CallbackQueue.getPooled();var asapEnqueued=false;var batchingStrategy=null;function ensureInjected(){"production"!==process.env.NODE_ENV?invariant(ReactUpdates.ReactReconcileTransaction&&batchingStrategy,"ReactUpdates: must inject a reconcile transaction class and batching "+"strategy"):invariant(ReactUpdates.ReactReconcileTransaction&&batchingStrategy)}var NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){if(this.dirtyComponentsLength!==dirtyComponents.length){dirtyComponents.splice(0,this.dirtyComponentsLength);flushBatchedUpdates()}else{dirtyComponents.length=0}}};var UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}};var TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];function ReactUpdatesFlushTransaction(){this.reinitializeTransaction();this.dirtyComponentsLength=null;this.callbackQueue=CallbackQueue.getPooled();this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled()}assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null;CallbackQueue.release(this.callbackQueue);this.callbackQueue=null;ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction);this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}});PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);function batchedUpdates(callback,a,b,c,d){ensureInjected();batchingStrategy.batchedUpdates(callback,a,b,c,d)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;"production"!==process.env.NODE_ENV?invariant(len===dirtyComponents.length,"Expected flush transaction's stored dirty-components length (%s) to "+"match dirty-components array length (%s).",len,dirtyComponents.length):invariant(len===dirtyComponents.length);dirtyComponents.sort(mountOrderComparator);for(var i=0;i<len;i++){var component=dirtyComponents[i];var callbacks=component._pendingCallbacks;component._pendingCallbacks=null;ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction);if(callbacks){for(var j=0;j<callbacks.length;j++){transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}}}var flushBatchedUpdates=function(){while(dirtyComponents.length||asapEnqueued){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction);ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=false;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled();queue.notifyAll();CallbackQueue.release(queue)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);function enqueueUpdate(component){ensureInjected();"production"!==process.env.NODE_ENV?warning(ReactCurrentOwner.current==null,"enqueueUpdate(): Render methods should be a pure function of props "+"and state; triggering nested component updates from render is not "+"allowed. If necessary, trigger nested updates in "+"componentDidUpdate."):null;if(!batchingStrategy.isBatchingUpdates){batchingStrategy.batchedUpdates(enqueueUpdate,component);return}dirtyComponents.push(component)}function asap(callback,context){"production"!==process.env.NODE_ENV?invariant(batchingStrategy.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context where"+"updates are not being batched."):invariant(batchingStrategy.isBatchingUpdates);asapCallbackQueue.enqueue(callback,context);asapEnqueued=true}var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){"production"!==process.env.NODE_ENV?invariant(ReconcileTransaction,"ReactUpdates: must provide a reconcile transaction class"):invariant(ReconcileTransaction);ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){"production"!==process.env.NODE_ENV?invariant(_batchingStrategy,"ReactUpdates: must provide a batching strategy"):invariant(_batchingStrategy);"production"!==process.env.NODE_ENV?invariant(typeof _batchingStrategy.batchedUpdates==="function","ReactUpdates: must provide a batchedUpdates() function"):invariant(typeof _batchingStrategy.batchedUpdates==="function");"production"!==process.env.NODE_ENV?invariant(typeof _batchingStrategy.isBatchingUpdates==="boolean","ReactUpdates: must provide an isBatchingUpdates boolean attribute"):invariant(typeof _batchingStrategy.isBatchingUpdates==="boolean");batchingStrategy=_batchingStrategy}};var ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates}).call(this,require("_process"))},{"./CallbackQueue":424,"./Object.assign":446,"./PooledClass":447,"./ReactCurrentOwner":462,"./ReactPerf":499,"./ReactReconciler":506,"./Transaction":534,"./invariant":568,"./warning":589,_process:35}],518:[function(require,module,exports){(function(process){"use strict";var LinkedStateMixin=require("./LinkedStateMixin");var React=require("./React");var ReactComponentWithPureRenderMixin=require("./ReactComponentWithPureRenderMixin");var ReactCSSTransitionGroup=require("./ReactCSSTransitionGroup");var ReactFragment=require("./ReactFragment");var ReactTransitionGroup=require("./ReactTransitionGroup");var ReactUpdates=require("./ReactUpdates");var cx=require("./cx");var cloneWithProps=require("./cloneWithProps");var update=require("./update");React.addons={CSSTransitionGroup:ReactCSSTransitionGroup,LinkedStateMixin:LinkedStateMixin,PureRenderMixin:ReactComponentWithPureRenderMixin,TransitionGroup:ReactTransitionGroup,batchedUpdates:ReactUpdates.batchedUpdates,classSet:cx,cloneWithProps:cloneWithProps,createFragment:ReactFragment.create,update:update};if("production"!==process.env.NODE_ENV){React.addons.Perf=require("./ReactDefaultPerf");React.addons.TestUtils=require("./ReactTestUtils")}module.exports=React}).call(this,require("_process"))},{"./LinkedStateMixin":442,"./React":448,"./ReactCSSTransitionGroup":451,"./ReactComponentWithPureRenderMixin":459,"./ReactDefaultPerf":478,"./ReactFragment":486,"./ReactTestUtils":512,"./ReactTransitionGroup":515,"./ReactUpdates":517,"./cloneWithProps":540,"./cx":545,"./update":588,_process:35}],519:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE;var SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};module.exports=SVGDOMPropertyConfig},{"./DOMProperty":428}],520:[function(require,module,exports){"use strict";var EventConstants=require("./EventConstants");var EventPropagators=require("./EventPropagators");var ReactInputSelection=require("./ReactInputSelection");var SyntheticEvent=require("./SyntheticEvent");var getActiveElement=require("./getActiveElement");var isTextInputElement=require("./isTextInputElement");var keyOf=require("./keyOf");var shallowEqual=require("./shallowEqual");var topLevelTypes=EventConstants.topLevelTypes;var eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}};var activeElement=null;var activeElementID=null;var lastSelection=null;var mouseDown=false;function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node)){return{start:node.selectionStart,end:node.selectionEnd}}else if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}else if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent){if(mouseDown||activeElement==null||activeElement!==getActiveElement()){return null}var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementID,nativeEvent);syntheticEvent.type="select";syntheticEvent.target=activeElement;EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent);return syntheticEvent}}var SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){switch(topLevelType){case topLevelTypes.topFocus:if(isTextInputElement(topLevelTarget)||topLevelTarget.contentEditable==="true"){activeElement=topLevelTarget;activeElementID=topLevelTargetID;lastSelection=null}break;case topLevelTypes.topBlur:activeElement=null;activeElementID=null;lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=true;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:mouseDown=false;return constructSelectEvent(nativeEvent);case topLevelTypes.topSelectionChange:case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(nativeEvent)}}};module.exports=SelectEventPlugin},{"./EventConstants":433,"./EventPropagators":438,"./ReactInputSelection":488,"./SyntheticEvent":526,"./getActiveElement":554,"./isTextInputElement":571,"./keyOf":575,"./shallowEqual":584}],521:[function(require,module,exports){"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53);var ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex},{}],522:[function(require,module,exports){(function(process){"use strict";var EventConstants=require("./EventConstants");var EventPluginUtils=require("./EventPluginUtils");var EventPropagators=require("./EventPropagators");var SyntheticClipboardEvent=require("./SyntheticClipboardEvent");var SyntheticEvent=require("./SyntheticEvent");var SyntheticFocusEvent=require("./SyntheticFocusEvent");var SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var SyntheticDragEvent=require("./SyntheticDragEvent");var SyntheticTouchEvent=require("./SyntheticTouchEvent");var SyntheticUIEvent=require("./SyntheticUIEvent");var SyntheticWheelEvent=require("./SyntheticWheelEvent");var getEventCharCode=require("./getEventCharCode");var invariant=require("./invariant");var keyOf=require("./keyOf");var warning=require("./warning");var topLevelTypes=EventConstants.topLevelTypes;var eventTypes={blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:true}),captured:keyOf({onBlurCapture:true})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:true}),captured:keyOf({onClickCapture:true})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:true}),captured:keyOf({onContextMenuCapture:true})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:true}),captured:keyOf({onCopyCapture:true})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:true}),captured:keyOf({onCutCapture:true})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:true}),captured:keyOf({onDoubleClickCapture:true})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:true}),captured:keyOf({onDragCapture:true})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:true}),captured:keyOf({onDragEndCapture:true})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:true}),captured:keyOf({onDragEnterCapture:true})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:true}),captured:keyOf({onDragExitCapture:true})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:true}),captured:keyOf({onDragLeaveCapture:true})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:true}),captured:keyOf({onDragOverCapture:true})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:true}),captured:keyOf({onDragStartCapture:true})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:true}),captured:keyOf({onDropCapture:true})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:true}),captured:keyOf({onFocusCapture:true})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:true}),captured:keyOf({onInputCapture:true})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:true}),captured:keyOf({onKeyDownCapture:true})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:true}),captured:keyOf({onKeyPressCapture:true})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:true}),captured:keyOf({onKeyUpCapture:true})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:true}),captured:keyOf({onLoadCapture:true})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:true}),captured:keyOf({onErrorCapture:true})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:true}),captured:keyOf({onMouseDownCapture:true})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:true}),captured:keyOf({onMouseMoveCapture:true})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:true}),captured:keyOf({onMouseOutCapture:true})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:true}),captured:keyOf({onMouseOverCapture:true})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:true}),captured:keyOf({onMouseUpCapture:true})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:true}),captured:keyOf({onPasteCapture:true})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:true}),captured:keyOf({onResetCapture:true})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:true}),captured:keyOf({onScrollCapture:true})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:true}),captured:keyOf({onSubmitCapture:true})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:true}),captured:keyOf({onTouchCancelCapture:true})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:true}),captured:keyOf({onTouchEndCapture:true})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:true}),captured:keyOf({onTouchMoveCapture:true})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:true}),captured:keyOf({onTouchStartCapture:true})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:true}),captured:keyOf({onWheelCapture:true})}}};var topLevelEventsToDispatchConfig={topBlur:eventTypes.blur,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSubmit:eventTypes.submit,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig){topLevelEventsToDispatchConfig[type].dependencies=[type]}var SimpleEventPlugin={eventTypes:eventTypes,executeDispatch:function(event,listener,domID){var returnValue=EventPluginUtils.executeDispatch(event,listener,domID);"production"!==process.env.NODE_ENV?warning(typeof returnValue!=="boolean","Returning `false` from an event handler is deprecated and will be "+"ignored in a future release. Instead, manually call "+"e.stopPropagation() or e.preventDefault(), as appropriate."):null;if(returnValue===false){event.stopPropagation();event.preventDefault()}},extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig){return null}var EventConstructor;switch(topLevelType){case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topError:case topLevelTypes.topReset:case topLevelTypes.topSubmit:EventConstructor=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(getEventCharCode(nativeEvent)===0){return null}case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:EventConstructor=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:EventConstructor=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(nativeEvent.button===2){return null}case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:EventConstructor=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:
case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:EventConstructor=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:EventConstructor=SyntheticTouchEvent;break;case topLevelTypes.topScroll:EventConstructor=SyntheticUIEvent;break;case topLevelTypes.topWheel:EventConstructor=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:EventConstructor=SyntheticClipboardEvent;break}"production"!==process.env.NODE_ENV?invariant(EventConstructor,"SimpleEventPlugin: Unhandled event type, `%s`.",topLevelType):invariant(EventConstructor);var event=EventConstructor.getPooled(dispatchConfig,topLevelTargetID,nativeEvent);EventPropagators.accumulateTwoPhaseDispatches(event);return event}};module.exports=SimpleEventPlugin}).call(this,require("_process"))},{"./EventConstants":433,"./EventPluginUtils":437,"./EventPropagators":438,"./SyntheticClipboardEvent":523,"./SyntheticDragEvent":525,"./SyntheticEvent":526,"./SyntheticFocusEvent":527,"./SyntheticKeyboardEvent":529,"./SyntheticMouseEvent":530,"./SyntheticTouchEvent":531,"./SyntheticUIEvent":532,"./SyntheticWheelEvent":533,"./getEventCharCode":555,"./invariant":568,"./keyOf":575,"./warning":589,_process:35}],523:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface);module.exports=SyntheticClipboardEvent},{"./SyntheticEvent":526}],524:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var CompositionEventInterface={data:null};function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface);module.exports=SyntheticCompositionEvent},{"./SyntheticEvent":526}],525:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var DragEventInterface={dataTransfer:null};function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface);module.exports=SyntheticDragEvent},{"./SyntheticMouseEvent":530}],526:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var assign=require("./Object.assign");var emptyFunction=require("./emptyFunction");var getEventTarget=require("./getEventTarget");var EventInterface={type:null,target:getEventTarget,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function SyntheticEvent(dispatchConfig,dispatchMarker,nativeEvent){this.dispatchConfig=dispatchConfig;this.dispatchMarker=dispatchMarker;this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface){if(!Interface.hasOwnProperty(propName)){continue}var normalize=Interface[propName];if(normalize){this[propName]=normalize(nativeEvent)}else{this[propName]=nativeEvent[propName]}}var defaultPrevented=nativeEvent.defaultPrevented!=null?nativeEvent.defaultPrevented:nativeEvent.returnValue===false;if(defaultPrevented){this.isDefaultPrevented=emptyFunction.thatReturnsTrue}else{this.isDefaultPrevented=emptyFunction.thatReturnsFalse}this.isPropagationStopped=emptyFunction.thatReturnsFalse}assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=true;var event=this.nativeEvent;if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}this.isDefaultPrevented=emptyFunction.thatReturnsTrue},stopPropagation:function(){var event=this.nativeEvent;if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}this.isPropagationStopped=emptyFunction.thatReturnsTrue},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface){this[propName]=null}this.dispatchConfig=null;this.dispatchMarker=null;this.nativeEvent=null}});SyntheticEvent.Interface=EventInterface;SyntheticEvent.augmentClass=function(Class,Interface){var Super=this;var prototype=Object.create(Super.prototype);assign(prototype,Class.prototype);Class.prototype=prototype;Class.prototype.constructor=Class;Class.Interface=assign({},Super.Interface,Interface);Class.augmentClass=Super.augmentClass;PooledClass.addPoolingTo(Class,PooledClass.threeArgumentPooler)};PooledClass.addPoolingTo(SyntheticEvent,PooledClass.threeArgumentPooler);module.exports=SyntheticEvent},{"./Object.assign":446,"./PooledClass":447,"./emptyFunction":547,"./getEventTarget":558}],527:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var FocusEventInterface={relatedTarget:null};function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface);module.exports=SyntheticFocusEvent},{"./SyntheticUIEvent":532}],528:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var InputEventInterface={data:null};function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface);module.exports=SyntheticInputEvent},{"./SyntheticEvent":526}],529:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventCharCode=require("./getEventCharCode");var getEventKey=require("./getEventKey");var getEventModifierState=require("./getEventModifierState");var KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){if(event.type==="keypress"){return getEventCharCode(event)}return 0},keyCode:function(event){if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0},which:function(event){if(event.type==="keypress"){return getEventCharCode(event)}if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0}};function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface);module.exports=SyntheticKeyboardEvent},{"./SyntheticUIEvent":532,"./getEventCharCode":555,"./getEventKey":556,"./getEventModifierState":557}],530:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var ViewportMetrics=require("./ViewportMetrics");var getEventModifierState=require("./getEventModifierState");var MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;if("which"in event){return button}return button===2?2:button===4?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface);module.exports=SyntheticMouseEvent},{"./SyntheticUIEvent":532,"./ViewportMetrics":535,"./getEventModifierState":557}],531:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventModifierState=require("./getEventModifierState");var TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface);module.exports=SyntheticTouchEvent},{"./SyntheticUIEvent":532,"./getEventModifierState":557}],532:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var getEventTarget=require("./getEventTarget");var UIEventInterface={view:function(event){if(event.view){return event.view}var target=getEventTarget(event);if(target!=null&&target.window===target){return target}var doc=target.ownerDocument;if(doc){return doc.defaultView||doc.parentWindow}else{return window}},detail:function(event){return event.detail||0}};function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface);module.exports=SyntheticUIEvent},{"./SyntheticEvent":526,"./getEventTarget":558}],533:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent)}SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface);module.exports=SyntheticWheelEvent},{"./SyntheticMouseEvent":530}],534:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();if(!this.wrapperInitData){this.wrapperInitData=[]}else{this.wrapperInitData.length=0}this._isInTransaction=false},_isInTransaction:false,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){"production"!==process.env.NODE_ENV?invariant(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there "+"is already an outstanding transaction."):invariant(!this.isInTransaction());var errorThrown;var ret;try{this._isInTransaction=true;errorThrown=true;this.initializeAll(0);ret=method.call(scope,a,b,c,d,e,f);errorThrown=false}finally{try{if(errorThrown){try{this.closeAll(0)}catch(err){}}else{this.closeAll(0)}}finally{this._isInTransaction=false}}return ret},initializeAll:function(startIndex){var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=Transaction.OBSERVED_ERROR;this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===Transaction.OBSERVED_ERROR){try{this.initializeAll(i+1)}catch(err){}}}}},closeAll:function(startIndex){"production"!==process.env.NODE_ENV?invariant(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open."):invariant(this.isInTransaction());var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];var initData=this.wrapperInitData[i];var errorThrown;try{errorThrown=true;if(initData!==Transaction.OBSERVED_ERROR&&wrapper.close){wrapper.close.call(this,initData)}errorThrown=false}finally{if(errorThrown){try{this.closeAll(i+1)}catch(e){}}}}this.wrapperInitData.length=0}};var Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction}).call(this,require("_process"))},{"./invariant":568,_process:35}],535:[function(require,module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x;ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},{}],536:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");function accumulateInto(current,next){"production"!==process.env.NODE_ENV?invariant(next!=null,"accumulateInto(...): Accumulated items must not be null or undefined."):invariant(next!=null);if(current==null){return next}var currentIsArray=Array.isArray(current);var nextIsArray=Array.isArray(next);if(currentIsArray&&nextIsArray){current.push.apply(current,next);return current}if(currentIsArray){current.push(next);return current}if(nextIsArray){return[current].concat(next)}return[current,next]}module.exports=accumulateInto}).call(this,require("_process"))},{"./invariant":568,_process:35}],537:[function(require,module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;for(var i=0;i<data.length;i++){a=(a+data.charCodeAt(i))%MOD;b=(b+a)%MOD}return a|b<<16}module.exports=adler32},{}],538:[function(require,module,exports){var _hyphenPattern=/-(.)/g;function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}module.exports=camelize},{}],539:[function(require,module,exports){"use strict";var camelize=require("./camelize");var msPattern=/^-ms-/;function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}module.exports=camelizeStyleName},{"./camelize":538}],540:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactPropTransferer=require("./ReactPropTransferer");var keyOf=require("./keyOf");var warning=require("./warning");var CHILDREN_PROP=keyOf({children:null});function cloneWithProps(child,props){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(!child.ref,"You are calling cloneWithProps() on a child with a ref. This is "+"dangerous because you're creating a new child which will not be "+"added as a ref to its parent."):null}var newProps=ReactPropTransferer.mergeProps(props,child.props);if(!newProps.hasOwnProperty(CHILDREN_PROP)&&child.props.hasOwnProperty(CHILDREN_PROP)){newProps.children=child.props.children}return ReactElement.createElement(child.type,newProps)}module.exports=cloneWithProps}).call(this,require("_process"))},{"./ReactElement":480,"./ReactPropTransferer":500,"./keyOf":575,"./warning":589,_process:35}],541:[function(require,module,exports){var isTextNode=require("./isTextNode");function containsNode(outerNode,innerNode){if(!outerNode||!innerNode){return false}else if(outerNode===innerNode){return true}else if(isTextNode(outerNode)){return false}else if(isTextNode(innerNode)){return containsNode(outerNode,innerNode.parentNode)}else if(outerNode.contains){return outerNode.contains(innerNode)}else if(outerNode.compareDocumentPosition){return!!(outerNode.compareDocumentPosition(innerNode)&16)}else{return false}}module.exports=containsNode},{"./isTextNode":572}],542:[function(require,module,exports){var toArray=require("./toArray");function hasArrayNature(obj){return!!obj&&(typeof obj=="object"||typeof obj=="function")&&"length"in obj&&!("setInterval"in obj)&&typeof obj.nodeType!="number"&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){if(!hasArrayNature(obj)){return[obj]}else if(Array.isArray(obj)){return obj.slice()}else{return toArray(obj)}}module.exports=createArrayFromMixed},{"./toArray":586}],543:[function(require,module,exports){(function(process){"use strict";var ReactClass=require("./ReactClass");var ReactElement=require("./ReactElement");var invariant=require("./invariant");function createFullPageComponent(tag){var elementFactory=ReactElement.createFactory(tag);var FullPageComponent=ReactClass.createClass({tagName:tag.toUpperCase(),displayName:"ReactFullPageComponent"+tag,componentWillUnmount:function(){"production"!==process.env.NODE_ENV?invariant(false,"%s tried to unmount. Because of cross-browser quirks it is "+"impossible to unmount some top-level components (eg <html>, <head>, "+"and <body>) reliably and efficiently. To fix this, have a single "+"top-level component that never unmounts render these elements.",this.constructor.displayName):invariant(false)},render:function(){return elementFactory(this.props)}});return FullPageComponent}module.exports=createFullPageComponent}).call(this,require("_process"))},{"./ReactClass":455,"./ReactElement":480,"./invariant":568,_process:35}],544:[function(require,module,exports){(function(process){var ExecutionEnvironment=require("./ExecutionEnvironment");var createArrayFromMixed=require("./createArrayFromMixed");var getMarkupWrap=require("./getMarkupWrap");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var nodeNamePattern=/^\s*<(\w+)/;function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;"production"!==process.env.NODE_ENV?invariant(!!dummyNode,"createNodesFromMarkup dummy not initialized"):invariant(!!dummyNode);var nodeName=getNodeName(markup);var wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];var wrapDepth=wrap[0];while(wrapDepth--){node=node.lastChild}}else{node.innerHTML=markup}var scripts=node.getElementsByTagName("script");if(scripts.length){"production"!==process.env.NODE_ENV?invariant(handleScript,"createNodesFromMarkup(...): Unexpected <script> element rendered."):invariant(handleScript);createArrayFromMixed(scripts).forEach(handleScript)}var nodes=createArrayFromMixed(node.childNodes);while(node.lastChild){node.removeChild(node.lastChild)}return nodes}module.exports=createNodesFromMarkup}).call(this,require("_process"))},{"./ExecutionEnvironment":439,"./createArrayFromMixed":542,"./getMarkupWrap":560,"./invariant":568,_process:35}],545:[function(require,module,exports){(function(process){"use strict";var warning=require("./warning");var warned=false;function cx(classNames){if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(warned,"React.addons.classSet will be deprecated in a future version. See "+"http://fb.me/react-addons-classset"):null;warned=true}if(typeof classNames=="object"){return Object.keys(classNames).filter(function(className){return classNames[className]}).join(" ")}else{return Array.prototype.join.call(arguments," ")}}module.exports=cx}).call(this,require("_process"))},{"./warning":589,_process:35}],546:[function(require,module,exports){"use strict";var CSSProperty=require("./CSSProperty");var isUnitlessNumber=CSSProperty.isUnitlessNumber;function dangerousStyleValue(name,value){var isEmpty=value==null||typeof value==="boolean"||value==="";if(isEmpty){return""}var isNonNumeric=isNaN(value);if(isNonNumeric||value===0||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]){return""+value}if(typeof value==="string"){value=value.trim()}return value+"px"}module.exports=dangerousStyleValue},{"./CSSProperty":422}],547:[function(require,module,exports){function makeEmptyFunction(arg){return function(){return arg}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],548:[function(require,module,exports){(function(process){"use strict";var emptyObject={};if("production"!==process.env.NODE_ENV){Object.freeze(emptyObject)}module.exports=emptyObject}).call(this,require("_process"))},{_process:35}],549:[function(require,module,exports){"use strict";var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};var ESCAPE_REGEX=/[&><"']/g;function escaper(match){return ESCAPE_LOOKUP[match]}function escapeTextContentForBrowser(text){return(""+text).replace(ESCAPE_REGEX,escaper)}module.exports=escapeTextContentForBrowser},{}],550:[function(require,module,exports){(function(process){"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactInstanceMap=require("./ReactInstanceMap");var ReactMount=require("./ReactMount");var invariant=require("./invariant");var isNode=require("./isNode");var warning=require("./warning");function findDOMNode(componentOrElement){if("production"!==process.env.NODE_ENV){var owner=ReactCurrentOwner.current;if(owner!==null){"production"!==process.env.NODE_ENV?warning(owner._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):null;owner._warnedAboutRefsInRender=true}}if(componentOrElement==null){return null}if(isNode(componentOrElement)){return componentOrElement}if(ReactInstanceMap.has(componentOrElement)){return ReactMount.getNodeFromInstance(componentOrElement)}"production"!==process.env.NODE_ENV?invariant(componentOrElement.render==null||typeof componentOrElement.render!=="function","Component (with keys: %s) contains `render` method "+"but is not mounted in the DOM",Object.keys(componentOrElement)):invariant(componentOrElement.render==null||typeof componentOrElement.render!=="function");"production"!==process.env.NODE_ENV?invariant(false,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(componentOrElement)):invariant(false)}module.exports=findDOMNode}).call(this,require("_process"))},{"./ReactCurrentOwner":462,"./ReactInstanceMap":490,"./ReactMount":494,"./invariant":568,"./isNode":570,"./warning":589,_process:35}],551:[function(require,module,exports){(function(process){"use strict";var traverseAllChildren=require("./traverseAllChildren");var warning=require("./warning");function flattenSingleChildIntoContext(traverseContext,child,name){var result=traverseContext;var keyUnique=!result.hasOwnProperty(name);if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(keyUnique,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.",name):null}if(keyUnique&&child!=null){result[name]=child}}function flattenChildren(children){if(children==null){return children}var result={};traverseAllChildren(children,flattenSingleChildIntoContext,result);return result}module.exports=flattenChildren}).call(this,require("_process"))},{"./traverseAllChildren":587,"./warning":589,_process:35}],552:[function(require,module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},{}],553:[function(require,module,exports){"use strict";var forEachAccumulated=function(arr,cb,scope){if(Array.isArray(arr)){arr.forEach(cb,scope)}else if(arr){cb.call(scope,arr)}};module.exports=forEachAccumulated},{}],554:[function(require,module,exports){function getActiveElement(){try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement},{}],555:[function(require,module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode;var keyCode=nativeEvent.keyCode;if("charCode"in nativeEvent){charCode=nativeEvent.charCode;if(charCode===0&&keyCode===13){charCode=13}}else{charCode=keyCode}if(charCode>=32||charCode===13){return charCode}return 0}module.exports=getEventCharCode},{}],556:[function(require,module,exports){"use strict";var getEventCharCode=require("./getEventCharCode");var normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};var translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key!=="Unidentified"){return key}}if(nativeEvent.type==="keypress"){var charCode=getEventCharCode(nativeEvent);return charCode===13?"Enter":String.fromCharCode(charCode)}if(nativeEvent.type==="keydown"||nativeEvent.type==="keyup"){return translateToKey[nativeEvent.keyCode]||"Unidentified"}return""}module.exports=getEventKey},{"./getEventCharCode":555}],557:[function(require,module,exports){"use strict";var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(keyArg){var syntheticEvent=this;var nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState){return nativeEvent.getModifierState(keyArg)}var keyProp=modifierKeyToProp[keyArg];return keyProp?!!nativeEvent[keyProp]:false}function getEventModifierState(nativeEvent){return modifierStateGetter}module.exports=getEventModifierState},{}],558:[function(require,module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;return target.nodeType===3?target.parentNode:target}module.exports=getEventTarget},{}],559:[function(require,module,exports){"use strict";var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}module.exports=getIteratorFn},{}],560:[function(require,module,exports){(function(process){var ExecutionEnvironment=require("./ExecutionEnvironment");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var shouldWrap={circle:true,clipPath:true,defs:true,ellipse:true,g:true,line:true,linearGradient:true,path:true,polygon:true,polyline:true,radialGradient:true,rect:true,stop:true,text:true};var selectWrap=[1,'<select multiple="true">',"</select>"];var tableWrap=[1,"<table>","</table>"];var trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"];var svgWrap=[1,"<svg>","</svg>"];var markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap,circle:svgWrap,clipPath:svgWrap,defs:svgWrap,ellipse:svgWrap,g:svgWrap,line:svgWrap,linearGradient:svgWrap,path:svgWrap,polygon:svgWrap,polyline:svgWrap,radialGradient:svgWrap,rect:svgWrap,stop:svgWrap,text:svgWrap};function getMarkupWrap(nodeName){"production"!==process.env.NODE_ENV?invariant(!!dummyNode,"Markup wrapping node not initialized"):invariant(!!dummyNode);if(!markupWrap.hasOwnProperty(nodeName)){nodeName="*"}if(!shouldWrap.hasOwnProperty(nodeName)){if(nodeName==="*"){dummyNode.innerHTML="<link />"}else{dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">"}shouldWrap[nodeName]=!dummyNode.firstChild}return shouldWrap[nodeName]?markupWrap[nodeName]:null}module.exports=getMarkupWrap}).call(this,require("_process"))},{"./ExecutionEnvironment":439,"./invariant":568,_process:35}],561:[function(require,module,exports){"use strict";function getLeafNode(node){while(node&&node.firstChild){node=node.firstChild}return node}function getSiblingNode(node){while(node){if(node.nextSibling){return node.nextSibling}node=node.parentNode}}function getNodeForCharacterOffset(root,offset){var node=getLeafNode(root);var nodeStart=0;var nodeEnd=0;while(node){if(node.nodeType===3){nodeEnd=nodeStart+node.textContent.length;if(nodeStart<=offset&&nodeEnd>=offset){return{node:node,offset:offset-nodeStart}}nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},{}],562:[function(require,module,exports){"use strict";var DOC_NODE_TYPE=9;function getReactRootElementInContainer(container){if(!container){return null}if(container.nodeType===DOC_NODE_TYPE){return container.documentElement}else{return container.firstChild}}module.exports=getReactRootElementInContainer},{}],563:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var contentKey=null;function getTextContentAccessor(){if(!contentKey&&ExecutionEnvironment.canUseDOM){contentKey="textContent"in document.documentElement?"textContent":"innerText"}return contentKey}module.exports=getTextContentAccessor},{"./ExecutionEnvironment":439}],564:[function(require,module,exports){"use strict";function getUnboundedScrollPosition(scrollable){if(scrollable===window){return{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}return{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},{}],565:[function(require,module,exports){var _uppercasePattern=/([A-Z])/g;function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}module.exports=hyphenate},{}],566:[function(require,module,exports){"use strict";var hyphenate=require("./hyphenate");var msPattern=/^ms-/;function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}module.exports=hyphenateStyleName},{"./hyphenate":565}],567:[function(require,module,exports){(function(process){"use strict";var ReactCompositeComponent=require("./ReactCompositeComponent");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactNativeComponent=require("./ReactNativeComponent");var assign=require("./Object.assign");var invariant=require("./invariant");var warning=require("./warning");var ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent});function isInternalComponentType(type){return typeof type==="function"&&typeof type.prototype!=="undefined"&&typeof type.prototype.mountComponent==="function"&&typeof type.prototype.receiveComponent==="function"}function instantiateReactComponent(node,parentCompositeType){var instance;if(node===null||node===false){node=ReactEmptyComponent.emptyElement}if(typeof node==="object"){var element=node;if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(element&&(typeof element.type==="function"||typeof element.type==="string"),"Only functions or strings can be mounted as React components."):null;

}if(parentCompositeType===element.type&&typeof element.type==="string"){instance=ReactNativeComponent.createInternalComponent(element)}else if(isInternalComponentType(element.type)){instance=new element.type(element)}else{instance=new ReactCompositeComponentWrapper}}else if(typeof node==="string"||typeof node==="number"){instance=ReactNativeComponent.createInstanceForText(node)}else{"production"!==process.env.NODE_ENV?invariant(false,"Encountered invalid React node of type %s",typeof node):invariant(false)}if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(typeof instance.construct==="function"&&typeof instance.mountComponent==="function"&&typeof instance.receiveComponent==="function"&&typeof instance.unmountComponent==="function","Only React Components can be mounted."):null}instance.construct(node);instance._mountIndex=0;instance._mountImage=null;if("production"!==process.env.NODE_ENV){instance._isOwnerNecessary=false;instance._warnedAboutRefsInRender=false}if("production"!==process.env.NODE_ENV){if(Object.preventExtensions){Object.preventExtensions(instance)}}return instance}module.exports=instantiateReactComponent}).call(this,require("_process"))},{"./Object.assign":446,"./ReactCompositeComponent":460,"./ReactEmptyComponent":482,"./ReactNativeComponent":497,"./invariant":568,"./warning":589,_process:35}],568:[function(require,module,exports){(function(process){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if("production"!==process.env.NODE_ENV){if(format===undefined){throw new Error("invariant requires an error message argument")}}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}error.framesToPop=1;throw error}};module.exports=invariant}).call(this,require("_process"))},{_process:35}],569:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var useHasFeature;if(ExecutionEnvironment.canUseDOM){useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true}function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document)){return false}var eventName="on"+eventNameSuffix;var isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;");isSupported=typeof element[eventName]==="function"}if(!isSupported&&useHasFeature&&eventNameSuffix==="wheel"){isSupported=document.implementation.hasFeature("Events.wheel","3.0")}return isSupported}module.exports=isEventSupported},{"./ExecutionEnvironment":439}],570:[function(require,module,exports){function isNode(object){return!!(object&&(typeof Node==="function"?object instanceof Node:typeof object==="object"&&typeof object.nodeType==="number"&&typeof object.nodeName==="string"))}module.exports=isNode},{}],571:[function(require,module,exports){"use strict";var supportedInputTypes={color:true,date:true,datetime:true,"datetime-local":true,email:true,month:true,number:true,password:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true};function isTextInputElement(elem){return elem&&(elem.nodeName==="INPUT"&&supportedInputTypes[elem.type]||elem.nodeName==="TEXTAREA")}module.exports=isTextInputElement},{}],572:[function(require,module,exports){var isNode=require("./isNode");function isTextNode(object){return isNode(object)&&object.nodeType==3}module.exports=isTextNode},{"./isNode":570}],573:[function(require,module,exports){"use strict";function joinClasses(className){if(!className){className=""}var nextClass;var argLength=arguments.length;if(argLength>1){for(var ii=1;ii<argLength;ii++){nextClass=arguments[ii];if(nextClass){className=(className?className+" ":"")+nextClass}}}return className}module.exports=joinClasses},{}],574:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");var keyMirror=function(obj){var ret={};var key;"production"!==process.env.NODE_ENV?invariant(obj instanceof Object&&!Array.isArray(obj),"keyMirror(...): Argument must be an object."):invariant(obj instanceof Object&&!Array.isArray(obj));for(key in obj){if(!obj.hasOwnProperty(key)){continue}ret[key]=key}return ret};module.exports=keyMirror}).call(this,require("_process"))},{"./invariant":568,_process:35}],575:[function(require,module,exports){var keyOf=function(oneKeyObj){var key;for(key in oneKeyObj){if(!oneKeyObj.hasOwnProperty(key)){continue}return key}return null};module.exports=keyOf},{}],576:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function mapObject(object,callback,context){if(!object){return null}var result={};for(var name in object){if(hasOwnProperty.call(object,name)){result[name]=callback.call(context,object[name],name,object)}}return result}module.exports=mapObject},{}],577:[function(require,module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){if(!cache.hasOwnProperty(string)){cache[string]=callback.call(this,string)}return cache[string]}}module.exports=memoizeStringOnly},{}],578:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var invariant=require("./invariant");function onlyChild(children){"production"!==process.env.NODE_ENV?invariant(ReactElement.isValidElement(children),"onlyChild must be passed a children with exactly one child."):invariant(ReactElement.isValidElement(children));return children}module.exports=onlyChild}).call(this,require("_process"))},{"./ReactElement":480,"./invariant":568,_process:35}],579:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var performance;if(ExecutionEnvironment.canUseDOM){performance=window.performance||window.msPerformance||window.webkitPerformance}module.exports=performance||{}},{"./ExecutionEnvironment":439}],580:[function(require,module,exports){var performance=require("./performance");if(!performance||!performance.now){performance=Date}var performanceNow=performance.now.bind(performance);module.exports=performanceNow},{"./performance":579}],581:[function(require,module,exports){"use strict";var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}module.exports=quoteAttributeValueForBrowser},{"./escapeTextContentForBrowser":549}],582:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var WHITESPACE_TEST=/^[ \r\n\t\f]/;var NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/;var setInnerHTML=function(node,html){node.innerHTML=html};if(typeof MSApp!=="undefined"&&MSApp.execUnsafeLocalFunction){setInnerHTML=function(node,html){MSApp.execUnsafeLocalFunction(function(){node.innerHTML=html})}}if(ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ";if(testElement.innerHTML===""){setInnerHTML=function(node,html){if(node.parentNode){node.parentNode.replaceChild(node,node)}if(WHITESPACE_TEST.test(html)||html[0]==="<"&&NONVISIBLE_TEST.test(html)){node.innerHTML="\ufeff"+html;var textNode=node.firstChild;if(textNode.data.length===1){node.removeChild(textNode)}else{textNode.deleteData(0,1)}}else{node.innerHTML=html}}}}module.exports=setInnerHTML},{"./ExecutionEnvironment":439}],583:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var setInnerHTML=require("./setInnerHTML");var setTextContent=function(node,text){node.textContent=text};if(ExecutionEnvironment.canUseDOM){if(!("textContent"in document.documentElement)){setTextContent=function(node,text){setInnerHTML(node,escapeTextContentForBrowser(text))}}}module.exports=setTextContent},{"./ExecutionEnvironment":439,"./escapeTextContentForBrowser":549,"./setInnerHTML":582}],584:[function(require,module,exports){"use strict";function shallowEqual(objA,objB){if(objA===objB){return true}var key;for(key in objA){if(objA.hasOwnProperty(key)&&(!objB.hasOwnProperty(key)||objA[key]!==objB[key])){return false}}for(key in objB){if(objB.hasOwnProperty(key)&&!objA.hasOwnProperty(key)){return false}}return true}module.exports=shallowEqual},{}],585:[function(require,module,exports){(function(process){"use strict";var warning=require("./warning");function shouldUpdateReactComponent(prevElement,nextElement){if(prevElement!=null&&nextElement!=null){var prevType=typeof prevElement;var nextType=typeof nextElement;if(prevType==="string"||prevType==="number"){return nextType==="string"||nextType==="number"}else{if(nextType==="object"&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key){var ownersMatch=prevElement._owner===nextElement._owner;var prevName=null;var nextName=null;var nextDisplayName=null;if("production"!==process.env.NODE_ENV){if(!ownersMatch){if(prevElement._owner!=null&&prevElement._owner.getPublicInstance()!=null&&prevElement._owner.getPublicInstance().constructor!=null){prevName=prevElement._owner.getPublicInstance().constructor.displayName}if(nextElement._owner!=null&&nextElement._owner.getPublicInstance()!=null&&nextElement._owner.getPublicInstance().constructor!=null){nextName=nextElement._owner.getPublicInstance().constructor.displayName}if(nextElement.type!=null&&nextElement.type.displayName!=null){nextDisplayName=nextElement.type.displayName}if(nextElement.type!=null&&typeof nextElement.type==="string"){nextDisplayName=nextElement.type}if(typeof nextElement.type!=="string"||nextElement.type==="input"||nextElement.type==="textarea"){if(prevElement._owner!=null&&prevElement._owner._isOwnerNecessary===false||nextElement._owner!=null&&nextElement._owner._isOwnerNecessary===false){if(prevElement._owner!=null){prevElement._owner._isOwnerNecessary=true}if(nextElement._owner!=null){nextElement._owner._isOwnerNecessary=true}"production"!==process.env.NODE_ENV?warning(false,"<%s /> is being rendered by both %s and %s using the same "+"key (%s) in the same place. Currently, this means that "+"they don't preserve state. This behavior should be very "+"rare so we're considering deprecating it. Please contact "+"the React team and explain your use case so that we can "+"take that into consideration.",nextDisplayName||"Unknown Component",prevName||"[Unknown]",nextName||"[Unknown]",prevElement.key):null}}}}return ownersMatch}}}return false}module.exports=shouldUpdateReactComponent}).call(this,require("_process"))},{"./warning":589,_process:35}],586:[function(require,module,exports){(function(process){var invariant=require("./invariant");function toArray(obj){var length=obj.length;"production"!==process.env.NODE_ENV?invariant(!Array.isArray(obj)&&(typeof obj==="object"||typeof obj==="function"),"toArray: Array-like object expected"):invariant(!Array.isArray(obj)&&(typeof obj==="object"||typeof obj==="function"));"production"!==process.env.NODE_ENV?invariant(typeof length==="number","toArray: Object needs a length property"):invariant(typeof length==="number");"production"!==process.env.NODE_ENV?invariant(length===0||length-1 in obj,"toArray: Object should have keys for indices"):invariant(length===0||length-1 in obj);if(obj.hasOwnProperty){try{return Array.prototype.slice.call(obj)}catch(e){}}var ret=Array(length);for(var ii=0;ii<length;ii++){ret[ii]=obj[ii]}return ret}module.exports=toArray}).call(this,require("_process"))},{"./invariant":568,_process:35}],587:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var ReactFragment=require("./ReactFragment");var ReactInstanceHandles=require("./ReactInstanceHandles");var getIteratorFn=require("./getIteratorFn");var invariant=require("./invariant");var warning=require("./warning");var SEPARATOR=ReactInstanceHandles.SEPARATOR;var SUBSEPARATOR=":";var userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"};var userProvidedKeyEscapeRegex=/[=.:]/g;var didWarnAboutMaps=false;function userProvidedKeyEscaper(match){return userProvidedKeyEscaperLookup[match]}function getComponentKey(component,index){if(component&&component.key!=null){return wrapUserProvidedKey(component.key)}return index.toString(36)}function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(key){return"$"+escapeUserProvidedKey(key)}function traverseAllChildrenImpl(children,nameSoFar,indexSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||ReactElement.isValidElement(children)){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar,indexSoFar);return 1}var child,nextName,nextIndex;var subtreeCount=0;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=(nameSoFar!==""?nameSoFar+SUBSEPARATOR:SEPARATOR)+getComponentKey(child,i);nextIndex=indexSoFar+subtreeCount;subtreeCount+=traverseAllChildrenImpl(child,nextName,nextIndex,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=(nameSoFar!==""?nameSoFar+SUBSEPARATOR:SEPARATOR)+getComponentKey(child,ii++);nextIndex=indexSoFar+subtreeCount;subtreeCount+=traverseAllChildrenImpl(child,nextName,nextIndex,callback,traverseContext)}}else{if("production"!==process.env.NODE_ENV){"production"!==process.env.NODE_ENV?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead."):null;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=(nameSoFar!==""?nameSoFar+SUBSEPARATOR:SEPARATOR)+wrapUserProvidedKey(entry[0])+SUBSEPARATOR+getComponentKey(child,0);nextIndex=indexSoFar+subtreeCount;subtreeCount+=traverseAllChildrenImpl(child,nextName,nextIndex,callback,traverseContext)}}}}else if(type==="object"){"production"!==process.env.NODE_ENV?invariant(children.nodeType!==1,"traverseAllChildren(...): Encountered an invalid child; DOM "+"elements are not valid children of React components."):invariant(children.nodeType!==1);var fragment=ReactFragment.extract(children);for(var key in fragment){if(fragment.hasOwnProperty(key)){child=fragment[key];nextName=(nameSoFar!==""?nameSoFar+SUBSEPARATOR:SEPARATOR)+wrapUserProvidedKey(key)+SUBSEPARATOR+getComponentKey(child,0);nextIndex=indexSoFar+subtreeCount;subtreeCount+=traverseAllChildrenImpl(child,nextName,nextIndex,callback,traverseContext)}}}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",0,callback,traverseContext)}module.exports=traverseAllChildren}).call(this,require("_process"))},{"./ReactElement":480,"./ReactFragment":486,"./ReactInstanceHandles":489,"./getIteratorFn":559,"./invariant":568,"./warning":589,_process:35}],588:[function(require,module,exports){(function(process){"use strict";var assign=require("./Object.assign");var keyOf=require("./keyOf");var invariant=require("./invariant");var hasOwnProperty={}.hasOwnProperty;function shallowCopy(x){if(Array.isArray(x)){return x.concat()}else if(x&&typeof x==="object"){return assign(new x.constructor,x)}else{return x}}var COMMAND_PUSH=keyOf({$push:null});var COMMAND_UNSHIFT=keyOf({$unshift:null});var COMMAND_SPLICE=keyOf({$splice:null});var COMMAND_SET=keyOf({$set:null});var COMMAND_MERGE=keyOf({$merge:null});var COMMAND_APPLY=keyOf({$apply:null});var ALL_COMMANDS_LIST=[COMMAND_PUSH,COMMAND_UNSHIFT,COMMAND_SPLICE,COMMAND_SET,COMMAND_MERGE,COMMAND_APPLY];var ALL_COMMANDS_SET={};ALL_COMMANDS_LIST.forEach(function(command){ALL_COMMANDS_SET[command]=true});function invariantArrayCase(value,spec,command){"production"!==process.env.NODE_ENV?invariant(Array.isArray(value),"update(): expected target of %s to be an array; got %s.",command,value):invariant(Array.isArray(value));var specValue=spec[command];"production"!==process.env.NODE_ENV?invariant(Array.isArray(specValue),"update(): expected spec of %s to be an array; got %s. "+"Did you forget to wrap your parameter in an array?",command,specValue):invariant(Array.isArray(specValue))}function update(value,spec){"production"!==process.env.NODE_ENV?invariant(typeof spec==="object","update(): You provided a key path to update() that did not contain one "+"of %s. Did you forget to include {%s: ...}?",ALL_COMMANDS_LIST.join(", "),COMMAND_SET):invariant(typeof spec==="object");if(hasOwnProperty.call(spec,COMMAND_SET)){"production"!==process.env.NODE_ENV?invariant(Object.keys(spec).length===1,"Cannot have more than one key in an object with %s",COMMAND_SET):invariant(Object.keys(spec).length===1);return spec[COMMAND_SET]}var nextValue=shallowCopy(value);if(hasOwnProperty.call(spec,COMMAND_MERGE)){var mergeObj=spec[COMMAND_MERGE];"production"!==process.env.NODE_ENV?invariant(mergeObj&&typeof mergeObj==="object","update(): %s expects a spec of type 'object'; got %s",COMMAND_MERGE,mergeObj):invariant(mergeObj&&typeof mergeObj==="object");"production"!==process.env.NODE_ENV?invariant(nextValue&&typeof nextValue==="object","update(): %s expects a target of type 'object'; got %s",COMMAND_MERGE,nextValue):invariant(nextValue&&typeof nextValue==="object");assign(nextValue,spec[COMMAND_MERGE])}if(hasOwnProperty.call(spec,COMMAND_PUSH)){invariantArrayCase(value,spec,COMMAND_PUSH);spec[COMMAND_PUSH].forEach(function(item){nextValue.push(item)})}if(hasOwnProperty.call(spec,COMMAND_UNSHIFT)){invariantArrayCase(value,spec,COMMAND_UNSHIFT);spec[COMMAND_UNSHIFT].forEach(function(item){nextValue.unshift(item)})}if(hasOwnProperty.call(spec,COMMAND_SPLICE)){"production"!==process.env.NODE_ENV?invariant(Array.isArray(value),"Expected %s target to be an array; got %s",COMMAND_SPLICE,value):invariant(Array.isArray(value));"production"!==process.env.NODE_ENV?invariant(Array.isArray(spec[COMMAND_SPLICE]),"update(): expected spec of %s to be an array of arrays; got %s. "+"Did you forget to wrap your parameters in an array?",COMMAND_SPLICE,spec[COMMAND_SPLICE]):invariant(Array.isArray(spec[COMMAND_SPLICE]));spec[COMMAND_SPLICE].forEach(function(args){"production"!==process.env.NODE_ENV?invariant(Array.isArray(args),"update(): expected spec of %s to be an array of arrays; got %s. "+"Did you forget to wrap your parameters in an array?",COMMAND_SPLICE,spec[COMMAND_SPLICE]):invariant(Array.isArray(args));nextValue.splice.apply(nextValue,args)})}if(hasOwnProperty.call(spec,COMMAND_APPLY)){"production"!==process.env.NODE_ENV?invariant(typeof spec[COMMAND_APPLY]==="function","update(): expected spec of %s to be a function; got %s.",COMMAND_APPLY,spec[COMMAND_APPLY]):invariant(typeof spec[COMMAND_APPLY]==="function");nextValue=spec[COMMAND_APPLY](nextValue)}for(var k in spec){if(!(ALL_COMMANDS_SET.hasOwnProperty(k)&&ALL_COMMANDS_SET[k])){nextValue[k]=update(value[k],spec[k])}}return nextValue}module.exports=update}).call(this,require("_process"))},{"./Object.assign":446,"./invariant":568,"./keyOf":575,_process:35}],589:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if("production"!==process.env.NODE_ENV){warning=function(condition,format){for(var args=[],$__0=2,$__1=arguments.length;$__0<$__1;$__0++)args.push(arguments[$__0]);if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.length<10||/^[s\W]*$/.test(format)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+format)}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});console.warn(message);try{throw new Error(message)}catch(x){}}}}module.exports=warning}).call(this,require("_process"))},{"./emptyFunction":547,_process:35}],590:[function(require,module,exports){module.exports=require("./lib/React")},{"./lib/React":448}]},{},[1]);